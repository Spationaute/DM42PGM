ARM GAS  /tmp/ccGYckNR.s 			page 1


   1              		.arch armv7e-m
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 2
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"dm42_fns.cc"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.dm42_set_beep_mute,"ax",%progbits
  18              		.align	1
  19              		.p2align 2,,3
  20              		.global	dm42_set_beep_mute
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	dm42_set_beep_mute:
  27              	.LFB275:
  28              		.file 1 "dm/dm42_fns.cc"
   1:dm/dm42_fns.cc **** /*
   2:dm/dm42_fns.cc **** 
   3:dm/dm42_fns.cc **** BSD 3-Clause License
   4:dm/dm42_fns.cc **** 
   5:dm/dm42_fns.cc **** Copyright (c) 2018, SwissMicros
   6:dm/dm42_fns.cc **** All rights reserved.
   7:dm/dm42_fns.cc **** 
   8:dm/dm42_fns.cc **** Redistribution and use in source and binary forms, with or without
   9:dm/dm42_fns.cc **** modification, are permitted provided that the following conditions are met:
  10:dm/dm42_fns.cc **** 
  11:dm/dm42_fns.cc **** * Redistributions of source code must retain the above copyright notice, this
  12:dm/dm42_fns.cc ****   list of conditions and the following disclaimer.
  13:dm/dm42_fns.cc **** 
  14:dm/dm42_fns.cc **** * Redistributions in binary form must reproduce the above copyright notice,
  15:dm/dm42_fns.cc ****   this list of conditions and the following disclaimer in the documentation
  16:dm/dm42_fns.cc ****   and/or other materials provided with the distribution.
  17:dm/dm42_fns.cc **** 
  18:dm/dm42_fns.cc **** * Neither the name of the copyright holder nor the names of its
  19:dm/dm42_fns.cc ****   contributors may be used to endorse or promote products derived from
  20:dm/dm42_fns.cc ****   this software without specific prior written permission.
  21:dm/dm42_fns.cc **** 
  22:dm/dm42_fns.cc **** THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  23:dm/dm42_fns.cc **** AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  24:dm/dm42_fns.cc **** IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  25:dm/dm42_fns.cc **** DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
  26:dm/dm42_fns.cc **** FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  27:dm/dm42_fns.cc **** DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  28:dm/dm42_fns.cc **** SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
  29:dm/dm42_fns.cc **** CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
  30:dm/dm42_fns.cc **** OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
ARM GAS  /tmp/ccGYckNR.s 			page 2


  31:dm/dm42_fns.cc **** OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  32:dm/dm42_fns.cc **** 
  33:dm/dm42_fns.cc **** 
  34:dm/dm42_fns.cc ****   The software and related material is released as “NOMAS”  (NOt MAnufacturer Supported). 
  35:dm/dm42_fns.cc **** 
  36:dm/dm42_fns.cc ****   1. Info is released to assist customers using, exploring and extending the product
  37:dm/dm42_fns.cc ****   2. Do NOT contact the manufacturer with questions, seeking support, etc. regarding
  38:dm/dm42_fns.cc ****      NOMAS material as no support is implied or committed-to by the Manufacturer
  39:dm/dm42_fns.cc ****   3. The Manufacturer may reply and/or update materials if and when needed solely
  40:dm/dm42_fns.cc ****      at their discretion
  41:dm/dm42_fns.cc **** 
  42:dm/dm42_fns.cc **** */
  43:dm/dm42_fns.cc **** 
  44:dm/dm42_fns.cc **** #include <stdio.h>
  45:dm/dm42_fns.cc **** #include <stdlib.h>
  46:dm/dm42_fns.cc **** #include <ctype.h>
  47:dm/dm42_fns.cc **** #include <string.h>
  48:dm/dm42_fns.cc **** #include <math.h>
  49:dm/dm42_fns.cc **** 
  50:dm/dm42_fns.cc **** #include "core_main.h"
  51:dm/dm42_fns.cc **** #include "core_aux.h"
  52:dm/dm42_fns.cc **** 
  53:dm/dm42_fns.cc **** 
  54:dm/dm42_fns.cc **** //#define OLD_PRINTER_CHAR_MASKING
  55:dm/dm42_fns.cc **** 
  56:dm/dm42_fns.cc **** #ifdef OLD_PRINTER_CHAR_MASKING
  57:dm/dm42_fns.cc **** 
  58:dm/dm42_fns.cc **** const unsigned char hp2printer_table[] = {
  59:dm/dm42_fns.cc ****   129, // 00 - ÷                division sign (U+00F7)
  60:dm/dm42_fns.cc ****   130, // 01 - ×                multiplication sign (U+00D7)
  61:dm/dm42_fns.cc ****   131, // 02 - √                square root (U+221A)
  62:dm/dm42_fns.cc ****   132, // 03 - ∫                integral (U+222B)
  63:dm/dm42_fns.cc ****   127, // 04 - ▒        medium shade (U+2592)
  64:dm/dm42_fns.cc ****   133, // 05 - Σ                greek capital letter sigma (U+03A3)
  65:dm/dm42_fns.cc ****   134, // 06 - ▶                black right-pointing triangle (U+25B6)
  66:dm/dm42_fns.cc ****   135, // 07 - π                greek small letter pi (U+03C0)
  67:dm/dm42_fns.cc ****   185, // 08 - ¿                inverted question mark (U+00BF)
  68:dm/dm42_fns.cc ****   137, // 09 - ≤                less-than or equal to (U+2264)
  69:dm/dm42_fns.cc ****   144, // 0a - LF       symbol for line feed (U+240A)
  70:dm/dm42_fns.cc ****   138, // 0b - ≥                greater-than or equal to (U+2265)
  71:dm/dm42_fns.cc ****   139, // 0c - ≠                not equal to (U+2260)
  72:dm/dm42_fns.cc ****   244, // 0d - ↲ CR subst. by ¶ downwards arrow with tip leftwards (U+21B2)
  73:dm/dm42_fns.cc ****   'v', // 0e - ↓                downwards arrow (U+2193)
  74:dm/dm42_fns.cc ****   141, // 0f - →                rightwards arrow (U+2192)
  75:dm/dm42_fns.cc ****   142, // 10 - ←                leftwards arrow (U+2190)
  76:dm/dm42_fns.cc ****   143, // 11 - μ                greek small letter mu (U+03BC)
  77:dm/dm42_fns.cc ****   175, // 12 - £                pound sign (U+00A3)
  78:dm/dm42_fns.cc ****   145, // 13 - °                degree sign (U+00B0)
  79:dm/dm42_fns.cc ****   208, // 14 - Å                latin capital letter a with ring above (U+00C5)
  80:dm/dm42_fns.cc ****   182, // 15 - Ñ                latin capital letter n with tilde (U+00D1)
  81:dm/dm42_fns.cc ****   216, // 16 - Ä                latin capital letter a with diaeresis (U+00C4)
  82:dm/dm42_fns.cc ****   160, // 17 - ∡                measured angle (U+2221)
  83:dm/dm42_fns.cc ****   'E', // 18 - ᴇ   subst. by E  latin letter small capital e (U+1D07)
  84:dm/dm42_fns.cc ****   211, // 19 - Æ                latin capital letter ae (U+00C6)
  85:dm/dm42_fns.cc ****   155, // 1a - …   subst by ..  horizontal ellipsis (U+2026)
  86:dm/dm42_fns.cc ****   163, //1b-ESC s.by È   symbol for escape (U+241B)
  87:dm/dm42_fns.cc ****   218, // 1c - Ö                latin capital letter o with diaeresis (U+00D6)
ARM GAS  /tmp/ccGYckNR.s 			page 3


  88:dm/dm42_fns.cc ****   219, // 1d - Ü                latin capital letter u with diaeresis (U+00DC)
  89:dm/dm42_fns.cc ****   127, // 1e - ▒                medium shade (U+2592)
  90:dm/dm42_fns.cc ****   242, // 1f - ■                black square (U+25A0)
  91:dm/dm42_fns.cc ****   148, // 7f - ├                box drawings light vertical and right (U+251C)
  92:dm/dm42_fns.cc ****   ':', // 80 - ﹕   subst. by :
  93:dm/dm42_fns.cc ****   'Y'  // 81 - ʏ   subst. by Y
  94:dm/dm42_fns.cc **** };
  95:dm/dm42_fns.cc **** 
  96:dm/dm42_fns.cc **** #else
  97:dm/dm42_fns.cc **** 
  98:dm/dm42_fns.cc **** const unsigned char hp2printer_table[] = {
  99:dm/dm42_fns.cc ****   129, // 00 - ÷                division sign (U+00F7)
 100:dm/dm42_fns.cc ****   130, // 01 - ×                multiplication sign (U+00D7)
 101:dm/dm42_fns.cc ****   131, // 02 - √                square root (U+221A)
 102:dm/dm42_fns.cc ****   132, // 03 - ∫                integral (U+222B)
 103:dm/dm42_fns.cc ****   0x4, // 127, // 04 - ▒        medium shade (U+2592)
 104:dm/dm42_fns.cc ****   133, // 05 - Σ                greek capital letter sigma (U+03A3)
 105:dm/dm42_fns.cc ****   134, // 06 - ▶                black right-pointing triangle (U+25B6)
 106:dm/dm42_fns.cc ****   135, // 07 - π                greek small letter pi (U+03C0)
 107:dm/dm42_fns.cc ****   185, // 08 - ¿                inverted question mark (U+00BF)
 108:dm/dm42_fns.cc ****   137, // 09 - ≤                less-than or equal to (U+2264)
 109:dm/dm42_fns.cc ****   0xa, // 144, // 0a - LF       symbol for line feed (U+240A)
 110:dm/dm42_fns.cc ****   138, // 0b - ≥                greater-than or equal to (U+2265)
 111:dm/dm42_fns.cc ****   139, // 0c - ≠                not equal to (U+2260)
 112:dm/dm42_fns.cc ****   244, // 0d - ↲ CR subst. by ¶ downwards arrow with tip leftwards (U+21B2)
 113:dm/dm42_fns.cc ****   'v', // 0e - ↓                downwards arrow (U+2193)
 114:dm/dm42_fns.cc ****   141, // 0f - →                rightwards arrow (U+2192)
 115:dm/dm42_fns.cc ****   142, // 10 - ←                leftwards arrow (U+2190)
 116:dm/dm42_fns.cc ****   143, // 11 - μ                greek small letter mu (U+03BC)
 117:dm/dm42_fns.cc ****   175, // 12 - £                pound sign (U+00A3)
 118:dm/dm42_fns.cc ****   145, // 13 - °                degree sign (U+00B0)
 119:dm/dm42_fns.cc ****   208, // 14 - Å                latin capital letter a with ring above (U+00C5)
 120:dm/dm42_fns.cc ****   182, // 15 - Ñ                latin capital letter n with tilde (U+00D1)
 121:dm/dm42_fns.cc ****   216, // 16 - Ä                latin capital letter a with diaeresis (U+00C4)
 122:dm/dm42_fns.cc ****   160, // 17 - ∡                measured angle (U+2221)
 123:dm/dm42_fns.cc ****   'E', // 18 - ᴇ   subst. by E  latin letter small capital e (U+1D07)
 124:dm/dm42_fns.cc ****   211, // 19 - Æ                latin capital letter ae (U+00C6)
 125:dm/dm42_fns.cc ****   155, // 1a - …   subst by ..  horizontal ellipsis (U+2026)
 126:dm/dm42_fns.cc ****  0x1b, //163, //1b-ESC s.by È   symbol for escape (U+241B)
 127:dm/dm42_fns.cc ****   218, // 1c - Ö                latin capital letter o with diaeresis (U+00D6)
 128:dm/dm42_fns.cc ****   219, // 1d - Ü                latin capital letter u with diaeresis (U+00DC)
 129:dm/dm42_fns.cc ****   127, // 1e - ▒                medium shade (U+2592)
 130:dm/dm42_fns.cc ****   242, // 1f - ■                black square (U+25A0)
 131:dm/dm42_fns.cc ****   148, // 7f - ├                box drawings light vertical and right (U+251C)
 132:dm/dm42_fns.cc ****   ':', // 80 - ﹕   subst. by :
 133:dm/dm42_fns.cc ****   'Y'  // 81 - ʏ   subst. by Y
 134:dm/dm42_fns.cc **** };
 135:dm/dm42_fns.cc **** #endif
 136:dm/dm42_fns.cc **** 
 137:dm/dm42_fns.cc **** 
 138:dm/dm42_fns.cc **** int hp2print(char *dst, const char *src, int srclen) {
 139:dm/dm42_fns.cc ****   unsigned char c;
 140:dm/dm42_fns.cc **** 
 141:dm/dm42_fns.cc ****   for (int s = 0; s < srclen; s++) {
 142:dm/dm42_fns.cc ****     c = src[s];
 143:dm/dm42_fns.cc **** #ifdef OLD_PRINTER_CHAR_MASKING
 144:dm/dm42_fns.cc ****     // Characters in command names could have 7th bit set -> mask everything outside 0-0x81 range
ARM GAS  /tmp/ccGYckNR.s 			page 4


 145:dm/dm42_fns.cc ****     if (c > 0x81) c &= 0x7f;
 146:dm/dm42_fns.cc **** 
 147:dm/dm42_fns.cc ****     // Special characters are 00-1F,7f-81
 148:dm/dm42_fns.cc ****     if (c < ' ' || c >= 0x7f ) {
 149:dm/dm42_fns.cc ****       if ( c >= 0x7f ) c -= 0x7f - ' '; // Map chars 0x7f-0x81 to 0x20-0x22
 150:dm/dm42_fns.cc ****       c = hp2printer_table[c]; // Translate to printer chars
 151:dm/dm42_fns.cc ****     }
 152:dm/dm42_fns.cc **** #else
 153:dm/dm42_fns.cc ****     
 154:dm/dm42_fns.cc ****     if (c == 0x7f) c = 148; // 7f to |-
 155:dm/dm42_fns.cc ****     if (c == 0x8a) c = 144; // 8a to LF
 156:dm/dm42_fns.cc ****     // Special characters are 00-1F
 157:dm/dm42_fns.cc ****     if (c < ' ')
 158:dm/dm42_fns.cc ****       c = hp2printer_table[c]; // Translate to printer chars
 159:dm/dm42_fns.cc **** 
 160:dm/dm42_fns.cc **** #endif
 161:dm/dm42_fns.cc **** 
 162:dm/dm42_fns.cc ****     *dst++ = c;
 163:dm/dm42_fns.cc ****   }
 164:dm/dm42_fns.cc ****   return srclen;
 165:dm/dm42_fns.cc **** }
 166:dm/dm42_fns.cc **** 
 167:dm/dm42_fns.cc **** 
 168:dm/dm42_fns.cc **** // Required by core_list_programs()
 169:dm/dm42_fns.cc **** int hp2ascii(char *dst, const char *src, int srclen) {
 170:dm/dm42_fns.cc ****   const char *esc;
 171:dm/dm42_fns.cc ****   unsigned char c;
 172:dm/dm42_fns.cc ****   int s, d = 0;
 173:dm/dm42_fns.cc ****   for (s = 0; s < srclen; s++) {
 174:dm/dm42_fns.cc ****     c = src[s];
 175:dm/dm42_fns.cc ****     if (c >= 130 && c != 138)
 176:dm/dm42_fns.cc ****         c &= 0x7f;
 177:dm/dm42_fns.cc ****     switch (c) {
 178:dm/dm42_fns.cc ****       case  0:   esc = "\xf7"; break; // ÷
 179:dm/dm42_fns.cc ****       case  1:   esc = "\xd7"; break; // ×
 180:dm/dm42_fns.cc ****       case  2:   esc = "\\sqrt"; break;
 181:dm/dm42_fns.cc ****       case  3:   esc = "\\int";  break;
 182:dm/dm42_fns.cc ****       case  4:   esc = "\\gray1";break;
 183:dm/dm42_fns.cc ****       case  5:   esc = "\\Sigma";break;
 184:dm/dm42_fns.cc ****       case  6:   esc = ">";    break;
 185:dm/dm42_fns.cc ****       case  7:   esc = "\\pi"; break;
 186:dm/dm42_fns.cc ****       case  8:   esc = "\xbf"; break; // ¿
 187:dm/dm42_fns.cc ****       case  9:   esc = "<=";   break;
 188:dm/dm42_fns.cc ****       case 11:   esc = ">=";   break;
 189:dm/dm42_fns.cc ****       case 12:   esc = "!=";   break;
 190:dm/dm42_fns.cc ****       case 13:   esc = "\\r";  break;
 191:dm/dm42_fns.cc ****       case 14:   esc = "v";    break;
 192:dm/dm42_fns.cc ****       case 15:   esc = "->";   break;
 193:dm/dm42_fns.cc ****       case 16:   esc = "<-";   break;
 194:dm/dm42_fns.cc ****       case 17:   esc = "\xb5"; break; // µ
 195:dm/dm42_fns.cc ****       case 18:   esc = "\xa3"; break; // £
 196:dm/dm42_fns.cc ****       case 19:   esc = "\xb0"; break; // °
 197:dm/dm42_fns.cc ****       case 20:   esc = "\xc5"; break; // Å
 198:dm/dm42_fns.cc ****       case 21:   esc = "\xd1"; break; // Ñ
 199:dm/dm42_fns.cc ****       case 22:   esc = "\xc4"; break; // Ä
 200:dm/dm42_fns.cc ****       //case 23: esc = "\\angle"; break;
 201:dm/dm42_fns.cc ****       case 23:   esc = "<";    break;
ARM GAS  /tmp/ccGYckNR.s 			page 5


 202:dm/dm42_fns.cc ****       case 24:   esc = "E";    break;
 203:dm/dm42_fns.cc ****       case 25:   esc = "\xc6"; break; // Æ
 204:dm/dm42_fns.cc ****       case 26:   esc = "...";  break;
 205:dm/dm42_fns.cc ****       case 27:   esc = "\\esc";break;
 206:dm/dm42_fns.cc ****       case 28:   esc = "\xd6"; break; // Ö
 207:dm/dm42_fns.cc ****       case 29:   esc = "\xdc"; break; // Ü
 208:dm/dm42_fns.cc ****       case 30:   esc = "\\gray2"; break;
 209:dm/dm42_fns.cc ****       case 31:   esc = "\\bullet";break;
 210:dm/dm42_fns.cc ****       case '\\': esc = "\\\\"; break;
 211:dm/dm42_fns.cc ****       case 127:  esc = "|-";   break;
 212:dm/dm42_fns.cc ****       case 128:  esc = ":";    break;
 213:dm/dm42_fns.cc ****       case 129:  esc = "y";    break;
 214:dm/dm42_fns.cc ****       case 138:  esc = "\\LF"; break;
 215:dm/dm42_fns.cc ****       default:   dst[d++] = c; continue;
 216:dm/dm42_fns.cc ****     }
 217:dm/dm42_fns.cc ****     while (*esc != 0)
 218:dm/dm42_fns.cc ****         dst[d++] = *esc++;
 219:dm/dm42_fns.cc ****   }
 220:dm/dm42_fns.cc ****   return d;
 221:dm/dm42_fns.cc **** }
 222:dm/dm42_fns.cc **** 
 223:dm/dm42_fns.cc **** 
 224:dm/dm42_fns.cc **** 
 225:dm/dm42_fns.cc **** int hp2utfchar(char * s, unsigned char c) {
 226:dm/dm42_fns.cc ****   const char * u;
 227:dm/dm42_fns.cc **** 
 228:dm/dm42_fns.cc ****   switch (c) {
 229:dm/dm42_fns.cc ****     case  0:   u = "÷";      break;
 230:dm/dm42_fns.cc ****     case  1:   u = "×";      break;
 231:dm/dm42_fns.cc ****     case  2:   u = "√";      break;
 232:dm/dm42_fns.cc ****     case  3:   u = "∫";      break;
 233:dm/dm42_fns.cc ****     case  4:   u = "▒";      break;
 234:dm/dm42_fns.cc ****     case  5:   u = "Σ";      break;
 235:dm/dm42_fns.cc ****     case  6:   u = "▶";      break;
 236:dm/dm42_fns.cc ****     case  7:   u = "π";      break;
 237:dm/dm42_fns.cc ****     case  8:   u = "¿";      break;
 238:dm/dm42_fns.cc ****     case  9:   u = "≤";      break;
 239:dm/dm42_fns.cc ****     case 10:   u = "\r\n";   break;
 240:dm/dm42_fns.cc ****     case 11:   u = "≥";      break;
 241:dm/dm42_fns.cc ****     case 12:   u = "≠";      break;
 242:dm/dm42_fns.cc ****     case 13:   u = "↲";      break;
 243:dm/dm42_fns.cc ****     case 14:   u = "↓";      break;
 244:dm/dm42_fns.cc ****     case 15:   u = "→";      break;
 245:dm/dm42_fns.cc ****     case 16:   u = "←";      break;
 246:dm/dm42_fns.cc ****     case 17:   u = "μ";      break;
 247:dm/dm42_fns.cc ****     case 18:   u = "£";      break;
 248:dm/dm42_fns.cc ****     case 19:   u = "°";      break;
 249:dm/dm42_fns.cc ****     case 20:   u = "Å";      break;
 250:dm/dm42_fns.cc ****     case 21:   u = "Ñ";      break;
 251:dm/dm42_fns.cc ****     case 22:   u = "Ä";      break;
 252:dm/dm42_fns.cc ****     case 23:   u = "∡";      break;
 253:dm/dm42_fns.cc ****     case 24:   u = "ᴇ";      break;
 254:dm/dm42_fns.cc ****     case 25:   u = "Æ";      break;
 255:dm/dm42_fns.cc ****     case 26:   u = "…";      break;
 256:dm/dm42_fns.cc ****     case 27:   u = "␛";      break;
 257:dm/dm42_fns.cc ****     case 28:   u = "Ö";      break;
 258:dm/dm42_fns.cc ****     case 29:   u = "Ü";      break;
ARM GAS  /tmp/ccGYckNR.s 			page 6


 259:dm/dm42_fns.cc ****     case 30:   u = "▒";      break;
 260:dm/dm42_fns.cc ****     case 31:   u = "■";      break;
 261:dm/dm42_fns.cc ****     case 127:  u = "├";      break;
 262:dm/dm42_fns.cc **** 
 263:dm/dm42_fns.cc ****     case 128:  u = ":";      break;
 264:dm/dm42_fns.cc ****     case 129:  u = "Y";      break;
 265:dm/dm42_fns.cc ****     case 138:  u = "␊";      break;
 266:dm/dm42_fns.cc ****     default:
 267:dm/dm42_fns.cc ****       s[0] = c & 0x7f;
 268:dm/dm42_fns.cc ****       return 1;
 269:dm/dm42_fns.cc ****   }
 270:dm/dm42_fns.cc ****   strcpy(s,u);
 271:dm/dm42_fns.cc ****   return strlen(u);
 272:dm/dm42_fns.cc **** }
 273:dm/dm42_fns.cc **** 
 274:dm/dm42_fns.cc **** 
 275:dm/dm42_fns.cc **** 
 276:dm/dm42_fns.cc **** 
 277:dm/dm42_fns.cc **** int hp2font(char *dst, const char *src, int srclen) {
 278:dm/dm42_fns.cc ****   unsigned char c;
 279:dm/dm42_fns.cc ****   int s, d = 0;
 280:dm/dm42_fns.cc ****   for (s = 0; s < srclen; s++) {
 281:dm/dm42_fns.cc ****     c = src[s];
 282:dm/dm42_fns.cc ****     if (c == 0x80) {
 283:dm/dm42_fns.cc ****       if ( dst[d-1] == 'x' ) dst[d-1]='X';
 284:dm/dm42_fns.cc ****       dst[d++] = ':';
 285:dm/dm42_fns.cc ****       continue; 
 286:dm/dm42_fns.cc ****     }
 287:dm/dm42_fns.cc ****     if (c == 0x81) { dst[d++] = 'Y';    continue; }
 288:dm/dm42_fns.cc ****     c &= 0x7f;
 289:dm/dm42_fns.cc ****     if (c < ' ')   { dst[d++] = c|0x80; continue; }
 290:dm/dm42_fns.cc ****     dst[d++] = c;
 291:dm/dm42_fns.cc ****   }
 292:dm/dm42_fns.cc ****   dst[d] = 0;
 293:dm/dm42_fns.cc ****   return d;
 294:dm/dm42_fns.cc **** }
 295:dm/dm42_fns.cc **** 
 296:dm/dm42_fns.cc **** 
 297:dm/dm42_fns.cc **** #if 0 // Old fonts
 298:dm/dm42_fns.cc **** int hp2regs(char *dst, const char *src, int srclen) {
 299:dm/dm42_fns.cc ****   const char *esc;
 300:dm/dm42_fns.cc ****   unsigned char c;
 301:dm/dm42_fns.cc ****   int s, d = 0;
 302:dm/dm42_fns.cc ****   for (s = 0; s < srclen; s++) {
 303:dm/dm42_fns.cc ****     c = src[s];
 304:dm/dm42_fns.cc ****     if (c >= 130 && c != 138)
 305:dm/dm42_fns.cc ****         c &= 127;
 306:dm/dm42_fns.cc ****     switch (c) {
 307:dm/dm42_fns.cc ****       case  0:   esc = "\xf7"; break; // ÷
 308:dm/dm42_fns.cc ****       case  1:   esc = "\xd7"; break; // ×
 309:dm/dm42_fns.cc ****       case  2:   esc = "\\sqrt"; break;
 310:dm/dm42_fns.cc ****       case  3:   esc = "\\int";  break;
 311:dm/dm42_fns.cc ****       case  4:   esc = "\\gray1";break;
 312:dm/dm42_fns.cc ****       case  5:   esc = "\\Sigma";break;
 313:dm/dm42_fns.cc ****       case  6:   esc = ">";    break;
 314:dm/dm42_fns.cc ****       case  7:   esc = "\\pi"; break;
 315:dm/dm42_fns.cc ****       case  8:   esc = "\xbf"; break; // ¿
ARM GAS  /tmp/ccGYckNR.s 			page 7


 316:dm/dm42_fns.cc ****       case  9:   esc = "<=";   break;
 317:dm/dm42_fns.cc ****       case 11:   esc = ">=";   break;
 318:dm/dm42_fns.cc ****       case 12:   esc = "!=";   break;
 319:dm/dm42_fns.cc ****       case 13:   esc = "\\r";  break;
 320:dm/dm42_fns.cc ****       case 14:   esc = "v";    break;
 321:dm/dm42_fns.cc ****       case 15:   esc = "->";   break;
 322:dm/dm42_fns.cc ****       case 16:   esc = "<-";   break;
 323:dm/dm42_fns.cc ****       case 17:   esc = "\xb5"; break; // µ
 324:dm/dm42_fns.cc ****       case 18:   esc = "\xa3"; break; // £
 325:dm/dm42_fns.cc ****       case 19:   esc = "\xb0"; break; // °
 326:dm/dm42_fns.cc ****       case 20:   esc = "\xc5"; break; // Å
 327:dm/dm42_fns.cc ****       case 21:   esc = "\xd1"; break; // Ñ
 328:dm/dm42_fns.cc ****       case 22:   esc = "\xc4"; break; // Ä
 329:dm/dm42_fns.cc ****       case 23:   esc = "\x80"; break; // Angle
 330:dm/dm42_fns.cc ****       case 24:   esc = "\x81"; break; // Exp
 331:dm/dm42_fns.cc ****       case 25:   esc = "\xc6"; break; // Æ
 332:dm/dm42_fns.cc ****       case 26:   esc = "...";  break;
 333:dm/dm42_fns.cc ****       case 27:   esc = "\\esc";break;
 334:dm/dm42_fns.cc ****       case 28:   esc = "\xd6"; break; // Ö
 335:dm/dm42_fns.cc ****       case 29:   esc = "\xdc"; break; // Ü
 336:dm/dm42_fns.cc ****       case 30:   esc = "\\gray2"; break;
 337:dm/dm42_fns.cc ****       case 31:   esc = "\\bullet";break;
 338:dm/dm42_fns.cc ****       case '\\': esc = "\\\\"; break;
 339:dm/dm42_fns.cc ****       case 127:  esc = "|-";   break;
 340:dm/dm42_fns.cc ****       case 128:  esc = ":";    break;
 341:dm/dm42_fns.cc ****       case 129:  esc = "y";    break;
 342:dm/dm42_fns.cc ****       case 138:  esc = "\\LF"; break;
 343:dm/dm42_fns.cc ****       default:   dst[d++] = c; continue;
 344:dm/dm42_fns.cc ****     }
 345:dm/dm42_fns.cc ****     while (*esc != 0)
 346:dm/dm42_fns.cc ****         dst[d++] = *esc++;
 347:dm/dm42_fns.cc ****   }
 348:dm/dm42_fns.cc ****   return d;
 349:dm/dm42_fns.cc **** }
 350:dm/dm42_fns.cc **** #endif
 351:dm/dm42_fns.cc **** 
 352:dm/dm42_fns.cc **** 
 353:dm/dm42_fns.cc **** 
 354:dm/dm42_fns.cc **** /* ▄▄   ▄▄▄▄▄  ▄    ▄
 355:dm/dm42_fns.cc ****    ██   █   ▀█ ██  ██
 356:dm/dm42_fns.cc ****   █  █  █▄▄▄▄▀ █ ██ █
 357:dm/dm42_fns.cc ****   █▄▄█  █   ▀▄ █ ▀▀ █
 358:dm/dm42_fns.cc ****  █    █ █    ▀ █    █ */
 359:dm/dm42_fns.cc **** 
 360:dm/dm42_fns.cc **** #ifndef FW_RELEASE
 361:dm/dm42_fns.cc **** #define SHELL_DEBUG
 362:dm/dm42_fns.cc **** //#define SHELL_DEBUG_STATE_RW
 363:dm/dm42_fns.cc **** #define THELL_DEBUG
 364:dm/dm42_fns.cc **** #endif
 365:dm/dm42_fns.cc **** 
 366:dm/dm42_fns.cc **** #ifdef SHELL_DEBUG
 367:dm/dm42_fns.cc ****   //#define DBGSHELL(...) lcd_print(__VA_ARGS__)
 368:dm/dm42_fns.cc ****   #define DBGSHELL(...) printf(__VA_ARGS__)
 369:dm/dm42_fns.cc ****   #define DBG_NOLCD
 370:dm/dm42_fns.cc **** #else
 371:dm/dm42_fns.cc ****   #define DBGSHELL(...)
 372:dm/dm42_fns.cc **** #endif
ARM GAS  /tmp/ccGYckNR.s 			page 8


 373:dm/dm42_fns.cc **** 
 374:dm/dm42_fns.cc **** #ifdef THELL_DEBUG
 375:dm/dm42_fns.cc ****   //#define DBGSHELL(...) lcd_print(__VA_ARGS__)
 376:dm/dm42_fns.cc ****   #define DBGTHELL(...) printf(__VA_ARGS__)
 377:dm/dm42_fns.cc **** #else
 378:dm/dm42_fns.cc ****   #define DBGTHELL(...)
 379:dm/dm42_fns.cc **** #endif
 380:dm/dm42_fns.cc **** 
 381:dm/dm42_fns.cc **** #if defined(SHELL_DEBUG_STATE_RW) && defined(SHELL_DEBUG)
 382:dm/dm42_fns.cc ****   #define DUMPBUF(buf,...)  dump_buffer((char*)buf,__VA_ARGS__)
 383:dm/dm42_fns.cc ****   #define DBGSHELL_STATE_RW(...) DBGSHELL(__VA_ARGS__)
 384:dm/dm42_fns.cc **** #else
 385:dm/dm42_fns.cc ****   #define DBGSHELL_STATE_RW(...)
 386:dm/dm42_fns.cc ****   #define DUMPBUF(...)
 387:dm/dm42_fns.cc **** #endif
 388:dm/dm42_fns.cc **** 
 389:dm/dm42_fns.cc **** 
 390:dm/dm42_fns.cc **** 
 391:dm/dm42_fns.cc **** extern "C" {
 392:dm/dm42_fns.cc ****   
 393:dm/dm42_fns.cc **** // -- External prototypes
 394:dm/dm42_fns.cc **** #include <main.h>
 395:dm/dm42_fns.cc **** #include <dmcp.h>
 396:dm/dm42_fns.cc **** 
 397:dm/dm42_fns.cc **** #include <dm42_menu.h>
 398:dm/dm42_fns.cc **** #include <dm42_fns.h>
 399:dm/dm42_fns.cc **** 
 400:dm/dm42_fns.cc **** #ifndef assert_param
 401:dm/dm42_fns.cc **** #define assert_param(c)
 402:dm/dm42_fns.cc **** #endif
 403:dm/dm42_fns.cc **** 
 404:dm/dm42_fns.cc **** 
 405:dm/dm42_fns.cc **** // -- Local prototypes --
 406:dm/dm42_fns.cc **** void setTimeout3(int ms_value);
 407:dm/dm42_fns.cc **** void start_runner();
 408:dm/dm42_fns.cc **** void disp_header();
 409:dm/dm42_fns.cc **** void disp_regs(int what);
 410:dm/dm42_fns.cc **** int savestat_init(int save_ix);
 411:dm/dm42_fns.cc **** void savestat_erase(int save_ix);
 412:dm/dm42_fns.cc **** int header_timeout();
 413:dm/dm42_fns.cc **** int lcd_update_timeout();
 414:dm/dm42_fns.cc **** void clear_lcd_update_timeout();
 415:dm/dm42_fns.cc **** void set_lcd_update_timeout();
 416:dm/dm42_fns.cc **** void skin_repaint_annunciator(int which, bool state);
 417:dm/dm42_fns.cc **** // ----------------------
 418:dm/dm42_fns.cc **** extern uint8_t is_graphics;
 419:dm/dm42_fns.cc **** // ----------------------
 420:dm/dm42_fns.cc **** 
 421:dm/dm42_fns.cc **** 
 422:dm/dm42_fns.cc **** 
 423:dm/dm42_fns.cc **** //uint8_t draw_old_lcd = 0;
 424:dm/dm42_fns.cc **** //uint8_t disp_main_menu = 0;
 425:dm/dm42_fns.cc **** uint8_t disp_was_menu_drawn = 0;
 426:dm/dm42_fns.cc **** 
 427:dm/dm42_fns.cc **** int8_t reg_font_ix = 5; // Default register font
 428:dm/dm42_fns.cc **** int8_t pgm_font_ix = 2; // Default program font
 429:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 9


 430:dm/dm42_fns.cc **** uint32_t reg_font_offset = 0;        // Default font offsets
 431:dm/dm42_fns.cc **** uint32_t stack_layout = STACK_XYZT;  // Default stack layout
 432:dm/dm42_fns.cc **** 
 433:dm/dm42_fns.cc **** #define REG_ALIGN_LEFT  2
 434:dm/dm42_fns.cc **** #define REG_LINES       1
 435:dm/dm42_fns.cc **** 
 436:dm/dm42_fns.cc **** 
 437:dm/dm42_fns.cc **** #define is_REG_ALIGN_LEFT  (draw_reg_mode & REG_ALIGN_LEFT)
 438:dm/dm42_fns.cc **** #define is_REG_LINES       (draw_reg_mode & REG_LINES)
 439:dm/dm42_fns.cc **** 
 440:dm/dm42_fns.cc **** #define DRAW_REG_MODE_MAX  REG_ALIGN_LEFT
 441:dm/dm42_fns.cc **** 
 442:dm/dm42_fns.cc **** // 0 - RIGHT no lines
 443:dm/dm42_fns.cc **** // 1 - RIGHT with lines
 444:dm/dm42_fns.cc **** // 2 - LEFT
 445:dm/dm42_fns.cc **** uint8_t draw_reg_mode = REG_ALIGN_LEFT;
 446:dm/dm42_fns.cc **** 
 447:dm/dm42_fns.cc **** 
 448:dm/dm42_fns.cc **** 
 449:dm/dm42_fns.cc **** #define TIMEOUT_REPEAT  0
 450:dm/dm42_fns.cc **** #define TIMEOUT_CORE1   1
 451:dm/dm42_fns.cc **** #define TIMEOUT_CORE2   2
 452:dm/dm42_fns.cc **** #define TIMEOUT_CORE3   3
 453:dm/dm42_fns.cc **** 
 454:dm/dm42_fns.cc **** 
 455:dm/dm42_fns.cc **** static uint8_t timeout0_type = TIMEOUT_REPEAT;
 456:dm/dm42_fns.cc **** 
 457:dm/dm42_fns.cc **** uint8_t decimal_point = 1;
 458:dm/dm42_fns.cc **** volatile bool core_initialized;
 459:dm/dm42_fns.cc **** volatile  int repeat_timeout;
 460:dm/dm42_fns.cc **** 
 461:dm/dm42_fns.cc **** 
 462:dm/dm42_fns.cc **** // Savestat data
 463:dm/dm42_fns.cc **** //#define SAVEST_BASE    (QSPI_SAVESTAT)
 464:dm/dm42_fns.cc **** //#define SAVEST_SIZE            0x18000
 465:dm/dm42_fns.cc **** //#define SAVEST_DATA_OFFS          0x20
 466:dm/dm42_fns.cc **** //#define SAVEST_CNT                   4
 467:dm/dm42_fns.cc **** // Savestat index values
 468:dm/dm42_fns.cc **** //#define SAVEST_EMPTY    0xFFFFFFFF
 469:dm/dm42_fns.cc **** //#define SAVEST_NONE              0
 470:dm/dm42_fns.cc **** //#define SAVEST_NEWEST           -1
 471:dm/dm42_fns.cc **** //#define SAVEST_FREE             -2
 472:dm/dm42_fns.cc **** 
 473:dm/dm42_fns.cc **** #define SAVESTAT_MAGIC  0xd342da7a
 474:dm/dm42_fns.cc **** //#define SAVESTAT_FLAG_BEEP_MUTE   BIT(0)  // Using calc flag now
 475:dm/dm42_fns.cc **** #define SAVESTAT_FLAG_SLOW_AUTOREP  BIT(1)
 476:dm/dm42_fns.cc **** #define SAVESTAT_FLAG_DISP_VOLTAGE  BIT(2)
 477:dm/dm42_fns.cc **** #define SAVESTAT_FLAG_REG_LEFT      BIT(3)
 478:dm/dm42_fns.cc **** #define SAVESTAT_FLAG_REG_LINES     BIT(4)
 479:dm/dm42_fns.cc **** #define SAVESTAT_FLAG_GMODE0        BIT(5)
 480:dm/dm42_fns.cc **** #define SAVESTAT_FLAG_GMODE1        BIT(6)
 481:dm/dm42_fns.cc **** #define SAVESTAT_FLAG_REFLCD0       BIT(7)
 482:dm/dm42_fns.cc **** #define SAVESTAT_FLAG_REFLCD1       BIT(8)
 483:dm/dm42_fns.cc **** #define SAVESTAT_FLAG_REFLCD2       BIT(9)
 484:dm/dm42_fns.cc **** 
 485:dm/dm42_fns.cc **** #define SAVESTAT_DISP_STATFN       BIT(10)
 486:dm/dm42_fns.cc **** #define SAVESTAT_DISP_DOW          BIT(11)
ARM GAS  /tmp/ccGYckNR.s 			page 10


 487:dm/dm42_fns.cc **** #define SAVESTAT_DISP_DATE         BIT(12)
 488:dm/dm42_fns.cc **** #define SAVESTAT_DISP_DATE_SEP0    BIT(13)
 489:dm/dm42_fns.cc **** #define SAVESTAT_DISP_DATE_SEP1    BIT(14)
 490:dm/dm42_fns.cc **** #define SAVESTAT_DISP_SHORTMON     BIT(15)
 491:dm/dm42_fns.cc **** #define SAVESTAT_DISP_TIME         BIT(16)
 492:dm/dm42_fns.cc **** 
 493:dm/dm42_fns.cc **** #define SAVESTAT_PERM_MAIN_MENU    BIT(17)
 494:dm/dm42_fns.cc **** 
 495:dm/dm42_fns.cc **** #define SAVESTAT_PRTOF_GR          BIT(18)
 496:dm/dm42_fns.cc **** #define SAVESTAT_PRTOF_TXT         BIT(19)
 497:dm/dm42_fns.cc **** #define SAVESTAT_PRTOF_NOIR        BIT(20)
 498:dm/dm42_fns.cc **** #define SAVESTAT_PRTOF_GR_IN_TXT   BIT(21)
 499:dm/dm42_fns.cc **** 
 500:dm/dm42_fns.cc **** 
 501:dm/dm42_fns.cc **** typedef struct {
 502:dm/dm42_fns.cc ****   uint32_t magic;         // Magic for check
 503:dm/dm42_fns.cc ****   uint32_t flags;         // Save flags
 504:dm/dm42_fns.cc ****   char platf_ver[12];     // Platform version
 505:dm/dm42_fns.cc ****   uint8_t  century;       // Current century
 506:dm/dm42_fns.cc ****   uint8_t  printer_delay; // Printer delay in cs
 507:dm/dm42_fns.cc ****   uint8_t  reg_font_ix;   // Current register font index
 508:dm/dm42_fns.cc ****   uint8_t  stack_layout;  // Current stack layout
 509:dm/dm42_fns.cc ****   uint8_t  pgm_font_ix;   // Current program font index
 510:dm/dm42_fns.cc ****   uint8_t  font_offsets[3];// Register font offsets
 511:dm/dm42_fns.cc ****   uint8_t  dummy[4];      // .. for future use
 512:dm/dm42_fns.cc **** } __packed savestat_data_t;
 513:dm/dm42_fns.cc **** 
 514:dm/dm42_fns.cc **** 
 515:dm/dm42_fns.cc **** STATIC_ASSERT(sizeof(savestat_data_t) == 32, "sizeof(savestat_header_t) != 32");
 516:dm/dm42_fns.cc **** 
 517:dm/dm42_fns.cc **** 
 518:dm/dm42_fns.cc **** //uint8_t savestat_ix = 0;     // Current savestat in use
 519:dm/dm42_fns.cc **** 
 520:dm/dm42_fns.cc **** // Pointers for load/save state functions
 521:dm/dm42_fns.cc **** uint8_t * pgm_ptr;
 522:dm/dm42_fns.cc **** int pgm_sz = 0;
 523:dm/dm42_fns.cc **** 
 524:dm/dm42_fns.cc **** // Program load/save
 525:dm/dm42_fns.cc **** FRESULT pgm_res = FR_OK;
 526:dm/dm42_fns.cc **** 
 527:dm/dm42_fns.cc **** // ---
 528:dm/dm42_fns.cc **** 
 529:dm/dm42_fns.cc **** #define     ANN(x)      VAL(ANN_ ## x, ann_state)
 530:dm/dm42_fns.cc **** #define VAL_ANN(x)      VAL(x,ann_state)
 531:dm/dm42_fns.cc **** #define CLR_ANN(x)      CLR(x,ann_state)
 532:dm/dm42_fns.cc **** #define SET_ANN(x)      SET(x,ann_state)
 533:dm/dm42_fns.cc **** #define NOT_ANN(x)      (!ANN(x))
 534:dm/dm42_fns.cc **** #define SETMSK_ANN(x,m) SETMSK(x,m,ann_state) 
 535:dm/dm42_fns.cc **** #define SETBY_ANN(c,x)  SETBY(c,x,ann_state)
 536:dm/dm42_fns.cc **** 
 537:dm/dm42_fns.cc **** 
 538:dm/dm42_fns.cc **** // Annunciators
 539:dm/dm42_fns.cc **** #define ANN_UPDOWN      BIT(0)
 540:dm/dm42_fns.cc **** #define ANN_SHIFT       BIT(1)
 541:dm/dm42_fns.cc **** #define ANN_PRINT       BIT(2)
 542:dm/dm42_fns.cc **** #define ANN_RUN         BIT(3)
 543:dm/dm42_fns.cc **** #define ANN_BATTERY     BIT(4)
ARM GAS  /tmp/ccGYckNR.s 			page 11


 544:dm/dm42_fns.cc **** #define ANN_G           BIT(5)
 545:dm/dm42_fns.cc **** #define ANN_RAD         BIT(6)
 546:dm/dm42_fns.cc **** #define ANN_CNT             7
 547:dm/dm42_fns.cc **** 
 548:dm/dm42_fns.cc **** 
 549:dm/dm42_fns.cc **** // Program state
 550:dm/dm42_fns.cc **** 
 551:dm/dm42_fns.cc **** #define     PS(x)      VAL(PST_ ## x, pgm_state)
 552:dm/dm42_fns.cc **** #define VAL_PS(x)      VAL(PST_ ## x,pgm_state)
 553:dm/dm42_fns.cc **** #define CLR_PS(x)      CLR(PST_ ## x,pgm_state)
 554:dm/dm42_fns.cc **** #define SET_PS(x)      SET(PST_ ## x,pgm_state)
 555:dm/dm42_fns.cc **** #define NOT_PS(x)      (!PS(x))
 556:dm/dm42_fns.cc **** #define SETMSK_PS(x,m) SETMSK(PST_ ## x,m,pgm_state) 
 557:dm/dm42_fns.cc **** #define SETBY_PS(c,x)  SETBY(c,PST_ ## x,pgm_state)
 558:dm/dm42_fns.cc **** 
 559:dm/dm42_fns.cc **** 
 560:dm/dm42_fns.cc **** #define PST_DISP_VOLTAGE      BIT(0)
 561:dm/dm42_fns.cc **** #define PST_DISP_STATFN       BIT(1)
 562:dm/dm42_fns.cc **** #define PST_DISP_DOW          BIT(2)
 563:dm/dm42_fns.cc **** #define PST_DISP_DATE         BIT(3)
 564:dm/dm42_fns.cc **** #define PST_DISP_DATE_SEP0    BIT(4)
 565:dm/dm42_fns.cc **** #define PST_DISP_DATE_SEP1    BIT(5)
 566:dm/dm42_fns.cc **** #define PST_DISP_SHORTMON     BIT(6)
 567:dm/dm42_fns.cc **** #define PST_DISP_TIME         BIT(7)
 568:dm/dm42_fns.cc **** 
 569:dm/dm42_fns.cc **** #define PST_PERM_MAIN_MENU    BIT(8)
 570:dm/dm42_fns.cc **** 
 571:dm/dm42_fns.cc **** #define PST_PRTOF_TEXT        BIT(9)
 572:dm/dm42_fns.cc **** #define PST_PRTOF_GRAPHICS    BIT(10)
 573:dm/dm42_fns.cc **** #define PST_PRTOF_NOIR        BIT(11)
 574:dm/dm42_fns.cc **** #define PST_PRTOF_GR_IN_TXT   BIT(12)
 575:dm/dm42_fns.cc **** 
 576:dm/dm42_fns.cc **** 
 577:dm/dm42_fns.cc **** static volatile uint32_t ann_state = 0;
 578:dm/dm42_fns.cc **** static volatile uint32_t pgm_state = 0;
 579:dm/dm42_fns.cc **** 
 580:dm/dm42_fns.cc **** 
 581:dm/dm42_fns.cc **** #define LCD_CHG_FORCE    8
 582:dm/dm42_fns.cc **** #define LCD_CHG_HEADER   4
 583:dm/dm42_fns.cc **** #define LCD_CHG_REGS     2
 584:dm/dm42_fns.cc **** #define LCD_CHG_LCD      1
 585:dm/dm42_fns.cc **** 
 586:dm/dm42_fns.cc **** static uint32_t lcd_changed = 0;
 587:dm/dm42_fns.cc **** static uint32_t last_header_min;
 588:dm/dm42_fns.cc **** 
 589:dm/dm42_fns.cc **** #define LCD_HP_CHARS 22
 590:dm/dm42_fns.cc **** #define LCD_UPDATE_TIMEOUT    200
 591:dm/dm42_fns.cc **** 
 592:dm/dm42_fns.cc **** static uint32_t last_lcd_update_ms = 0;
 593:dm/dm42_fns.cc **** 
 594:dm/dm42_fns.cc **** #define TLCD_LINELEN   LCD_HP_CHARS
 595:dm/dm42_fns.cc **** char tlcd[2][TLCD_LINELEN+1];
 596:dm/dm42_fns.cc **** 
 597:dm/dm42_fns.cc **** 
 598:dm/dm42_fns.cc **** //char annstr[64];
 599:dm/dm42_fns.cc **** 
 600:dm/dm42_fns.cc **** // Just flag for calc_runner initialization
ARM GAS  /tmp/ccGYckNR.s 			page 12


 601:dm/dm42_fns.cc **** int read_statefile; /// ???? really here?
 602:dm/dm42_fns.cc **** 
 603:dm/dm42_fns.cc **** 
 604:dm/dm42_fns.cc **** 
 605:dm/dm42_fns.cc **** 
 606:dm/dm42_fns.cc **** /* Alpha translation table 
 607:dm/dm42_fns.cc **** 
 608:dm/dm42_fns.cc ****    +--------+--------+--------+--------+--------+--------+
 609:dm/dm42_fns.cc ****    |   F1   |   F2   |   F3   |   F4   |   F5   |   F6   |
 610:dm/dm42_fns.cc ****    |   38   |   39   |   40   |   41   |   42   |   43   |
 611:dm/dm42_fns.cc ****    +--------+--------+--------+--------+--------+--------+
 612:dm/dm42_fns.cc ****  S |  Sum-  |  y^x   |  x^2   |  10^x  |  e^x   |  GTO   |
 613:dm/dm42_fns.cc ****    |  Sum+  |  1/x   |  Sqrt  |  Log   |  Ln    |  XEQ   |
 614:dm/dm42_fns.cc ****    |   1    |   2    |   3    |   4    |   5    |   6    |
 615:dm/dm42_fns.cc ****  A |   A    |   B    |   C    |   D    |   E    |   F    |
 616:dm/dm42_fns.cc ****    +--------+--------+--------+--------+--------+--------+
 617:dm/dm42_fns.cc ****  S | Complx |   %    |  Pi    |  ASIN  |  ACOS  |  ATAN  |
 618:dm/dm42_fns.cc ****    |  STO   |  RCL   |  R_dwn |   SIN  |   COS  |   TAN  |
 619:dm/dm42_fns.cc ****    |   7    |   8    |   9    |   10   |   11   |   12   |
 620:dm/dm42_fns.cc ****  A |   G    |   H    |   I    |    J   |    K   |    L   |
 621:dm/dm42_fns.cc ****    +--------+--------+--------+--------+--------+--------+
 622:dm/dm42_fns.cc ****  S |     Alpha       | Last x |  MODES |  DISP  |  CLEAR |
 623:dm/dm42_fns.cc ****    |     ENTER       |  x<>y  |  +/-   |   E    |   <--  |
 624:dm/dm42_fns.cc ****    |       13        |   14   |   15   |   16   |   17   |
 625:dm/dm42_fns.cc ****  A |                 |    M   |    N   |    O   |        |
 626:dm/dm42_fns.cc ****    +--------+--------+-+------+----+---+-------++--------+
 627:dm/dm42_fns.cc ****  S |   BST  | Solver   |  Int f(x) |  Matrix   |  STAT   |
 628:dm/dm42_fns.cc ****    |   Up   |    7     |     8     |     9     |   /     |
 629:dm/dm42_fns.cc ****    |   18   |   19     |    20     |    21     |   22    |
 630:dm/dm42_fns.cc ****  A |        |    P     |     Q     |     R     |    S    |
 631:dm/dm42_fns.cc ****    +--------+----------+-----------+-----------+---------+
 632:dm/dm42_fns.cc ****  S |   SST  |  BASE    |  CONVERT  |  FLAGS    |  PROB   |
 633:dm/dm42_fns.cc ****    |  Down  |    4     |     5     |     6     |    x    |
 634:dm/dm42_fns.cc ****    |   23   |   24     |    25     |    26     |   27    |
 635:dm/dm42_fns.cc ****  A |        |    T     |     U     |     V     |    W    |
 636:dm/dm42_fns.cc ****    +--------+----------+-----------+-----------+---------+
 637:dm/dm42_fns.cc ****  S |        | ASSIGN   |  CUSTOM   |  PGM.FCN  |  PRINT  |
 638:dm/dm42_fns.cc ****    |  SHIFT |    1     |     2     |     3     |    -    |
 639:dm/dm42_fns.cc ****    |   28   |   29     |    30     |    31     |   32    |
 640:dm/dm42_fns.cc ****  A |        |    x     |     Y     |     Z     |    -    |
 641:dm/dm42_fns.cc ****    +--------+----------+-----------+-----------+---------+
 642:dm/dm42_fns.cc ****  S |  OFF   |  TOP.FCN |   SHOW    |   PRGM    | CATALOG |
 643:dm/dm42_fns.cc ****    |  EXIT  |    0     |     .     |    R/S    |    +    |
 644:dm/dm42_fns.cc ****    |   33   |   34     |    35     |    36     |   37    |
 645:dm/dm42_fns.cc ****  A |        |    :     |     .     |     ?     |   ' '   |
 646:dm/dm42_fns.cc ****    +--------+----------+-----------+-----------+---------+
 647:dm/dm42_fns.cc **** 
 648:dm/dm42_fns.cc **** */
 649:dm/dm42_fns.cc **** 
 650:dm/dm42_fns.cc **** 
 651:dm/dm42_fns.cc **** const char alpha_upper_transl[] = "_" // code 0 unused
 652:dm/dm42_fns.cc ****   "ABCDEF"
 653:dm/dm42_fns.cc ****   "GHIJKL"
 654:dm/dm42_fns.cc ****    "_MNO_"
 655:dm/dm42_fns.cc ****    "_PQRS"
 656:dm/dm42_fns.cc ****    "_TUVW"
 657:dm/dm42_fns.cc ****    "_XYZ-"
ARM GAS  /tmp/ccGYckNR.s 			page 13


 658:dm/dm42_fns.cc ****    "_:._ ";
 659:dm/dm42_fns.cc **** //   "_:.? "; // R/S used in alpha mode !
 660:dm/dm42_fns.cc **** 
 661:dm/dm42_fns.cc **** const char alpha_lower_transl[] = "_" // code 0 unused
 662:dm/dm42_fns.cc ****   "abcdef"
 663:dm/dm42_fns.cc ****   "ghijkl"
 664:dm/dm42_fns.cc ****    "_mno_"
 665:dm/dm42_fns.cc ****    "_pqrs"
 666:dm/dm42_fns.cc ****    "_tuvw"
 667:dm/dm42_fns.cc ****    "_xyz-"
 668:dm/dm42_fns.cc ****    "_:._ ";
 669:dm/dm42_fns.cc **** //   "_:.? "; // R/S used in alpha mode !
 670:dm/dm42_fns.cc **** 
 671:dm/dm42_fns.cc **** 
 672:dm/dm42_fns.cc **** const char alpha_shift_upper_transl[] = "_" // code 0 unused
 673:dm/dm42_fns.cc ****   "ABCDEF"
 674:dm/dm42_fns.cc ****   "GHIJKL"
 675:dm/dm42_fns.cc ****    "_MNO_"
 676:dm/dm42_fns.cc ****    "_789/"
 677:dm/dm42_fns.cc ****    "_456*"
 678:dm/dm42_fns.cc ****    "_123-"
 679:dm/dm42_fns.cc ****    "_0.?+";
 680:dm/dm42_fns.cc **** 
 681:dm/dm42_fns.cc **** 
 682:dm/dm42_fns.cc **** const char alpha_shift_lower_transl[] = "_" // code 0 unused
 683:dm/dm42_fns.cc ****   "abcdef"
 684:dm/dm42_fns.cc ****   "ghijkl"
 685:dm/dm42_fns.cc ****    "_mno_"
 686:dm/dm42_fns.cc ****    "_789/"
 687:dm/dm42_fns.cc ****    "_456*"
 688:dm/dm42_fns.cc ****    "_123-"
 689:dm/dm42_fns.cc ****    "_0.?+";
 690:dm/dm42_fns.cc **** 
 691:dm/dm42_fns.cc **** 
 692:dm/dm42_fns.cc **** const char *alpha_tables[] = {
 693:dm/dm42_fns.cc ****   NULL,                 // Orig table -> no translation
 694:dm/dm42_fns.cc ****   alpha_upper_transl,
 695:dm/dm42_fns.cc ****   alpha_lower_transl
 696:dm/dm42_fns.cc **** };
 697:dm/dm42_fns.cc **** 
 698:dm/dm42_fns.cc **** 
 699:dm/dm42_fns.cc **** const char *alpha_shift_tables[] = {
 700:dm/dm42_fns.cc ****   NULL,                 // Orig table -> no translation
 701:dm/dm42_fns.cc ****   alpha_shift_upper_transl,
 702:dm/dm42_fns.cc ****   alpha_shift_lower_transl
 703:dm/dm42_fns.cc **** };
 704:dm/dm42_fns.cc **** 
 705:dm/dm42_fns.cc **** 
 706:dm/dm42_fns.cc **** /*
 707:dm/dm42_fns.cc **** const char alpha_shift_transl[] = "_" // code 0 unused
 708:dm/dm42_fns.cc ****   "abcdef"
 709:dm/dm42_fns.cc ****   "ghijkl"
 710:dm/dm42_fns.cc ****    "_MNO_"
 711:dm/dm42_fns.cc ****    "_789/"
 712:dm/dm42_fns.cc ****    "_456*"
 713:dm/dm42_fns.cc ****    "_123-"
 714:dm/dm42_fns.cc ****    "_0.?+";
ARM GAS  /tmp/ccGYckNR.s 			page 14


 715:dm/dm42_fns.cc **** */
 716:dm/dm42_fns.cc **** 
 717:dm/dm42_fns.cc **** 
 718:dm/dm42_fns.cc **** // Calculator icons
 719:dm/dm42_fns.cc **** const char ann00[] = 
 720:dm/dm42_fns.cc **** #include "data/ann00.c"
 721:dm/dm42_fns.cc **** ;
 722:dm/dm42_fns.cc **** 
 723:dm/dm42_fns.cc **** // Alpha annunciator
 724:dm/dm42_fns.cc **** const char ann01[] = 
 725:dm/dm42_fns.cc **** #include "data/ann01.c"
 726:dm/dm42_fns.cc **** ;
 727:dm/dm42_fns.cc **** 
 728:dm/dm42_fns.cc **** // USB and battery icons
 729:dm/dm42_fns.cc **** const char ann02[] = 
 730:dm/dm42_fns.cc **** #include "data/ann02.c"
 731:dm/dm42_fns.cc **** ;
 732:dm/dm42_fns.cc **** 
 733:dm/dm42_fns.cc **** // Flag icons
 734:dm/dm42_fns.cc **** const char ann03[] = 
 735:dm/dm42_fns.cc **** #include "data/ann03.c"
 736:dm/dm42_fns.cc **** ;
 737:dm/dm42_fns.cc **** 
 738:dm/dm42_fns.cc **** 
 739:dm/dm42_fns.cc **** //const  uint8_t ann_offs[ANN_CNT]    = { 0, 4, 8, 13, 16, 20, 22};
 740:dm/dm42_fns.cc **** const  uint8_t ann_offs[ANN_CNT]    = { 0, 4, 9, 14, 17, 21, 23};
 741:dm/dm42_fns.cc **** const  uint8_t ann_dx[ANN_CNT+1]    = { 4, 5, 5,  3,  4,  2,  4,  3};
 742:dm/dm42_fns.cc **** //const uint16_t ann_lcd_x[ANN_CNT+1] = { 8,48,96,120,160,184,210,300}; // Old one
 743:dm/dm42_fns.cc **** const uint16_t ann_lcd_x[ANN_CNT+1]   = { 8,48,88,112,  0,128,156,300}; // Old one
 744:dm/dm42_fns.cc **** 
 745:dm/dm42_fns.cc **** #define ANN_BPL    26 // Bytes per line
 746:dm/dm42_fns.cc **** #define ANN2_BPL   32 // Bytes per line
 747:dm/dm42_fns.cc **** 
 748:dm/dm42_fns.cc **** #define ANN_LCD_Y LCD_HEADER_LINES
 749:dm/dm42_fns.cc **** 
 750:dm/dm42_fns.cc **** #define ANN_LCD_X  (ANN_BPL*8)
 751:dm/dm42_fns.cc **** #define ANN2_LCD_X (ANN2_BPL*8)
 752:dm/dm42_fns.cc **** #define ANN_LCD_DY  16
 753:dm/dm42_fns.cc **** 
 754:dm/dm42_fns.cc **** #define ANN_FLAG_CNT 11
 755:dm/dm42_fns.cc **** 
 756:dm/dm42_fns.cc **** #define ALPHA_ORIG          0
 757:dm/dm42_fns.cc **** #define ALPHA_UPPER         1
 758:dm/dm42_fns.cc **** #define ALPHA_LOWER         2
 759:dm/dm42_fns.cc **** #define ALPHA_TABLE_COUNT   3
 760:dm/dm42_fns.cc **** #define ALPHA_INACTIVE    0xf
 761:dm/dm42_fns.cc **** uint8_t alpha_table = ALPHA_INACTIVE;
 762:dm/dm42_fns.cc **** uint8_t last_alpha_table = 0;
 763:dm/dm42_fns.cc **** 
 764:dm/dm42_fns.cc **** #define TEST_ANNUNCIATORS 0
 765:dm/dm42_fns.cc **** 
 766:dm/dm42_fns.cc **** void repaint_annunciators() {
 767:dm/dm42_fns.cc ****   int a;
 768:dm/dm42_fns.cc **** 
 769:dm/dm42_fns.cc ****   // No repaints in main menu
 770:dm/dm42_fns.cc ****   if ( ST(STAT_MENU) ) return;
 771:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 15


 772:dm/dm42_fns.cc ****   if (is_graphics>1)
 773:dm/dm42_fns.cc ****     return;
 774:dm/dm42_fns.cc **** 
 775:dm/dm42_fns.cc **** 
 776:dm/dm42_fns.cc ****   // Clear the annunciator area
 777:dm/dm42_fns.cc **** //  lcd_fillLines(ANN_LCD_Y, LCD_EMPTY_VALUE, ANN_LCD_DY);
 778:dm/dm42_fns.cc ****   lcd_fill_rect(0, ANN_LCD_Y, 207, ANN_LCD_DY, 0);
 779:dm/dm42_fns.cc **** 
 780:dm/dm42_fns.cc **** /* Orig
 781:dm/dm42_fns.cc ****   uint32_t m = 1;
 782:dm/dm42_fns.cc ****   for(a=0; a<ANN_CNT; a++,m<<=1)
 783:dm/dm42_fns.cc ****     if ( (ann_state & m) != 0 || TEST_ANNUNCIATORS)
 784:dm/dm42_fns.cc ****       lcd_draw_img_part(ann00+ANN_BPL-ann_offs[a]-ann_dx[a],
 785:dm/dm42_fns.cc ****         360-ann_lcd_x[a], ANN_LCD_Y,
 786:dm/dm42_fns.cc ****         ANN_LCD_X, ANN_LCD_DY, 8*ann_dx[a]);
 787:dm/dm42_fns.cc **** 
 788:dm/dm42_fns.cc ****   // Draw Alpha annunciator
 789:dm/dm42_fns.cc ****   if ( alpha_table != ALPHA_INACTIVE ) {
 790:dm/dm42_fns.cc ****     lcd_draw_img_part(ann01+ANN_BPL-3*alpha_table-ann_dx[a],
 791:dm/dm42_fns.cc ****           360-ann_lcd_x[a], ANN_LCD_Y,
 792:dm/dm42_fns.cc ****           ANN_LCD_X, ANN_LCD_DY, 8*ann_dx[a]);
 793:dm/dm42_fns.cc ****   }
 794:dm/dm42_fns.cc **** */
 795:dm/dm42_fns.cc **** 
 796:dm/dm42_fns.cc ****   uint32_t m = 1;
 797:dm/dm42_fns.cc ****   for(a=0; a<ANN_CNT; a++,m<<=1) {
 798:dm/dm42_fns.cc ****     if ( m == ANN_BATTERY ) continue;
 799:dm/dm42_fns.cc ****     if ( (ann_state & m) != 0 || TEST_ANNUNCIATORS)
 800:dm/dm42_fns.cc ****       lcd_draw_img_part(ann00+ANN2_BPL-ann_offs[a]-ann_dx[a],
 801:dm/dm42_fns.cc ****         376-ann_lcd_x[a], ANN_LCD_Y,
 802:dm/dm42_fns.cc ****         ANN2_LCD_X, ANN_LCD_DY, 8*ann_dx[a]);
 803:dm/dm42_fns.cc ****   }
 804:dm/dm42_fns.cc **** 
 805:dm/dm42_fns.cc ****   // Draw Alpha annunciator
 806:dm/dm42_fns.cc ****   if ( alpha_table != ALPHA_INACTIVE ) {
 807:dm/dm42_fns.cc ****     lcd_draw_img_part(ann01+ANN_BPL-3*alpha_table-ann_dx[a],
 808:dm/dm42_fns.cc ****           496-ann_lcd_x[a], ANN_LCD_Y,
 809:dm/dm42_fns.cc ****           ANN_LCD_X, ANN_LCD_DY, 8*ann_dx[a]);
 810:dm/dm42_fns.cc ****   }
 811:dm/dm42_fns.cc **** 
 812:dm/dm42_fns.cc ****   lcd_changed |= LCD_CHG_LCD;
 813:dm/dm42_fns.cc **** }
 814:dm/dm42_fns.cc **** 
 815:dm/dm42_fns.cc **** 
 816:dm/dm42_fns.cc **** void check_for_repaint(int what) {
 817:dm/dm42_fns.cc ****   // No repaints in main menu
 818:dm/dm42_fns.cc ****   if ( ST(STAT_MENU) ) return;
 819:dm/dm42_fns.cc **** 
 820:dm/dm42_fns.cc ****   // Drive the repaint directly from here
 821:dm/dm42_fns.cc ****   if ( what>=0 || header_timeout() || (lcd_update_timeout() && !is_pgm_mode()) ) {
 822:dm/dm42_fns.cc ****     if ( header_timeout() )
 823:dm/dm42_fns.cc ****       disp_header();
 824:dm/dm42_fns.cc ****     if ( (what>=0 || lcd_update_timeout()) && !is_pgm_mode() )
 825:dm/dm42_fns.cc ****       disp_regs(what);
 826:dm/dm42_fns.cc ****     lcd_refresh();
 827:dm/dm42_fns.cc ****     lcd_changed = 0;
 828:dm/dm42_fns.cc ****   }
ARM GAS  /tmp/ccGYckNR.s 			page 16


 829:dm/dm42_fns.cc **** }
 830:dm/dm42_fns.cc **** 
 831:dm/dm42_fns.cc **** 
 832:dm/dm42_fns.cc **** /*
 833:dm/dm42_fns.cc ****  ▄▄▄▄▄           ▀             ▄                 
 834:dm/dm42_fns.cc ****  █   ▀█  ▄ ▄▄  ▄▄▄    ▄ ▄▄   ▄▄█▄▄   ▄▄▄    ▄ ▄▄ 
 835:dm/dm42_fns.cc ****  █▄▄▄█▀  █▀  ▀   █    █▀  █    █    █▀  █   █▀  ▀
 836:dm/dm42_fns.cc ****  █       █       █    █   █    █    █▀▀▀▀   █    
 837:dm/dm42_fns.cc ****  █       █     ▄▄█▄▄  █   █    ▀▄▄  ▀█▄▄▀   █    
 838:dm/dm42_fns.cc **** 
 839:dm/dm42_fns.cc **** */
 840:dm/dm42_fns.cc **** 
 841:dm/dm42_fns.cc **** 
 842:dm/dm42_fns.cc **** void print_wait_for(int what) {
 843:dm/dm42_fns.cc ****   while ( printer_busy_for(what) ) {
 844:dm/dm42_fns.cc ****     check_for_repaint(LCD_UPD_DFLT);
 845:dm/dm42_fns.cc ****   }
 846:dm/dm42_fns.cc **** }
 847:dm/dm42_fns.cc **** 
 848:dm/dm42_fns.cc **** int is_gr_print = 0;
 849:dm/dm42_fns.cc **** 
 850:dm/dm42_fns.cc **** volatile uint8_t printer_was_graphics = 0;
 851:dm/dm42_fns.cc **** 
 852:dm/dm42_fns.cc **** uint get_printer_delay() {
 853:dm/dm42_fns.cc ****   return core_printer_delay();
 854:dm/dm42_fns.cc **** }
 855:dm/dm42_fns.cc **** 
 856:dm/dm42_fns.cc **** 
 857:dm/dm42_fns.cc **** // Debug only
 858:dm/dm42_fns.cc **** char* str_from_hp(char const* s, int length) {
 859:dm/dm42_fns.cc ****   const int maxlen = 76;
 860:dm/dm42_fns.cc ****   static char ss[maxlen+4];
 861:dm/dm42_fns.cc ****   char * d = ss;
 862:dm/dm42_fns.cc **** 
 863:dm/dm42_fns.cc ****   for(int a=0; a<length; a++) {
 864:dm/dm42_fns.cc ****     int b = hp2utfchar(d, s[a]);
 865:dm/dm42_fns.cc ****     d += b;
 866:dm/dm42_fns.cc ****     if (d-ss > maxlen) break;
 867:dm/dm42_fns.cc ****   }
 868:dm/dm42_fns.cc ****   *d = 0;
 869:dm/dm42_fns.cc **** 
 870:dm/dm42_fns.cc ****   return ss;
 871:dm/dm42_fns.cc **** }
 872:dm/dm42_fns.cc **** 
 873:dm/dm42_fns.cc **** 
 874:dm/dm42_fns.cc **** void draw_hp42_lcd(const char *bits, int bytesperline, int x, int y, int width, int height) {
 875:dm/dm42_fns.cc **** 
 876:dm/dm42_fns.cc ****   #define HP_LCD_X 131
 877:dm/dm42_fns.cc ****   #define HP_LCD_Y  16
 878:dm/dm42_fns.cc **** 
 879:dm/dm42_fns.cc ****    // Pixel size
 880:dm/dm42_fns.cc ****   uint const px = is_graphics ? 3 : 2;
 881:dm/dm42_fns.cc ****   uint const py = is_graphics ? 4 : 2;
 882:dm/dm42_fns.cc ****   uint const x_shft = is_graphics ? 0 : 1;
 883:dm/dm42_fns.cc **** 
 884:dm/dm42_fns.cc ****   uint const lcd_y_base = LCD_HEADER_LINES + LCD_ANN_LINES + 2; // Bottom // Top: LCD_Y - 4;
 885:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 17


 886:dm/dm42_fns.cc ****   uint const adx = px*(HP_LCD_X+1)+1;
 887:dm/dm42_fns.cc ****   uint const ady = py*HP_LCD_Y;
 888:dm/dm42_fns.cc ****   uint const ax = LCD_X - adx - 8*x_shft;
 889:dm/dm42_fns.cc ****   uint const ay = lcd_y_base;
 890:dm/dm42_fns.cc ****   lcd_fill_rect(ax-2, ay-2, adx+4, ady+4,1);
 891:dm/dm42_fns.cc ****   lcd_fill_rect(ax-1, ay-1, adx+2, ady+2,0);
 892:dm/dm42_fns.cc **** 
 893:dm/dm42_fns.cc ****   uint const px_mask = (1 << px)-1;
 894:dm/dm42_fns.cc ****   #define HP_LCD_X_BYTES ((HP_LCD_X*px+7)/8)
 895:dm/dm42_fns.cc ****   #define LCD_X_BYTES (LCD_X/8)
 896:dm/dm42_fns.cc ****   uint lcd_y = lcd_y_base + py*y;
 897:dm/dm42_fns.cc ****   uint8_t *c;
 898:dm/dm42_fns.cc ****   uint i,j;
 899:dm/dm42_fns.cc ****   for (int v = y; v < y + height; v++) {
 900:dm/dm42_fns.cc ****     uint8_t *bi = (uint8_t*)(bits + (v+1) * bytesperline - 1 );
 901:dm/dm42_fns.cc ****     c = lcd_line_addr(lcd_y) + x_shft; // lbuf+2
 902:dm/dm42_fns.cc ****     uint n = HP_LCD_X_BYTES;
 903:dm/dm42_fns.cc ****     uint outbits = 8;
 904:dm/dm42_fns.cc ****     uint z=0xFFFFFF, m=px_mask; // This way z support px <= 3
 905:dm/dm42_fns.cc ****     uint i_mask = 8;
 906:dm/dm42_fns.cc **** 
 907:dm/dm42_fns.cc ****     // Translate each byte
 908:dm/dm42_fns.cc ****     for(;;) {
 909:dm/dm42_fns.cc ****       int b = *bi--;
 910:dm/dm42_fns.cc ****       for( i=i_mask; i; i>>=1) {
 911:dm/dm42_fns.cc ****         if ( (b&i) != 0) z &= ~m;
 912:dm/dm42_fns.cc ****         m <<= px;
 913:dm/dm42_fns.cc ****         if ( !--outbits ) {
 914:dm/dm42_fns.cc ****           for(j=0; j<px; j++) {
 915:dm/dm42_fns.cc ****             c[0] = z & 0xFF; z >>= 8; c++; n--; if (n==0) goto lbuf_end;
 916:dm/dm42_fns.cc ****           }
 917:dm/dm42_fns.cc ****           outbits=8; z=0xFFFFFF; m=px_mask;
 918:dm/dm42_fns.cc ****         }
 919:dm/dm42_fns.cc ****       }
 920:dm/dm42_fns.cc ****       i_mask = 0x80;
 921:dm/dm42_fns.cc ****     }
 922:dm/dm42_fns.cc **** lbuf_end:
 923:dm/dm42_fns.cc ****     c = lcd_line_addr(lcd_y++)+x_shft; // First line already filled
 924:dm/dm42_fns.cc ****     for(i=1; i<py; i++) {
 925:dm/dm42_fns.cc ****       uint8_t * cc = lcd_line_addr(lcd_y++)+x_shft;
 926:dm/dm42_fns.cc ****       memcpy(cc,c,HP_LCD_X_BYTES);
 927:dm/dm42_fns.cc ****     }
 928:dm/dm42_fns.cc ****   }
 929:dm/dm42_fns.cc **** }
 930:dm/dm42_fns.cc **** 
 931:dm/dm42_fns.cc **** // Print to file
 932:dm/dm42_fns.cc **** void prtof_add_graphics_lines(const char *bits, int bytesperline, int width, int height);
 933:dm/dm42_fns.cc **** void prtof_add_text(const char *str, int len, int dbl);
 934:dm/dm42_fns.cc **** void prtof_add_gr_text(const char *bits, int bytesperline, int width, int height);
 935:dm/dm42_fns.cc **** 
 936:dm/dm42_fns.cc **** 
 937:dm/dm42_fns.cc **** 
 938:dm/dm42_fns.cc **** } // "C"
 939:dm/dm42_fns.cc **** 
 940:dm/dm42_fns.cc **** 
 941:dm/dm42_fns.cc **** 
 942:dm/dm42_fns.cc **** /*
ARM GAS  /tmp/ccGYckNR.s 			page 18


 943:dm/dm42_fns.cc **** ▄▄▄▄▄▄▄  ▄▄▄▄  ▄▄▄▄    ▄▄▄▄         ▄    ▄          ▀  
 944:dm/dm42_fns.cc ****    █    ▄▀  ▀▄ █   ▀▄ ▄▀  ▀▄        █    █ ▄ ▄▄   ▄▄▄    
 945:dm/dm42_fns.cc ****    █    █    █ █    █ █    █   █    █    █ █▀  █    █    █ █ █  
 946:dm/dm42_fns.cc ****    █    █    █ █    █ █    █        █    █ █   █    █    █ █ █  █  
 947:dm/dm42_fns.cc ****    █     █▄▄█  █▄▄▄▀   █▄▄█    █    ▀▄▄▄▄▀ █   █  ▄
 948:dm/dm42_fns.cc ****                                                                 █                                
 949:dm/dm42_fns.cc **** 
 950:dm/dm42_fns.cc **** 
 951:dm/dm42_fns.cc **** 
 952:dm/dm42_fns.cc **** 
 953:dm/dm42_fns.cc **** 
 954:dm/dm42_fns.cc **** // Position related callbacks
 955:dm/dm42_fns.cc **** int shell_get_acceleration(double *x, double *y, double *z) {
 956:dm/dm42_fns.cc ****   DBGSHELL("shell_get_acceleration\n");
 957:dm/dm42_fns.cc ****   return 0;
 958:dm/dm42_fns.cc **** }
 959:dm/dm42_fns.cc **** int shell_get_location(double*, double*, double*, double*, double*) {
 960:dm/dm42_fns.cc ****   DBGSHELL("shell_get_location\n");
 961:dm/dm42_fns.cc ****   return 0;
 962:dm/dm42_fns.cc **** }
 963:dm/dm42_fns.cc **** int shell_get_heading(double*, double*, double*, double*, double*, double*) {
 964:dm/dm42_fns.cc ****   DBGSHELL("shell_get_heading\n");
 965:dm/dm42_fns.cc ****   return 0;
 966:dm/dm42_fns.cc **** }
 967:dm/dm42_fns.cc **** // -----
 968:dm/dm42_fns.cc **** 
 969:dm/dm42_fns.cc **** 
 970:dm/dm42_fns.cc **** /*
 971:dm/dm42_fns.cc ****   ▄▄▄▄  █             ▀▀█    ▀▀█             ▄▄   ▄▄▄▄▄  ▄▄
 972:dm/dm42_fns.cc ****  █▀   ▀ █ ▄▄    ▄▄▄     █      █             ██   █   ▀█   █   
 973:dm/dm42_fns.cc ****  ▀█▄▄▄  █▀  █  █▀  █    █      █            █  █  █▄▄▄█▀ 
 974:dm/dm42_fns.cc ****      ▀█ █   █  █▀▀▀▀    █      █            █▄▄█  █        █   
 975:dm/dm42_fns.cc ****  ▀▄▄▄█▀ █   █  ▀█▄▄▀    ▀▄▄    ▀▄▄         █    █ █    
 976:dm/dm42_fns.cc **** 
 977:dm/dm42_fns.cc **** 
 978:dm/dm42_fns.cc **** 
 979:dm/dm42_fns.cc **** void shell_print(const char *text, int length,
 980:dm/dm42_fns.cc ****   const char *bits, int bytesperline,
 981:dm/dm42_fns.cc ****   int x, int y, int width, int height)
 982:dm/dm42_fns.cc **** {
 983:dm/dm42_fns.cc ****   const int sz = 24; // Printer has 24 chars per line
 984:dm/dm42_fns.cc ****   char bb[sz+1];
 985:dm/dm42_fns.cc ****   int len = (length > sz) ? sz : length;
 986:dm/dm42_fns.cc ****   hp2print(bb,text,len);
 987:dm/dm42_fns.cc ****   bb[len]=0;
 988:dm/dm42_fns.cc **** 
 989:dm/dm42_fns.cc ****   printer_set_delay(get_printer_delay());
 990:dm/dm42_fns.cc **** 
 991:dm/dm42_fns.cc **** #ifdef SHELL_DEBUG
 992:dm/dm42_fns.cc ****   DBGSHELL("shell_print: %s[%i]  delay=%i\n", bb, length, get_printer_delay());
 993:dm/dm42_fns.cc ****   DBGSHELL(".. xy=%ix%i wh=%ix%i bpl=%i\n", x,y, width,height, bytesperline);
 994:dm/dm42_fns.cc ****   //dump_buffer(bits, bytesperline*height);
 995:dm/dm42_fns.cc **** #endif
 996:dm/dm42_fns.cc **** 
 997:dm/dm42_fns.cc ****   if ( !strncmp(text,"<lcd>",5) ) {
 998:dm/dm42_fns.cc ****     if ( width > MAX_82240_WIDTH )
 999:dm/dm42_fns.cc ****       width = MAX_82240_WIDTH;
ARM GAS  /tmp/ccGYckNR.s 			page 19


1000:dm/dm42_fns.cc **** 
1001:dm/dm42_fns.cc ****     lcd_refresh(); // Show annunciator
1002:dm/dm42_fns.cc **** 
1003:dm/dm42_fns.cc ****     if (is_print_to_file(PRTOF_GRAPHICS)) {
1004:dm/dm42_fns.cc ****       prtof_add_graphics_lines(bits, bytesperline, width, height);
1005:dm/dm42_fns.cc ****     }
1006:dm/dm42_fns.cc **** 
1007:dm/dm42_fns.cc ****     if (is_print_to_file(PRTOF_TEXT)) {
1008:dm/dm42_fns.cc ****       if (is_print_to_file(PRTOF_GR_IN_TXT))
1009:dm/dm42_fns.cc ****         prtof_add_gr_text(bits, bytesperline, width, height);
1010:dm/dm42_fns.cc ****       else
1011:dm/dm42_fns.cc ****         prtof_add_text(text,5,0);
1012:dm/dm42_fns.cc ****     }
1013:dm/dm42_fns.cc **** 
1014:dm/dm42_fns.cc ****     if (is_print_to_file(PRTOF_NOIR))
1015:dm/dm42_fns.cc ****       return;
1016:dm/dm42_fns.cc **** 
1017:dm/dm42_fns.cc ****     // Display graphics
1018:dm/dm42_fns.cc ****     if ( !printer_was_graphics ) {
1019:dm/dm42_fns.cc ****       print_byte(4); // Print line and leave print head at right; use before each line of graphics 
1020:dm/dm42_fns.cc ****       printer_was_graphics = 1;
1021:dm/dm42_fns.cc ****     }
1022:dm/dm42_fns.cc ****     
1023:dm/dm42_fns.cc ****     for(uint iy = 0; iy < (uint)height; iy+=8 ) {
1024:dm/dm42_fns.cc ****       uint ix = iy*bytesperline;
1025:dm/dm42_fns.cc ****       
1026:dm/dm42_fns.cc ****       // Print single line (= 8 lines from bits)
1027:dm/dm42_fns.cc ****       print_wait_for(PRINT_GRA_LN);
1028:dm/dm42_fns.cc ****       print_byte(27);    // ESC
1029:dm/dm42_fns.cc ****       print_byte(width); // number of columns
1030:dm/dm42_fns.cc ****       
1031:dm/dm42_fns.cc ****       for(uint xx=0; xx < (uint)width; xx++) {
1032:dm/dm42_fns.cc **** 
1033:dm/dm42_fns.cc ****         uint8_t msk = 1 << (xx & 7);
1034:dm/dm42_fns.cc ****         uint k = ix + (xx>>3);
1035:dm/dm42_fns.cc **** 
1036:dm/dm42_fns.cc ****         uint8_t a = 0; // byte to send
1037:dm/dm42_fns.cc ****         uint8_t amsk = 1;
1038:dm/dm42_fns.cc ****         const uint lasty = (iy+8 < (uint)height) ? iy+8 : height; // Limit for y
1039:dm/dm42_fns.cc ****         for (uint yy=0; yy < lasty; yy++,k+=bytesperline,amsk<<=1)
1040:dm/dm42_fns.cc ****           if ( bits[k] & msk ) a |= amsk;
1041:dm/dm42_fns.cc ****         print_byte(a);
1042:dm/dm42_fns.cc ****       }
1043:dm/dm42_fns.cc ****       // Whole line sent
1044:dm/dm42_fns.cc ****       print_byte(4); // Flush the line
1045:dm/dm42_fns.cc ****       printer_advance_buf(PRINT_GRA_LN);
1046:dm/dm42_fns.cc ****     }
1047:dm/dm42_fns.cc ****     return;
1048:dm/dm42_fns.cc ****   }
1049:dm/dm42_fns.cc **** 
1050:dm/dm42_fns.cc ****   // Text print
1051:dm/dm42_fns.cc ****   if (is_print_to_file(PRTOF_GRAPHICS)) {
1052:dm/dm42_fns.cc ****     prtof_add_graphics_lines(bits, bytesperline, width, height);
1053:dm/dm42_fns.cc ****   }
1054:dm/dm42_fns.cc **** 
1055:dm/dm42_fns.cc ****   if (is_print_to_file(PRTOF_TEXT)) {
1056:dm/dm42_fns.cc ****     prtof_add_text(text, length, is_wide_print());
ARM GAS  /tmp/ccGYckNR.s 			page 20


1057:dm/dm42_fns.cc ****   }
1058:dm/dm42_fns.cc **** 
1059:dm/dm42_fns.cc ****   if (is_print_to_file(PRTOF_NOIR))
1060:dm/dm42_fns.cc ****     return;
1061:dm/dm42_fns.cc ****   
1062:dm/dm42_fns.cc ****   lcd_refresh(); // Show annunciator
1063:dm/dm42_fns.cc ****   print_wait_for(PRINT_TXT_LN);
1064:dm/dm42_fns.cc ****   
1065:dm/dm42_fns.cc ****   if ( !is_gr_print && is_wide_print() ) {
1066:dm/dm42_fns.cc ****     print_byte(27); // ESC
1067:dm/dm42_fns.cc ****     print_byte(253);// Start printing expanded characters
1068:dm/dm42_fns.cc ****   }
1069:dm/dm42_fns.cc **** 
1070:dm/dm42_fns.cc ****   for(int i = 0; i < length; i++) {
1071:dm/dm42_fns.cc ****     char b = is_gr_print ? text[i] : bb[i];
1072:dm/dm42_fns.cc ****     if ( !is_gr_print && (b == 0x1b) && (i+1<length) && text[i+1]<=166 ) {
1073:dm/dm42_fns.cc ****       is_gr_print = text[i+1]+2;
1074:dm/dm42_fns.cc ****       print_wait_for(PRINT_GRA_LN);
1075:dm/dm42_fns.cc ****     }
1076:dm/dm42_fns.cc ****     //if ( b == '\n' ) b = 10; // printer expects LF
1077:dm/dm42_fns.cc ****     printf("[%02x:%c]\n",(int)b,isprint(b)?b:'_');
1078:dm/dm42_fns.cc ****     print_byte(b);
1079:dm/dm42_fns.cc ****     if (is_gr_print > 0) {
1080:dm/dm42_fns.cc ****       is_gr_print--;
1081:dm/dm42_fns.cc ****       if (!is_gr_print)
1082:dm/dm42_fns.cc ****         printer_advance_buf(PRINT_TXT_LN);
1083:dm/dm42_fns.cc ****     }
1084:dm/dm42_fns.cc ****   }
1085:dm/dm42_fns.cc ****   if ( !is_gr_print ) {
1086:dm/dm42_fns.cc ****     print_byte(10); // Flush the line
1087:dm/dm42_fns.cc ****     if ( is_wide_print() ) {
1088:dm/dm42_fns.cc ****       print_byte(27); // ESC
1089:dm/dm42_fns.cc ****       print_byte(252);// Return to normal-width characters
1090:dm/dm42_fns.cc ****     }
1091:dm/dm42_fns.cc ****     printer_advance_buf(PRINT_TXT_LN);
1092:dm/dm42_fns.cc ****     printer_was_graphics = 0;
1093:dm/dm42_fns.cc ****   }
1094:dm/dm42_fns.cc **** }
1095:dm/dm42_fns.cc **** 
1096:dm/dm42_fns.cc **** 
1097:dm/dm42_fns.cc **** 
1098:dm/dm42_fns.cc **** void shell_malloc_fail(size_t size, const char * file, int line) {
1099:dm/dm42_fns.cc ****   char * fn = (char*)file;
1100:dm/dm42_fns.cc ****   int flen = strlen(file);
1101:dm/dm42_fns.cc **** 
1102:dm/dm42_fns.cc ****   lcd_writeNl(t20);  
1103:dm/dm42_fns.cc ****   t20->y = lcd_for_dm42(DISP_ALLOC_FAIL);
1104:dm/dm42_fns.cc ****   t20->y += 18;
1105:dm/dm42_fns.cc ****   if ( flen > 40 ) fn += flen-40;
1106:dm/dm42_fns.cc **** 
1107:dm/dm42_fns.cc ****   lcd_puts(t20,"Unhandled memory allocation fail file:");
1108:dm/dm42_fns.cc ****   lcd_puts(t20, fn);
1109:dm/dm42_fns.cc ****   lcd_print(t20,"at line %i", line);
1110:dm/dm42_fns.cc ****   lcd_print(t20,"size %i",size);
1111:dm/dm42_fns.cc ****   t20->y = LCD_Y-lcd_lineHeight(t20);
1112:dm/dm42_fns.cc ****   lcd_puts(t20,"Press EXIT to RESET the calculator...");
1113:dm/dm42_fns.cc ****   lcd_refresh();
ARM GAS  /tmp/ccGYckNR.s 			page 21


1114:dm/dm42_fns.cc ****   set_reset_magic(ALLOC_FAIL_MAGIC);
1115:dm/dm42_fns.cc ****   sys_reset();
1116:dm/dm42_fns.cc **** }
1117:dm/dm42_fns.cc **** 
1118:dm/dm42_fns.cc **** 
1119:dm/dm42_fns.cc **** int shell_low_battery() {
1120:dm/dm42_fns.cc ****   bool lowbat = get_lowbat_state();
1121:dm/dm42_fns.cc ****   DBGSHELL("shell_low_battery\n");
1122:dm/dm42_fns.cc ****   
1123:dm/dm42_fns.cc ****   if (lowbat == NOT_ANN(BATTERY)) {
1124:dm/dm42_fns.cc ****     SETBY_ANN(lowbat,ANN_BATTERY);
1125:dm/dm42_fns.cc ****     skin_repaint_annunciator(0, 0); // Always repaint all
1126:dm/dm42_fns.cc ****   }
1127:dm/dm42_fns.cc ****   return lowbat;
1128:dm/dm42_fns.cc **** }
1129:dm/dm42_fns.cc **** 
1130:dm/dm42_fns.cc **** double shell_vbat() {
1131:dm/dm42_fns.cc ****   double d = get_vbat();
1132:dm/dm42_fns.cc ****   return d/1000;
1133:dm/dm42_fns.cc **** }
1134:dm/dm42_fns.cc **** 
1135:dm/dm42_fns.cc **** int shell_dev_id() {
1136:dm/dm42_fns.cc ****   return get_hw_id();
1137:dm/dm42_fns.cc **** }
1138:dm/dm42_fns.cc **** 
1139:dm/dm42_fns.cc **** 
1140:dm/dm42_fns.cc **** /* pre 2.0.7 */
1141:dm/dm42_fns.cc **** #ifdef FREE42_PRE_207_IFC
1142:dm/dm42_fns.cc **** 
1143:dm/dm42_fns.cc **** double shell_random_seed() {
1144:dm/dm42_fns.cc ****   DBGSHELL("shell_random_seed\n");
1145:dm/dm42_fns.cc ****   dt_t dt;
1146:dm/dm42_fns.cc ****   tm_t tm;
1147:dm/dm42_fns.cc ****   rtc_read(&tm, &dt);
1148:dm/dm42_fns.cc ****   int z = ((tm.hour*60+tm.min)*60+tm.sec)*100+tm.csec;
1149:dm/dm42_fns.cc ****   return fmod(0.78237947239847*z,1.0);
1150:dm/dm42_fns.cc **** }
1151:dm/dm42_fns.cc **** 
1152:dm/dm42_fns.cc **** #else
1153:dm/dm42_fns.cc **** 
1154:dm/dm42_fns.cc **** int64_t shell_random_seed() {
1155:dm/dm42_fns.cc ****   DBGSHELL("shell_random_seed\n");
1156:dm/dm42_fns.cc ****   dt_t dt;
1157:dm/dm42_fns.cc ****   tm_t tm;
1158:dm/dm42_fns.cc ****   rtc_read(&tm, &dt);
1159:dm/dm42_fns.cc ****   int64_t z = ((tm.hour*60+tm.min)*60+tm.sec)*100+tm.csec;
1160:dm/dm42_fns.cc ****   z = z*11574074 + julian_day(&dt);
1161:dm/dm42_fns.cc ****   return z;
1162:dm/dm42_fns.cc **** }
1163:dm/dm42_fns.cc **** 
1164:dm/dm42_fns.cc **** 
1165:dm/dm42_fns.cc **** #endif
1166:dm/dm42_fns.cc **** 
1167:dm/dm42_fns.cc **** 
1168:dm/dm42_fns.cc **** int shell_decimal_point() {
1169:dm/dm42_fns.cc ****   return decimal_point ? 1 : 0;
1170:dm/dm42_fns.cc **** }
ARM GAS  /tmp/ccGYckNR.s 			page 22


1171:dm/dm42_fns.cc **** 
1172:dm/dm42_fns.cc **** 
1173:dm/dm42_fns.cc **** void shell_beeper(int frequency, int duration) {
1174:dm/dm42_fns.cc ****   DBGSHELL("shell_beeper fr=%i dur=%i\n", frequency, duration);
1175:dm/dm42_fns.cc ****   // FIXME: Eat the time when BEEP is OFF?
1176:dm/dm42_fns.cc ****   //if ( !ST(STAT_BEEP_MUTE) ) 
1177:dm/dm42_fns.cc ****   {
1178:dm/dm42_fns.cc ****     if ( duration > 1000 ) duration = 1000; // Well, we don't want to block for ages
1179:dm/dm42_fns.cc ****     start_buzzer_freq(frequency*1000);
1180:dm/dm42_fns.cc ****     for( ; duration > 0 ; duration -= 10) {
1181:dm/dm42_fns.cc ****       sys_delay(duration > 10 ? 10 : duration);
1182:dm/dm42_fns.cc ****       check_for_repaint(LCD_UPD_DFLT);
1183:dm/dm42_fns.cc ****       // FIXME: Break on key press?
1184:dm/dm42_fns.cc ****     }
1185:dm/dm42_fns.cc ****   }
1186:dm/dm42_fns.cc ****   stop_buzzer();
1187:dm/dm42_fns.cc **** }
1188:dm/dm42_fns.cc **** 
1189:dm/dm42_fns.cc **** 
1190:dm/dm42_fns.cc **** void shell_get_time_date(uint4 *tim, uint4 *date, int *weekday) {
1191:dm/dm42_fns.cc **** #ifndef DBG_NOLCD
1192:dm/dm42_fns.cc ****   DBGSHELL("shell_get_time_date\n");
1193:dm/dm42_fns.cc **** #endif
1194:dm/dm42_fns.cc **** 
1195:dm/dm42_fns.cc ****   dt_t dt;
1196:dm/dm42_fns.cc ****   tm_t tm;
1197:dm/dm42_fns.cc **** 
1198:dm/dm42_fns.cc ****   rtc_read(&tm, &dt);
1199:dm/dm42_fns.cc ****   if(tim)
1200:dm/dm42_fns.cc ****     *tim  = ((tm.hour*100 + tm.min)*100 + tm.sec)*100 + tm.csec; // 12345600;
1201:dm/dm42_fns.cc ****   if(date)
1202:dm/dm42_fns.cc ****     *date = dt.year*10000 + dt.month*100 + dt.day; // 20160103;
1203:dm/dm42_fns.cc ****   if(weekday)
1204:dm/dm42_fns.cc ****     *weekday = tm.dow==6 ? 0 : tm.dow+1; // Free42 0-Sun,1-Mon ... Our lib 0-Mon, 1-Tue
1205:dm/dm42_fns.cc **** }
1206:dm/dm42_fns.cc **** 
1207:dm/dm42_fns.cc **** 
1208:dm/dm42_fns.cc **** 
1209:dm/dm42_fns.cc **** 
1210:dm/dm42_fns.cc **** void shell_blitter(const char *bits, int bytesperline, int x, int y, int width, int height) {
1211:dm/dm42_fns.cc **** #ifndef DBG_NOLCD  
1212:dm/dm42_fns.cc ****   DBGSHELL("Shell blitter: bpl=%i  x=%i y=%i   w=%i h=%i  tick=%li  exttim=%i\n",
1213:dm/dm42_fns.cc ****     bytesperline, x, y, width, height, sys_tick_count(), core_settings.enable_ext_time);
1214:dm/dm42_fns.cc **** #endif
1215:dm/dm42_fns.cc **** 
1216:dm/dm42_fns.cc ****   lcd_changed |= LCD_CHG_LCD|LCD_CHG_REGS;
1217:dm/dm42_fns.cc **** 
1218:dm/dm42_fns.cc **** #if defined(THELL_DEBUG) && !defined(DBG_NOLCD)
1219:dm/dm42_fns.cc ****   char bb[LCD_HP_CHARS+1];
1220:dm/dm42_fns.cc ****   hp2font(bb,tlcd[0],LCD_HP_CHARS);
1221:dm/dm42_fns.cc ****   DBGSHELL("LCD[0]:%s\n",bb);
1222:dm/dm42_fns.cc ****   hp2font(bb,tlcd[1],LCD_HP_CHARS);
1223:dm/dm42_fns.cc ****   DBGSHELL("LCD[1]:%s\n",bb);
1224:dm/dm42_fns.cc **** #endif
1225:dm/dm42_fns.cc ****   set_lcd_update_timeout();
1226:dm/dm42_fns.cc **** 
1227:dm/dm42_fns.cc **** }
ARM GAS  /tmp/ccGYckNR.s 			page 23


1228:dm/dm42_fns.cc **** 
1229:dm/dm42_fns.cc **** 
1230:dm/dm42_fns.cc **** void skin_repaint_annunciator(int which, bool state) {
1231:dm/dm42_fns.cc **** #ifndef DBG_NOLCD
1232:dm/dm42_fns.cc ****   DBGSHELL("skin_repaint_annunciator\n");
1233:dm/dm42_fns.cc **** #endif
1234:dm/dm42_fns.cc **** 
1235:dm/dm42_fns.cc ****   // No more strings
1236:dm/dm42_fns.cc ****   //lcd_print_at(5, annstr);
1237:dm/dm42_fns.cc **** 
1238:dm/dm42_fns.cc ****   repaint_annunciators();
1239:dm/dm42_fns.cc **** }
1240:dm/dm42_fns.cc **** 
1241:dm/dm42_fns.cc **** void shell_annunciators(int updn, int shf, int prt, int run, int g, int rad) {
1242:dm/dm42_fns.cc ****   DBGSHELL("shell_annunciators\n");
1243:dm/dm42_fns.cc ****     if (updn != -1 && NOT_ANN(UPDOWN) == updn) {
1244:dm/dm42_fns.cc ****       SETBY_ANN(updn,ANN_UPDOWN);
1245:dm/dm42_fns.cc ****       //skin_repaint_annunciator(1, ann_updown);
1246:dm/dm42_fns.cc ****     }
1247:dm/dm42_fns.cc ****     if (shf != -1 && NOT_ANN(SHIFT) == shf) {
1248:dm/dm42_fns.cc ****       SETBY_ANN(shf,ANN_SHIFT);
1249:dm/dm42_fns.cc ****       //skin_repaint_annunciator(2, ann_shift);
1250:dm/dm42_fns.cc ****     }
1251:dm/dm42_fns.cc ****     if (prt != -1 && NOT_ANN(PRINT) == prt) {
1252:dm/dm42_fns.cc ****       SETBY_ANN(prt,ANN_PRINT);
1253:dm/dm42_fns.cc ****       //skin_repaint_annunciator(3, ann_print);
1254:dm/dm42_fns.cc ****     }
1255:dm/dm42_fns.cc ****     if (run != -1 && NOT_ANN(RUN) == run) {
1256:dm/dm42_fns.cc ****       SETBY_ANN(run,ANN_RUN);
1257:dm/dm42_fns.cc ****       //skin_repaint_annunciator(4, ann_run);
1258:dm/dm42_fns.cc ****     }
1259:dm/dm42_fns.cc ****     if (g != -1 && NOT_ANN(G) == g) {
1260:dm/dm42_fns.cc ****       SETBY_ANN(g,ANN_G);
1261:dm/dm42_fns.cc ****       //skin_repaint_annunciator(6, ann_g);
1262:dm/dm42_fns.cc ****     }
1263:dm/dm42_fns.cc ****     if (rad != -1 && NOT_ANN(RAD) == rad) {
1264:dm/dm42_fns.cc ****       SETBY_ANN(rad,ANN_RAD);
1265:dm/dm42_fns.cc ****       //skin_repaint_annunciator(7, ann_rad);
1266:dm/dm42_fns.cc ****     }
1267:dm/dm42_fns.cc **** 
1268:dm/dm42_fns.cc **** #if 0
1269:dm/dm42_fns.cc ****   sprintf(annstr, "%s  %s  %s  %s  %s%s",
1270:dm/dm42_fns.cc ****     ANN(UPDOWN)?"^v":"  ",
1271:dm/dm42_fns.cc ****     ANN(SHIFT)?"SHIFT":"     ",
1272:dm/dm42_fns.cc ****     ANN(PRINT)?"PRINT":"     ",
1273:dm/dm42_fns.cc ****     ANN(RUN)?"RUN":"   ",
1274:dm/dm42_fns.cc ****     ANN(G)?"G":" ",
1275:dm/dm42_fns.cc ****     ANN(RAD)?"RAD":"   "
1276:dm/dm42_fns.cc ****   );
1277:dm/dm42_fns.cc **** #endif
1278:dm/dm42_fns.cc ****   skin_repaint_annunciator(0, 0); // Always repaint all
1279:dm/dm42_fns.cc **** 
1280:dm/dm42_fns.cc ****   //DBGSHELL("Shell annunciators %s\n", annstr);
1281:dm/dm42_fns.cc **** 
1282:dm/dm42_fns.cc **** }
1283:dm/dm42_fns.cc **** 
1284:dm/dm42_fns.cc **** /* Should be called periodically by core.
ARM GAS  /tmp/ccGYckNR.s 			page 24


1285:dm/dm42_fns.cc ****    Return 1 on available event */
1286:dm/dm42_fns.cc **** int shell_wants_cpu() {
1287:dm/dm42_fns.cc ****   int res = !key_empty(); // || header_timeout() || lcd_update_timeout();
1288:dm/dm42_fns.cc ****   
1289:dm/dm42_fns.cc ****   reset_auto_off();
1290:dm/dm42_fns.cc ****   check_for_repaint(LCD_UPD_DFLT);
1291:dm/dm42_fns.cc **** 
1292:dm/dm42_fns.cc ****   if ( res )  {
1293:dm/dm42_fns.cc ****     DBGSHELL("shell_wants_cpu: key=%i  hdr_tout=%i  lcd_tout=%i\n", !key_empty(), header_timeout(),
1294:dm/dm42_fns.cc ****   }
1295:dm/dm42_fns.cc ****   return res;
1296:dm/dm42_fns.cc **** }
1297:dm/dm42_fns.cc **** 
1298:dm/dm42_fns.cc **** 
1299:dm/dm42_fns.cc **** int shell_read(char *buf, int4 buflen) {
1300:dm/dm42_fns.cc ****   DBGSHELL("shell_read: %08x : %i\n", (unsigned)buf, buflen);
1301:dm/dm42_fns.cc ****   uint rd;
1302:dm/dm42_fns.cc ****   pgm_res = f_read(ppgm_fp, buf, buflen, &rd);
1303:dm/dm42_fns.cc ****   DBGSHELL(" ... read %i  err=%i\n",rd,pgm_res);
1304:dm/dm42_fns.cc ****   return rd;
1305:dm/dm42_fns.cc **** }
1306:dm/dm42_fns.cc **** 
1307:dm/dm42_fns.cc **** 
1308:dm/dm42_fns.cc **** int shell_write(const char *buf, int4 buflen) {
1309:dm/dm42_fns.cc ****   DBGSHELL("shell_read: %08x : %i\n", (unsigned)buf, buflen);
1310:dm/dm42_fns.cc ****   uint wr;
1311:dm/dm42_fns.cc ****   pgm_res = f_write(ppgm_fp, buf, buflen, &wr);
1312:dm/dm42_fns.cc ****   DBGSHELL(" ... write %i  err=%i\n",wr,pgm_res);
1313:dm/dm42_fns.cc ****   return wr;
1314:dm/dm42_fns.cc **** }
1315:dm/dm42_fns.cc **** 
1316:dm/dm42_fns.cc **** 
1317:dm/dm42_fns.cc **** uint4 shell_get_mem() {
1318:dm/dm42_fns.cc ****   DBGSHELL("shell_get_mem: %i\n", sys_free_mem());
1319:dm/dm42_fns.cc ****   return sys_free_mem(); // Returns free mem
1320:dm/dm42_fns.cc **** }
1321:dm/dm42_fns.cc **** 
1322:dm/dm42_fns.cc **** uint4 shell_milliseconds() {
1323:dm/dm42_fns.cc ****   //DBGSHELL("shell_milliseconds %i  aoff=%li\n", sys_current_ms(), auto_off_cnt);
1324:dm/dm42_fns.cc ****   reset_auto_off();
1325:dm/dm42_fns.cc ****   return sys_current_ms();
1326:dm/dm42_fns.cc **** }
1327:dm/dm42_fns.cc **** 
1328:dm/dm42_fns.cc **** void shell_request_timeout3(int delay) {
1329:dm/dm42_fns.cc ****   DBGSHELL("shell_request_timeout3 %i\n", delay);
1330:dm/dm42_fns.cc ****   setTimeout3(delay);
1331:dm/dm42_fns.cc **** }
1332:dm/dm42_fns.cc **** 
1333:dm/dm42_fns.cc **** void shell_delay(int duration) {
1334:dm/dm42_fns.cc ****   DBGSHELL("shell_delay: %i\n", duration);
1335:dm/dm42_fns.cc ****   sys_delay(duration);
1336:dm/dm42_fns.cc ****   DBGSHELL("shell_delay end\n");
1337:dm/dm42_fns.cc **** }
1338:dm/dm42_fns.cc **** 
1339:dm/dm42_fns.cc **** void shell_powerdown() {
1340:dm/dm42_fns.cc ****   DBGSHELL("shell_powerdown\n");
1341:dm/dm42_fns.cc ****   SET_ST(STAT_PGM_END);
ARM GAS  /tmp/ccGYckNR.s 			page 25


1342:dm/dm42_fns.cc **** }
1343:dm/dm42_fns.cc **** 
1344:dm/dm42_fns.cc **** //#define STATEFILE_READ_DBG
1345:dm/dm42_fns.cc **** #ifdef  STATEFILE_READ_DBG
1346:dm/dm42_fns.cc **** int readix = 0;
1347:dm/dm42_fns.cc **** #endif
1348:dm/dm42_fns.cc **** 
1349:dm/dm42_fns.cc **** 
1350:dm/dm42_fns.cc **** int4 shell_read_saved_state(void *buf, int4 buflen) {
1351:dm/dm42_fns.cc ****   DBGSHELL_STATE_RW("shell_read_saved_state: %08x : %i  from %08lx\n", (unsigned)buf, buflen, (uint
1352:dm/dm42_fns.cc **** #ifdef STATEFILE_READ_DBG
1353:dm/dm42_fns.cc ****   readix += buflen;
1354:dm/dm42_fns.cc ****   if ( readix > 0x1e90 ) {
1355:dm/dm42_fns.cc ****     readix++;
1356:dm/dm42_fns.cc ****   }
1357:dm/dm42_fns.cc **** #endif  
1358:dm/dm42_fns.cc ****   uint rd;
1359:dm/dm42_fns.cc ****   pgm_res = f_read(ppgm_fp, buf, buflen, &rd);
1360:dm/dm42_fns.cc ****   DBGSHELL(" ... read %i  err=%i\n",rd,pgm_res);
1361:dm/dm42_fns.cc ****   return rd;
1362:dm/dm42_fns.cc **** }
1363:dm/dm42_fns.cc **** 
1364:dm/dm42_fns.cc **** bool shell_write_saved_state(const void *buf, int4 buflen) {
1365:dm/dm42_fns.cc ****   DBGSHELL_STATE_RW("shell_write_saved_state: %08x : %i  to %08lx\n", (unsigned)buf, buflen,(uint32
1366:dm/dm42_fns.cc **** 
1367:dm/dm42_fns.cc ****   if ( ST(STAT_SOFT_OFF) ) return true; // Don't write on soft off
1368:dm/dm42_fns.cc **** 
1369:dm/dm42_fns.cc ****   uint wr;
1370:dm/dm42_fns.cc ****   pgm_res = f_write(ppgm_fp, buf, buflen, &wr);
1371:dm/dm42_fns.cc ****   DBGSHELL(" ... write %i  err=%i\n",wr,pgm_res);
1372:dm/dm42_fns.cc ****   return pgm_res == FR_OK;
1373:dm/dm42_fns.cc **** }
1374:dm/dm42_fns.cc **** 
1375:dm/dm42_fns.cc **** 
1376:dm/dm42_fns.cc **** void shell_force_lcd_refresh(int what) {
1377:dm/dm42_fns.cc ****   check_for_repaint(what); // Force repaint
1378:dm/dm42_fns.cc **** }
1379:dm/dm42_fns.cc **** 
1380:dm/dm42_fns.cc **** 
1381:dm/dm42_fns.cc **** 
1382:dm/dm42_fns.cc **** 
1383:dm/dm42_fns.cc **** 
1384:dm/dm42_fns.cc **** /*
1385:dm/dm42_fns.cc **** ▄▄▄▄▄▄▄ █             ▀▀█    ▀▀█             ▄▄   ▄▄▄▄▄  
1386:dm/dm42_fns.cc ****    █    █ ▄▄    ▄▄▄     █      █             ██   █   ▀█   █   
1387:dm/dm42_fns.cc ****    █    █▀  █  █▀  █    █      █            █  █  █▄▄▄█▀   █   
1388:dm/dm42_fns.cc ****    █    █   █  █▀▀▀▀    █      █            █▄▄█  █        █   
1389:dm/dm42_fns.cc ****    █    █   █  ▀█▄▄▀    ▀▄▄    ▀▄▄         █    █ █      ▄▄
1390:dm/dm42_fns.cc **** */
1391:dm/dm42_fns.cc **** 
1392:dm/dm42_fns.cc **** extern "C" {
1393:dm/dm42_fns.cc **** 
1394:dm/dm42_fns.cc **** #define EDIT_PROMPT_LEN  15
1395:dm/dm42_fns.cc **** #define EDIT_LINE_LEN    79
1396:dm/dm42_fns.cc **** 
1397:dm/dm42_fns.cc **** char edit_prompt[EDIT_PROMPT_LEN+1];
1398:dm/dm42_fns.cc **** char edit_line[EDIT_LINE_LEN+1];
ARM GAS  /tmp/ccGYckNR.s 			page 26


1399:dm/dm42_fns.cc **** uint8_t is_edit;
1400:dm/dm42_fns.cc **** uint8_t is_edit_x;
1401:dm/dm42_fns.cc **** uint8_t is_graphics;
1402:dm/dm42_fns.cc **** uint8_t is_show;
1403:dm/dm42_fns.cc **** 
1404:dm/dm42_fns.cc **** void clear_tlcd_row(int row) {
1405:dm/dm42_fns.cc ****   assert_param(row>=0 && row<2);
1406:dm/dm42_fns.cc ****   memset(tlcd[row],' ',TLCD_LINELEN);
1407:dm/dm42_fns.cc ****   tlcd[row][TLCD_LINELEN] = 0;
1408:dm/dm42_fns.cc ****   if(is_graphics>1) {
1409:dm/dm42_fns.cc ****     // Was HiRes -> repaint header
1410:dm/dm42_fns.cc ****     lcd_clear_buf();
1411:dm/dm42_fns.cc ****   }
1412:dm/dm42_fns.cc **** 
1413:dm/dm42_fns.cc ****   if (!is_number_entry()) {
1414:dm/dm42_fns.cc ****     is_show = 0;
1415:dm/dm42_fns.cc ****     is_edit = is_edit_x = 0;
1416:dm/dm42_fns.cc ****   }
1417:dm/dm42_fns.cc **** }
1418:dm/dm42_fns.cc **** 
1419:dm/dm42_fns.cc **** 
1420:dm/dm42_fns.cc **** int tlcd_row_empty(int row) {
1421:dm/dm42_fns.cc ****   int x = 0;
1422:dm/dm42_fns.cc ****   while (tlcd[row][x++] == ' ') {
1423:dm/dm42_fns.cc ****     if (x == LCD_HP_CHARS) return 1;
1424:dm/dm42_fns.cc ****   }
1425:dm/dm42_fns.cc ****   return 0;
1426:dm/dm42_fns.cc **** }
1427:dm/dm42_fns.cc **** 
1428:dm/dm42_fns.cc **** 
1429:dm/dm42_fns.cc **** /*
1430:dm/dm42_fns.cc ****  ptrn  - pattern bytes by columns
1431:dm/dm42_fns.cc ****  mask  - mask for current line
1432:dm/dm42_fns.cc ****  width - width of the pattern (dx)
1433:dm/dm42_fns.cc ****  dbl   - double each pixel
1434:dm/dm42_fns.cc **** */
1435:dm/dm42_fns.cc **** int get_pattern_pixels(const char * ptrn, int width, int mask, int dbl) {
1436:dm/dm42_fns.cc ****   //const char * p = ptrn+width-1;
1437:dm/dm42_fns.cc ****   const char * p = ptrn;
1438:dm/dm42_fns.cc ****   int val = 0;
1439:dm/dm42_fns.cc **** 
1440:dm/dm42_fns.cc ****   // Two loops with constant shifts and ors seems to be better for performance
1441:dm/dm42_fns.cc ****   if ( dbl ) {
1442:dm/dm42_fns.cc ****     while ( width-- > 0 ) {
1443:dm/dm42_fns.cc ****       val <<= 2;
1444:dm/dm42_fns.cc ****       if (*p++ & mask) val |= 3;
1445:dm/dm42_fns.cc ****     }
1446:dm/dm42_fns.cc ****   } else {
1447:dm/dm42_fns.cc ****     while ( width-- > 0 ) {
1448:dm/dm42_fns.cc ****       val <<= 1;
1449:dm/dm42_fns.cc ****       if (*p++ & mask) val |= 1;
1450:dm/dm42_fns.cc ****     }
1451:dm/dm42_fns.cc ****   }
1452:dm/dm42_fns.cc ****   return val;
1453:dm/dm42_fns.cc **** }
1454:dm/dm42_fns.cc **** 
1455:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 27


1456:dm/dm42_fns.cc **** } // C
1457:dm/dm42_fns.cc **** 
1458:dm/dm42_fns.cc **** 
1459:dm/dm42_fns.cc **** void thell_draw_menu_key(int n, int highlight, const char *s, int length) {
1460:dm/dm42_fns.cc ****   DBGTHELL("thell_draw_menu_key[%i:%c%s]\n", n, highlight?'#':' ', str_from_hp(s, length));
1461:dm/dm42_fns.cc **** 
1462:dm/dm42_fns.cc ****   // No repaints in main menu
1463:dm/dm42_fns.cc ****   if ( ST(STAT_MENU) ) return;
1464:dm/dm42_fns.cc **** 
1465:dm/dm42_fns.cc ****   disp_was_menu_drawn = 1; // Note the menu was actually drawn
1466:dm/dm42_fns.cc **** 
1467:dm/dm42_fns.cc ****   // Free42 always starts menu drawing by first key, paint backgroung before first item
1468:dm/dm42_fns.cc ****   if (n == 0)
1469:dm/dm42_fns.cc ****     lcd_draw_menu_bg();
1470:dm/dm42_fns.cc **** 
1471:dm/dm42_fns.cc ****   // Re-encode menu text to normal string
1472:dm/dm42_fns.cc ****   char t[MENU_KEY_LABEL_LEN+2];
1473:dm/dm42_fns.cc ****   uint j = 0;
1474:dm/dm42_fns.cc ****   for(int i=0; i<length; i++) {
1475:dm/dm42_fns.cc ****     // Skip chars with 8th bit set - that way denotes free42 how to shortcut command names
1476:dm/dm42_fns.cc ****     if( s[i] & 0x80 ) continue;
1477:dm/dm42_fns.cc ****     // Copy and normalize
1478:dm/dm42_fns.cc ****     t[j++] = s[i]>=' ' ? s[i] : s[i]|0x80;
1479:dm/dm42_fns.cc ****     // Limit the length
1480:dm/dm42_fns.cc ****     if (j==MENU_KEY_LABEL_LEN) break;
1481:dm/dm42_fns.cc ****   }
1482:dm/dm42_fns.cc ****   t[j]=0;
1483:dm/dm42_fns.cc **** 
1484:dm/dm42_fns.cc ****   lcd_draw_menu_key(n, t, highlight);
1485:dm/dm42_fns.cc **** }
1486:dm/dm42_fns.cc **** 
1487:dm/dm42_fns.cc **** 
1488:dm/dm42_fns.cc **** void thell_edit_number(const char * prompt, int prompt_len, const char * line, int line_len) {
1489:dm/dm42_fns.cc ****   assert_param(prompt_len <= EDIT_PROMPT_LEN);
1490:dm/dm42_fns.cc ****   assert_param(line_len <= EDIT_LINE_LEN);
1491:dm/dm42_fns.cc **** 
1492:dm/dm42_fns.cc ****   hp2font(edit_prompt, prompt, prompt_len);
1493:dm/dm42_fns.cc ****   hp2font(edit_line, line, line_len);
1494:dm/dm42_fns.cc **** 
1495:dm/dm42_fns.cc ****   is_edit = 1;
1496:dm/dm42_fns.cc ****   is_edit_x = prompt[0] == 'x' && prompt[1] == 0x80;
1497:dm/dm42_fns.cc **** }
1498:dm/dm42_fns.cc **** 
1499:dm/dm42_fns.cc **** 
1500:dm/dm42_fns.cc **** void thell_draw_char(int x, int y, char c) {
1501:dm/dm42_fns.cc ****   //DBGTHELL("thell_draw_char %i %i : '%s'\n", x,y, str_from_hp(&c,1));
1502:dm/dm42_fns.cc ****   assert_param(x>=0 && x<TLCD_LINELEN);
1503:dm/dm42_fns.cc ****   assert_param(y>=0 && y<2);
1504:dm/dm42_fns.cc **** 
1505:dm/dm42_fns.cc ****   if(is_graphics>1) {
1506:dm/dm42_fns.cc ****     // Was HiRes -> repaint header
1507:dm/dm42_fns.cc ****     is_graphics = 0;
1508:dm/dm42_fns.cc ****     calc_lcd_redraw();
1509:dm/dm42_fns.cc ****   }
1510:dm/dm42_fns.cc ****   is_graphics = 0;
1511:dm/dm42_fns.cc **** 
1512:dm/dm42_fns.cc ****   tlcd[y][x] = c;
ARM GAS  /tmp/ccGYckNR.s 			page 28


1513:dm/dm42_fns.cc **** }
1514:dm/dm42_fns.cc **** 
1515:dm/dm42_fns.cc **** 
1516:dm/dm42_fns.cc **** 
1517:dm/dm42_fns.cc **** // Mode: 0=or, 1=set, 2=and_not, 3=xor 
1518:dm/dm42_fns.cc **** void thell_draw_pattern(int x, int y, const char * pattern, int pattern_width, int mode) {
1519:dm/dm42_fns.cc ****   DBGTHELL("thell_draw_pattern[%i] %i x %i - %i\n", mode, x,y, pattern_width);
1520:dm/dm42_fns.cc ****   int gm = graphics_mode();
1521:dm/dm42_fns.cc ****   
1522:dm/dm42_fns.cc ****   if (!gm) {
1523:dm/dm42_fns.cc ****     // Original graphics mode
1524:dm/dm42_fns.cc ****     is_graphics = 1;
1525:dm/dm42_fns.cc ****     return;
1526:dm/dm42_fns.cc ****   }
1527:dm/dm42_fns.cc **** 
1528:dm/dm42_fns.cc ****   if (!is_graphics) {
1529:dm/dm42_fns.cc ****     // First call - clear LCD
1530:dm/dm42_fns.cc ****     lcd_clear_buf();
1531:dm/dm42_fns.cc ****   }
1532:dm/dm42_fns.cc **** 
1533:dm/dm42_fns.cc ****   const int blt_ops[]  = {BLT_OR, BLT_OR, BLT_ANDN, BLT_XOR};
1534:dm/dm42_fns.cc ****   const int blt_sets[] = {BLT_NONE, BLT_SET, BLT_NONE, BLT_NONE};
1535:dm/dm42_fns.cc ****   const int blt_op = blt_ops[mode];
1536:dm/dm42_fns.cc ****   const int blt_set = blt_sets[mode];
1537:dm/dm42_fns.cc ****   const int MAXX = gr_MAXX();
1538:dm/dm42_fns.cc ****   //const int MAXY = gr_MAXY();
1539:dm/dm42_fns.cc **** 
1540:dm/dm42_fns.cc ****   // Normalize
1541:dm/dm42_fns.cc ****   if (x<0) {
1542:dm/dm42_fns.cc ****     pattern_width += x;
1543:dm/dm42_fns.cc ****     pattern += -x;
1544:dm/dm42_fns.cc ****     x=0;
1545:dm/dm42_fns.cc ****   }
1546:dm/dm42_fns.cc **** 
1547:dm/dm42_fns.cc ****   if (x + pattern_width > MAXX) {
1548:dm/dm42_fns.cc ****     pattern_width = MAXX - x;
1549:dm/dm42_fns.cc ****   }
1550:dm/dm42_fns.cc **** 
1551:dm/dm42_fns.cc ****   is_graphics = gm;
1552:dm/dm42_fns.cc ****   if ( gm == 2 ) {
1553:dm/dm42_fns.cc ****     // 2x2 pixels
1554:dm/dm42_fns.cc ****     for( ; pattern_width > 0; pattern_width-=12, pattern+=12, x+=12) {
1555:dm/dm42_fns.cc ****       int const w = pattern_width<12 ? pattern_width : 12;
1556:dm/dm42_fns.cc ****       int const ww = 2*w;
1557:dm/dm42_fns.cc ****       int yy = 2*y;
1558:dm/dm42_fns.cc ****       for(int m = 1; m<0x100; m<<=1,yy+=2) {
1559:dm/dm42_fns.cc ****         int val = get_pattern_pixels(pattern, w, m, 1);
1560:dm/dm42_fns.cc ****         bitblt24(2*x, ww, yy,   val, blt_op, blt_set);
1561:dm/dm42_fns.cc ****         bitblt24(2*x, ww, yy+1, val, blt_op, blt_set);
1562:dm/dm42_fns.cc ****       }
1563:dm/dm42_fns.cc ****     }
1564:dm/dm42_fns.cc ****   }
1565:dm/dm42_fns.cc **** 
1566:dm/dm42_fns.cc ****   if ( gm == 3 ) {
1567:dm/dm42_fns.cc ****     // 1x1 pixels
1568:dm/dm42_fns.cc ****     for( ; pattern_width > 0; pattern_width-=24, pattern+=24, x+=24) {
1569:dm/dm42_fns.cc ****       int const w = pattern_width<24 ? pattern_width : 24;
ARM GAS  /tmp/ccGYckNR.s 			page 29


1570:dm/dm42_fns.cc ****       int yy = y;
1571:dm/dm42_fns.cc ****       for(int m = 1; m<0x100; m<<=1,yy++) {
1572:dm/dm42_fns.cc ****         int val = get_pattern_pixels(pattern, w, m, 0);
1573:dm/dm42_fns.cc ****         bitblt24(x, w, yy, val, blt_op, blt_set);
1574:dm/dm42_fns.cc ****       }
1575:dm/dm42_fns.cc ****     }
1576:dm/dm42_fns.cc ****   }
1577:dm/dm42_fns.cc **** 
1578:dm/dm42_fns.cc ****   lcd_changed |= LCD_CHG_REGS;
1579:dm/dm42_fns.cc ****   set_lcd_update_timeout();
1580:dm/dm42_fns.cc **** }
1581:dm/dm42_fns.cc **** 
1582:dm/dm42_fns.cc **** 
1583:dm/dm42_fns.cc **** void thell_draw_pixel(int x, int y) {
1584:dm/dm42_fns.cc ****   int gm = graphics_mode();
1585:dm/dm42_fns.cc ****   DBGTHELL("thell_draw_pixel[%i] %i x %i\n",gm,x,y);
1586:dm/dm42_fns.cc **** 
1587:dm/dm42_fns.cc ****   if (!gm) {
1588:dm/dm42_fns.cc ****     // Original graphics mode
1589:dm/dm42_fns.cc ****     is_graphics = 1;
1590:dm/dm42_fns.cc ****     return;
1591:dm/dm42_fns.cc ****   }
1592:dm/dm42_fns.cc **** 
1593:dm/dm42_fns.cc ****   if (!is_graphics) {
1594:dm/dm42_fns.cc ****     // First call - clear LCD
1595:dm/dm42_fns.cc ****     lcd_clear_buf();
1596:dm/dm42_fns.cc ****   }
1597:dm/dm42_fns.cc **** 
1598:dm/dm42_fns.cc ****   is_graphics = gm;
1599:dm/dm42_fns.cc ****   if ( gm == 2 ) {
1600:dm/dm42_fns.cc ****     // 2x2 pixels
1601:dm/dm42_fns.cc ****     x<<=1; y<<=1;
1602:dm/dm42_fns.cc ****     bitblt24(x, 2, y,   3, BLT_OR, BLT_NONE);
1603:dm/dm42_fns.cc ****     bitblt24(x, 2, y+1, 3, BLT_OR, BLT_NONE);
1604:dm/dm42_fns.cc ****   }
1605:dm/dm42_fns.cc **** 
1606:dm/dm42_fns.cc ****   if ( gm == 3 ) {
1607:dm/dm42_fns.cc ****     // 1x1 pixels
1608:dm/dm42_fns.cc ****     bitblt24(x, 1, y, 1, BLT_OR, BLT_NONE);
1609:dm/dm42_fns.cc ****   }
1610:dm/dm42_fns.cc **** 
1611:dm/dm42_fns.cc ****   lcd_changed |= LCD_CHG_REGS;
1612:dm/dm42_fns.cc ****   set_lcd_update_timeout();
1613:dm/dm42_fns.cc **** }
1614:dm/dm42_fns.cc **** 
1615:dm/dm42_fns.cc **** 
1616:dm/dm42_fns.cc **** 
1617:dm/dm42_fns.cc **** void thell_start_show() {
1618:dm/dm42_fns.cc ****   DBGTHELL("thell_start_show\n");
1619:dm/dm42_fns.cc ****   is_show = 1;
1620:dm/dm42_fns.cc **** }
1621:dm/dm42_fns.cc **** 
1622:dm/dm42_fns.cc **** void thell_clear_display() {
1623:dm/dm42_fns.cc ****   clear_tlcd_row(0);
1624:dm/dm42_fns.cc ****   clear_tlcd_row(1);
1625:dm/dm42_fns.cc **** }
1626:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 30


1627:dm/dm42_fns.cc **** 
1628:dm/dm42_fns.cc **** 
1629:dm/dm42_fns.cc **** void thell_clear_row(int row) {
1630:dm/dm42_fns.cc ****   clear_tlcd_row(row);
1631:dm/dm42_fns.cc **** }
1632:dm/dm42_fns.cc **** 
1633:dm/dm42_fns.cc **** 
1634:dm/dm42_fns.cc **** 
1635:dm/dm42_fns.cc **** /*
1636:dm/dm42_fns.cc ****  ▄▄▄▄▄▄ ▄▄▄▄▄▄ ▄▄▄▄▄▄ ▄▄▄▄▄▄ ▄▄▄▄▄▄
1637:dm/dm42_fns.cc ****  ▄▄▄▄▄▄ ▄▄▄▄▄▄ ▄▄▄▄▄▄ ▄▄▄▄▄▄ ▄▄▄▄▄▄
1638:dm/dm42_fns.cc **** */
1639:dm/dm42_fns.cc **** 
1640:dm/dm42_fns.cc **** 
1641:dm/dm42_fns.cc **** 
1642:dm/dm42_fns.cc **** 
1643:dm/dm42_fns.cc **** 
1644:dm/dm42_fns.cc **** 
1645:dm/dm42_fns.cc **** 
1646:dm/dm42_fns.cc **** extern "C"  {
1647:dm/dm42_fns.cc **** 
1648:dm/dm42_fns.cc **** 
1649:dm/dm42_fns.cc **** // -------------
1650:dm/dm42_fns.cc **** 
1651:dm/dm42_fns.cc **** #define CALC_FLAG_AUDIO_ON  26
1652:dm/dm42_fns.cc **** 
1653:dm/dm42_fns.cc **** void dm42_set_beep_mute(int val) {
  29              		.loc 1 1653 0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  34              	.LVL0:
1654:dm/dm42_fns.cc ****   set_calc_flag(CALC_FLAG_AUDIO_ON, !val);
  35              		.loc 1 1654 0
  36 0000 B0FA80F1 		clz	r1, r0
  37 0004 4909     		lsrs	r1, r1, #5
  38 0006 1A20     		movs	r0, #26
  39              	.LVL1:
  40 0008 FFF7FEBF 		b	set_calc_flag
  41              	.LVL2:
  42              		.cfi_endproc
  43              	.LFE275:
  45              		.section	.text.dm42_is_beep_mute,"ax",%progbits
  46              		.align	1
  47              		.p2align 2,,3
  48              		.global	dm42_is_beep_mute
  49              		.syntax unified
  50              		.thumb
  51              		.thumb_func
  52              		.fpu fpv4-sp-d16
  54              	dm42_is_beep_mute:
  55              	.LFB276:
1655:dm/dm42_fns.cc **** }
1656:dm/dm42_fns.cc **** 
1657:dm/dm42_fns.cc **** int dm42_is_beep_mute() {
  56              		.loc 1 1657 0
ARM GAS  /tmp/ccGYckNR.s 			page 31


  57              		.cfi_startproc
  58              		@ args = 0, pretend = 0, frame = 0
  59              		@ frame_needed = 0, uses_anonymous_args = 0
  60 0000 08B5     		push	{r3, lr}
  61              		.cfi_def_cfa_offset 8
  62              		.cfi_offset 3, -8
  63              		.cfi_offset 14, -4
1658:dm/dm42_fns.cc ****   //return ST(STAT_BEEP_MUTE);
1659:dm/dm42_fns.cc ****   return !get_calc_flag(CALC_FLAG_AUDIO_ON);
  64              		.loc 1 1659 0
  65 0002 1A20     		movs	r0, #26
  66 0004 FFF7FEFF 		bl	get_calc_flag
  67              	.LVL3:
1660:dm/dm42_fns.cc **** }
  68              		.loc 1 1660 0
  69 0008 B0FA80F0 		clz	r0, r0
  70 000c 4009     		lsrs	r0, r0, #5
  71 000e 08BD     		pop	{r3, pc}
  72              		.cfi_endproc
  73              	.LFE276:
  75              		.section	.text.repaint_annunciators.part.0,"ax",%progbits
  76              		.align	1
  77              		.p2align 2,,3
  78              		.syntax unified
  79              		.thumb
  80              		.thumb_func
  81              		.fpu fpv4-sp-d16
  83              	repaint_annunciators.part.0:
  84              	.LFB324:
 766:dm/dm42_fns.cc ****   int a;
  85              		.loc 1 766 0
  86              		.cfi_startproc
  87              		@ args = 0, pretend = 0, frame = 0
  88              		@ frame_needed = 0, uses_anonymous_args = 0
  89 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
  90              		.cfi_def_cfa_offset 28
  91              		.cfi_offset 4, -28
  92              		.cfi_offset 5, -24
  93              		.cfi_offset 6, -20
  94              		.cfi_offset 7, -16
  95              		.cfi_offset 8, -12
  96              		.cfi_offset 9, -8
  97              		.cfi_offset 14, -4
  98 0004 83B0     		sub	sp, sp, #12
  99              		.cfi_def_cfa_offset 40
 778:dm/dm42_fns.cc **** 
 100              		.loc 1 778 0
 101 0006 0024     		movs	r4, #0
 102 0008 254D     		ldr	r5, .L21
 103 000a 0094     		str	r4, [sp]
 104 000c 2046     		mov	r0, r4
 105 000e 1023     		movs	r3, #16
 106 0010 CF22     		movs	r2, #207
 107 0012 1821     		movs	r1, #24
 108 0014 A847     		blx	r5
 109              	.LVL4:
 799:dm/dm42_fns.cc ****       lcd_draw_img_part(ann00+ANN2_BPL-ann_offs[a]-ann_dx[a],
ARM GAS  /tmp/ccGYckNR.s 			page 32


 110              		.loc 1 799 0
 111 0016 234E     		ldr	r6, .L21+4
 800:dm/dm42_fns.cc ****         376-ann_lcd_x[a], ANN_LCD_Y,
 112              		.loc 1 800 0
 113 0018 DFF8A490 		ldr	r9, .L21+32
 801:dm/dm42_fns.cc ****         ANN2_LCD_X, ANN_LCD_DY, 8*ann_dx[a]);
 114              		.loc 1 801 0
 115 001c DFF8A480 		ldr	r8, .L21+36
 796:dm/dm42_fns.cc ****   for(a=0; a<ANN_CNT; a++,m<<=1) {
 116              		.loc 1 796 0
 117 0020 0125     		movs	r5, #1
 118 0022 04E0     		b	.L6
 119              	.LVL5:
 120              	.L5:
 797:dm/dm42_fns.cc ****     if ( m == ANN_BATTERY ) continue;
 121              		.loc 1 797 0
 122 0024 0134     		adds	r4, r4, #1
 123              	.LVL6:
 124 0026 072C     		cmp	r4, #7
 125 0028 4FEA4505 		lsl	r5, r5, #1
 126              	.LVL7:
 127 002c 1FD0     		beq	.L20
 128              	.LVL8:
 129              	.L6:
 798:dm/dm42_fns.cc ****     if ( (ann_state & m) != 0 || TEST_ANNUNCIATORS)
 130              		.loc 1 798 0
 131 002e 102D     		cmp	r5, #16
 132 0030 F8D0     		beq	.L5
 799:dm/dm42_fns.cc ****       lcd_draw_img_part(ann00+ANN2_BPL-ann_offs[a]-ann_dx[a],
 133              		.loc 1 799 0
 134 0032 3368     		ldr	r3, [r6]
 135 0034 2B42     		tst	r3, r5
 136 0036 F5D0     		beq	.L5
 800:dm/dm42_fns.cc ****         376-ann_lcd_x[a], ANN_LCD_Y,
 137              		.loc 1 800 0
 138 0038 1B4A     		ldr	r2, .L21+8
 139 003a 14F80930 		ldrb	r3, [r4, r9]	@ zero_extendqisi2
 140 003e A25C     		ldrb	r2, [r4, r2]	@ zero_extendqisi2
 801:dm/dm42_fns.cc ****         ANN2_LCD_X, ANN_LCD_DY, 8*ann_dx[a]);
 141              		.loc 1 801 0
 142 0040 38F81410 		ldrh	r1, [r8, r4, lsl #1]
 800:dm/dm42_fns.cc ****         376-ann_lcd_x[a], ANN_LCD_Y,
 143              		.loc 1 800 0
 144 0044 1948     		ldr	r0, .L21+12
 802:dm/dm42_fns.cc ****   }
 145              		.loc 1 802 0
 146 0046 1A4F     		ldr	r7, .L21+16
 800:dm/dm42_fns.cc ****         376-ann_lcd_x[a], ANN_LCD_Y,
 147              		.loc 1 800 0
 148 0048 1A44     		add	r2, r2, r3
 802:dm/dm42_fns.cc ****   }
 149              		.loc 1 802 0
 150 004a 4FF0100E 		mov	lr, #16
 151 004e DB00     		lsls	r3, r3, #3
 152 0050 0193     		str	r3, [sp, #4]
 153 0052 801A     		subs	r0, r0, r2
 154 0054 C1F5BC71 		rsb	r1, r1, #376
ARM GAS  /tmp/ccGYckNR.s 			page 33


 155 0058 CDF800E0 		str	lr, [sp]
 156 005c 4FF48073 		mov	r3, #256
 157 0060 1822     		movs	r2, #24
 797:dm/dm42_fns.cc ****     if ( m == ANN_BATTERY ) continue;
 158              		.loc 1 797 0
 159 0062 0134     		adds	r4, r4, #1
 160              	.LVL9:
 802:dm/dm42_fns.cc ****   }
 161              		.loc 1 802 0
 162 0064 B847     		blx	r7
 163              	.LVL10:
 797:dm/dm42_fns.cc ****     if ( m == ANN_BATTERY ) continue;
 164              		.loc 1 797 0
 165 0066 072C     		cmp	r4, #7
 166 0068 4FEA4505 		lsl	r5, r5, #1
 167              	.LVL11:
 168 006c DFD1     		bne	.L6
 169              	.L20:
 806:dm/dm42_fns.cc ****     lcd_draw_img_part(ann01+ANN_BPL-3*alpha_table-ann_dx[a],
 170              		.loc 1 806 0
 171 006e 114B     		ldr	r3, .L21+20
 172 0070 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 173 0072 0F2B     		cmp	r3, #15
 174 0074 0BD0     		beq	.L7
 807:dm/dm42_fns.cc ****           496-ann_lcd_x[a], ANN_LCD_Y,
 175              		.loc 1 807 0
 176 0076 1048     		ldr	r0, .L21+24
 809:dm/dm42_fns.cc ****   }
 177              		.loc 1 809 0
 178 0078 0D4C     		ldr	r4, .L21+16
 179              	.LVL12:
 807:dm/dm42_fns.cc ****           496-ann_lcd_x[a], ANN_LCD_Y,
 180              		.loc 1 807 0
 181 007a 03EB4303 		add	r3, r3, r3, lsl #1
 809:dm/dm42_fns.cc ****   }
 182              		.loc 1 809 0
 183 007e 1021     		movs	r1, #16
 184 0080 1822     		movs	r2, #24
 185 0082 C01A     		subs	r0, r0, r3
 186 0084 8DE80600 		stm	sp, {r1, r2}
 187 0088 D023     		movs	r3, #208
 188 008a C421     		movs	r1, #196
 189 008c A047     		blx	r4
 190              	.LVL13:
 191              	.L7:
 812:dm/dm42_fns.cc **** }
 192              		.loc 1 812 0
 193 008e 0B4A     		ldr	r2, .L21+28
 194 0090 1368     		ldr	r3, [r2]
 195 0092 43F00103 		orr	r3, r3, #1
 196 0096 1360     		str	r3, [r2]
 813:dm/dm42_fns.cc **** 
 197              		.loc 1 813 0
 198 0098 03B0     		add	sp, sp, #12
 199              		.cfi_def_cfa_offset 28
 200              		@ sp needed
 201 009a BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
ARM GAS  /tmp/ccGYckNR.s 			page 34


 202              	.LVL14:
 203              	.L22:
 204 009e 00BF     		.align	2
 205              	.L21:
 206 00a0 3D020008 		.word	134218301
 207 00a4 00000000 		.word	.LANCHOR0
 208 00a8 00000000 		.word	.LANCHOR4
 209 00ac 20000000 		.word	.LANCHOR3+32
 210 00b0 49020008 		.word	134218313
 211 00b4 00000000 		.word	.LANCHOR5
 212 00b8 17000000 		.word	.LANCHOR6+23
 213 00bc 00000000 		.word	.LANCHOR7
 214 00c0 00000000 		.word	.LANCHOR1
 215 00c4 00000000 		.word	.LANCHOR2
 216              		.cfi_endproc
 217              	.LFE324:
 219              		.section	.text.is_disp.part.6,"ax",%progbits
 220              		.align	1
 221              		.p2align 2,,3
 222              		.syntax unified
 223              		.thumb
 224              		.thumb_func
 225              		.fpu fpv4-sp-d16
 227              	is_disp.part.6:
 228              	.LFB330:
1661:dm/dm42_fns.cc **** 
1662:dm/dm42_fns.cc **** 
1663:dm/dm42_fns.cc **** 
1664:dm/dm42_fns.cc **** void set_disp_main_menu(int val) {
1665:dm/dm42_fns.cc ****   SETBY_PS(val, PERM_MAIN_MENU);
1666:dm/dm42_fns.cc **** }
1667:dm/dm42_fns.cc **** 
1668:dm/dm42_fns.cc **** int is_disp_main_menu() {
1669:dm/dm42_fns.cc ****   return PS(PERM_MAIN_MENU);
1670:dm/dm42_fns.cc **** }
1671:dm/dm42_fns.cc **** 
1672:dm/dm42_fns.cc **** 
1673:dm/dm42_fns.cc **** 
1674:dm/dm42_fns.cc **** 
1675:dm/dm42_fns.cc **** 
1676:dm/dm42_fns.cc **** #define MAX_DATE_SEPARATORS   3
1677:dm/dm42_fns.cc **** 
1678:dm/dm42_fns.cc **** char date_separators[] = "/-.";
1679:dm/dm42_fns.cc **** 
1680:dm/dm42_fns.cc **** 
1681:dm/dm42_fns.cc **** 
1682:dm/dm42_fns.cc **** char get_disp_date_sep() {
1683:dm/dm42_fns.cc ****   int ix = is_disp(DISP_DATE_SEP);
1684:dm/dm42_fns.cc ****   return date_separators[ix];
1685:dm/dm42_fns.cc **** }
1686:dm/dm42_fns.cc **** 
1687:dm/dm42_fns.cc **** 
1688:dm/dm42_fns.cc **** void toggle_disp(int what) {
1689:dm/dm42_fns.cc ****   switch (what) {
1690:dm/dm42_fns.cc ****     case DISP_STATFN: {
1691:dm/dm42_fns.cc ****         int newval = !PS(DISP_STATFN);
1692:dm/dm42_fns.cc ****         SETBY_PS(newval, DISP_STATFN);
ARM GAS  /tmp/ccGYckNR.s 			page 35


1693:dm/dm42_fns.cc ****       }
1694:dm/dm42_fns.cc ****       break;
1695:dm/dm42_fns.cc ****     case DISP_DOW: {
1696:dm/dm42_fns.cc ****         int newval = !PS(DISP_DOW);
1697:dm/dm42_fns.cc ****         SETBY_PS(newval, DISP_DOW);
1698:dm/dm42_fns.cc ****       }
1699:dm/dm42_fns.cc ****       break;
1700:dm/dm42_fns.cc ****     case DISP_DATE: {
1701:dm/dm42_fns.cc ****         int newval = !PS(DISP_DATE);
1702:dm/dm42_fns.cc ****         SETBY_PS(newval, DISP_DATE);
1703:dm/dm42_fns.cc ****       }
1704:dm/dm42_fns.cc ****       break;
1705:dm/dm42_fns.cc ****     case DISP_DATE_SEP: {
1706:dm/dm42_fns.cc ****         int newval = is_disp(DISP_DATE_SEP)+1;
1707:dm/dm42_fns.cc ****         if (newval >= MAX_DATE_SEPARATORS) newval=0;
1708:dm/dm42_fns.cc ****         SETBY_PS(newval&1, DISP_DATE_SEP0);
1709:dm/dm42_fns.cc ****         SETBY_PS(newval&2, DISP_DATE_SEP1);
1710:dm/dm42_fns.cc ****       }
1711:dm/dm42_fns.cc ****       break;
1712:dm/dm42_fns.cc ****     case DISP_SHORTMON: {
1713:dm/dm42_fns.cc ****         int newval = !PS(DISP_SHORTMON);
1714:dm/dm42_fns.cc ****         SETBY_PS(newval, DISP_SHORTMON);
1715:dm/dm42_fns.cc ****       }
1716:dm/dm42_fns.cc ****       break;
1717:dm/dm42_fns.cc ****     case DISP_TIME: {
1718:dm/dm42_fns.cc ****         int newval = !PS(DISP_TIME);
1719:dm/dm42_fns.cc ****         SETBY_PS(newval, DISP_TIME);
1720:dm/dm42_fns.cc ****       }
1721:dm/dm42_fns.cc ****       break;
1722:dm/dm42_fns.cc ****     case DISP_VOLTAGE: {
1723:dm/dm42_fns.cc ****         int newval = !PS(DISP_VOLTAGE);
1724:dm/dm42_fns.cc ****         SETBY_PS(newval, DISP_VOLTAGE);
1725:dm/dm42_fns.cc ****       }
1726:dm/dm42_fns.cc ****       break;
1727:dm/dm42_fns.cc ****   }
1728:dm/dm42_fns.cc **** }
1729:dm/dm42_fns.cc **** 
1730:dm/dm42_fns.cc **** int is_disp(int what) {
 229              		.loc 1 1730 0
 230              		.cfi_startproc
 231              		@ args = 0, pretend = 0, frame = 0
 232              		@ frame_needed = 0, uses_anonymous_args = 0
 233              		@ link register save eliminated.
 234              	.LVL15:
1731:dm/dm42_fns.cc ****   int val = 0;
1732:dm/dm42_fns.cc **** 
1733:dm/dm42_fns.cc ****   switch (what) {
1734:dm/dm42_fns.cc ****     case DISP_STATFN:   val = PS(DISP_STATFN);   break;
1735:dm/dm42_fns.cc ****     case DISP_DOW:      val = PS(DISP_DOW);      break;
1736:dm/dm42_fns.cc ****     case DISP_DATE:     val = PS(DISP_DATE);     break;
1737:dm/dm42_fns.cc ****     case DISP_SHORTMON: val = PS(DISP_SHORTMON); break;
1738:dm/dm42_fns.cc ****     case DISP_TIME:     val = PS(DISP_TIME);     break;
1739:dm/dm42_fns.cc ****     case DISP_VOLTAGE:  val = PS(DISP_VOLTAGE);  break;
1740:dm/dm42_fns.cc **** 
1741:dm/dm42_fns.cc ****     case DISP_DATE_SEP:
1742:dm/dm42_fns.cc ****       val  = PS(DISP_DATE_SEP0) ? 1 : 0;
 235              		.loc 1 1742 0
ARM GAS  /tmp/ccGYckNR.s 			page 36


 236 0000 054A     		ldr	r2, .L26
 237 0002 1368     		ldr	r3, [r2]
1743:dm/dm42_fns.cc ****       val |= PS(DISP_DATE_SEP1) ? 2 : 0;
 238              		.loc 1 1743 0
 239 0004 1268     		ldr	r2, [r2]
 240 0006 12F0200F 		tst	r2, #32
1742:dm/dm42_fns.cc ****       val |= PS(DISP_DATE_SEP1) ? 2 : 0;
 241              		.loc 1 1742 0
 242 000a C3F30013 		ubfx	r3, r3, #4, #1
 243              	.LVL16:
 244              		.loc 1 1743 0
 245 000e 14BF     		ite	ne
 246 0010 0220     		movne	r0, #2
 247 0012 0020     		moveq	r0, #0
 248              	.LVL17:
1744:dm/dm42_fns.cc ****       break;
1745:dm/dm42_fns.cc ****   }
1746:dm/dm42_fns.cc **** 
1747:dm/dm42_fns.cc ****   return val;
1748:dm/dm42_fns.cc **** }
 249              		.loc 1 1748 0
 250 0014 1843     		orrs	r0, r0, r3
 251              	.LVL18:
 252 0016 7047     		bx	lr
 253              	.L27:
 254              		.align	2
 255              	.L26:
 256 0018 00000000 		.word	.LANCHOR8
 257              		.cfi_endproc
 258              	.LFE330:
 260              		.section	.text.lcd_update_timeout.part.9,"ax",%progbits
 261              		.align	1
 262              		.p2align 2,,3
 263              		.syntax unified
 264              		.thumb
 265              		.thumb_func
 266              		.fpu fpv4-sp-d16
 268              	lcd_update_timeout.part.9:
 269              	.LFB333:
1749:dm/dm42_fns.cc **** 
1750:dm/dm42_fns.cc **** 
1751:dm/dm42_fns.cc **** #define REG_OFFS_BITS  4
1752:dm/dm42_fns.cc **** #define REG_OFFS_RANGE (1<<REG_OFFS_BITS)
1753:dm/dm42_fns.cc **** #define REG_OFFS_MASK  (REG_OFFS_RANGE - 1)
1754:dm/dm42_fns.cc **** #define REG_OFFS_HALF  (1<<(REG_OFFS_BITS-1))
1755:dm/dm42_fns.cc **** 
1756:dm/dm42_fns.cc **** #define REG_OFFS_MAX   ( REG_OFFS_HALF - 1)
1757:dm/dm42_fns.cc **** #define REG_OFFS_MIN   (-REG_OFFS_HALF    )
1758:dm/dm42_fns.cc **** 
1759:dm/dm42_fns.cc **** #define MAX_REG_OFFS 5
1760:dm/dm42_fns.cc **** 
1761:dm/dm42_fns.cc **** int get_reg_font_offset(int line_reg_nr) {
1762:dm/dm42_fns.cc ****   int offs = (reg_font_offset >> (line_reg_nr*REG_OFFS_BITS)) & REG_OFFS_MASK;
1763:dm/dm42_fns.cc ****   return (offs < REG_OFFS_HALF) ? offs : offs-REG_OFFS_RANGE;
1764:dm/dm42_fns.cc **** }
1765:dm/dm42_fns.cc **** 
1766:dm/dm42_fns.cc **** int inc_reg_font_offset(int line_reg_nr) {
ARM GAS  /tmp/ccGYckNR.s 			page 37


1767:dm/dm42_fns.cc ****   int offs = get_reg_font_offset(line_reg_nr)+1;
1768:dm/dm42_fns.cc ****   if (offs > MAX_REG_OFFS) offs = -MAX_REG_OFFS;
1769:dm/dm42_fns.cc ****   set_reg_font_offset(line_reg_nr, offs);
1770:dm/dm42_fns.cc ****   return offs;
1771:dm/dm42_fns.cc **** }
1772:dm/dm42_fns.cc **** 
1773:dm/dm42_fns.cc **** 
1774:dm/dm42_fns.cc **** int set_reg_font_offset(int line_reg_nr, int offs) {
1775:dm/dm42_fns.cc ****   uint32_t val = 0;
1776:dm/dm42_fns.cc ****   int shift = line_reg_nr * REG_OFFS_BITS;
1777:dm/dm42_fns.cc ****   uint32_t msk = REG_OFFS_MASK << shift;
1778:dm/dm42_fns.cc **** 
1779:dm/dm42_fns.cc ****   if ( offs >= 0 ) {
1780:dm/dm42_fns.cc ****     if ( offs > REG_OFFS_MAX ) offs = REG_OFFS_MAX;
1781:dm/dm42_fns.cc ****     val = offs;
1782:dm/dm42_fns.cc ****   } else {
1783:dm/dm42_fns.cc ****     if ( offs < REG_OFFS_MIN ) offs = REG_OFFS_MIN;
1784:dm/dm42_fns.cc ****     val = offs & REG_OFFS_MASK;
1785:dm/dm42_fns.cc ****   }
1786:dm/dm42_fns.cc **** 
1787:dm/dm42_fns.cc ****   reg_font_offset = (reg_font_offset & ~msk) | (val << shift);
1788:dm/dm42_fns.cc **** 
1789:dm/dm42_fns.cc ****   return offs;
1790:dm/dm42_fns.cc **** }
1791:dm/dm42_fns.cc **** 
1792:dm/dm42_fns.cc **** 
1793:dm/dm42_fns.cc **** 
1794:dm/dm42_fns.cc **** void set_stack_layout(int layout) {
1795:dm/dm42_fns.cc ****   stack_layout = layout;
1796:dm/dm42_fns.cc **** }
1797:dm/dm42_fns.cc **** 
1798:dm/dm42_fns.cc **** int get_stack_layout() {
1799:dm/dm42_fns.cc ****   return stack_layout;
1800:dm/dm42_fns.cc **** }
1801:dm/dm42_fns.cc **** 
1802:dm/dm42_fns.cc **** char * get_stack_layout_str(char *s, int layout) {
1803:dm/dm42_fns.cc ****   char * t = s;
1804:dm/dm42_fns.cc ****   
1805:dm/dm42_fns.cc ****   if ( layout & STACK_REG_L0) *t++ = 'L';
1806:dm/dm42_fns.cc **** 
1807:dm/dm42_fns.cc ****   *t++ = 'X'; // Always X
1808:dm/dm42_fns.cc **** 
1809:dm/dm42_fns.cc ****   if ( layout & STACK_REG_Y ) *t++ = 'Y';
1810:dm/dm42_fns.cc ****   if ( layout & STACK_REG_Z ) *t++ = 'Z';
1811:dm/dm42_fns.cc ****   if ( layout & STACK_REG_T ) *t++ = 'T';
1812:dm/dm42_fns.cc ****   if ( layout & STACK_REG_L ) *t++ = 'L';
1813:dm/dm42_fns.cc ****   if ( layout & STACK_REG_A ) *t++ = 'A';
1814:dm/dm42_fns.cc **** 
1815:dm/dm42_fns.cc ****   *t = 0;
1816:dm/dm42_fns.cc ****   return s;
1817:dm/dm42_fns.cc **** }
1818:dm/dm42_fns.cc **** 
1819:dm/dm42_fns.cc **** 
1820:dm/dm42_fns.cc **** 
1821:dm/dm42_fns.cc **** 
1822:dm/dm42_fns.cc **** /*
1823:dm/dm42_fns.cc ****  ▄▄▄▄▄           ▀             ▄             ▄                    ▄▀▀    ▀ 
ARM GAS  /tmp/ccGYckNR.s 			page 38


1824:dm/dm42_fns.cc ****  █   ▀█  ▄ ▄▄  ▄▄▄    ▄ ▄▄   ▄▄█▄▄         ▄▄█▄▄   ▄
1825:dm/dm42_fns.cc ****  █▄▄▄█▀  █▀  ▀   █    █▀  █    █             █    █▀ ▀█      
1826:dm/dm42_fns.cc ****  █       █       █    █   █    █             █    █   █           █      █   
1827:dm/dm42_fns.cc ****  █       █     ▄▄█▄▄  █   █    ▀▄▄           ▀▄▄  ▀█▄█▀    
1828:dm/dm42_fns.cc **** 
1829:dm/dm42_fns.cc **** */
1830:dm/dm42_fns.cc **** 
1831:dm/dm42_fns.cc **** int is_print_to_file(int what) {
1832:dm/dm42_fns.cc ****   int res = 0;
1833:dm/dm42_fns.cc **** 
1834:dm/dm42_fns.cc ****   switch(what) {
1835:dm/dm42_fns.cc ****     case PRTOF_TEXT:      res = PS(PRTOF_TEXT);      break;
1836:dm/dm42_fns.cc ****     case PRTOF_GRAPHICS:  res = PS(PRTOF_GRAPHICS);  break;
1837:dm/dm42_fns.cc ****     case PRTOF_GR_IN_TXT: res = PS(PRTOF_GR_IN_TXT); break;
1838:dm/dm42_fns.cc ****     case PRTOF_NOIR:      res = PS(PRTOF_NOIR);      break;
1839:dm/dm42_fns.cc ****   }
1840:dm/dm42_fns.cc **** 
1841:dm/dm42_fns.cc ****   return res;
1842:dm/dm42_fns.cc **** }
1843:dm/dm42_fns.cc **** 
1844:dm/dm42_fns.cc **** void set_print_to_file_flag(int what, int val) {
1845:dm/dm42_fns.cc ****   switch(what) {
1846:dm/dm42_fns.cc ****     case PRTOF_TEXT:      SETBY_PS(val, PRTOF_TEXT);      break;
1847:dm/dm42_fns.cc ****     case PRTOF_GRAPHICS:  SETBY_PS(val, PRTOF_GRAPHICS);  break;
1848:dm/dm42_fns.cc ****     case PRTOF_GR_IN_TXT: SETBY_PS(val, PRTOF_GR_IN_TXT); break;
1849:dm/dm42_fns.cc ****     case PRTOF_NOIR:      SETBY_PS(val, PRTOF_NOIR);      break;
1850:dm/dm42_fns.cc **** 
1851:dm/dm42_fns.cc ****   }
1852:dm/dm42_fns.cc **** }
1853:dm/dm42_fns.cc **** 
1854:dm/dm42_fns.cc **** 
1855:dm/dm42_fns.cc **** #define PRTOF_TXT_BUF_SIZE     (512+128)
1856:dm/dm42_fns.cc **** #define PRTOF_GR_BUF_SIZE    (3*512+384)
1857:dm/dm42_fns.cc **** 
1858:dm/dm42_fns.cc **** #define PRTOF_FNAME_SIZE 31
1859:dm/dm42_fns.cc **** 
1860:dm/dm42_fns.cc **** typedef struct {
1861:dm/dm42_fns.cc ****   char fname[PRTOF_FNAME_SIZE+1];
1862:dm/dm42_fns.cc ****   uint32_t  buf_size;
1863:dm/dm42_fns.cc ****   uint32_t  flush_limit;
1864:dm/dm42_fns.cc ****   uint32_t  pre_write;
1865:dm/dm42_fns.cc ****   uint32_t  len;
1866:dm/dm42_fns.cc ****   uint32_t  lines;
1867:dm/dm42_fns.cc ****   uint32_t  err_cnt;
1868:dm/dm42_fns.cc ****   char buf[];
1869:dm/dm42_fns.cc **** } prtof_buf_t;
1870:dm/dm42_fns.cc **** 
1871:dm/dm42_fns.cc **** 
1872:dm/dm42_fns.cc **** 
1873:dm/dm42_fns.cc **** prtof_buf_t * prtof_buf[PRTOF_BUF_COUNT] = {NULL, NULL};
1874:dm/dm42_fns.cc **** 
1875:dm/dm42_fns.cc **** 
1876:dm/dm42_fns.cc **** #define PRTOF_TXT_HDR_SIZE      3 // BOM
1877:dm/dm42_fns.cc **** #define PRTOF_BMP_HDR_SIZE    130
1878:dm/dm42_fns.cc **** #define PRTOF_BMP_BPL          24
1879:dm/dm42_fns.cc **** #define PRTOF_BMP_WIDTH       MAX_82240_WIDTH
1880:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 39


1881:dm/dm42_fns.cc **** 
1882:dm/dm42_fns.cc **** // full = 1 - do full flush emptying the buffer totally
1883:dm/dm42_fns.cc **** // full = 0 - do partial 'by sector' flush 
1884:dm/dm42_fns.cc **** void prtof_buf_flush(int what, int full) {
1885:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[what];
1886:dm/dm42_fns.cc ****   FRESULT res;
1887:dm/dm42_fns.cc ****   uint wsize, wr, sz;
1888:dm/dm42_fns.cc ****   int fail=0, img_h;
1889:dm/dm42_fns.cc **** 
1890:dm/dm42_fns.cc ****   // No buf or no date -> just return
1891:dm/dm42_fns.cc ****   if (buf == NULL || buf->len == 0)
1892:dm/dm42_fns.cc ****     return;
1893:dm/dm42_fns.cc **** 
1894:dm/dm42_fns.cc ****   if (full || buf->len >= (buf->flush_limit - buf->pre_write)) {
1895:dm/dm42_fns.cc **** 
1896:dm/dm42_fns.cc ****     // Make actual write
1897:dm/dm42_fns.cc ****     wsize = full ? buf->len : (buf->flush_limit - buf->pre_write);
1898:dm/dm42_fns.cc ****     printf("Writing to buf%i %i bytes, file=%s\n", what, wsize, buf->fname);
1899:dm/dm42_fns.cc ****     buf->pre_write = 0;
1900:dm/dm42_fns.cc **** 
1901:dm/dm42_fns.cc ****     sys_disk_write_enable(1);
1902:dm/dm42_fns.cc **** 
1903:dm/dm42_fns.cc ****     res = f_open(ppgm_fp, buf->fname, FA_OPEN_APPEND | FA_WRITE);
1904:dm/dm42_fns.cc ****     if ( res != FR_OK ) { buf->err_cnt++; goto prtof_wf_err; }
1905:dm/dm42_fns.cc **** 
1906:dm/dm42_fns.cc ****     // Create initial header
1907:dm/dm42_fns.cc ****     if (f_size(ppgm_fp) == 0) {
1908:dm/dm42_fns.cc ****       switch (what) {
1909:dm/dm42_fns.cc ****         case  PRTOF_GRAPHICS:
1910:dm/dm42_fns.cc ****           fail = update_bmp_file_header(ppgm_fp, PRTOF_BMP_WIDTH, 0, BG_COL_PAPER);
1911:dm/dm42_fns.cc ****           break;
1912:dm/dm42_fns.cc ****         case PRTOF_TEXT:
1913:dm/dm42_fns.cc ****           // Write BOM
1914:dm/dm42_fns.cc ****           res = f_write(ppgm_fp, "\xEF\xBB\xBF", PRTOF_TXT_HDR_SIZE, &wr);
1915:dm/dm42_fns.cc ****           if ( res != FR_OK ) { buf->err_cnt++; goto prtof_wf_err; }
1916:dm/dm42_fns.cc ****           break;
1917:dm/dm42_fns.cc ****       }
1918:dm/dm42_fns.cc ****       if (fail) {
1919:dm/dm42_fns.cc ****         buf->err_cnt++;
1920:dm/dm42_fns.cc ****         goto prtof_wf_err;
1921:dm/dm42_fns.cc ****       }
1922:dm/dm42_fns.cc ****     }
1923:dm/dm42_fns.cc **** 
1924:dm/dm42_fns.cc ****     // Seek to the end - just for sure :)
1925:dm/dm42_fns.cc ****     res = f_lseek(ppgm_fp, f_size(ppgm_fp));
1926:dm/dm42_fns.cc ****     if ( res != FR_OK ) { buf->err_cnt++; goto prtof_wf_err; }
1927:dm/dm42_fns.cc **** 
1928:dm/dm42_fns.cc ****     res = f_write(ppgm_fp, buf->buf, wsize, &wr);
1929:dm/dm42_fns.cc ****     if ( res != FR_OK ) { buf->err_cnt++; goto prtof_wf_err; }
1930:dm/dm42_fns.cc **** 
1931:dm/dm42_fns.cc ****     if (what == PRTOF_GRAPHICS) {
1932:dm/dm42_fns.cc ****       // Update bmp header
1933:dm/dm42_fns.cc **** 
1934:dm/dm42_fns.cc ****       // Get size
1935:dm/dm42_fns.cc ****       sz = f_size(ppgm_fp);
1936:dm/dm42_fns.cc **** 
1937:dm/dm42_fns.cc ****       // Calculate lines (little bit hacky)
ARM GAS  /tmp/ccGYckNR.s 			page 40


1938:dm/dm42_fns.cc ****       img_h = (sz-PRTOF_BMP_HDR_SIZE)/PRTOF_BMP_BPL;
1939:dm/dm42_fns.cc ****       printf("Update bmp header %ix%i\n", PRTOF_BMP_WIDTH, img_h);
1940:dm/dm42_fns.cc ****       fail = update_bmp_file_header(ppgm_fp, PRTOF_BMP_WIDTH, -img_h, BG_COL_PAPER);
1941:dm/dm42_fns.cc ****       if (fail) {
1942:dm/dm42_fns.cc ****         buf->err_cnt++;
1943:dm/dm42_fns.cc ****         goto prtof_wf_err;
1944:dm/dm42_fns.cc ****       }
1945:dm/dm42_fns.cc **** 
1946:dm/dm42_fns.cc ****       // Store img lines to buf structure
1947:dm/dm42_fns.cc ****       buf->lines = img_h;
1948:dm/dm42_fns.cc ****     }
1949:dm/dm42_fns.cc **** 
1950:dm/dm42_fns.cc ****   prtof_wf_err:
1951:dm/dm42_fns.cc ****     f_close(ppgm_fp);
1952:dm/dm42_fns.cc **** 
1953:dm/dm42_fns.cc ****     sys_disk_write_enable(0);
1954:dm/dm42_fns.cc **** 
1955:dm/dm42_fns.cc ****     // Update len
1956:dm/dm42_fns.cc ****     buf->len -= wsize;
1957:dm/dm42_fns.cc **** 
1958:dm/dm42_fns.cc ****     // Move buffered data
1959:dm/dm42_fns.cc ****     if (buf->len)
1960:dm/dm42_fns.cc ****       memmove(buf->buf, buf->buf+wsize, buf->len);
1961:dm/dm42_fns.cc **** 
1962:dm/dm42_fns.cc ****   }
1963:dm/dm42_fns.cc ****   
1964:dm/dm42_fns.cc **** 
1965:dm/dm42_fns.cc **** }
1966:dm/dm42_fns.cc **** 
1967:dm/dm42_fns.cc **** 
1968:dm/dm42_fns.cc **** 
1969:dm/dm42_fns.cc **** int prtof_buf_size(int what) {
1970:dm/dm42_fns.cc ****   return what==PRTOF_TEXT ? PRTOF_TXT_BUF_SIZE: PRTOF_GR_BUF_SIZE;
1971:dm/dm42_fns.cc **** }
1972:dm/dm42_fns.cc **** 
1973:dm/dm42_fns.cc **** 
1974:dm/dm42_fns.cc **** int prtof_buf_write(int what, const void * wbuf, int len) {
1975:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[what];
1976:dm/dm42_fns.cc **** 
1977:dm/dm42_fns.cc ****   if (buf->len + len > buf->buf_size) {
1978:dm/dm42_fns.cc ****     len = buf->buf_size - buf->len;
1979:dm/dm42_fns.cc ****     // FIXME: report overflow?
1980:dm/dm42_fns.cc ****   }
1981:dm/dm42_fns.cc **** 
1982:dm/dm42_fns.cc ****   // Copy data
1983:dm/dm42_fns.cc ****   memcpy(buf->buf+buf->len, wbuf, len);
1984:dm/dm42_fns.cc ****   buf->len += len;
1985:dm/dm42_fns.cc **** 
1986:dm/dm42_fns.cc ****   prtof_buf_flush(what, PRTOF_LIMIT_FLUSH);
1987:dm/dm42_fns.cc **** 
1988:dm/dm42_fns.cc ****   return 0;
1989:dm/dm42_fns.cc **** }
1990:dm/dm42_fns.cc **** 
1991:dm/dm42_fns.cc **** 
1992:dm/dm42_fns.cc **** 
1993:dm/dm42_fns.cc **** // Returns 0 if OK, 1 for fail
1994:dm/dm42_fns.cc **** int prtof_buf_update(int what) {
ARM GAS  /tmp/ccGYckNR.s 			page 41


1995:dm/dm42_fns.cc ****   int buf_size = prtof_buf_size(what);
1996:dm/dm42_fns.cc ****   int size = buf_size + sizeof(prtof_buf_t);
1997:dm/dm42_fns.cc ****   int val = is_print_to_file(what);
1998:dm/dm42_fns.cc ****   prtof_buf_t ** pbuf = prtof_buf + what;
1999:dm/dm42_fns.cc **** 
2000:dm/dm42_fns.cc ****   if (val) {
2001:dm/dm42_fns.cc ****     if(pbuf[0] == NULL) {
2002:dm/dm42_fns.cc ****       // Allocate
2003:dm/dm42_fns.cc ****       pbuf[0] = (prtof_buf_t *)malloc(size);
2004:dm/dm42_fns.cc ****       if (pbuf[0] == NULL)
2005:dm/dm42_fns.cc ****         return 1; // Fail
2006:dm/dm42_fns.cc ****       pbuf[0]->buf_size = buf_size;
2007:dm/dm42_fns.cc ****       pbuf[0]->len = 0;
2008:dm/dm42_fns.cc ****       pbuf[0]->flush_limit = buf_size & 0xFFFE00;
2009:dm/dm42_fns.cc ****       pbuf[0]->pre_write = what == PRTOF_GRAPHICS ? PRTOF_BMP_HDR_SIZE : PRTOF_TXT_HDR_SIZE;
2010:dm/dm42_fns.cc ****       pbuf[0]->err_cnt = 0;
2011:dm/dm42_fns.cc ****       pbuf[0]->lines = 0;
2012:dm/dm42_fns.cc ****     }
2013:dm/dm42_fns.cc ****   } else {
2014:dm/dm42_fns.cc ****     // Dealloc
2015:dm/dm42_fns.cc ****     prtof_buf_flush(what, PRTOF_FULL_FLUSH);
2016:dm/dm42_fns.cc ****     free(pbuf[0]);
2017:dm/dm42_fns.cc ****     pbuf[0] = NULL;
2018:dm/dm42_fns.cc ****   }
2019:dm/dm42_fns.cc **** 
2020:dm/dm42_fns.cc ****   return 0;
2021:dm/dm42_fns.cc **** }
2022:dm/dm42_fns.cc **** 
2023:dm/dm42_fns.cc **** 
2024:dm/dm42_fns.cc **** 
2025:dm/dm42_fns.cc **** void prtof_add_text(const char *str, int len, int dbl) {
2026:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[PRTOF_TEXT];
2027:dm/dm42_fns.cc **** 
2028:dm/dm42_fns.cc ****   char * pa = buf->buf+buf->len;
2029:dm/dm42_fns.cc ****   char * p = pa;
2030:dm/dm42_fns.cc **** 
2031:dm/dm42_fns.cc ****   for(int x=0; x<len; x++) {
2032:dm/dm42_fns.cc ****     p += hp2utfchar(p, str[x]);
2033:dm/dm42_fns.cc ****     if (dbl) *p++ = ' ';
2034:dm/dm42_fns.cc ****   }
2035:dm/dm42_fns.cc ****   p += hp2utfchar(p, '\n');
2036:dm/dm42_fns.cc **** 
2037:dm/dm42_fns.cc ****   buf->len += p-pa;
2038:dm/dm42_fns.cc **** 
2039:dm/dm42_fns.cc ****   prtof_buf_flush(PRTOF_TEXT, PRTOF_LIMIT_FLUSH);
2040:dm/dm42_fns.cc **** }
2041:dm/dm42_fns.cc **** 
2042:dm/dm42_fns.cc **** 
2043:dm/dm42_fns.cc **** /* Bit order: 01
2044:dm/dm42_fns.cc ****               23
2045:dm/dm42_fns.cc **** */
2046:dm/dm42_fns.cc **** 
2047:dm/dm42_fns.cc **** const char * box_chars[16] = {
2048:dm/dm42_fns.cc ****   " ", "▘", "▝", "▀",    "▖", "▌", "▞", "▛",
2049:dm/dm42_fns.cc ****   "▗", "▚", "▐", "▜",    "▄", "▙", "▟", "▇"};
2050:dm/dm42_fns.cc **** 
2051:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 42


2052:dm/dm42_fns.cc **** void prtof_add_gr_text(const char *bits, int bpl, int width, int height) {
2053:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[PRTOF_TEXT];
2054:dm/dm42_fns.cc **** 
2055:dm/dm42_fns.cc ****   printf("add_gr_text: %ix%i bpl=%i at %i\n", width, height, bpl, (int)buf->len);
2056:dm/dm42_fns.cc **** 
2057:dm/dm42_fns.cc ****   height &= 0xfffe; // Height should be even
2058:dm/dm42_fns.cc **** 
2059:dm/dm42_fns.cc ****   if (!height) return;
2060:dm/dm42_fns.cc **** 
2061:dm/dm42_fns.cc ****   for(int y=0; y<height; y+=2) {
2062:dm/dm42_fns.cc ****     char * pa = buf->buf+buf->len;
2063:dm/dm42_fns.cc ****     char * p = pa;
2064:dm/dm42_fns.cc **** 
2065:dm/dm42_fns.cc ****     for(int x=0; x<bpl; x++) {
2066:dm/dm42_fns.cc ****       int b2 = bits[x];
2067:dm/dm42_fns.cc ****       int b1 = bits[x+bpl];
2068:dm/dm42_fns.cc **** 
2069:dm/dm42_fns.cc ****       for(int b=0; b<4; b++) {
2070:dm/dm42_fns.cc ****         int a = ((b1&3)<<2)|(b2&3);
2071:dm/dm42_fns.cc ****         //strcpy(p, box_chars[a]);
2072:dm/dm42_fns.cc ****         *(int *)p = *(int*)(box_chars[a]);
2073:dm/dm42_fns.cc ****         p+= a ? 3 : 1;
2074:dm/dm42_fns.cc ****         b1>>=2; b2>>=2;
2075:dm/dm42_fns.cc ****       }
2076:dm/dm42_fns.cc ****     }
2077:dm/dm42_fns.cc ****     bits += 2*bpl;
2078:dm/dm42_fns.cc **** 
2079:dm/dm42_fns.cc ****     p += hp2utfchar(p, '\n');
2080:dm/dm42_fns.cc ****     buf->len += p-pa;
2081:dm/dm42_fns.cc ****     prtof_buf_flush(PRTOF_TEXT, PRTOF_LIMIT_FLUSH);
2082:dm/dm42_fns.cc ****   }
2083:dm/dm42_fns.cc **** }
2084:dm/dm42_fns.cc **** 
2085:dm/dm42_fns.cc **** 
2086:dm/dm42_fns.cc **** void prtof_add_graphics_lines(const char *bits, int bytesperline, int width, int height) {
2087:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[PRTOF_GRAPHICS];
2088:dm/dm42_fns.cc **** 
2089:dm/dm42_fns.cc ****   char * pa = buf->buf+buf->len;
2090:dm/dm42_fns.cc ****   char * p = pa;
2091:dm/dm42_fns.cc ****   int bpl = min(bytesperline, PRTOF_BMP_BPL);
2092:dm/dm42_fns.cc ****   int pad = max(0, PRTOF_BMP_BPL-bpl);
2093:dm/dm42_fns.cc **** 
2094:dm/dm42_fns.cc ****   printf("add_gr_lines: %ix%i bpl=%i at %i | bpl=%i pad=%i\n", width, height, bytesperline, (int)bu
2095:dm/dm42_fns.cc **** 
2096:dm/dm42_fns.cc ****   for(int y=0; y<height; y++) {
2097:dm/dm42_fns.cc ****     for(int x=0; x<bpl; x++)
2098:dm/dm42_fns.cc ****       p[x] = reverse_byte(bits[x]);
2099:dm/dm42_fns.cc ****     p += bpl;
2100:dm/dm42_fns.cc ****     if (pad) {
2101:dm/dm42_fns.cc ****       memset(p, 0, pad);
2102:dm/dm42_fns.cc ****       p += pad;
2103:dm/dm42_fns.cc ****     }
2104:dm/dm42_fns.cc ****     bits += bytesperline;
2105:dm/dm42_fns.cc ****   }
2106:dm/dm42_fns.cc **** 
2107:dm/dm42_fns.cc ****   buf->len += p-pa;
2108:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 43


2109:dm/dm42_fns.cc ****   prtof_buf_flush(PRTOF_GRAPHICS, PRTOF_LIMIT_FLUSH);
2110:dm/dm42_fns.cc **** }
2111:dm/dm42_fns.cc **** 
2112:dm/dm42_fns.cc **** 
2113:dm/dm42_fns.cc **** 
2114:dm/dm42_fns.cc **** 
2115:dm/dm42_fns.cc **** int prtof_buf_init_fname(int what) {
2116:dm/dm42_fns.cc ****   const char * ext;
2117:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[what];
2118:dm/dm42_fns.cc **** 
2119:dm/dm42_fns.cc ****   if ( check_create_dir(PRINT_DIR) )
2120:dm/dm42_fns.cc ****     return 1;
2121:dm/dm42_fns.cc **** 
2122:dm/dm42_fns.cc ****   ext = what == PRTOF_GRAPHICS ? PRINT_GR_EXT : PRINT_TXT_EXT;
2123:dm/dm42_fns.cc ****   make_date_filename(buf->fname, PRINT_DIR, ext);
2124:dm/dm42_fns.cc **** 
2125:dm/dm42_fns.cc ****   return 0;
2126:dm/dm42_fns.cc **** }
2127:dm/dm42_fns.cc **** 
2128:dm/dm42_fns.cc **** 
2129:dm/dm42_fns.cc **** 
2130:dm/dm42_fns.cc **** 
2131:dm/dm42_fns.cc **** void set_print_to_file(int what, int val, int gui) {
2132:dm/dm42_fns.cc ****   const char * msg = NULL;
2133:dm/dm42_fns.cc ****   int res = 0;
2134:dm/dm42_fns.cc **** 
2135:dm/dm42_fns.cc ****   if (what >= PRTOF_BUF_COUNT) {
2136:dm/dm42_fns.cc ****     set_print_to_file_flag(what, val);
2137:dm/dm42_fns.cc ****     return;
2138:dm/dm42_fns.cc ****   }
2139:dm/dm42_fns.cc **** 
2140:dm/dm42_fns.cc ****   // Arg check
2141:dm/dm42_fns.cc ****   if (what < 0 || what >= PRTOF_BUF_COUNT)
2142:dm/dm42_fns.cc ****     return;
2143:dm/dm42_fns.cc **** 
2144:dm/dm42_fns.cc ****   // Deallocate first forcing flush and preparing new filename
2145:dm/dm42_fns.cc ****   set_print_to_file_flag(what, 0);
2146:dm/dm42_fns.cc ****   prtof_buf_update(what);
2147:dm/dm42_fns.cc **** 
2148:dm/dm42_fns.cc ****   if (val) {
2149:dm/dm42_fns.cc ****     set_print_to_file_flag(what, 1);
2150:dm/dm42_fns.cc ****     res = prtof_buf_update(what);
2151:dm/dm42_fns.cc ****     if (res) {
2152:dm/dm42_fns.cc ****       msg = "Cannot allocate memory";
2153:dm/dm42_fns.cc ****       goto set_ptf_err;
2154:dm/dm42_fns.cc ****     }
2155:dm/dm42_fns.cc **** 
2156:dm/dm42_fns.cc ****     res = prtof_buf_init_fname(what);
2157:dm/dm42_fns.cc ****     if (res) {
2158:dm/dm42_fns.cc ****       msg = "Cannot create /PRINTS directory";
2159:dm/dm42_fns.cc ****       goto set_ptf_err;
2160:dm/dm42_fns.cc ****     }
2161:dm/dm42_fns.cc ****     // Buffer ready
2162:dm/dm42_fns.cc **** 
2163:dm/dm42_fns.cc ****   }
2164:dm/dm42_fns.cc **** 
2165:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 44


2166:dm/dm42_fns.cc **** 
2167:dm/dm42_fns.cc **** set_ptf_err:
2168:dm/dm42_fns.cc **** 
2169:dm/dm42_fns.cc ****   if (msg) {
2170:dm/dm42_fns.cc ****     // Fail -> return value back to zero
2171:dm/dm42_fns.cc ****     if (val) {
2172:dm/dm42_fns.cc ****       set_print_to_file_flag(what, 0);
2173:dm/dm42_fns.cc ****       prtof_buf_update(what); // Dealloc if allocated
2174:dm/dm42_fns.cc ****     }
2175:dm/dm42_fns.cc **** 
2176:dm/dm42_fns.cc ****     // Report to GUI if enabled
2177:dm/dm42_fns.cc ****     if (gui) {
2178:dm/dm42_fns.cc ****       lcd_for_dm42(DISP_PRBUF_ALLOC_FAIL);
2179:dm/dm42_fns.cc ****       lcd_puts(t24, msg);
2180:dm/dm42_fns.cc ****       lcd_puts(t24, "");
2181:dm/dm42_fns.cc ****       lcd_print(t24,"(Buffer size %i bytes)", prtof_buf_size(what));
2182:dm/dm42_fns.cc ****       lcd_puts(t24, "Press a key to continue");
2183:dm/dm42_fns.cc ****       lcd_refresh();
2184:dm/dm42_fns.cc ****       wait_for_key_press();
2185:dm/dm42_fns.cc ****     }
2186:dm/dm42_fns.cc ****   }
2187:dm/dm42_fns.cc **** 
2188:dm/dm42_fns.cc **** }
2189:dm/dm42_fns.cc **** 
2190:dm/dm42_fns.cc **** 
2191:dm/dm42_fns.cc **** 
2192:dm/dm42_fns.cc **** /*
2193:dm/dm42_fns.cc ****   ▄▄▄▄                                ▄             ▄             ▄▀▀            
2194:dm/dm42_fns.cc ****  █▀   ▀  ▄▄▄   ▄   ▄   ▄▄▄    ▄▄▄   ▄▄█▄▄   ▄▄▄   ▄
2195:dm/dm42_fns.cc ****  ▀█▄▄▄  ▀   █  ▀▄ ▄▀  █▀  █  █   ▀    █    ▀   █    █      
2196:dm/dm42_fns.cc ****      ▀█ ▄▀▀▀█   █▄█   █▀▀▀▀   ▀▀▀▄    █    ▄▀▀▀█ 
2197:dm/dm42_fns.cc ****  ▀▄▄▄█▀ ▀▄▄▀█    █    ▀█▄▄▀  ▀▄▄▄▀    ▀▄▄  ▀▄
2198:dm/dm42_fns.cc **** 
2199:dm/dm42_fns.cc **** */
2200:dm/dm42_fns.cc ****  
2201:dm/dm42_fns.cc **** 
2202:dm/dm42_fns.cc **** // 0 - OK
2203:dm/dm42_fns.cc **** int savestat_init_read() {
2204:dm/dm42_fns.cc ****   uint ver[2];
2205:dm/dm42_fns.cc ****   uint rd;
2206:dm/dm42_fns.cc ****   char * state_file_name = get_reset_state_file();
2207:dm/dm42_fns.cc ****   pgm_res = FR_DISK_ERR;
2208:dm/dm42_fns.cc ****   if ( !sys_disk_ok() || state_file_name == NULL ) return -1;
2209:dm/dm42_fns.cc ****   pgm_res = f_open(ppgm_fp,  state_file_name , FA_READ);
2210:dm/dm42_fns.cc ****   if ( pgm_res != FR_OK ) return -1;
2211:dm/dm42_fns.cc ****   pgm_res = f_lseek(ppgm_fp, f_size(ppgm_fp)-sizeof(savestat_data_t)-sizeof(uint) );
2212:dm/dm42_fns.cc ****   if ( pgm_res != FR_OK ) return -1;
2213:dm/dm42_fns.cc ****   pgm_res = f_read(ppgm_fp,ver,sizeof(ver),&rd);
2214:dm/dm42_fns.cc ****   if ( pgm_res != FR_OK || rd != sizeof(ver) || ver[1] != SAVESTAT_MAGIC) return -1;
2215:dm/dm42_fns.cc ****   pgm_res = f_lseek(ppgm_fp, 0);
2216:dm/dm42_fns.cc ****   if ( pgm_res != FR_OK ) return -1;
2217:dm/dm42_fns.cc ****   return ver[0];
2218:dm/dm42_fns.cc **** }
2219:dm/dm42_fns.cc **** 
2220:dm/dm42_fns.cc **** // 0 - OK
2221:dm/dm42_fns.cc **** int savestat_init_write() {
2222:dm/dm42_fns.cc ****   char * state_file_name = get_reset_state_file();
ARM GAS  /tmp/ccGYckNR.s 			page 45


2223:dm/dm42_fns.cc ****   pgm_res = FR_DISK_ERR;
2224:dm/dm42_fns.cc **** 
2225:dm/dm42_fns.cc ****   if ( !sys_disk_ok()  || state_file_name == NULL ) return 1;
2226:dm/dm42_fns.cc ****   // Create /STATE directory if missing
2227:dm/dm42_fns.cc ****   if ( check_create_dir(STATE_DIR) )
2228:dm/dm42_fns.cc ****     return 1;
2229:dm/dm42_fns.cc ****   pgm_res = f_open(ppgm_fp, state_file_name, FA_WRITE|FA_CREATE_ALWAYS);
2230:dm/dm42_fns.cc ****   return pgm_res != FR_OK;
2231:dm/dm42_fns.cc **** }
2232:dm/dm42_fns.cc **** 
2233:dm/dm42_fns.cc **** 
2234:dm/dm42_fns.cc **** void copy_reset_state_filename(char *s, int maxlen) {
2235:dm/dm42_fns.cc ****   char * f = get_reset_state_file();
2236:dm/dm42_fns.cc **** 
2237:dm/dm42_fns.cc ****   if ( f != NULL ) {
2238:dm/dm42_fns.cc ****     int len = strlen(f);
2239:dm/dm42_fns.cc ****     char * t = s + strlen(s);
2240:dm/dm42_fns.cc ****     int lendir = strlen(STATE_DIR);
2241:dm/dm42_fns.cc **** 
2242:dm/dm42_fns.cc ****     // Skip /STATE directory in filename
2243:dm/dm42_fns.cc ****     if ( len > lendir && f[lendir] == '/' ) {
2244:dm/dm42_fns.cc ****       f += lendir+1;
2245:dm/dm42_fns.cc ****       len = strlen(f);
2246:dm/dm42_fns.cc ****     }
2247:dm/dm42_fns.cc **** 
2248:dm/dm42_fns.cc ****     // Trunc flename if too long
2249:dm/dm42_fns.cc ****     if ( len >= maxlen ) {
2250:dm/dm42_fns.cc ****       strncpy(t, f, maxlen-1);
2251:dm/dm42_fns.cc ****       t[maxlen] = 0;
2252:dm/dm42_fns.cc ****     } else {
2253:dm/dm42_fns.cc ****       strcpy(t, f);
2254:dm/dm42_fns.cc ****     }
2255:dm/dm42_fns.cc **** 
2256:dm/dm42_fns.cc ****     // Remove extension (not perfect, but reasonable enough :) )
2257:dm/dm42_fns.cc ****     t = strrchr(s,'.');
2258:dm/dm42_fns.cc ****     if (t) t[0] = 0;
2259:dm/dm42_fns.cc **** 
2260:dm/dm42_fns.cc ****   } else {
2261:dm/dm42_fns.cc ****     strcat(s,"none");
2262:dm/dm42_fns.cc ****   }
2263:dm/dm42_fns.cc **** }
2264:dm/dm42_fns.cc **** 
2265:dm/dm42_fns.cc **** 
2266:dm/dm42_fns.cc **** 
2267:dm/dm42_fns.cc **** // Disp regs
2268:dm/dm42_fns.cc **** 
2269:dm/dm42_fns.cc **** int current_font_nr() {
2270:dm/dm42_fns.cc ****   return is_pgm_mode() ? pgm_font_ix : reg_font_ix;
2271:dm/dm42_fns.cc **** }
2272:dm/dm42_fns.cc **** 
2273:dm/dm42_fns.cc **** void disp_aligned_line(const char *prompt, const char *s) {
2274:dm/dm42_fns.cc ****   char pr[EDIT_PROMPT_LEN+1];
2275:dm/dm42_fns.cc **** 
2276:dm/dm42_fns.cc ****   //lcd_putsAt(fReg,ln,""); // Fill the line
2277:dm/dm42_fns.cc ****   lcd_prevLn(fReg);
2278:dm/dm42_fns.cc ****   lcd_puts(fReg,""); // Fill the line
2279:dm/dm42_fns.cc ****   fReg->lnfill = 0;
ARM GAS  /tmp/ccGYckNR.s 			page 46


2280:dm/dm42_fns.cc ****   if (is_REG_LINES) {
2281:dm/dm42_fns.cc ****     int yln = fReg->y+lcd_baseHeight(fReg)+2;
2282:dm/dm42_fns.cc ****     if ( yln > fReg->y_top_grd)
2283:dm/dm42_fns.cc ****       lcd_fillLines(yln, 0xAA, 1);
2284:dm/dm42_fns.cc ****   }
2285:dm/dm42_fns.cc ****   
2286:dm/dm42_fns.cc ****   int plen = strlen(prompt);
2287:dm/dm42_fns.cc ****   if ( prompt[plen-1] == ':' ) {
2288:dm/dm42_fns.cc ****     strcpy(pr,prompt);
2289:dm/dm42_fns.cc ****     pr[plen-1] = 0;
2290:dm/dm42_fns.cc ****     lcd_puts(fReg,pr);
2291:dm/dm42_fns.cc ****     int x = fReg->x;
2292:dm/dm42_fns.cc ****     int dy = current_font_nr() < 0 ? 0 : lcd_lineHeight(fReg)/12;
2293:dm/dm42_fns.cc ****     fReg->fixed = 0;
2294:dm/dm42_fns.cc ****     fReg->y -= dy;
2295:dm/dm42_fns.cc ****     lcd_puts(fReg, ":");
2296:dm/dm42_fns.cc ****     fReg->y += dy;
2297:dm/dm42_fns.cc **** 
2298:dm/dm42_fns.cc ****     fReg->fixed = 1;
2299:dm/dm42_fns.cc ****     fReg->x = x+lcd_charWidth(fReg, ':');
2300:dm/dm42_fns.cc ****   } else
2301:dm/dm42_fns.cc ****     lcd_puts(fReg,prompt);
2302:dm/dm42_fns.cc ****   
2303:dm/dm42_fns.cc ****   if ( !is_REG_ALIGN_LEFT ) {
2304:dm/dm42_fns.cc ****     // Align to the right
2305:dm/dm42_fns.cc ****     int newx = LCD_X - strlen(s)*lcd_fontWidth(fReg) - fReg->xoffs;
2306:dm/dm42_fns.cc ****     if ( newx > fReg->x ) fReg->x = newx;
2307:dm/dm42_fns.cc ****   }
2308:dm/dm42_fns.cc ****   lcd_puts(fReg,s);
2309:dm/dm42_fns.cc ****   fReg->lnfill = 1;
2310:dm/dm42_fns.cc **** }
2311:dm/dm42_fns.cc **** 
2312:dm/dm42_fns.cc **** 
2313:dm/dm42_fns.cc **** void set_reg_font(int offset) {
2314:dm/dm42_fns.cc ****   int fnr = current_font_nr();
2315:dm/dm42_fns.cc **** 
2316:dm/dm42_fns.cc ****   for(;offset > 0; offset--) fnr = lcd_nextFontNr(fnr);
2317:dm/dm42_fns.cc ****   for(;offset < 0; offset++) fnr = lcd_prevFontNr(fnr);
2318:dm/dm42_fns.cc **** 
2319:dm/dm42_fns.cc ****   lcd_switchFont(fReg, fnr);
2320:dm/dm42_fns.cc ****   if (fnr < 0 && !is_pgm_mode() && NR2T(fnr) < 5)
2321:dm/dm42_fns.cc ****     fReg->ya++;
2322:dm/dm42_fns.cc ****   if (fnr >= 0 && is_pgm_mode() )
2323:dm/dm42_fns.cc ****     fReg->yb = -1;
2324:dm/dm42_fns.cc ****   if (fnr == 5) { fReg->yb-=1; fReg->ya-=1; }
2325:dm/dm42_fns.cc **** }
2326:dm/dm42_fns.cc **** 
2327:dm/dm42_fns.cc **** 
2328:dm/dm42_fns.cc **** void disp_reg(const char *prompt, reg_id_t reg_id, int line_reg_nr) {
2329:dm/dm42_fns.cc **** 
2330:dm/dm42_fns.cc ****   set_reg_font(get_reg_font_offset(line_reg_nr));
2331:dm/dm42_fns.cc **** 
2332:dm/dm42_fns.cc ****   const int linelen = (LCD_X + fReg->xoffs)/lcd_fontWidth(fReg); //(LCD_X - fReg->xoffs)/fReg->f->w
2333:dm/dm42_fns.cc ****   const int buflen = linelen; //64; //32;
2334:dm/dm42_fns.cc ****   char buf[buflen];
2335:dm/dm42_fns.cc ****   int len;
2336:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 47


2337:dm/dm42_fns.cc ****   len = reg2str(buf, buflen-strlen(prompt), reg_id);
2338:dm/dm42_fns.cc ****   len = hp2font(buf, buf,len); buf[len] = 0;
2339:dm/dm42_fns.cc ****   disp_aligned_line(prompt, buf);
2340:dm/dm42_fns.cc **** }
2341:dm/dm42_fns.cc **** 
2342:dm/dm42_fns.cc **** 
2343:dm/dm42_fns.cc **** void disp_regs(int what) {
2344:dm/dm42_fns.cc ****   static int last_pgm_top_line = 0;
2345:dm/dm42_fns.cc ****   char bb[LCD_HP_CHARS+2];
2346:dm/dm42_fns.cc ****   int len;
2347:dm/dm42_fns.cc **** 
2348:dm/dm42_fns.cc **** #ifndef DBG_NOLCD
2349:dm/dm42_fns.cc ****   printf("Disp regs\n");
2350:dm/dm42_fns.cc **** #endif
2351:dm/dm42_fns.cc **** 
2352:dm/dm42_fns.cc ****   int is_running = ANN(RUN);
2353:dm/dm42_fns.cc ****   int refresh_mask = is_running ? what : LCD_UPD_ALL;
2354:dm/dm42_fns.cc **** 
2355:dm/dm42_fns.cc ****   if (refresh_mask < 0)
2356:dm/dm42_fns.cc ****     refresh_mask = get_reflcd_mask();
2357:dm/dm42_fns.cc **** 
2358:dm/dm42_fns.cc ****   printf("reflcd=%i  goose=%i  run=%i  refmsk=%i  ms=%i\n", get_reflcd_mask(), is_goose(), is_runni
2359:dm/dm42_fns.cc **** 
2360:dm/dm42_fns.cc ****   if (is_graphics>1) {
2361:dm/dm42_fns.cc ****     clear_lcd_update_timeout();
2362:dm/dm42_fns.cc ****     if (refresh_mask & LCD_UPD_MAIN)
2363:dm/dm42_fns.cc ****       lcd_refresh();
2364:dm/dm42_fns.cc ****     else
2365:dm/dm42_fns.cc ****       set_lcd_update_timeout(); // No paint just repeat timeout
2366:dm/dm42_fns.cc ****     return;
2367:dm/dm42_fns.cc ****   }
2368:dm/dm42_fns.cc **** 
2369:dm/dm42_fns.cc ****   const int top_y_lines = LCD_HEADER_LINES + LCD_ANN_LINES;
2370:dm/dm42_fns.cc ****   const int display_core_menu = (core_menu() && disp_was_menu_drawn);
2371:dm/dm42_fns.cc **** 
2372:dm/dm42_fns.cc ****   set_reg_font(0);
2373:dm/dm42_fns.cc **** 
2374:dm/dm42_fns.cc ****   // Protect header and annunciators
2375:dm/dm42_fns.cc ****   fReg->y_top_grd = top_y_lines;
2376:dm/dm42_fns.cc **** 
2377:dm/dm42_fns.cc ****   // == Display DM42 top menu ==
2378:dm/dm42_fns.cc ****   if ( is_disp_main_menu() && !display_core_menu ) {
2379:dm/dm42_fns.cc ****     const char * menu[] = 
2380:dm/dm42_fns.cc ****       // {"Menu-","Vol-","Vol+","RegFmt","Font-","Font+"};
2381:dm/dm42_fns.cc ****       {"Help","Menu","","Volume","RegFmt","FonSz"};
2382:dm/dm42_fns.cc ****     lcd_draw_menu_keys(menu);
2383:dm/dm42_fns.cc ****   }
2384:dm/dm42_fns.cc **** 
2385:dm/dm42_fns.cc **** 
2386:dm/dm42_fns.cc ****   // == Display program lines ==
2387:dm/dm42_fns.cc ****   if ( is_pgm_mode() ) {
2388:dm/dm42_fns.cc ****     int y_lines = LCD_Y - top_y_lines;
2389:dm/dm42_fns.cc ****     int font_lines = y_lines/lcd_lineHeight(fReg);
2390:dm/dm42_fns.cc ****     int last_line = 0;
2391:dm/dm42_fns.cc ****     int const linelen = (LCD_X + fReg->xoffs)/lcd_fontWidth(fReg); //(LCD_X - fReg->xoffs)/fReg->f-
2392:dm/dm42_fns.cc **** 
2393:dm/dm42_fns.cc ****     pgm_info_t pi;
ARM GAS  /tmp/ccGYckNR.s 			page 48


2394:dm/dm42_fns.cc ****     get_pgm_info(&pi);
2395:dm/dm42_fns.cc **** 
2396:dm/dm42_fns.cc ****     // == Adjust main area when menu shown ==
2397:dm/dm42_fns.cc ****     if ( is_disp_main_menu() || display_core_menu ) {
2398:dm/dm42_fns.cc ****       y_lines -= LCD_MENU_LINES;
2399:dm/dm42_fns.cc ****       font_lines = y_lines/lcd_lineHeight(fReg);
2400:dm/dm42_fns.cc ****     }
2401:dm/dm42_fns.cc **** 
2402:dm/dm42_fns.cc ****     // From the top
2403:dm/dm42_fns.cc ****     fReg->ln_offs = top_y_lines;
2404:dm/dm42_fns.cc **** 
2405:dm/dm42_fns.cc ****     // == Clear main area ==
2406:dm/dm42_fns.cc ****     lcd_fillLines(top_y_lines, LCD_EMPTY_VALUE, y_lines);
2407:dm/dm42_fns.cc **** 
2408:dm/dm42_fns.cc ****     // Show displays current pgm line over two lcd lines
2409:dm/dm42_fns.cc ****     if (is_show) font_lines--;
2410:dm/dm42_fns.cc **** 
2411:dm/dm42_fns.cc ****     if ( pi.pgm_line < last_pgm_top_line ) 
2412:dm/dm42_fns.cc ****       last_pgm_top_line = pi.pgm_line;
2413:dm/dm42_fns.cc ****     if ( last_pgm_top_line <= (pi.pgm_line - font_lines) )
2414:dm/dm42_fns.cc ****       last_pgm_top_line = pi.pgm_line - font_lines + 1;
2415:dm/dm42_fns.cc **** 
2416:dm/dm42_fns.cc ****     //lcd_printAt(fReg, last_line++, "ln=%i  y=%i", pi.pgm_line, pi.y_row);
2417:dm/dm42_fns.cc ****     #define PGM_LINE_LEN 100
2418:dm/dm42_fns.cc ****     char pb[PGM_LINE_LEN];
2419:dm/dm42_fns.cc ****     pgm_line_t pln;
2420:dm/dm42_fns.cc ****     pgm_line_init(&pln, pb, linelen);
2421:dm/dm42_fns.cc **** 
2422:dm/dm42_fns.cc ****     int pgm_line = last_pgm_top_line;
2423:dm/dm42_fns.cc ****     int pgm_line_end = last_pgm_top_line + font_lines;
2424:dm/dm42_fns.cc ****     for( ; !pln.is_end && pgm_line < pgm_line_end; pgm_line++ ) {
2425:dm/dm42_fns.cc ****       len = get_pgm_line(&pln, pgm_line);
2426:dm/dm42_fns.cc ****       if ( pgm_line == pi.pgm_line ) {
2427:dm/dm42_fns.cc ****         if (is_show) {
2428:dm/dm42_fns.cc ****           // Display both lines
2429:dm/dm42_fns.cc ****           hp2font(bb,tlcd[0],LCD_HP_CHARS);
2430:dm/dm42_fns.cc ****           lcd_putsAt(fReg, last_line++, bb);
2431:dm/dm42_fns.cc ****           pi.y_row=1;
2432:dm/dm42_fns.cc ****         }
2433:dm/dm42_fns.cc ****         hp2font(bb,tlcd[pi.y_row],LCD_HP_CHARS);
2434:dm/dm42_fns.cc ****         lcd_putsAt(fReg, last_line++, bb);
2435:dm/dm42_fns.cc ****       } else {
2436:dm/dm42_fns.cc ****         hp2font(pb,pb,len);
2437:dm/dm42_fns.cc ****         lcd_putsAt(fReg, last_line++, pb);
2438:dm/dm42_fns.cc ****       }
2439:dm/dm42_fns.cc ****     }
2440:dm/dm42_fns.cc **** 
2441:dm/dm42_fns.cc ****   } else { // if ( is_pgm_mode() ) 
2442:dm/dm42_fns.cc **** 
2443:dm/dm42_fns.cc ****     // == Display stack area ==
2444:dm/dm42_fns.cc **** 
2445:dm/dm42_fns.cc ****     //int y_lines = LCD_Y - top_y_lines;
2446:dm/dm42_fns.cc ****     fReg->y = LCD_Y;
2447:dm/dm42_fns.cc **** 
2448:dm/dm42_fns.cc ****     //fReg->ln_offs = LCD_Y - font_lines*lcd_lineHeight(fReg);
2449:dm/dm42_fns.cc **** 
2450:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 49


2451:dm/dm42_fns.cc ****     // == Adjust main area when menu shown ==
2452:dm/dm42_fns.cc ****     if ( is_disp_main_menu() || display_core_menu ) {
2453:dm/dm42_fns.cc ****       //fReg->ln_offs -= LCD_MENU_LINES;
2454:dm/dm42_fns.cc ****       //y_lines -= LCD_MENU_LINES;
2455:dm/dm42_fns.cc ****       fReg->y -= LCD_MENU_LINES;
2456:dm/dm42_fns.cc ****     }
2457:dm/dm42_fns.cc **** 
2458:dm/dm42_fns.cc ****     if (refresh_mask & LCD_UPD_MAIN) {
2459:dm/dm42_fns.cc ****       // == Clear main area ==
2460:dm/dm42_fns.cc ****       lcd_fillLines(top_y_lines, LCD_EMPTY_VALUE, fReg->y - top_y_lines);
2461:dm/dm42_fns.cc **** 
2462:dm/dm42_fns.cc **** #if 0
2463:dm/dm42_fns.cc ****       // == TEST ==
2464:dm/dm42_fns.cc ****       set_reg_font_offset(LINE_REG_X,  3);
2465:dm/dm42_fns.cc ****       set_reg_font_offset(LINE_REG_Y,  1);
2466:dm/dm42_fns.cc ****       set_reg_font_offset(LINE_REG_Z, -1);
2467:dm/dm42_fns.cc ****       set_reg_font_offset(LINE_REG_T, -3);
2468:dm/dm42_fns.cc ****       set_reg_font_offset(LINE_REG_L, -3);
2469:dm/dm42_fns.cc ****       set_reg_font_offset(LINE_REG_A, -3);
2470:dm/dm42_fns.cc ****       // == TEST END ==
2471:dm/dm42_fns.cc **** #endif
2472:dm/dm42_fns.cc **** 
2473:dm/dm42_fns.cc ****       if ( stack_layout & STACK_REG_L0)
2474:dm/dm42_fns.cc ****         disp_reg("L:",REG_LX, LINE_REG_L);
2475:dm/dm42_fns.cc **** 
2476:dm/dm42_fns.cc ****       // X is always displayed as edit or reg
2477:dm/dm42_fns.cc ****       if (is_edit_x) { // (is_edit) - INPUT edit in text area already
2478:dm/dm42_fns.cc ****         // Print edit line if available
2479:dm/dm42_fns.cc ****         set_reg_font(get_reg_font_offset(LINE_REG_X));
2480:dm/dm42_fns.cc ****   
2481:dm/dm42_fns.cc ****         int plen = strlen(edit_prompt), llen = strlen(edit_line);
2482:dm/dm42_fns.cc ****         int const linelen = (LCD_X + fReg->xoffs)/lcd_fontWidth(fReg); //(LCD_X - fReg->xoffs)/fReg
2483:dm/dm42_fns.cc **** 
2484:dm/dm42_fns.cc ****         char s[linelen+2];
2485:dm/dm42_fns.cc ****         if ( plen+llen < linelen )
2486:dm/dm42_fns.cc ****           sprintf(s, "%s_", edit_line);
2487:dm/dm42_fns.cc ****         else {
2488:dm/dm42_fns.cc ****           sprintf(s, "\x9a%s_", edit_line+llen-(linelen-plen-2));
2489:dm/dm42_fns.cc ****         }
2490:dm/dm42_fns.cc ****         disp_aligned_line(edit_prompt, s);
2491:dm/dm42_fns.cc ****       }
2492:dm/dm42_fns.cc **** 
2493:dm/dm42_fns.cc ****       if (!is_edit_x)
2494:dm/dm42_fns.cc ****         disp_reg("X:",REG_X, LINE_REG_X);
2495:dm/dm42_fns.cc **** 
2496:dm/dm42_fns.cc **** 
2497:dm/dm42_fns.cc ****       // Display other registers according to the configuration
2498:dm/dm42_fns.cc **** 
2499:dm/dm42_fns.cc ****       if ( stack_layout & STACK_REG_Y)
2500:dm/dm42_fns.cc ****         disp_reg("Y:",REG_Y, LINE_REG_Y);
2501:dm/dm42_fns.cc ****       
2502:dm/dm42_fns.cc ****       if ( stack_layout & STACK_REG_Z)
2503:dm/dm42_fns.cc ****         disp_reg("Z:",REG_Z, LINE_REG_Z);
2504:dm/dm42_fns.cc ****       
2505:dm/dm42_fns.cc ****       if ( stack_layout & STACK_REG_T)
2506:dm/dm42_fns.cc ****         disp_reg("T:",REG_T, LINE_REG_T);
2507:dm/dm42_fns.cc ****       
ARM GAS  /tmp/ccGYckNR.s 			page 50


2508:dm/dm42_fns.cc ****       if ( stack_layout & STACK_REG_L)
2509:dm/dm42_fns.cc ****         disp_reg("L:",REG_LX, LINE_REG_L);
2510:dm/dm42_fns.cc **** 
2511:dm/dm42_fns.cc ****       if ( stack_layout & STACK_REG_A)
2512:dm/dm42_fns.cc ****         disp_reg("A:",REG_A, LINE_REG_A);
2513:dm/dm42_fns.cc ****     }
2514:dm/dm42_fns.cc **** 
2515:dm/dm42_fns.cc ****   }
2516:dm/dm42_fns.cc **** 
2517:dm/dm42_fns.cc ****   // Reset font size
2518:dm/dm42_fns.cc ****   set_reg_font(0);
2519:dm/dm42_fns.cc **** 
2520:dm/dm42_fns.cc ****   // == Draw the top text lines ==
2521:dm/dm42_fns.cc ****   if ( !is_pgm_mode() && (!is_goose() || (is_goose() && (refresh_mask & LCD_UPD_GOOSE))) ) {
2522:dm/dm42_fns.cc ****     int wasy = 0; // Anything was drawn
2523:dm/dm42_fns.cc ****     int last_line = 0;
2524:dm/dm42_fns.cc ****     // Print from text buffer all what isn't especially handled
2525:dm/dm42_fns.cc ****     fReg->ln_offs = top_y_lines; // From the top
2526:dm/dm42_fns.cc ****     for(int j=0; j<2; j++) {
2527:dm/dm42_fns.cc ****       // Ignore if second char is 0x80 -> register display
2528:dm/dm42_fns.cc ****       if (tlcd[j][1] == 0x80) continue;
2529:dm/dm42_fns.cc **** 
2530:dm/dm42_fns.cc ****       // Ignore continuation lines while in edit mode
2531:dm/dm42_fns.cc ****       if (!is_pgm_mode() && is_edit && tlcd[j][0] == 0x1a) continue;
2532:dm/dm42_fns.cc ****       
2533:dm/dm42_fns.cc ****       // Ignore if line is empty - but skip for first line if alpha mode active
2534:dm/dm42_fns.cc ****       if ( ( alpha_table == ALPHA_INACTIVE || j!=0 ) && tlcd_row_empty(j) )
2535:dm/dm42_fns.cc ****         continue;
2536:dm/dm42_fns.cc **** 
2537:dm/dm42_fns.cc ****       len = hp2font(bb,tlcd[j],LCD_HP_CHARS); bb[len] = 0;
2538:dm/dm42_fns.cc **** 
2539:dm/dm42_fns.cc ****       // FIXME: Clear some more background?
2540:dm/dm42_fns.cc ****       lcd_putsAt(fReg, last_line++, bb);
2541:dm/dm42_fns.cc ****       wasy = fReg->y;
2542:dm/dm42_fns.cc ****     }
2543:dm/dm42_fns.cc **** 
2544:dm/dm42_fns.cc ****     // Draw black line under text area if at least one line was printed
2545:dm/dm42_fns.cc ****     if ( wasy )
2546:dm/dm42_fns.cc ****       lcd_fillLines(wasy+lcd_lineHeight(fReg), LCD_SET_VALUE, 2);
2547:dm/dm42_fns.cc ****   }
2548:dm/dm42_fns.cc **** 
2549:dm/dm42_fns.cc **** 
2550:dm/dm42_fns.cc ****   // == Draw flag icons ==
2551:dm/dm42_fns.cc ****   if (refresh_mask & LCD_UPD_ANN) {
2552:dm/dm42_fns.cc ****     int a;
2553:dm/dm42_fns.cc ****     lcd_draw_img_part(ann03+ANN2_BPL-24,
2554:dm/dm42_fns.cc ****       0, ANN_LCD_Y,
2555:dm/dm42_fns.cc ****       ANN2_LCD_X, ANN_LCD_DY, 8*24);
2556:dm/dm42_fns.cc **** 
2557:dm/dm42_fns.cc ****     for(a=0; a<ANN_FLAG_CNT; a++) {
2558:dm/dm42_fns.cc ****       if ( !get_calc_flag(a) && !TEST_ANNUNCIATORS) {
2559:dm/dm42_fns.cc ****         // Empty particular space
2560:dm/dm42_fns.cc ****         lcd_fill_rect(210+a*17, ANN_LCD_Y, 16, ANN_LCD_DY, 0);
2561:dm/dm42_fns.cc ****       }
2562:dm/dm42_fns.cc ****     }
2563:dm/dm42_fns.cc ****   }
2564:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 51


2565:dm/dm42_fns.cc ****   //is_edit_x = is_edit = 0;
2566:dm/dm42_fns.cc **** 
2567:dm/dm42_fns.cc ****   clear_lcd_update_timeout();
2568:dm/dm42_fns.cc **** 
2569:dm/dm42_fns.cc ****   if ( is_graphics == 1 && (refresh_mask & LCD_UPD_MAIN)) // draw_old_lcd ||
2570:dm/dm42_fns.cc ****     draw_hp42_lcd(core_display_buffer(), 17, 0,0, 131,16);
2571:dm/dm42_fns.cc ****   else
2572:dm/dm42_fns.cc ****     set_lcd_update_timeout(); // No paint just repeat timeout
2573:dm/dm42_fns.cc **** 
2574:dm/dm42_fns.cc ****   if ( !core_menu() )
2575:dm/dm42_fns.cc ****     disp_was_menu_drawn = 0;
2576:dm/dm42_fns.cc **** 
2577:dm/dm42_fns.cc **** }
2578:dm/dm42_fns.cc **** 
2579:dm/dm42_fns.cc **** 
2580:dm/dm42_fns.cc **** 
2581:dm/dm42_fns.cc **** void empty_keydown() {
2582:dm/dm42_fns.cc ****   int dummy1, dummy2, keep_running;
2583:dm/dm42_fns.cc ****   do {
2584:dm/dm42_fns.cc ****     printf("empty keydown:\n");
2585:dm/dm42_fns.cc ****     keep_running = core_keydown(0, &dummy1, &dummy2);
2586:dm/dm42_fns.cc ****     printf("end of empty keydown: keep_running=%i\n", keep_running);
2587:dm/dm42_fns.cc ****   } while (keep_running);
2588:dm/dm42_fns.cc **** }
2589:dm/dm42_fns.cc **** 
2590:dm/dm42_fns.cc **** 
2591:dm/dm42_fns.cc **** 
2592:dm/dm42_fns.cc **** 
2593:dm/dm42_fns.cc **** 
2594:dm/dm42_fns.cc **** 
2595:dm/dm42_fns.cc **** /*
2596:dm/dm42_fns.cc ****  ▄▄▄▄▄                                    
2597:dm/dm42_fns.cc ****  █   ▀█ ▄   ▄  ▄ ▄▄   ▄ ▄▄    ▄▄▄    ▄ ▄▄ 
2598:dm/dm42_fns.cc ****  █▄▄▄▄▀ █   █  █▀  █  █▀  █  █▀  █   █▀  ▀
2599:dm/dm42_fns.cc ****  █   ▀▄ █   █  █   █  █   █  █▀▀▀▀   █    
2600:dm/dm42_fns.cc ****  █    ▀ ▀▄▄▀█  █   █  █   █  ▀█▄▄▀   █    */
2601:dm/dm42_fns.cc **** 
2602:dm/dm42_fns.cc **** 
2603:dm/dm42_fns.cc **** #define TIMER0 0
2604:dm/dm42_fns.cc **** #define TIMER3 1
2605:dm/dm42_fns.cc **** 
2606:dm/dm42_fns.cc **** // Value in ms
2607:dm/dm42_fns.cc **** void setTimeout0(int timeout_type, int value) {
2608:dm/dm42_fns.cc ****   if ( is_pgm_mode() && !is_slow_autorepeat() && (sys_last_key() == KEY_UP || sys_last_key() == KEY
2609:dm/dm42_fns.cc ****     value = value/2; // Half in pgm mode
2610:dm/dm42_fns.cc ****   printf("setTimeout0: %i : %i\n",timeout_type, value);
2611:dm/dm42_fns.cc **** 
2612:dm/dm42_fns.cc ****   timeout0_type = timeout_type;
2613:dm/dm42_fns.cc ****   sys_timer_start(TIMER0, value);
2614:dm/dm42_fns.cc **** }
2615:dm/dm42_fns.cc **** 
2616:dm/dm42_fns.cc **** void clearTimeout0() {
2617:dm/dm42_fns.cc ****   sys_timer_disable(TIMER0);
2618:dm/dm42_fns.cc **** }
2619:dm/dm42_fns.cc **** 
2620:dm/dm42_fns.cc **** void setTimeout3(int value) {
2621:dm/dm42_fns.cc ****   sys_timer_start(TIMER3, value);
ARM GAS  /tmp/ccGYckNR.s 			page 52


2622:dm/dm42_fns.cc **** }
2623:dm/dm42_fns.cc **** 
2624:dm/dm42_fns.cc **** void clearTimeout3() {
2625:dm/dm42_fns.cc ****   sys_timer_disable(TIMER3);
2626:dm/dm42_fns.cc **** }
2627:dm/dm42_fns.cc **** 
2628:dm/dm42_fns.cc **** 
2629:dm/dm42_fns.cc **** 
2630:dm/dm42_fns.cc **** int header_timeout() {
2631:dm/dm42_fns.cc ****   return last_header_min != rtc_read_min() && is_graphics < 2;
2632:dm/dm42_fns.cc **** }
2633:dm/dm42_fns.cc **** 
2634:dm/dm42_fns.cc **** void clear_header_timeout() {
2635:dm/dm42_fns.cc ****   last_header_min = rtc_read_min();
2636:dm/dm42_fns.cc **** }
2637:dm/dm42_fns.cc **** 
2638:dm/dm42_fns.cc **** void force_header_timeout() {
2639:dm/dm42_fns.cc ****   last_header_min = 77; // Force header timeout
2640:dm/dm42_fns.cc **** }
2641:dm/dm42_fns.cc **** 
2642:dm/dm42_fns.cc **** 
2643:dm/dm42_fns.cc **** int lcd_update_timeout() {
 270              		.loc 1 2643 0
 271              		.cfi_startproc
 272              		@ args = 0, pretend = 0, frame = 0
 273              		@ frame_needed = 0, uses_anonymous_args = 0
 274 0000 08B5     		push	{r3, lr}
 275              		.cfi_def_cfa_offset 8
 276              		.cfi_offset 3, -8
 277              		.cfi_offset 14, -4
2644:dm/dm42_fns.cc ****   return last_lcd_update_ms 
2645:dm/dm42_fns.cc ****     ? (sys_current_ms() - last_lcd_update_ms > LCD_UPDATE_TIMEOUT)
 278              		.loc 1 2645 0
 279 0002 054B     		ldr	r3, .L30
 280 0004 9847     		blx	r3
 281              	.LVL19:
 282 0006 054B     		ldr	r3, .L30+4
 283 0008 1B68     		ldr	r3, [r3]
 284 000a C01A     		subs	r0, r0, r3
2646:dm/dm42_fns.cc ****     :  0;
2647:dm/dm42_fns.cc **** }
 285              		.loc 1 2647 0
 286 000c C828     		cmp	r0, #200
 287 000e 94BF     		ite	ls
 288 0010 0020     		movls	r0, #0
 289 0012 0120     		movhi	r0, #1
 290 0014 08BD     		pop	{r3, pc}
 291              	.L31:
 292 0016 00BF     		.align	2
 293              	.L30:
 294 0018 0D040008 		.word	134218765
 295 001c 00000000 		.word	.LANCHOR9
 296              		.cfi_endproc
 297              	.LFE333:
 299              		.section	.text.set_lcd_update_timeout.part.10,"ax",%progbits
 300              		.align	1
 301              		.p2align 2,,3
ARM GAS  /tmp/ccGYckNR.s 			page 53


 302              		.syntax unified
 303              		.thumb
 304              		.thumb_func
 305              		.fpu fpv4-sp-d16
 307              	set_lcd_update_timeout.part.10:
 308              	.LFB334:
2648:dm/dm42_fns.cc **** 
2649:dm/dm42_fns.cc **** void clear_lcd_update_timeout() {
2650:dm/dm42_fns.cc ****   last_lcd_update_ms = 0;
2651:dm/dm42_fns.cc **** }
2652:dm/dm42_fns.cc **** 
2653:dm/dm42_fns.cc **** void set_lcd_update_timeout() {
 309              		.loc 1 2653 0
 310              		.cfi_startproc
 311              		@ args = 0, pretend = 0, frame = 0
 312              		@ frame_needed = 0, uses_anonymous_args = 0
 313 0000 08B5     		push	{r3, lr}
 314              		.cfi_def_cfa_offset 8
 315              		.cfi_offset 3, -8
 316              		.cfi_offset 14, -4
2654:dm/dm42_fns.cc ****   if (last_lcd_update_ms == 0)
2655:dm/dm42_fns.cc ****     last_lcd_update_ms = sys_current_ms();
 317              		.loc 1 2655 0
 318 0002 024B     		ldr	r3, .L34
 319 0004 9847     		blx	r3
 320              	.LVL20:
 321 0006 024B     		ldr	r3, .L34+4
 322 0008 1860     		str	r0, [r3]
 323 000a 08BD     		pop	{r3, pc}
 324              	.L35:
 325              		.align	2
 326              	.L34:
 327 000c 0D040008 		.word	134218765
 328 0010 00000000 		.word	.LANCHOR9
 329              		.cfi_endproc
 330              	.LFE334:
 332              		.section	.text.set_shift.part.14,"ax",%progbits
 333              		.align	1
 334              		.p2align 2,,3
 335              		.syntax unified
 336              		.thumb
 337              		.thumb_func
 338              		.fpu fpv4-sp-d16
 340              	set_shift.part.14:
 341              	.LFB338:
2656:dm/dm42_fns.cc **** }
2657:dm/dm42_fns.cc **** 
2658:dm/dm42_fns.cc **** 
2659:dm/dm42_fns.cc **** 
2660:dm/dm42_fns.cc **** void calc_lcd_redraw() {
2661:dm/dm42_fns.cc ****   lcd_for_dm42(DISP_CALC);
2662:dm/dm42_fns.cc ****   core_redisplay();
2663:dm/dm42_fns.cc ****   skin_repaint_annunciator(0, 0); // Always repaint all
2664:dm/dm42_fns.cc ****   lcd_changed |= LCD_CHG_FORCE|LCD_CHG_HEADER|LCD_CHG_LCD|LCD_CHG_REGS;
2665:dm/dm42_fns.cc **** }
2666:dm/dm42_fns.cc **** 
2667:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 54


2668:dm/dm42_fns.cc **** 
2669:dm/dm42_fns.cc **** uint8_t last_header_clk24 = 0;
2670:dm/dm42_fns.cc **** uint8_t last_header_dmy = 0;
2671:dm/dm42_fns.cc **** 
2672:dm/dm42_fns.cc **** 
2673:dm/dm42_fns.cc **** void disp_header() {
2674:dm/dm42_fns.cc ****   // Refresh header each second
2675:dm/dm42_fns.cc ****   dt_t dt;
2676:dm/dm42_fns.cc ****   tm_t tm;
2677:dm/dm42_fns.cc **** 
2678:dm/dm42_fns.cc ****   // No repaints in main menu
2679:dm/dm42_fns.cc ****   if ( ST(STAT_MENU) ) return;
2680:dm/dm42_fns.cc **** 
2681:dm/dm42_fns.cc ****   if (is_graphics>1)
2682:dm/dm42_fns.cc ****     return;
2683:dm/dm42_fns.cc **** 
2684:dm/dm42_fns.cc ****   rtc_wakeup_delay();
2685:dm/dm42_fns.cc ****   rtc_read(&tm, &dt);
2686:dm/dm42_fns.cc ****   int vdd = (int)read_power_voltage();
2687:dm/dm42_fns.cc **** 
2688:dm/dm42_fns.cc ****   // Update lowbat flag
2689:dm/dm42_fns.cc ****   shell_low_battery();
2690:dm/dm42_fns.cc **** 
2691:dm/dm42_fns.cc **** 
2692:dm/dm42_fns.cc ****   last_header_clk24 = is_clk24();
2693:dm/dm42_fns.cc ****   last_header_dmy = is_dmy();
2694:dm/dm42_fns.cc **** 
2695:dm/dm42_fns.cc ****   //uint8_t lnfill; // Fill whole lines before writing line
2696:dm/dm42_fns.cc ****   //uint8_t newln;  // New line after writing line
2697:dm/dm42_fns.cc **** 
2698:dm/dm42_fns.cc ****   lcd_writeClr(t24);
2699:dm/dm42_fns.cc ****   t24->y = -2; // FIXME: calculate from font dimensions?
2700:dm/dm42_fns.cc ****   t24->newln = 0;
2701:dm/dm42_fns.cc ****   t24->lnfill = 0;
2702:dm/dm42_fns.cc **** 
2703:dm/dm42_fns.cc ****   // Black the header area
2704:dm/dm42_fns.cc ****   lcd_fillLines(0, LCD_SET_VALUE, LCD_HEADER_LINES-2);
2705:dm/dm42_fns.cc **** 
2706:dm/dm42_fns.cc ****   //lcd_printR(t24,"%i:",lll);   // DEBUG! REMOVE!
2707:dm/dm42_fns.cc **** /*
2708:dm/dm42_fns.cc ****   char s[PRINT_DT_TM_SZ], t[PRINT_DT_TM_SZ];
2709:dm/dm42_fns.cc ****   const char * dowstr = is_disp(DISP_DOW) ? get_wday_shortcut(tm.dow) : "";
2710:dm/dm42_fns.cc ****   print_dmy_date(s,PRINT_DT_TM_SZ,&dt,dowstr,get_disp_date_sep());
2711:dm/dm42_fns.cc ****   print_clk24_time(t,PRINT_DT_TM_SZ,&tm,0,0);
2712:dm/dm42_fns.cc **** 
2713:dm/dm42_fns.cc ****   lcd_printR(t24,"%s %s", s, t);
2714:dm/dm42_fns.cc **** */
2715:dm/dm42_fns.cc **** 
2716:dm/dm42_fns.cc ****   char s[MAX_LCD_LINE_LEN]; // LCD line // FIXME: the size constant?
2717:dm/dm42_fns.cc ****   char t[MAX_LCD_LINE_LEN]; // state file name
2718:dm/dm42_fns.cc ****   int ix, w, maxw = is_disp(DISP_VOLTAGE) ? 312 : 364;
2719:dm/dm42_fns.cc ****   s[0] = 0; t[0] = 0;
2720:dm/dm42_fns.cc **** 
2721:dm/dm42_fns.cc ****   if ( is_disp(DISP_DOW) ) {
2722:dm/dm42_fns.cc ****     strcat(s, get_wday_shortcut(tm.dow));
2723:dm/dm42_fns.cc ****   }
2724:dm/dm42_fns.cc ****   if ( is_disp(DISP_DATE) ) {
ARM GAS  /tmp/ccGYckNR.s 			page 55


2725:dm/dm42_fns.cc ****     if (s[0]) strcat(s," ");
2726:dm/dm42_fns.cc ****     print_dmy_date(s+strlen(s),PRINT_DT_TM_SZ,&dt,NULL,is_disp(DISP_SHORTMON),get_disp_date_sep());
2727:dm/dm42_fns.cc ****   }
2728:dm/dm42_fns.cc ****   if ( is_disp(DISP_TIME) ) {
2729:dm/dm42_fns.cc ****     if (s[0]) strcat(s," ");
2730:dm/dm42_fns.cc ****     print_clk24_time(s+strlen(s),PRINT_DT_TM_SZ,&tm,0,0);
2731:dm/dm42_fns.cc ****   }
2732:dm/dm42_fns.cc **** 
2733:dm/dm42_fns.cc ****   if ( is_disp(DISP_STATFN) ) {
2734:dm/dm42_fns.cc ****     copy_reset_state_filename(t, MAX_LCD_LINE_LEN-2); // minus final space and terminator
2735:dm/dm42_fns.cc ****     
2736:dm/dm42_fns.cc ****     w = maxw - lcd_textWidth(t24, s) - 2*lcd_fontWidth(t24); // Two spaces
2737:dm/dm42_fns.cc **** 
2738:dm/dm42_fns.cc ****     ix = lcd_textToWidth(t24, t, w, NULL);
2739:dm/dm42_fns.cc ****     if ( ix > 0 &&  t[ix] != 0 ) {
2740:dm/dm42_fns.cc ****       // Not all string fits - shorten the name and place ... at the end
2741:dm/dm42_fns.cc ****       t[ix] = 0;
2742:dm/dm42_fns.cc ****       t[ix-1] = '\x9a'; // ...
2743:dm/dm42_fns.cc ****     }
2744:dm/dm42_fns.cc ****     lcd_putsR(t24,t);
2745:dm/dm42_fns.cc ****     lcd_putsR(t24," ");
2746:dm/dm42_fns.cc ****   }
2747:dm/dm42_fns.cc **** 
2748:dm/dm42_fns.cc ****   lcd_putsR(t24,s);
2749:dm/dm42_fns.cc **** 
2750:dm/dm42_fns.cc ****   // Print voltage
2751:dm/dm42_fns.cc ****   if ( is_disp(DISP_VOLTAGE) ) {
2752:dm/dm42_fns.cc ****     t24->x  = maxw;
2753:dm/dm42_fns.cc ****     lcd_printR(t24, "%i.%02iV", vdd/1000, (vdd/10)%100);
2754:dm/dm42_fns.cc ****   }
2755:dm/dm42_fns.cc **** 
2756:dm/dm42_fns.cc ****   int icon_ix = 0; // USB
2757:dm/dm42_fns.cc **** 
2758:dm/dm42_fns.cc ****   if ( !usb_powered() ) {
2759:dm/dm42_fns.cc ****     icon_ix = (3090-vdd)/150;
2760:dm/dm42_fns.cc ****     if (icon_ix < 1) icon_ix = 1;
2761:dm/dm42_fns.cc ****     if (icon_ix > 7) icon_ix = 7;
2762:dm/dm42_fns.cc ****     icon_ix <<= 2;
2763:dm/dm42_fns.cc ****   }
2764:dm/dm42_fns.cc **** 
2765:dm/dm42_fns.cc ****   // Draw power annunciator
2766:dm/dm42_fns.cc ****   lcd_draw_img_part(ann02+ANN2_BPL-icon_ix-4,
2767:dm/dm42_fns.cc ****            0,         2, ANN2_LCD_X, ANN_LCD_DY, 30); //8*4);
2768:dm/dm42_fns.cc **** //        32, ANN_LCD_Y, ANN_LCD_X, ANN_LCD_DY, 8*2);
2769:dm/dm42_fns.cc **** 
2770:dm/dm42_fns.cc ****   t24->newln = 1; 
2771:dm/dm42_fns.cc ****   t24->lnfill = 1;
2772:dm/dm42_fns.cc **** 
2773:dm/dm42_fns.cc ****   lcd_changed |= LCD_CHG_HEADER;
2774:dm/dm42_fns.cc ****   clear_header_timeout();
2775:dm/dm42_fns.cc **** }
2776:dm/dm42_fns.cc **** 
2777:dm/dm42_fns.cc **** 
2778:dm/dm42_fns.cc **** 
2779:dm/dm42_fns.cc **** 
2780:dm/dm42_fns.cc **** 
2781:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 56


2782:dm/dm42_fns.cc **** 
2783:dm/dm42_fns.cc **** 
2784:dm/dm42_fns.cc **** 
2785:dm/dm42_fns.cc **** void clr_shift() {
2786:dm/dm42_fns.cc ****   if ( ANN(SHIFT) ) {
2787:dm/dm42_fns.cc ****     int key = 28; // Turn off shift
2788:dm/dm42_fns.cc ****     printf("clr_shift: key press %i\n",key);
2789:dm/dm42_fns.cc ****     core_keydown(key, NULL, NULL);
2790:dm/dm42_fns.cc ****   }
2791:dm/dm42_fns.cc **** }
2792:dm/dm42_fns.cc **** 
2793:dm/dm42_fns.cc **** void set_shift() {
 342              		.loc 1 2793 0
 343              		.cfi_startproc
 344              		@ args = 0, pretend = 0, frame = 0
 345              		@ frame_needed = 0, uses_anonymous_args = 0
 346              		@ link register save eliminated.
 347              	.LVL21:
 348              	.LBB303:
2794:dm/dm42_fns.cc ****   if ( !ANN(SHIFT) ) {
2795:dm/dm42_fns.cc ****     int key = 28; // Turn off shift
2796:dm/dm42_fns.cc ****     printf("set_shift: key press %i\n",key);
2797:dm/dm42_fns.cc ****     core_keydown(key, NULL, NULL);
 349              		.loc 1 2797 0
 350 0000 0022     		movs	r2, #0
 351 0002 1146     		mov	r1, r2
 352 0004 1C20     		movs	r0, #28
 353 0006 FFF7FEBF 		b	_Z12core_keydowniPiS_
 354              	.LVL22:
 355              	.LBE303:
 356              		.cfi_endproc
 357              	.LFE338:
 359              		.thumb_set clr_shift.part.13,set_shift.part.14
 360 000a 00BF     		.section	.text.update_aplha_table.part.15,"ax",%progbits
 361              		.align	1
 362              		.p2align 2,,3
 363              		.syntax unified
 364              		.thumb
 365              		.thumb_func
 366              		.fpu fpv4-sp-d16
 368              	update_aplha_table.part.15:
 369              	.LFB339:
2798:dm/dm42_fns.cc ****   }
2799:dm/dm42_fns.cc **** }
2800:dm/dm42_fns.cc **** 
2801:dm/dm42_fns.cc **** 
2802:dm/dm42_fns.cc **** void update_aplha_table() {
 370              		.loc 1 2802 0
 371              		.cfi_startproc
 372              		@ args = 0, pretend = 0, frame = 0
 373              		@ frame_needed = 0, uses_anonymous_args = 0
 374              		@ link register save eliminated.
 375              	.LBB304:
 376              	.LBB305:
 772:dm/dm42_fns.cc ****     return;
 377              		.loc 1 772 0
 378 0000 034B     		ldr	r3, .L40
ARM GAS  /tmp/ccGYckNR.s 			page 57


 379 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 380 0004 012B     		cmp	r3, #1
 381 0006 00DD     		ble	.L39
 382 0008 7047     		bx	lr
 383              	.L39:
 384 000a FFF7FEBF 		b	repaint_annunciators.part.0
 385              	.LVL23:
 386              	.L41:
 387 000e 00BF     		.align	2
 388              	.L40:
 389 0010 00000000 		.word	.LANCHOR10
 390              	.LBE305:
 391              	.LBE304:
 392              		.cfi_endproc
 393              	.LFE339:
 395              		.thumb_set skin_repaint_annunciator.part.1,update_aplha_table.part.15
 396              		.section	.text._Z8hp2printPcPKci,"ax",%progbits
 397              		.align	1
 398              		.p2align 2,,3
 399              		.global	_Z8hp2printPcPKci
 400              		.syntax unified
 401              		.thumb
 402              		.thumb_func
 403              		.fpu fpv4-sp-d16
 405              	_Z8hp2printPcPKci:
 406              	.LFB228:
 138:dm/dm42_fns.cc ****   unsigned char c;
 407              		.loc 1 138 0
 408              		.cfi_startproc
 409              		@ args = 0, pretend = 0, frame = 0
 410              		@ frame_needed = 0, uses_anonymous_args = 0
 411              		@ link register save eliminated.
 412              	.LVL24:
 413              	.LBB306:
 141:dm/dm42_fns.cc ****     c = src[s];
 414              		.loc 1 141 0
 415 0000 002A     		cmp	r2, #0
 416 0002 1BDD     		ble	.L52
 417              	.LBE306:
 138:dm/dm42_fns.cc ****   unsigned char c;
 418              		.loc 1 138 0
 419 0004 30B4     		push	{r4, r5}
 420              		.cfi_def_cfa_offset 8
 421              		.cfi_offset 4, -8
 422              		.cfi_offset 5, -4
 423 0006 0139     		subs	r1, r1, #1
 424              	.LVL25:
 425              	.LBB307:
 158:dm/dm42_fns.cc **** 
 426              		.loc 1 158 0
 427 0008 0D4D     		ldr	r5, .L57
 428 000a 8418     		adds	r4, r0, r2
 429 000c 08E0     		b	.L46
 430              	.LVL26:
 431              	.L56:
 155:dm/dm42_fns.cc ****     // Special characters are 00-1F
 432              		.loc 1 155 0
ARM GAS  /tmp/ccGYckNR.s 			page 58


 433 000e 8A2B     		cmp	r3, #138
 434 0010 12D0     		beq	.L48
 157:dm/dm42_fns.cc ****       c = hp2printer_table[c]; // Translate to printer chars
 435              		.loc 1 157 0
 436 0012 1F2B     		cmp	r3, #31
 437 0014 00DC     		bgt	.L44
 158:dm/dm42_fns.cc **** 
 438              		.loc 1 158 0
 439 0016 EB5C     		ldrb	r3, [r5, r3]	@ zero_extendqisi2
 440              	.LVL27:
 441              	.L44:
 162:dm/dm42_fns.cc ****   }
 442              		.loc 1 162 0 discriminator 2
 443 0018 00F8013B 		strb	r3, [r0], #1
 444              	.LVL28:
 141:dm/dm42_fns.cc ****     c = src[s];
 445              		.loc 1 141 0 discriminator 2
 446 001c A042     		cmp	r0, r4
 447 001e 08D0     		beq	.L55
 448              	.LVL29:
 449              	.L46:
 142:dm/dm42_fns.cc **** #ifdef OLD_PRINTER_CHAR_MASKING
 450              		.loc 1 142 0
 451 0020 11F8013F 		ldrb	r3, [r1, #1]!	@ zero_extendqisi2
 452              	.LVL30:
 154:dm/dm42_fns.cc ****     if (c == 0x8a) c = 144; // 8a to LF
 453              		.loc 1 154 0
 454 0024 7F2B     		cmp	r3, #127
 455 0026 F2D1     		bne	.L56
 456 0028 9423     		movs	r3, #148
 457              	.LVL31:
 162:dm/dm42_fns.cc ****   }
 458              		.loc 1 162 0
 459 002a 00F8013B 		strb	r3, [r0], #1
 460              	.LVL32:
 141:dm/dm42_fns.cc ****     c = src[s];
 461              		.loc 1 141 0
 462 002e A042     		cmp	r0, r4
 463 0030 F6D1     		bne	.L46
 464              	.LVL33:
 465              	.L55:
 466              	.LBE307:
 165:dm/dm42_fns.cc **** 
 467              		.loc 1 165 0
 468 0032 1046     		mov	r0, r2
 469              	.LVL34:
 470 0034 30BC     		pop	{r4, r5}
 471              		.cfi_remember_state
 472              		.cfi_restore 5
 473              		.cfi_restore 4
 474              		.cfi_def_cfa_offset 0
 475 0036 7047     		bx	lr
 476              	.LVL35:
 477              	.L48:
 478              		.cfi_restore_state
 479              	.LBB308:
 155:dm/dm42_fns.cc ****     // Special characters are 00-1F
ARM GAS  /tmp/ccGYckNR.s 			page 59


 480              		.loc 1 155 0
 481 0038 9023     		movs	r3, #144
 482              	.LVL36:
 483 003a EDE7     		b	.L44
 484              	.LVL37:
 485              	.L52:
 486              		.cfi_def_cfa_offset 0
 487              		.cfi_restore 4
 488              		.cfi_restore 5
 489              	.LBE308:
 165:dm/dm42_fns.cc **** 
 490              		.loc 1 165 0
 491 003c 1046     		mov	r0, r2
 492              	.LVL38:
 493 003e 7047     		bx	lr
 494              	.L58:
 495              		.align	2
 496              	.L57:
 497 0040 00000000 		.word	.LANCHOR11
 498              		.cfi_endproc
 499              	.LFE228:
 501              		.section	.text._Z8hp2asciiPcPKci,"ax",%progbits
 502              		.align	1
 503              		.p2align 2,,3
 504              		.global	_Z8hp2asciiPcPKci
 505              		.syntax unified
 506              		.thumb
 507              		.thumb_func
 508              		.fpu fpv4-sp-d16
 510              	_Z8hp2asciiPcPKci:
 511              	.LFB229:
 169:dm/dm42_fns.cc ****   const char *esc;
 512              		.loc 1 169 0
 513              		.cfi_startproc
 514              		@ args = 0, pretend = 0, frame = 0
 515              		@ frame_needed = 0, uses_anonymous_args = 0
 516              	.LVL39:
 173:dm/dm42_fns.cc ****     c = src[s];
 517              		.loc 1 173 0
 518 0000 002A     		cmp	r2, #0
 519 0002 40F3C180 		ble	.L103
 169:dm/dm42_fns.cc ****   const char *esc;
 520              		.loc 1 169 0
 521 0006 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 522              		.cfi_def_cfa_offset 36
 523              		.cfi_offset 4, -36
 524              		.cfi_offset 5, -32
 525              		.cfi_offset 6, -28
 526              		.cfi_offset 7, -24
 527              		.cfi_offset 8, -20
 528              		.cfi_offset 9, -16
 529              		.cfi_offset 10, -12
 530              		.cfi_offset 11, -8
 531              		.cfi_offset 14, -4
 213:dm/dm42_fns.cc ****       case 138:  esc = "\\LF"; break;
 532              		.loc 1 213 0
 533 000a DFF8F8C1 		ldr	ip, .L114+120
ARM GAS  /tmp/ccGYckNR.s 			page 60


 181:dm/dm42_fns.cc ****       case  4:   esc = "\\gray1";break;
 534              		.loc 1 181 0
 535 000e DFF8F8B1 		ldr	fp, .L114+124
 179:dm/dm42_fns.cc ****       case  2:   esc = "\\sqrt"; break;
 536              		.loc 1 179 0
 537 0012 DFF8F8A1 		ldr	r10, .L114+128
 214:dm/dm42_fns.cc ****       default:   dst[d++] = c; continue;
 538              		.loc 1 214 0
 539 0016 5D4F     		ldr	r7, .L114
 180:dm/dm42_fns.cc ****       case  3:   esc = "\\int";  break;
 540              		.loc 1 180 0
 541 0018 DFF8F491 		ldr	r9, .L114+132
 178:dm/dm42_fns.cc ****       case  1:   esc = "\xd7"; break; // ×
 542              		.loc 1 178 0
 543 001c DFF8F481 		ldr	r8, .L114+136
 212:dm/dm42_fns.cc ****       case 129:  esc = "y";    break;
 544              		.loc 1 212 0
 545 0020 DFF8F4E1 		ldr	lr, .L114+140
 546 0024 0646     		mov	r6, r0
 547 0026 8D18     		adds	r5, r1, r2
 173:dm/dm42_fns.cc ****     c = src[s];
 548              		.loc 1 173 0
 549 0028 0020     		movs	r0, #0
 550              	.LVL40:
 551              	.L98:
 174:dm/dm42_fns.cc ****     if (c >= 130 && c != 138)
 552              		.loc 1 174 0
 553 002a 11F8013B 		ldrb	r3, [r1], #1	@ zero_extendqisi2
 554              	.LVL41:
 175:dm/dm42_fns.cc ****         c &= 0x7f;
 555              		.loc 1 175 0
 556 002e 812B     		cmp	r3, #129
 557 0030 03DD     		ble	.L61
 175:dm/dm42_fns.cc ****         c &= 0x7f;
 558              		.loc 1 175 0 is_stmt 0 discriminator 1
 559 0032 8A2B     		cmp	r3, #138
 560 0034 4CD0     		beq	.L104
 176:dm/dm42_fns.cc ****     switch (c) {
 561              		.loc 1 176 0 is_stmt 1
 562 0036 03F07F03 		and	r3, r3, #127
 563              	.LVL42:
 564              	.L61:
 177:dm/dm42_fns.cc ****       case  0:   esc = "\xf7"; break; // ÷
 565              		.loc 1 177 0
 566 003a 8A2B     		cmp	r3, #138
 567 003c 00F29D80 		bhi	.L94
 568 0040 DFE803F0 		tbb	[pc, r3]
 569              	.L99:
 570 0044 94       		.byte	(.L105-.L99)/2
 571 0045 99       		.byte	(.L100-.L99)/2
 572 0046 97       		.byte	(.L101-.L99)/2
 573 0047 92       		.byte	(.L106-.L99)/2
 574 0048 90       		.byte	(.L63-.L99)/2
 575 0049 8E       		.byte	(.L64-.L99)/2
 576 004a 8C       		.byte	(.L65-.L99)/2
 577 004b 8A       		.byte	(.L66-.L99)/2
 578 004c 88       		.byte	(.L67-.L99)/2
ARM GAS  /tmp/ccGYckNR.s 			page 61


 579 004d 86       		.byte	(.L68-.L99)/2
 580 004e 9B       		.byte	(.L94-.L99)/2
 581 004f 84       		.byte	(.L69-.L99)/2
 582 0050 82       		.byte	(.L70-.L99)/2
 583 0051 80       		.byte	(.L71-.L99)/2
 584 0052 7E       		.byte	(.L72-.L99)/2
 585 0053 7C       		.byte	(.L73-.L99)/2
 586 0054 7A       		.byte	(.L74-.L99)/2
 587 0055 78       		.byte	(.L75-.L99)/2
 588 0056 76       		.byte	(.L76-.L99)/2
 589 0057 74       		.byte	(.L77-.L99)/2
 590 0058 72       		.byte	(.L78-.L99)/2
 591 0059 70       		.byte	(.L79-.L99)/2
 592 005a 6E       		.byte	(.L80-.L99)/2
 593 005b 6C       		.byte	(.L81-.L99)/2
 594 005c 6A       		.byte	(.L82-.L99)/2
 595 005d 68       		.byte	(.L83-.L99)/2
 596 005e 66       		.byte	(.L84-.L99)/2
 597 005f 64       		.byte	(.L85-.L99)/2
 598 0060 62       		.byte	(.L86-.L99)/2
 599 0061 60       		.byte	(.L87-.L99)/2
 600 0062 5E       		.byte	(.L88-.L99)/2
 601 0063 5C       		.byte	(.L89-.L99)/2
 602 0064 9B       		.byte	(.L94-.L99)/2
 603 0065 9B       		.byte	(.L94-.L99)/2
 604 0066 9B       		.byte	(.L94-.L99)/2
 605 0067 9B       		.byte	(.L94-.L99)/2
 606 0068 9B       		.byte	(.L94-.L99)/2
 607 0069 9B       		.byte	(.L94-.L99)/2
 608 006a 9B       		.byte	(.L94-.L99)/2
 609 006b 9B       		.byte	(.L94-.L99)/2
 610 006c 9B       		.byte	(.L94-.L99)/2
 611 006d 9B       		.byte	(.L94-.L99)/2
 612 006e 9B       		.byte	(.L94-.L99)/2
 613 006f 9B       		.byte	(.L94-.L99)/2
 614 0070 9B       		.byte	(.L94-.L99)/2
 615 0071 9B       		.byte	(.L94-.L99)/2
 616 0072 9B       		.byte	(.L94-.L99)/2
 617 0073 9B       		.byte	(.L94-.L99)/2
 618 0074 9B       		.byte	(.L94-.L99)/2
 619 0075 9B       		.byte	(.L94-.L99)/2
 620 0076 9B       		.byte	(.L94-.L99)/2
 621 0077 9B       		.byte	(.L94-.L99)/2
 622 0078 9B       		.byte	(.L94-.L99)/2
 623 0079 9B       		.byte	(.L94-.L99)/2
 624 007a 9B       		.byte	(.L94-.L99)/2
 625 007b 9B       		.byte	(.L94-.L99)/2
 626 007c 9B       		.byte	(.L94-.L99)/2
 627 007d 9B       		.byte	(.L94-.L99)/2
 628 007e 9B       		.byte	(.L94-.L99)/2
 629 007f 9B       		.byte	(.L94-.L99)/2
 630 0080 9B       		.byte	(.L94-.L99)/2
 631 0081 9B       		.byte	(.L94-.L99)/2
 632 0082 9B       		.byte	(.L94-.L99)/2
 633 0083 9B       		.byte	(.L94-.L99)/2
 634 0084 9B       		.byte	(.L94-.L99)/2
 635 0085 9B       		.byte	(.L94-.L99)/2
ARM GAS  /tmp/ccGYckNR.s 			page 62


 636 0086 9B       		.byte	(.L94-.L99)/2
 637 0087 9B       		.byte	(.L94-.L99)/2
 638 0088 9B       		.byte	(.L94-.L99)/2
 639 0089 9B       		.byte	(.L94-.L99)/2
 640 008a 9B       		.byte	(.L94-.L99)/2
 641 008b 9B       		.byte	(.L94-.L99)/2
 642 008c 9B       		.byte	(.L94-.L99)/2
 643 008d 9B       		.byte	(.L94-.L99)/2
 644 008e 9B       		.byte	(.L94-.L99)/2
 645 008f 9B       		.byte	(.L94-.L99)/2
 646 0090 9B       		.byte	(.L94-.L99)/2
 647 0091 9B       		.byte	(.L94-.L99)/2
 648 0092 9B       		.byte	(.L94-.L99)/2
 649 0093 9B       		.byte	(.L94-.L99)/2
 650 0094 9B       		.byte	(.L94-.L99)/2
 651 0095 9B       		.byte	(.L94-.L99)/2
 652 0096 9B       		.byte	(.L94-.L99)/2
 653 0097 9B       		.byte	(.L94-.L99)/2
 654 0098 9B       		.byte	(.L94-.L99)/2
 655 0099 9B       		.byte	(.L94-.L99)/2
 656 009a 9B       		.byte	(.L94-.L99)/2
 657 009b 9B       		.byte	(.L94-.L99)/2
 658 009c 9B       		.byte	(.L94-.L99)/2
 659 009d 9B       		.byte	(.L94-.L99)/2
 660 009e 9B       		.byte	(.L94-.L99)/2
 661 009f 9B       		.byte	(.L94-.L99)/2
 662 00a0 5A       		.byte	(.L90-.L99)/2
 663 00a1 9B       		.byte	(.L94-.L99)/2
 664 00a2 9B       		.byte	(.L94-.L99)/2
 665 00a3 9B       		.byte	(.L94-.L99)/2
 666 00a4 9B       		.byte	(.L94-.L99)/2
 667 00a5 9B       		.byte	(.L94-.L99)/2
 668 00a6 9B       		.byte	(.L94-.L99)/2
 669 00a7 9B       		.byte	(.L94-.L99)/2
 670 00a8 9B       		.byte	(.L94-.L99)/2
 671 00a9 9B       		.byte	(.L94-.L99)/2
 672 00aa 9B       		.byte	(.L94-.L99)/2
 673 00ab 9B       		.byte	(.L94-.L99)/2
 674 00ac 9B       		.byte	(.L94-.L99)/2
 675 00ad 9B       		.byte	(.L94-.L99)/2
 676 00ae 9B       		.byte	(.L94-.L99)/2
 677 00af 9B       		.byte	(.L94-.L99)/2
 678 00b0 9B       		.byte	(.L94-.L99)/2
 679 00b1 9B       		.byte	(.L94-.L99)/2
 680 00b2 9B       		.byte	(.L94-.L99)/2
 681 00b3 9B       		.byte	(.L94-.L99)/2
 682 00b4 9B       		.byte	(.L94-.L99)/2
 683 00b5 9B       		.byte	(.L94-.L99)/2
 684 00b6 9B       		.byte	(.L94-.L99)/2
 685 00b7 9B       		.byte	(.L94-.L99)/2
 686 00b8 9B       		.byte	(.L94-.L99)/2
 687 00b9 9B       		.byte	(.L94-.L99)/2
 688 00ba 9B       		.byte	(.L94-.L99)/2
 689 00bb 9B       		.byte	(.L94-.L99)/2
 690 00bc 9B       		.byte	(.L94-.L99)/2
 691 00bd 9B       		.byte	(.L94-.L99)/2
 692 00be 9B       		.byte	(.L94-.L99)/2
ARM GAS  /tmp/ccGYckNR.s 			page 63


 693 00bf 9B       		.byte	(.L94-.L99)/2
 694 00c0 9B       		.byte	(.L94-.L99)/2
 695 00c1 9B       		.byte	(.L94-.L99)/2
 696 00c2 9B       		.byte	(.L94-.L99)/2
 697 00c3 58       		.byte	(.L91-.L99)/2
 698 00c4 56       		.byte	(.L92-.L99)/2
 699 00c5 54       		.byte	(.L93-.L99)/2
 700 00c6 9B       		.byte	(.L94-.L99)/2
 701 00c7 9B       		.byte	(.L94-.L99)/2
 702 00c8 9B       		.byte	(.L94-.L99)/2
 703 00c9 9B       		.byte	(.L94-.L99)/2
 704 00ca 9B       		.byte	(.L94-.L99)/2
 705 00cb 9B       		.byte	(.L94-.L99)/2
 706 00cc 9B       		.byte	(.L94-.L99)/2
 707 00cd 9B       		.byte	(.L94-.L99)/2
 708 00ce 46       		.byte	(.L104-.L99)/2
 709 00cf 00       		.p2align 1
 710              	.L104:
 214:dm/dm42_fns.cc ****       default:   dst[d++] = c; continue;
 711              		.loc 1 214 0
 712 00d0 3A46     		mov	r2, r7
 713              	.L62:
 714              	.LVL43:
 217:dm/dm42_fns.cc ****         dst[d++] = *esc++;
 715              		.loc 1 217 0
 716 00d2 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 717              	.LVL44:
 718              	.L96:
 719 00d4 3418     		adds	r4, r6, r0
 720              	.L97:
 218:dm/dm42_fns.cc ****   }
 721              		.loc 1 218 0
 722 00d6 04F8013B 		strb	r3, [r4], #1
 217:dm/dm42_fns.cc ****         dst[d++] = *esc++;
 723              		.loc 1 217 0
 724 00da 12F8013F 		ldrb	r3, [r2, #1]!	@ zero_extendqisi2
 218:dm/dm42_fns.cc ****   }
 725              		.loc 1 218 0
 726 00de 0130     		adds	r0, r0, #1
 727              	.LVL45:
 217:dm/dm42_fns.cc ****         dst[d++] = *esc++;
 728              		.loc 1 217 0
 729 00e0 002B     		cmp	r3, #0
 730 00e2 F8D1     		bne	.L97
 731              	.LVL46:
 173:dm/dm42_fns.cc ****     c = src[s];
 732              		.loc 1 173 0 discriminator 2
 733 00e4 A942     		cmp	r1, r5
 734 00e6 A0D1     		bne	.L98
 735              	.LVL47:
 736              	.L113:
 737 00e8 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 738              	.LVL48:
 739              	.L93:
 213:dm/dm42_fns.cc ****       case 138:  esc = "\\LF"; break;
 740              		.loc 1 213 0
 741 00ec 6246     		mov	r2, ip
ARM GAS  /tmp/ccGYckNR.s 			page 64


 742 00ee F0E7     		b	.L62
 743              	.LVL49:
 744              	.L92:
 212:dm/dm42_fns.cc ****       case 129:  esc = "y";    break;
 745              		.loc 1 212 0
 746 00f0 7246     		mov	r2, lr
 747 00f2 EEE7     		b	.L62
 748              	.LVL50:
 749              	.L91:
 211:dm/dm42_fns.cc ****       case 128:  esc = ":";    break;
 750              		.loc 1 211 0
 751 00f4 264A     		ldr	r2, .L114+4
 752 00f6 ECE7     		b	.L62
 753              	.LVL51:
 754              	.L90:
 210:dm/dm42_fns.cc ****       case 127:  esc = "|-";   break;
 755              		.loc 1 210 0
 756 00f8 264A     		ldr	r2, .L114+8
 757 00fa EAE7     		b	.L62
 758              	.LVL52:
 759              	.L89:
 209:dm/dm42_fns.cc ****       case '\\': esc = "\\\\"; break;
 760              		.loc 1 209 0
 761 00fc 264A     		ldr	r2, .L114+12
 762 00fe E8E7     		b	.L62
 763              	.LVL53:
 764              	.L88:
 208:dm/dm42_fns.cc ****       case 31:   esc = "\\bullet";break;
 765              		.loc 1 208 0
 766 0100 264A     		ldr	r2, .L114+16
 767 0102 E6E7     		b	.L62
 768              	.LVL54:
 769              	.L87:
 207:dm/dm42_fns.cc ****       case 30:   esc = "\\gray2"; break;
 770              		.loc 1 207 0
 771 0104 264A     		ldr	r2, .L114+20
 772 0106 E4E7     		b	.L62
 773              	.LVL55:
 774              	.L86:
 206:dm/dm42_fns.cc ****       case 29:   esc = "\xdc"; break; // Ü
 775              		.loc 1 206 0
 776 0108 264A     		ldr	r2, .L114+24
 777 010a E2E7     		b	.L62
 778              	.LVL56:
 779              	.L85:
 205:dm/dm42_fns.cc ****       case 28:   esc = "\xd6"; break; // Ö
 780              		.loc 1 205 0
 781 010c 264A     		ldr	r2, .L114+28
 782 010e E0E7     		b	.L62
 783              	.LVL57:
 784              	.L84:
 204:dm/dm42_fns.cc ****       case 27:   esc = "\\esc";break;
 785              		.loc 1 204 0
 786 0110 264A     		ldr	r2, .L114+32
 787 0112 DEE7     		b	.L62
 788              	.LVL58:
 789              	.L83:
ARM GAS  /tmp/ccGYckNR.s 			page 65


 203:dm/dm42_fns.cc ****       case 26:   esc = "...";  break;
 790              		.loc 1 203 0
 791 0114 264A     		ldr	r2, .L114+36
 792 0116 DCE7     		b	.L62
 793              	.LVL59:
 794              	.L82:
 202:dm/dm42_fns.cc ****       case 25:   esc = "\xc6"; break; // Æ
 795              		.loc 1 202 0
 796 0118 264A     		ldr	r2, .L114+40
 797 011a DAE7     		b	.L62
 798              	.LVL60:
 799              	.L81:
 201:dm/dm42_fns.cc ****       case 24:   esc = "E";    break;
 800              		.loc 1 201 0
 801 011c 264A     		ldr	r2, .L114+44
 802 011e D8E7     		b	.L62
 803              	.LVL61:
 804              	.L80:
 199:dm/dm42_fns.cc ****       //case 23: esc = "\\angle"; break;
 805              		.loc 1 199 0
 806 0120 264A     		ldr	r2, .L114+48
 807 0122 D6E7     		b	.L62
 808              	.LVL62:
 809              	.L79:
 198:dm/dm42_fns.cc ****       case 22:   esc = "\xc4"; break; // Ä
 810              		.loc 1 198 0
 811 0124 264A     		ldr	r2, .L114+52
 812 0126 D4E7     		b	.L62
 813              	.LVL63:
 814              	.L78:
 197:dm/dm42_fns.cc ****       case 21:   esc = "\xd1"; break; // Ñ
 815              		.loc 1 197 0
 816 0128 264A     		ldr	r2, .L114+56
 817 012a D2E7     		b	.L62
 818              	.LVL64:
 819              	.L77:
 196:dm/dm42_fns.cc ****       case 20:   esc = "\xc5"; break; // Å
 820              		.loc 1 196 0
 821 012c 264A     		ldr	r2, .L114+60
 822 012e D0E7     		b	.L62
 823              	.LVL65:
 824              	.L76:
 195:dm/dm42_fns.cc ****       case 19:   esc = "\xb0"; break; // °
 825              		.loc 1 195 0
 826 0130 264A     		ldr	r2, .L114+64
 827 0132 CEE7     		b	.L62
 828              	.LVL66:
 829              	.L75:
 194:dm/dm42_fns.cc ****       case 18:   esc = "\xa3"; break; // £
 830              		.loc 1 194 0
 831 0134 264A     		ldr	r2, .L114+68
 832 0136 CCE7     		b	.L62
 833              	.LVL67:
 834              	.L74:
 193:dm/dm42_fns.cc ****       case 17:   esc = "\xb5"; break; // µ
 835              		.loc 1 193 0
 836 0138 264A     		ldr	r2, .L114+72
ARM GAS  /tmp/ccGYckNR.s 			page 66


 837 013a CAE7     		b	.L62
 838              	.LVL68:
 839              	.L73:
 192:dm/dm42_fns.cc ****       case 16:   esc = "<-";   break;
 840              		.loc 1 192 0
 841 013c 264A     		ldr	r2, .L114+76
 842 013e C8E7     		b	.L62
 843              	.LVL69:
 844              	.L72:
 191:dm/dm42_fns.cc ****       case 15:   esc = "->";   break;
 845              		.loc 1 191 0
 846 0140 264A     		ldr	r2, .L114+80
 847 0142 C6E7     		b	.L62
 848              	.LVL70:
 849              	.L71:
 190:dm/dm42_fns.cc ****       case 14:   esc = "v";    break;
 850              		.loc 1 190 0
 851 0144 264A     		ldr	r2, .L114+84
 852 0146 C4E7     		b	.L62
 853              	.LVL71:
 854              	.L70:
 189:dm/dm42_fns.cc ****       case 13:   esc = "\\r";  break;
 855              		.loc 1 189 0
 856 0148 264A     		ldr	r2, .L114+88
 857 014a C2E7     		b	.L62
 858              	.LVL72:
 859              	.L69:
 188:dm/dm42_fns.cc ****       case 12:   esc = "!=";   break;
 860              		.loc 1 188 0
 861 014c 264A     		ldr	r2, .L114+92
 862 014e C0E7     		b	.L62
 863              	.LVL73:
 864              	.L68:
 187:dm/dm42_fns.cc ****       case 11:   esc = ">=";   break;
 865              		.loc 1 187 0
 866 0150 264A     		ldr	r2, .L114+96
 867 0152 BEE7     		b	.L62
 868              	.LVL74:
 869              	.L67:
 186:dm/dm42_fns.cc ****       case  9:   esc = "<=";   break;
 870              		.loc 1 186 0
 871 0154 264A     		ldr	r2, .L114+100
 872 0156 BCE7     		b	.L62
 873              	.LVL75:
 874              	.L66:
 185:dm/dm42_fns.cc ****       case  8:   esc = "\xbf"; break; // ¿
 875              		.loc 1 185 0
 876 0158 264A     		ldr	r2, .L114+104
 877 015a BAE7     		b	.L62
 878              	.LVL76:
 879              	.L65:
 184:dm/dm42_fns.cc ****       case  7:   esc = "\\pi"; break;
 880              		.loc 1 184 0
 881 015c 264A     		ldr	r2, .L114+108
 882 015e B8E7     		b	.L62
 883              	.LVL77:
 884              	.L64:
ARM GAS  /tmp/ccGYckNR.s 			page 67


 183:dm/dm42_fns.cc ****       case  6:   esc = ">";    break;
 885              		.loc 1 183 0
 886 0160 264A     		ldr	r2, .L114+112
 887 0162 B6E7     		b	.L62
 888              	.LVL78:
 889              	.L63:
 182:dm/dm42_fns.cc ****       case  5:   esc = "\\Sigma";break;
 890              		.loc 1 182 0
 891 0164 264A     		ldr	r2, .L114+116
 892 0166 B4E7     		b	.L62
 893              	.LVL79:
 894              	.L106:
 181:dm/dm42_fns.cc ****       case  4:   esc = "\\gray1";break;
 895              		.loc 1 181 0
 896 0168 5A46     		mov	r2, fp
 897 016a B2E7     		b	.L62
 898              	.L105:
 217:dm/dm42_fns.cc ****         dst[d++] = *esc++;
 899              		.loc 1 217 0
 900 016c F723     		movs	r3, #247
 901              	.LVL80:
 178:dm/dm42_fns.cc ****       case  1:   esc = "\xd7"; break; // ×
 902              		.loc 1 178 0
 903 016e 4246     		mov	r2, r8
 904 0170 B0E7     		b	.L96
 905              	.LVL81:
 906              	.L101:
 180:dm/dm42_fns.cc ****       case  3:   esc = "\\int";  break;
 907              		.loc 1 180 0
 908 0172 4A46     		mov	r2, r9
 909 0174 ADE7     		b	.L62
 910              	.L100:
 179:dm/dm42_fns.cc ****       case  2:   esc = "\\sqrt"; break;
 911              		.loc 1 179 0
 912 0176 5246     		mov	r2, r10
 913 0178 ABE7     		b	.L62
 914              	.L94:
 915              	.LVL82:
 173:dm/dm42_fns.cc ****     c = src[s];
 916              		.loc 1 173 0
 917 017a A942     		cmp	r1, r5
 215:dm/dm42_fns.cc ****     }
 918              		.loc 1 215 0
 919 017c 3354     		strb	r3, [r6, r0]
 920 017e 00F10100 		add	r0, r0, #1
 921              	.LVL83:
 173:dm/dm42_fns.cc ****     c = src[s];
 922              		.loc 1 173 0
 923 0182 7FF452AF 		bne	.L98
 924 0186 AFE7     		b	.L113
 925              	.LVL84:
 926              	.L103:
 927              		.cfi_def_cfa_offset 0
 928              		.cfi_restore 4
 929              		.cfi_restore 5
 930              		.cfi_restore 6
 931              		.cfi_restore 7
ARM GAS  /tmp/ccGYckNR.s 			page 68


 932              		.cfi_restore 8
 933              		.cfi_restore 9
 934              		.cfi_restore 10
 935              		.cfi_restore 11
 936              		.cfi_restore 14
 172:dm/dm42_fns.cc ****   for (s = 0; s < srclen; s++) {
 937              		.loc 1 172 0
 938 0188 0020     		movs	r0, #0
 939              	.LVL85:
 220:dm/dm42_fns.cc **** }
 940              		.loc 1 220 0
 941 018a 7047     		bx	lr
 942              	.L115:
 943              		.align	2
 944              	.L114:
 945 018c 04000000 		.word	.LC9
 946 0190 10000000 		.word	.LC12
 947 0194 14000000 		.word	.LC13
 948 0198 18000000 		.word	.LC14
 949 019c 20000000 		.word	.LC15
 950 01a0 28000000 		.word	.LC16
 951 01a4 2C000000 		.word	.LC17
 952 01a8 30000000 		.word	.LC18
 953 01ac 38000000 		.word	.LC19
 954 01b0 3C000000 		.word	.LC20
 955 01b4 40000000 		.word	.LC21
 956 01b8 44000000 		.word	.LC22
 957 01bc 48000000 		.word	.LC23
 958 01c0 4C000000 		.word	.LC24
 959 01c4 50000000 		.word	.LC25
 960 01c8 54000000 		.word	.LC26
 961 01cc 58000000 		.word	.LC27
 962 01d0 5C000000 		.word	.LC28
 963 01d4 60000000 		.word	.LC29
 964 01d8 64000000 		.word	.LC30
 965 01dc 68000000 		.word	.LC31
 966 01e0 6C000000 		.word	.LC32
 967 01e4 70000000 		.word	.LC33
 968 01e8 74000000 		.word	.LC34
 969 01ec 78000000 		.word	.LC35
 970 01f0 7C000000 		.word	.LC36
 971 01f4 80000000 		.word	.LC37
 972 01f8 84000000 		.word	.LC38
 973 01fc 88000000 		.word	.LC39
 974 0200 90000000 		.word	.LC40
 975 0204 08000000 		.word	.LC10
 976 0208 98000000 		.word	.LC41
 977 020c A0000000 		.word	.LC42
 978 0210 A4000000 		.word	.LC43
 979 0214 00000000 		.word	.LC8
 980 0218 0C000000 		.word	.LC11
 981              		.cfi_endproc
 982              	.LFE229:
 984              		.section	.text._Z10hp2utfcharPch,"ax",%progbits
 985              		.align	1
 986              		.p2align 2,,3
 987              		.global	_Z10hp2utfcharPch
ARM GAS  /tmp/ccGYckNR.s 			page 69


 988              		.syntax unified
 989              		.thumb
 990              		.thumb_func
 991              		.fpu fpv4-sp-d16
 993              	_Z10hp2utfcharPch:
 994              	.LFB230:
 225:dm/dm42_fns.cc ****   const char * u;
 995              		.loc 1 225 0
 996              		.cfi_startproc
 997              		@ args = 0, pretend = 0, frame = 0
 998              		@ frame_needed = 0, uses_anonymous_args = 0
 999              	.LVL86:
 1000 0000 10B5     		push	{r4, lr}
 1001              		.cfi_def_cfa_offset 8
 1002              		.cfi_offset 4, -8
 1003              		.cfi_offset 14, -4
 228:dm/dm42_fns.cc ****     case  0:   u = "÷";      break;
 1004              		.loc 1 228 0
 1005 0002 8A29     		cmp	r1, #138
 1006 0004 00F29580 		bhi	.L117
 1007 0008 DFE801F0 		tbb	[pc, r1]
 1008              	.L119:
 1009 000c 83       		.byte	(.L118-.L119)/2
 1010 000d 81       		.byte	(.L120-.L119)/2
 1011 000e 4F       		.byte	(.L156-.L119)/2
 1012 000f 53       		.byte	(.L122-.L119)/2
 1013 0010 46       		.byte	(.L149-.L119)/2
 1014 0011 7F       		.byte	(.L124-.L119)/2
 1015 0012 7D       		.byte	(.L125-.L119)/2
 1016 0013 7B       		.byte	(.L126-.L119)/2
 1017 0014 79       		.byte	(.L127-.L119)/2
 1018 0015 77       		.byte	(.L128-.L119)/2
 1019 0016 75       		.byte	(.L129-.L119)/2
 1020 0017 91       		.byte	(.L130-.L119)/2
 1021 0018 8F       		.byte	(.L131-.L119)/2
 1022 0019 6F       		.byte	(.L132-.L119)/2
 1023 001a 6D       		.byte	(.L133-.L119)/2
 1024 001b 6B       		.byte	(.L134-.L119)/2
 1025 001c 69       		.byte	(.L135-.L119)/2
 1026 001d 67       		.byte	(.L136-.L119)/2
 1027 001e 65       		.byte	(.L137-.L119)/2
 1028 001f 63       		.byte	(.L138-.L119)/2
 1029 0020 61       		.byte	(.L139-.L119)/2
 1030 0021 5F       		.byte	(.L140-.L119)/2
 1031 0022 5D       		.byte	(.L141-.L119)/2
 1032 0023 5B       		.byte	(.L142-.L119)/2
 1033 0024 59       		.byte	(.L143-.L119)/2
 1034 0025 57       		.byte	(.L144-.L119)/2
 1035 0026 55       		.byte	(.L145-.L119)/2
 1036 0027 89       		.byte	(.L146-.L119)/2
 1037 0028 8D       		.byte	(.L147-.L119)/2
 1038 0029 8B       		.byte	(.L148-.L119)/2
 1039 002a 46       		.byte	(.L149-.L119)/2
 1040 002b 73       		.byte	(.L150-.L119)/2
 1041 002c 93       		.byte	(.L117-.L119)/2
 1042 002d 93       		.byte	(.L117-.L119)/2
 1043 002e 93       		.byte	(.L117-.L119)/2
ARM GAS  /tmp/ccGYckNR.s 			page 70


 1044 002f 93       		.byte	(.L117-.L119)/2
 1045 0030 93       		.byte	(.L117-.L119)/2
 1046 0031 93       		.byte	(.L117-.L119)/2
 1047 0032 93       		.byte	(.L117-.L119)/2
 1048 0033 93       		.byte	(.L117-.L119)/2
 1049 0034 93       		.byte	(.L117-.L119)/2
 1050 0035 93       		.byte	(.L117-.L119)/2
 1051 0036 93       		.byte	(.L117-.L119)/2
 1052 0037 93       		.byte	(.L117-.L119)/2
 1053 0038 93       		.byte	(.L117-.L119)/2
 1054 0039 93       		.byte	(.L117-.L119)/2
 1055 003a 93       		.byte	(.L117-.L119)/2
 1056 003b 93       		.byte	(.L117-.L119)/2
 1057 003c 93       		.byte	(.L117-.L119)/2
 1058 003d 93       		.byte	(.L117-.L119)/2
 1059 003e 93       		.byte	(.L117-.L119)/2
 1060 003f 93       		.byte	(.L117-.L119)/2
 1061 0040 93       		.byte	(.L117-.L119)/2
 1062 0041 93       		.byte	(.L117-.L119)/2
 1063 0042 93       		.byte	(.L117-.L119)/2
 1064 0043 93       		.byte	(.L117-.L119)/2
 1065 0044 93       		.byte	(.L117-.L119)/2
 1066 0045 93       		.byte	(.L117-.L119)/2
 1067 0046 93       		.byte	(.L117-.L119)/2
 1068 0047 93       		.byte	(.L117-.L119)/2
 1069 0048 93       		.byte	(.L117-.L119)/2
 1070 0049 93       		.byte	(.L117-.L119)/2
 1071 004a 93       		.byte	(.L117-.L119)/2
 1072 004b 93       		.byte	(.L117-.L119)/2
 1073 004c 93       		.byte	(.L117-.L119)/2
 1074 004d 93       		.byte	(.L117-.L119)/2
 1075 004e 93       		.byte	(.L117-.L119)/2
 1076 004f 93       		.byte	(.L117-.L119)/2
 1077 0050 93       		.byte	(.L117-.L119)/2
 1078 0051 93       		.byte	(.L117-.L119)/2
 1079 0052 93       		.byte	(.L117-.L119)/2
 1080 0053 93       		.byte	(.L117-.L119)/2
 1081 0054 93       		.byte	(.L117-.L119)/2
 1082 0055 93       		.byte	(.L117-.L119)/2
 1083 0056 93       		.byte	(.L117-.L119)/2
 1084 0057 93       		.byte	(.L117-.L119)/2
 1085 0058 93       		.byte	(.L117-.L119)/2
 1086 0059 93       		.byte	(.L117-.L119)/2
 1087 005a 93       		.byte	(.L117-.L119)/2
 1088 005b 93       		.byte	(.L117-.L119)/2
 1089 005c 93       		.byte	(.L117-.L119)/2
 1090 005d 93       		.byte	(.L117-.L119)/2
 1091 005e 93       		.byte	(.L117-.L119)/2
 1092 005f 93       		.byte	(.L117-.L119)/2
 1093 0060 93       		.byte	(.L117-.L119)/2
 1094 0061 93       		.byte	(.L117-.L119)/2
 1095 0062 93       		.byte	(.L117-.L119)/2
 1096 0063 93       		.byte	(.L117-.L119)/2
 1097 0064 93       		.byte	(.L117-.L119)/2
 1098 0065 93       		.byte	(.L117-.L119)/2
 1099 0066 93       		.byte	(.L117-.L119)/2
 1100 0067 93       		.byte	(.L117-.L119)/2
ARM GAS  /tmp/ccGYckNR.s 			page 71


 1101 0068 93       		.byte	(.L117-.L119)/2
 1102 0069 93       		.byte	(.L117-.L119)/2
 1103 006a 93       		.byte	(.L117-.L119)/2
 1104 006b 93       		.byte	(.L117-.L119)/2
 1105 006c 93       		.byte	(.L117-.L119)/2
 1106 006d 93       		.byte	(.L117-.L119)/2
 1107 006e 93       		.byte	(.L117-.L119)/2
 1108 006f 93       		.byte	(.L117-.L119)/2
 1109 0070 93       		.byte	(.L117-.L119)/2
 1110 0071 93       		.byte	(.L117-.L119)/2
 1111 0072 93       		.byte	(.L117-.L119)/2
 1112 0073 93       		.byte	(.L117-.L119)/2
 1113 0074 93       		.byte	(.L117-.L119)/2
 1114 0075 93       		.byte	(.L117-.L119)/2
 1115 0076 93       		.byte	(.L117-.L119)/2
 1116 0077 93       		.byte	(.L117-.L119)/2
 1117 0078 93       		.byte	(.L117-.L119)/2
 1118 0079 93       		.byte	(.L117-.L119)/2
 1119 007a 93       		.byte	(.L117-.L119)/2
 1120 007b 93       		.byte	(.L117-.L119)/2
 1121 007c 93       		.byte	(.L117-.L119)/2
 1122 007d 93       		.byte	(.L117-.L119)/2
 1123 007e 93       		.byte	(.L117-.L119)/2
 1124 007f 93       		.byte	(.L117-.L119)/2
 1125 0080 93       		.byte	(.L117-.L119)/2
 1126 0081 93       		.byte	(.L117-.L119)/2
 1127 0082 93       		.byte	(.L117-.L119)/2
 1128 0083 93       		.byte	(.L117-.L119)/2
 1129 0084 93       		.byte	(.L117-.L119)/2
 1130 0085 93       		.byte	(.L117-.L119)/2
 1131 0086 93       		.byte	(.L117-.L119)/2
 1132 0087 93       		.byte	(.L117-.L119)/2
 1133 0088 93       		.byte	(.L117-.L119)/2
 1134 0089 93       		.byte	(.L117-.L119)/2
 1135 008a 93       		.byte	(.L117-.L119)/2
 1136 008b 71       		.byte	(.L151-.L119)/2
 1137 008c 87       		.byte	(.L152-.L119)/2
 1138 008d 85       		.byte	(.L153-.L119)/2
 1139 008e 93       		.byte	(.L117-.L119)/2
 1140 008f 93       		.byte	(.L117-.L119)/2
 1141 0090 93       		.byte	(.L117-.L119)/2
 1142 0091 93       		.byte	(.L117-.L119)/2
 1143 0092 93       		.byte	(.L117-.L119)/2
 1144 0093 93       		.byte	(.L117-.L119)/2
 1145 0094 93       		.byte	(.L117-.L119)/2
 1146 0095 93       		.byte	(.L117-.L119)/2
 1147 0096 51       		.byte	(.L154-.L119)/2
 1148 0097 00       		.p2align 1
 1149              	.L149:
 1150              	.LVL87:
 259:dm/dm42_fns.cc ****     case 31:   u = "■";      break;
 1151              		.loc 1 259 0
 1152 0098 284C     		ldr	r4, .L159
 1153              	.LVL88:
 1154              	.L121:
 270:dm/dm42_fns.cc ****   return strlen(u);
 1155              		.loc 1 270 0
ARM GAS  /tmp/ccGYckNR.s 			page 72


 1156 009a 2146     		mov	r1, r4
 1157              	.LVL89:
 1158 009c FFF7FEFF 		bl	strcpy
 1159              	.LVL90:
 271:dm/dm42_fns.cc **** }
 1160              		.loc 1 271 0
 1161 00a0 2046     		mov	r0, r4
 272:dm/dm42_fns.cc **** 
 1162              		.loc 1 272 0
 1163 00a2 BDE81040 		pop	{r4, lr}
 1164              		.cfi_remember_state
 1165              		.cfi_restore 14
 1166              		.cfi_restore 4
 1167              		.cfi_def_cfa_offset 0
 1168              	.LVL91:
 271:dm/dm42_fns.cc **** }
 1169              		.loc 1 271 0
 1170 00a6 FFF7FEBF 		b	strlen
 1171              	.LVL92:
 1172              	.L156:
 1173              		.cfi_restore_state
 231:dm/dm42_fns.cc ****     case  3:   u = "∫";      break;
 1174              		.loc 1 231 0
 1175 00aa 254C     		ldr	r4, .L159+4
 1176 00ac F5E7     		b	.L121
 1177              	.L154:
 1178              	.LVL93:
 265:dm/dm42_fns.cc ****     default:
 1179              		.loc 1 265 0
 1180 00ae 254C     		ldr	r4, .L159+8
 1181 00b0 F3E7     		b	.L121
 1182              	.LVL94:
 1183              	.L122:
 232:dm/dm42_fns.cc ****     case  4:   u = "▒";      break;
 1184              		.loc 1 232 0
 1185 00b2 254C     		ldr	r4, .L159+12
 1186 00b4 F1E7     		b	.L121
 1187              	.LVL95:
 1188              	.L145:
 255:dm/dm42_fns.cc ****     case 27:   u = "␛";      break;
 1189              		.loc 1 255 0
 1190 00b6 254C     		ldr	r4, .L159+16
 1191 00b8 EFE7     		b	.L121
 1192              	.LVL96:
 1193              	.L144:
 254:dm/dm42_fns.cc ****     case 26:   u = "…";      break;
 1194              		.loc 1 254 0
 1195 00ba 254C     		ldr	r4, .L159+20
 1196 00bc EDE7     		b	.L121
 1197              	.LVL97:
 1198              	.L143:
 253:dm/dm42_fns.cc ****     case 25:   u = "Æ";      break;
 1199              		.loc 1 253 0
 1200 00be 254C     		ldr	r4, .L159+24
 1201 00c0 EBE7     		b	.L121
 1202              	.LVL98:
 1203              	.L142:
ARM GAS  /tmp/ccGYckNR.s 			page 73


 252:dm/dm42_fns.cc ****     case 24:   u = "ᴇ";      break;
 1204              		.loc 1 252 0
 1205 00c2 254C     		ldr	r4, .L159+28
 1206 00c4 E9E7     		b	.L121
 1207              	.LVL99:
 1208              	.L141:
 251:dm/dm42_fns.cc ****     case 23:   u = "∡";      break;
 1209              		.loc 1 251 0
 1210 00c6 254C     		ldr	r4, .L159+32
 1211 00c8 E7E7     		b	.L121
 1212              	.LVL100:
 1213              	.L140:
 250:dm/dm42_fns.cc ****     case 22:   u = "Ä";      break;
 1214              		.loc 1 250 0
 1215 00ca 254C     		ldr	r4, .L159+36
 1216 00cc E5E7     		b	.L121
 1217              	.LVL101:
 1218              	.L139:
 249:dm/dm42_fns.cc ****     case 21:   u = "Ñ";      break;
 1219              		.loc 1 249 0
 1220 00ce 254C     		ldr	r4, .L159+40
 1221 00d0 E3E7     		b	.L121
 1222              	.LVL102:
 1223              	.L138:
 248:dm/dm42_fns.cc ****     case 20:   u = "Å";      break;
 1224              		.loc 1 248 0
 1225 00d2 254C     		ldr	r4, .L159+44
 1226 00d4 E1E7     		b	.L121
 1227              	.LVL103:
 1228              	.L137:
 247:dm/dm42_fns.cc ****     case 19:   u = "°";      break;
 1229              		.loc 1 247 0
 1230 00d6 254C     		ldr	r4, .L159+48
 1231 00d8 DFE7     		b	.L121
 1232              	.LVL104:
 1233              	.L136:
 246:dm/dm42_fns.cc ****     case 18:   u = "£";      break;
 1234              		.loc 1 246 0
 1235 00da 254C     		ldr	r4, .L159+52
 1236 00dc DDE7     		b	.L121
 1237              	.LVL105:
 1238              	.L135:
 245:dm/dm42_fns.cc ****     case 17:   u = "μ";      break;
 1239              		.loc 1 245 0
 1240 00de 254C     		ldr	r4, .L159+56
 1241 00e0 DBE7     		b	.L121
 1242              	.LVL106:
 1243              	.L134:
 244:dm/dm42_fns.cc ****     case 16:   u = "←";      break;
 1244              		.loc 1 244 0
 1245 00e2 254C     		ldr	r4, .L159+60
 1246 00e4 D9E7     		b	.L121
 1247              	.LVL107:
 1248              	.L133:
 243:dm/dm42_fns.cc ****     case 15:   u = "→";      break;
 1249              		.loc 1 243 0
 1250 00e6 254C     		ldr	r4, .L159+64
ARM GAS  /tmp/ccGYckNR.s 			page 74


 1251 00e8 D7E7     		b	.L121
 1252              	.LVL108:
 1253              	.L132:
 242:dm/dm42_fns.cc ****     case 14:   u = "↓";      break;
 1254              		.loc 1 242 0
 1255 00ea 254C     		ldr	r4, .L159+68
 1256 00ec D5E7     		b	.L121
 1257              	.LVL109:
 1258              	.L151:
 261:dm/dm42_fns.cc **** 
 1259              		.loc 1 261 0
 1260 00ee 254C     		ldr	r4, .L159+72
 1261 00f0 D3E7     		b	.L121
 1262              	.LVL110:
 1263              	.L150:
 260:dm/dm42_fns.cc ****     case 127:  u = "├";      break;
 1264              		.loc 1 260 0
 1265 00f2 254C     		ldr	r4, .L159+76
 1266 00f4 D1E7     		b	.L121
 1267              	.LVL111:
 1268              	.L129:
 239:dm/dm42_fns.cc ****     case 11:   u = "≥";      break;
 1269              		.loc 1 239 0
 1270 00f6 254C     		ldr	r4, .L159+80
 1271 00f8 CFE7     		b	.L121
 1272              	.LVL112:
 1273              	.L128:
 238:dm/dm42_fns.cc ****     case 10:   u = "\r\n";   break;
 1274              		.loc 1 238 0
 1275 00fa 254C     		ldr	r4, .L159+84
 1276 00fc CDE7     		b	.L121
 1277              	.LVL113:
 1278              	.L127:
 237:dm/dm42_fns.cc ****     case  9:   u = "≤";      break;
 1279              		.loc 1 237 0
 1280 00fe 254C     		ldr	r4, .L159+88
 1281 0100 CBE7     		b	.L121
 1282              	.LVL114:
 1283              	.L126:
 236:dm/dm42_fns.cc ****     case  8:   u = "¿";      break;
 1284              		.loc 1 236 0
 1285 0102 254C     		ldr	r4, .L159+92
 1286 0104 C9E7     		b	.L121
 1287              	.LVL115:
 1288              	.L125:
 235:dm/dm42_fns.cc ****     case  7:   u = "π";      break;
 1289              		.loc 1 235 0
 1290 0106 254C     		ldr	r4, .L159+96
 1291 0108 C7E7     		b	.L121
 1292              	.LVL116:
 1293              	.L124:
 234:dm/dm42_fns.cc ****     case  6:   u = "▶";      break;
 1294              		.loc 1 234 0
 1295 010a 254C     		ldr	r4, .L159+100
 1296 010c C5E7     		b	.L121
 1297              	.LVL117:
 1298              	.L120:
ARM GAS  /tmp/ccGYckNR.s 			page 75


 230:dm/dm42_fns.cc ****     case  2:   u = "√";      break;
 1299              		.loc 1 230 0
 1300 010e 254C     		ldr	r4, .L159+104
 1301 0110 C3E7     		b	.L121
 1302              	.L118:
 229:dm/dm42_fns.cc ****     case  1:   u = "×";      break;
 1303              		.loc 1 229 0
 1304 0112 254C     		ldr	r4, .L159+108
 1305 0114 C1E7     		b	.L121
 1306              	.L153:
 1307              	.LVL118:
 264:dm/dm42_fns.cc ****     case 138:  u = "␊";      break;
 1308              		.loc 1 264 0
 1309 0116 254C     		ldr	r4, .L159+112
 1310 0118 BFE7     		b	.L121
 1311              	.LVL119:
 1312              	.L152:
 263:dm/dm42_fns.cc ****     case 129:  u = "Y";      break;
 1313              		.loc 1 263 0
 1314 011a 254C     		ldr	r4, .L159+116
 1315 011c BDE7     		b	.L121
 1316              	.LVL120:
 1317              	.L146:
 256:dm/dm42_fns.cc ****     case 28:   u = "Ö";      break;
 1318              		.loc 1 256 0
 1319 011e 254C     		ldr	r4, .L159+120
 1320 0120 BBE7     		b	.L121
 1321              	.LVL121:
 1322              	.L148:
 258:dm/dm42_fns.cc ****     case 30:   u = "▒";      break;
 1323              		.loc 1 258 0
 1324 0122 254C     		ldr	r4, .L159+124
 1325 0124 B9E7     		b	.L121
 1326              	.LVL122:
 1327              	.L147:
 257:dm/dm42_fns.cc ****     case 29:   u = "Ü";      break;
 1328              		.loc 1 257 0
 1329 0126 254C     		ldr	r4, .L159+128
 1330 0128 B7E7     		b	.L121
 1331              	.LVL123:
 1332              	.L131:
 241:dm/dm42_fns.cc ****     case 13:   u = "↲";      break;
 1333              		.loc 1 241 0
 1334 012a 254C     		ldr	r4, .L159+132
 1335 012c B5E7     		b	.L121
 1336              	.LVL124:
 1337              	.L130:
 240:dm/dm42_fns.cc ****     case 12:   u = "≠";      break;
 1338              		.loc 1 240 0
 1339 012e 254C     		ldr	r4, .L159+136
 1340 0130 B3E7     		b	.L121
 1341              	.LVL125:
 1342              	.L117:
 267:dm/dm42_fns.cc ****       return 1;
 1343              		.loc 1 267 0
 1344 0132 01F07F01 		and	r1, r1, #127
 1345              	.LVL126:
ARM GAS  /tmp/ccGYckNR.s 			page 76


 1346 0136 0170     		strb	r1, [r0]
 272:dm/dm42_fns.cc **** 
 1347              		.loc 1 272 0
 1348 0138 0120     		movs	r0, #1
 1349              	.LVL127:
 1350 013a 10BD     		pop	{r4, pc}
 1351              	.L160:
 1352              		.align	2
 1353              	.L159:
 1354 013c 10000000 		.word	.LC48
 1355 0140 08000000 		.word	.LC46
 1356 0144 84000000 		.word	.LC77
 1357 0148 0C000000 		.word	.LC47
 1358 014c 68000000 		.word	.LC70
 1359 0150 64000000 		.word	.LC69
 1360 0154 60000000 		.word	.LC68
 1361 0158 5C000000 		.word	.LC67
 1362 015c 58000000 		.word	.LC66
 1363 0160 54000000 		.word	.LC65
 1364 0164 50000000 		.word	.LC64
 1365 0168 4C000000 		.word	.LC63
 1366 016c 48000000 		.word	.LC62
 1367 0170 44000000 		.word	.LC61
 1368 0174 40000000 		.word	.LC60
 1369 0178 3C000000 		.word	.LC59
 1370 017c 38000000 		.word	.LC58
 1371 0180 34000000 		.word	.LC57
 1372 0184 7C000000 		.word	.LC75
 1373 0188 78000000 		.word	.LC74
 1374 018c 28000000 		.word	.LC54
 1375 0190 24000000 		.word	.LC53
 1376 0194 20000000 		.word	.LC52
 1377 0198 1C000000 		.word	.LC51
 1378 019c 18000000 		.word	.LC50
 1379 01a0 14000000 		.word	.LC49
 1380 01a4 04000000 		.word	.LC45
 1381 01a8 00000000 		.word	.LC44
 1382 01ac 80000000 		.word	.LC76
 1383 01b0 0C000000 		.word	.LC11
 1384 01b4 6C000000 		.word	.LC71
 1385 01b8 74000000 		.word	.LC73
 1386 01bc 70000000 		.word	.LC72
 1387 01c0 30000000 		.word	.LC56
 1388 01c4 2C000000 		.word	.LC55
 1389              		.cfi_endproc
 1390              	.LFE230:
 1392              		.section	.text._Z7hp2fontPcPKci,"ax",%progbits
 1393              		.align	1
 1394              		.p2align 2,,3
 1395              		.global	_Z7hp2fontPcPKci
 1396              		.syntax unified
 1397              		.thumb
 1398              		.thumb_func
 1399              		.fpu fpv4-sp-d16
 1401              	_Z7hp2fontPcPKci:
 1402              	.LFB231:
 277:dm/dm42_fns.cc ****   unsigned char c;
ARM GAS  /tmp/ccGYckNR.s 			page 77


 1403              		.loc 1 277 0
 1404              		.cfi_startproc
 1405              		@ args = 0, pretend = 0, frame = 0
 1406              		@ frame_needed = 0, uses_anonymous_args = 0
 1407              	.LVL128:
 280:dm/dm42_fns.cc ****     c = src[s];
 1408              		.loc 1 280 0
 1409 0000 002A     		cmp	r2, #0
 277:dm/dm42_fns.cc ****   unsigned char c;
 1410              		.loc 1 277 0
 1411 0002 F0B5     		push	{r4, r5, r6, r7, lr}
 1412              		.cfi_def_cfa_offset 20
 1413              		.cfi_offset 4, -20
 1414              		.cfi_offset 5, -16
 1415              		.cfi_offset 6, -12
 1416              		.cfi_offset 7, -8
 1417              		.cfi_offset 14, -4
 277:dm/dm42_fns.cc ****   unsigned char c;
 1418              		.loc 1 277 0
 1419 0004 0646     		mov	r6, r0
 280:dm/dm42_fns.cc ****     c = src[s];
 1420              		.loc 1 280 0
 1421 0006 32DD     		ble	.L175
 1422 0008 0139     		subs	r1, r1, #1
 1423              	.LVL129:
 1424 000a 441E     		subs	r4, r0, #1
 1425 000c 0125     		movs	r5, #1
 287:dm/dm42_fns.cc ****     c &= 0x7f;
 1426              		.loc 1 287 0
 1427 000e 4FF0590E 		mov	lr, #89
 284:dm/dm42_fns.cc ****       continue; 
 1428              		.loc 1 284 0
 1429 0012 3A27     		movs	r7, #58
 283:dm/dm42_fns.cc ****       dst[d++] = ':';
 1430              		.loc 1 283 0
 1431 0014 4FF0580C 		mov	ip, #88
 1432 0018 0EE0     		b	.L164
 1433              	.LVL130:
 1434              	.L165:
 287:dm/dm42_fns.cc ****     c &= 0x7f;
 1435              		.loc 1 287 0
 1436 001a 812B     		cmp	r3, #129
 1437 001c 23D0     		beq	.L176
 289:dm/dm42_fns.cc ****     dst[d++] = c;
 1438              		.loc 1 289 0
 1439 001e 1F28     		cmp	r0, #31
 1440 0020 60F07F03 		orn	r3, r0, #127
 290:dm/dm42_fns.cc ****   }
 1441              		.loc 1 290 0
 1442 0024 8CBF     		ite	hi
 1443 0026 6070     		strbhi	r0, [r4, #1]
 289:dm/dm42_fns.cc ****     dst[d++] = c;
 1444              		.loc 1 289 0
 1445 0028 6370     		strbls	r3, [r4, #1]
 290:dm/dm42_fns.cc ****   }
 1446              		.loc 1 290 0
 1447 002a 2846     		mov	r0, r5
ARM GAS  /tmp/ccGYckNR.s 			page 78


 1448              	.LVL131:
 1449              	.L167:
 280:dm/dm42_fns.cc ****     c = src[s];
 1450              		.loc 1 280 0 discriminator 1
 1451 002c 9042     		cmp	r0, r2
 1452 002e 05F10105 		add	r5, r5, #1
 1453 0032 04F10104 		add	r4, r4, #1
 1454 0036 12DA     		bge	.L177
 1455              	.LVL132:
 1456              	.L164:
 281:dm/dm42_fns.cc ****     if (c == 0x80) {
 1457              		.loc 1 281 0
 1458 0038 11F8013F 		ldrb	r3, [r1, #1]!	@ zero_extendqisi2
 1459              	.LVL133:
 282:dm/dm42_fns.cc ****       if ( dst[d-1] == 'x' ) dst[d-1]='X';
 1460              		.loc 1 282 0
 1461 003c 802B     		cmp	r3, #128
 288:dm/dm42_fns.cc ****     if (c < ' ')   { dst[d++] = c|0x80; continue; }
 1462              		.loc 1 288 0
 1463 003e 03F07F00 		and	r0, r3, #127
 1464              	.LVL134:
 282:dm/dm42_fns.cc ****       if ( dst[d-1] == 'x' ) dst[d-1]='X';
 1465              		.loc 1 282 0
 1466 0042 EAD1     		bne	.L165
 283:dm/dm42_fns.cc ****       dst[d++] = ':';
 1467              		.loc 1 283 0
 1468 0044 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 284:dm/dm42_fns.cc ****       continue; 
 1469              		.loc 1 284 0
 1470 0046 6770     		strb	r7, [r4, #1]
 283:dm/dm42_fns.cc ****       dst[d++] = ':';
 1471              		.loc 1 283 0
 1472 0048 782B     		cmp	r3, #120
 284:dm/dm42_fns.cc ****       continue; 
 1473              		.loc 1 284 0
 1474 004a 2846     		mov	r0, r5
 1475              	.LVL135:
 283:dm/dm42_fns.cc ****       dst[d++] = ':';
 1476              		.loc 1 283 0
 1477 004c 08BF     		it	eq
 1478 004e 84F800C0 		strbeq	ip, [r4]
 280:dm/dm42_fns.cc ****     c = src[s];
 1479              		.loc 1 280 0
 1480 0052 9042     		cmp	r0, r2
 1481 0054 05F10105 		add	r5, r5, #1
 1482              	.LVL136:
 1483 0058 04F10104 		add	r4, r4, #1
 1484 005c ECDB     		blt	.L164
 1485              	.L177:
 1486 005e 0346     		mov	r3, r0
 1487              	.LVL137:
 1488              	.L162:
 292:dm/dm42_fns.cc ****   return d;
 1489              		.loc 1 292 0
 1490 0060 0022     		movs	r2, #0
 1491              	.LVL138:
 1492 0062 F254     		strb	r2, [r6, r3]
ARM GAS  /tmp/ccGYckNR.s 			page 79


 294:dm/dm42_fns.cc **** 
 1493              		.loc 1 294 0
 1494 0064 F0BD     		pop	{r4, r5, r6, r7, pc}
 1495              	.LVL139:
 1496              	.L176:
 287:dm/dm42_fns.cc ****     c &= 0x7f;
 1497              		.loc 1 287 0 discriminator 1
 1498 0066 84F801E0 		strb	lr, [r4, #1]
 1499 006a 2846     		mov	r0, r5
 1500              	.LVL140:
 1501 006c DEE7     		b	.L167
 1502              	.LVL141:
 1503              	.L175:
 280:dm/dm42_fns.cc ****     c = src[s];
 1504              		.loc 1 280 0
 1505 006e 0023     		movs	r3, #0
 1506 0070 1846     		mov	r0, r3
 1507              	.LVL142:
 1508 0072 F5E7     		b	.L162
 1509              		.cfi_endproc
 1510              	.LFE231:
 1512              		.section	.text.repaint_annunciators,"ax",%progbits
 1513              		.align	1
 1514              		.p2align 2,,3
 1515              		.global	repaint_annunciators
 1516              		.syntax unified
 1517              		.thumb
 1518              		.thumb_func
 1519              		.fpu fpv4-sp-d16
 1521              	repaint_annunciators:
 1522              	.LFB232:
 766:dm/dm42_fns.cc ****   int a;
 1523              		.loc 1 766 0
 1524              		.cfi_startproc
 1525              		@ args = 0, pretend = 0, frame = 0
 1526              		@ frame_needed = 0, uses_anonymous_args = 0
 1527              		@ link register save eliminated.
 770:dm/dm42_fns.cc **** 
 1528              		.loc 1 770 0
 1529 0000 054B     		ldr	r3, .L181
 1530 0002 1B68     		ldr	r3, [r3]
 1531 0004 5B06     		lsls	r3, r3, #25
 1532 0006 03D4     		bmi	.L178
 772:dm/dm42_fns.cc ****     return;
 1533              		.loc 1 772 0
 1534 0008 044B     		ldr	r3, .L181+4
 1535 000a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1536 000c 012B     		cmp	r3, #1
 1537 000e 00DD     		ble	.L180
 1538              	.L178:
 1539 0010 7047     		bx	lr
 1540              	.L180:
 1541 0012 FFF7FEBF 		b	repaint_annunciators.part.0
 1542              	.LVL143:
 1543              	.L182:
 1544 0016 00BF     		.align	2
 1545              	.L181:
ARM GAS  /tmp/ccGYckNR.s 			page 80


 1546 0018 00200010 		.word	268443648
 1547 001c 00000000 		.word	.LANCHOR10
 1548              		.cfi_endproc
 1549              	.LFE232:
 1551              		.section	.text.get_printer_delay,"ax",%progbits
 1552              		.align	1
 1553              		.p2align 2,,3
 1554              		.global	get_printer_delay
 1555              		.syntax unified
 1556              		.thumb
 1557              		.thumb_func
 1558              		.fpu fpv4-sp-d16
 1560              	get_printer_delay:
 1561              	.LFB235:
 852:dm/dm42_fns.cc ****   return core_printer_delay();
 1562              		.loc 1 852 0
 1563              		.cfi_startproc
 1564              		@ args = 0, pretend = 0, frame = 0
 1565              		@ frame_needed = 0, uses_anonymous_args = 0
 1566              		@ link register save eliminated.
 853:dm/dm42_fns.cc **** }
 1567              		.loc 1 853 0
 1568 0000 FFF7FEBF 		b	core_printer_delay
 1569              	.LVL144:
 1570              		.cfi_endproc
 1571              	.LFE235:
 1573              		.section	.text.str_from_hp,"ax",%progbits
 1574              		.align	1
 1575              		.p2align 2,,3
 1576              		.global	str_from_hp
 1577              		.syntax unified
 1578              		.thumb
 1579              		.thumb_func
 1580              		.fpu fpv4-sp-d16
 1582              	str_from_hp:
 1583              	.LFB236:
 858:dm/dm42_fns.cc ****   const int maxlen = 76;
 1584              		.loc 1 858 0
 1585              		.cfi_startproc
 1586              		@ args = 0, pretend = 0, frame = 0
 1587              		@ frame_needed = 0, uses_anonymous_args = 0
 1588              	.LVL145:
 1589 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1590              		.cfi_def_cfa_offset 24
 1591              		.cfi_offset 3, -24
 1592              		.cfi_offset 4, -20
 1593              		.cfi_offset 5, -16
 1594              		.cfi_offset 6, -12
 1595              		.cfi_offset 7, -8
 1596              		.cfi_offset 14, -4
 1597              	.LBB309:
 863:dm/dm42_fns.cc ****     int b = hp2utfchar(d, s[a]);
 1598              		.loc 1 863 0
 1599 0002 0E1E     		subs	r6, r1, #0
 1600 0004 13DD     		ble	.L187
 1601 0006 0B4F     		ldr	r7, .L191
 1602 0008 0546     		mov	r5, r0
ARM GAS  /tmp/ccGYckNR.s 			page 81


 1603 000a 0644     		add	r6, r6, r0
 1604 000c 3C46     		mov	r4, r7
 1605 000e 01E0     		b	.L186
 1606              	.LVL146:
 1607              	.L190:
 863:dm/dm42_fns.cc ****     int b = hp2utfchar(d, s[a]);
 1608              		.loc 1 863 0 is_stmt 0 discriminator 2
 1609 0010 B542     		cmp	r5, r6
 1610 0012 08D0     		beq	.L185
 1611              	.LVL147:
 1612              	.L186:
 1613              	.LBB310:
 864:dm/dm42_fns.cc ****     d += b;
 1614              		.loc 1 864 0 is_stmt 1
 1615 0014 2046     		mov	r0, r4
 1616 0016 15F8011B 		ldrb	r1, [r5], #1	@ zero_extendqisi2
 1617              	.LVL148:
 1618 001a FFF7FEFF 		bl	_Z10hp2utfcharPch
 1619              	.LVL149:
 865:dm/dm42_fns.cc ****     if (d-ss > maxlen) break;
 1620              		.loc 1 865 0
 1621 001e 0444     		add	r4, r4, r0
 1622              	.LVL150:
 866:dm/dm42_fns.cc ****   }
 1623              		.loc 1 866 0
 1624 0020 E31B     		subs	r3, r4, r7
 1625 0022 4C2B     		cmp	r3, #76
 1626 0024 F4DD     		ble	.L190
 1627              	.LVL151:
 1628              	.L185:
 1629              	.LBE310:
 1630              	.LBE309:
 868:dm/dm42_fns.cc **** 
 1631              		.loc 1 868 0
 1632 0026 0023     		movs	r3, #0
 1633 0028 2370     		strb	r3, [r4]
 871:dm/dm42_fns.cc **** 
 1634              		.loc 1 871 0
 1635 002a 0248     		ldr	r0, .L191
 1636 002c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1637              	.LVL152:
 1638              	.L187:
 861:dm/dm42_fns.cc **** 
 1639              		.loc 1 861 0
 1640 002e 014C     		ldr	r4, .L191
 1641 0030 F9E7     		b	.L185
 1642              	.L192:
 1643 0032 00BF     		.align	2
 1644              	.L191:
 1645 0034 00000000 		.word	.LANCHOR12
 1646              		.cfi_endproc
 1647              	.LFE236:
 1649              		.section	.text.draw_hp42_lcd,"ax",%progbits
 1650              		.align	1
 1651              		.p2align 2,,3
 1652              		.global	draw_hp42_lcd
 1653              		.syntax unified
ARM GAS  /tmp/ccGYckNR.s 			page 82


 1654              		.thumb
 1655              		.thumb_func
 1656              		.fpu fpv4-sp-d16
 1658              	draw_hp42_lcd:
 1659              	.LFB237:
 874:dm/dm42_fns.cc **** 
 1660              		.loc 1 874 0
 1661              		.cfi_startproc
 1662              		@ args = 8, pretend = 0, frame = 24
 1663              		@ frame_needed = 0, uses_anonymous_args = 0
 1664              	.LVL153:
 1665 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1666              		.cfi_def_cfa_offset 36
 1667              		.cfi_offset 4, -36
 1668              		.cfi_offset 5, -32
 1669              		.cfi_offset 6, -28
 1670              		.cfi_offset 7, -24
 1671              		.cfi_offset 8, -20
 1672              		.cfi_offset 9, -16
 1673              		.cfi_offset 10, -12
 1674              		.cfi_offset 11, -8
 1675              		.cfi_offset 14, -4
 880:dm/dm42_fns.cc ****   uint const py = is_graphics ? 4 : 2;
 1676              		.loc 1 880 0
 1677 0004 4F4A     		ldr	r2, .L216
 1678              	.LVL154:
 874:dm/dm42_fns.cc **** 
 1679              		.loc 1 874 0
 1680 0006 89B0     		sub	sp, sp, #36
 1681              		.cfi_def_cfa_offset 72
 880:dm/dm42_fns.cc ****   uint const py = is_graphics ? 4 : 2;
 1682              		.loc 1 880 0
 1683 0008 1478     		ldrb	r4, [r2]	@ zero_extendqisi2
 874:dm/dm42_fns.cc **** 
 1684              		.loc 1 874 0
 1685 000a 0390     		str	r0, [sp, #12]
 1686 000c 0791     		str	r1, [sp, #28]
 1687 000e 9846     		mov	r8, r3
 880:dm/dm42_fns.cc ****   uint const py = is_graphics ? 4 : 2;
 1688              		.loc 1 880 0
 1689 0010 002C     		cmp	r4, #0
 1690 0012 40F08780 		bne	.L205
 1691 0016 0323     		movs	r3, #3
 1692              	.LVL155:
 1693 0018 0226     		movs	r6, #2
 1694 001a 0493     		str	r3, [sp, #16]
 881:dm/dm42_fns.cc ****   uint const x_shft = is_graphics ? 0 : 1;
 1695              		.loc 1 881 0
 1696 001c 0696     		str	r6, [sp, #24]
 880:dm/dm42_fns.cc ****   uint const py = is_graphics ? 4 : 2;
 1697              		.loc 1 880 0
 1698 001e 4FF0220B 		mov	fp, #34
 1699 0022 40F20B1A 		movw	r10, #267
 1700 0026 2423     		movs	r3, #36
 1701 0028 40F20D12 		movw	r2, #269
 1702 002c 6FF48479 		mvn	r9, #264
 1703              	.LVL156:
ARM GAS  /tmp/ccGYckNR.s 			page 83


 1704              	.L194:
 882:dm/dm42_fns.cc **** 
 1705              		.loc 1 882 0 discriminator 4
 1706 0030 B4FA84F4 		clz	r4, r4
 1707 0034 6409     		lsrs	r4, r4, #5
 1708              	.LVL157:
 888:dm/dm42_fns.cc ****   uint const ay = lcd_y_base;
 1709              		.loc 1 888 0 discriminator 4
 1710 0036 A9EBC409 		sub	r9, r9, r4, lsl #3
 1711              	.LVL158:
 890:dm/dm42_fns.cc ****   lcd_fill_rect(ax-1, ay-1, adx+2, ady+2,0);
 1712              		.loc 1 890 0 discriminator 4
 1713 003a 0121     		movs	r1, #1
 1714 003c 09F5C770 		add	r0, r9, #398
 1715              	.LVL159:
 1716 0040 414F     		ldr	r7, .L216+4
 1717 0042 0091     		str	r1, [sp]
 1718 0044 2821     		movs	r1, #40
 1719 0046 B847     		blx	r7
 1720              	.LVL160:
 891:dm/dm42_fns.cc **** 
 1721              		.loc 1 891 0 discriminator 4
 1722 0048 0021     		movs	r1, #0
 1723 004a 09F28F10 		addw	r0, r9, #399
 1724 004e 5B46     		mov	r3, fp
 1725 0050 5246     		mov	r2, r10
 1726 0052 0091     		str	r1, [sp]
 1727 0054 2921     		movs	r1, #41
 1728 0056 B847     		blx	r7
 1729              	.LVL161:
 896:dm/dm42_fns.cc ****   uint8_t *c;
 1730              		.loc 1 896 0 discriminator 4
 1731 0058 0699     		ldr	r1, [sp, #24]
 1732 005a 079B     		ldr	r3, [sp, #28]
 1733              	.LBB311:
 1734              	.LBB312:
 901:dm/dm42_fns.cc ****     uint n = HP_LCD_X_BYTES;
 1735              		.loc 1 901 0 discriminator 4
 1736 005c 3B4D     		ldr	r5, .L216+8
 902:dm/dm42_fns.cc ****     uint outbits = 8;
 1737              		.loc 1 902 0 discriminator 4
 1738 005e 06EB8612 		add	r2, r6, r6, lsl #6
 1739              	.LBE312:
 1740              	.LBE311:
 896:dm/dm42_fns.cc ****   uint8_t *c;
 1741              		.loc 1 896 0 discriminator 4
 1742 0062 01FB08F9 		mul	r9, r1, r8
 1743              	.LVL162:
 1744              	.LBB318:
 1745              	.LBB316:
 902:dm/dm42_fns.cc ****     uint outbits = 8;
 1746              		.loc 1 902 0 discriminator 4
 1747 0066 06EB4202 		add	r2, r6, r2, lsl #1
 1748 006a 1399     		ldr	r1, [sp, #76]
 1749 006c 0732     		adds	r2, r2, #7
 1750 006e 08FB0333 		mla	r3, r8, r3, r3
 1751 0072 4144     		add	r1, r8, r1
ARM GAS  /tmp/ccGYckNR.s 			page 84


 1752 0074 D708     		lsrs	r7, r2, #3
 1753 0076 039A     		ldr	r2, [sp, #12]
 1754 0078 0591     		str	r1, [sp, #20]
 1755 007a 013B     		subs	r3, r3, #1
 1756 007c 1A44     		add	r2, r2, r3
 1757              	.LBE316:
 899:dm/dm42_fns.cc ****     uint8_t *bi = (uint8_t*)(bits + (v+1) * bytesperline - 1 );
 1758              		.loc 1 899 0 discriminator 4
 1759 007e 059B     		ldr	r3, [sp, #20]
 1760 0080 0392     		str	r2, [sp, #12]
 1761              	.LVL163:
 1762 0082 9845     		cmp	r8, r3
 1763              	.LBE318:
 896:dm/dm42_fns.cc ****   uint8_t *c;
 1764              		.loc 1 896 0 discriminator 4
 1765 0084 09F12A09 		add	r9, r9, #42
 1766              	.LVL164:
 1767              	.LBB319:
 899:dm/dm42_fns.cc ****     uint8_t *bi = (uint8_t*)(bits + (v+1) * bytesperline - 1 );
 1768              		.loc 1 899 0 discriminator 4
 1769 0088 49DA     		bge	.L193
 1770              	.LVL165:
 1771              	.L215:
 1772              	.LBB317:
 901:dm/dm42_fns.cc ****     uint n = HP_LCD_X_BYTES;
 1773              		.loc 1 901 0
 1774 008a 4846     		mov	r0, r9
 1775 008c A847     		blx	r5
 1776              	.LVL166:
 905:dm/dm42_fns.cc **** 
 1777              		.loc 1 905 0
 1778 008e 0821     		movs	r1, #8
 900:dm/dm42_fns.cc ****     c = lcd_line_addr(lcd_y) + x_shft; // lbuf+2
 1779              		.loc 1 900 0
 1780 0090 DDF80CB0 		ldr	fp, [sp, #12]
 1781              	.LVL167:
 904:dm/dm42_fns.cc ****     uint i_mask = 8;
 1782              		.loc 1 904 0
 1783 0094 DDF810C0 		ldr	ip, [sp, #16]
 900:dm/dm42_fns.cc ****     c = lcd_line_addr(lcd_y) + x_shft; // lbuf+2
 1784              		.loc 1 900 0
 1785 0098 08F10108 		add	r8, r8, #1
 1786              	.LVL168:
 901:dm/dm42_fns.cc ****     uint n = HP_LCD_X_BYTES;
 1787              		.loc 1 901 0
 1788 009c 2044     		add	r0, r0, r4
 1789              	.LVL169:
 903:dm/dm42_fns.cc ****     uint z=0xFFFFFF, m=px_mask; // This way z support px <= 3
 1790              		.loc 1 903 0
 1791 009e 8E46     		mov	lr, r1
 902:dm/dm42_fns.cc ****     uint outbits = 8;
 1792              		.loc 1 902 0
 1793 00a0 3A46     		mov	r2, r7
 904:dm/dm42_fns.cc ****     uint i_mask = 8;
 1794              		.loc 1 904 0
 1795 00a2 6FF07F43 		mvn	r3, #-16777216
 1796              	.LVL170:
ARM GAS  /tmp/ccGYckNR.s 			page 85


 1797              	.L201:
 1798 00a6 1BF801A9 		ldrb	r10, [fp], #-1	@ zero_extendqisi2
 1799              	.LVL171:
 1800              	.L202:
 1801              	.LBB313:
 911:dm/dm42_fns.cc ****         m <<= px;
 1802              		.loc 1 911 0
 1803 00aa 1AEA010F 		tst	r10, r1
 1804 00ae 18BF     		it	ne
 1805 00b0 23EA0C03 		bicne	r3, r3, ip
 1806              	.LVL172:
 913:dm/dm42_fns.cc ****           for(j=0; j<px; j++) {
 1807              		.loc 1 913 0
 1808 00b4 BEF1010E 		subs	lr, lr, #1
 1809              	.LVL173:
 1810 00b8 05D0     		beq	.L197
 912:dm/dm42_fns.cc ****         if ( !--outbits ) {
 1811              		.loc 1 912 0
 1812 00ba 0CFA06FC 		lsl	ip, ip, r6
 1813              	.LVL174:
 1814              	.L198:
 910:dm/dm42_fns.cc ****         if ( (b&i) != 0) z &= ~m;
 1815              		.loc 1 910 0 discriminator 2
 1816 00be 4908     		lsrs	r1, r1, #1
 1817              	.LVL175:
 1818 00c0 F3D1     		bne	.L202
 920:dm/dm42_fns.cc ****     }
 1819              		.loc 1 920 0
 1820 00c2 8021     		movs	r1, #128
 1821              	.LVL176:
 1822 00c4 EFE7     		b	.L201
 1823              	.LVL177:
 1824              	.L197:
 1825 00c6 00EB060E 		add	lr, r0, r6
 1826              	.LVL178:
 1827              	.L200:
 915:dm/dm42_fns.cc ****           }
 1828              		.loc 1 915 0
 1829 00ca 013A     		subs	r2, r2, #1
 1830              	.LVL179:
 1831 00cc 00F8013B 		strb	r3, [r0], #1
 1832              	.LVL180:
 1833 00d0 4FEA1323 		lsr	r3, r3, #8
 1834              	.LVL181:
 1835 00d4 08D0     		beq	.L199
 914:dm/dm42_fns.cc ****             c[0] = z & 0xFF; z >>= 8; c++; n--; if (n==0) goto lbuf_end;
 1836              		.loc 1 914 0 discriminator 2
 1837 00d6 7045     		cmp	r0, lr
 1838 00d8 F7D1     		bne	.L200
 917:dm/dm42_fns.cc ****         }
 1839              		.loc 1 917 0
 1840 00da DDF810C0 		ldr	ip, [sp, #16]
 1841 00de 6FF07F43 		mvn	r3, #-16777216
 1842              	.LVL182:
 1843 00e2 4FF0080E 		mov	lr, #8
 1844 00e6 EAE7     		b	.L198
 1845              	.LVL183:
ARM GAS  /tmp/ccGYckNR.s 			page 86


 1846              	.L199:
 1847              	.LBE313:
 923:dm/dm42_fns.cc ****     for(i=1; i<py; i++) {
 1848              		.loc 1 923 0
 1849 00e8 4846     		mov	r0, r9
 1850              	.LVL184:
 1851 00ea A847     		blx	r5
 1852              	.LVL185:
 1853 00ec 069B     		ldr	r3, [sp, #24]
 1854 00ee 00EB040A 		add	r10, r0, r4
 1855              	.LVL186:
 1856 00f2 09EB030B 		add	fp, r9, r3
 1857              	.LVL187:
 1858 00f6 09F10109 		add	r9, r9, #1
 1859              	.LVL188:
 1860              	.L203:
 1861              	.LBB314:
 1862              	.LBB315:
 925:dm/dm42_fns.cc ****       memcpy(cc,c,HP_LCD_X_BYTES);
 1863              		.loc 1 925 0 discriminator 2
 1864 00fa 4846     		mov	r0, r9
 1865 00fc A847     		blx	r5
 1866              	.LVL189:
 1867 00fe 09F10109 		add	r9, r9, #1
 1868              	.LVL190:
 926:dm/dm42_fns.cc ****     }
 1869              		.loc 1 926 0 discriminator 2
 1870 0102 3A46     		mov	r2, r7
 1871 0104 5146     		mov	r1, r10
 1872 0106 2044     		add	r0, r0, r4
 1873              	.LVL191:
 1874 0108 FFF7FEFF 		bl	memcpy
 1875              	.LVL192:
 1876              	.LBE315:
 924:dm/dm42_fns.cc ****       uint8_t * cc = lcd_line_addr(lcd_y++)+x_shft;
 1877              		.loc 1 924 0 discriminator 2
 1878 010c CB45     		cmp	fp, r9
 1879 010e F4D1     		bne	.L203
 1880 0110 039B     		ldr	r3, [sp, #12]
 1881 0112 079A     		ldr	r2, [sp, #28]
 1882 0114 1344     		add	r3, r3, r2
 1883 0116 0393     		str	r3, [sp, #12]
 1884              	.LVL193:
 1885              	.LBE314:
 1886              	.LBE317:
 899:dm/dm42_fns.cc ****     uint8_t *bi = (uint8_t*)(bits + (v+1) * bytesperline - 1 );
 1887              		.loc 1 899 0
 1888 0118 059B     		ldr	r3, [sp, #20]
 1889 011a 9845     		cmp	r8, r3
 1890 011c B5DB     		blt	.L215
 1891              	.LVL194:
 1892              	.L193:
 1893              	.LBE319:
 929:dm/dm42_fns.cc **** 
 1894              		.loc 1 929 0
 1895 011e 09B0     		add	sp, sp, #36
 1896              		.cfi_remember_state
ARM GAS  /tmp/ccGYckNR.s 			page 87


 1897              		.cfi_def_cfa_offset 36
 1898              		@ sp needed
 1899 0120 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1900              	.LVL195:
 1901              	.L205:
 1902              		.cfi_restore_state
 1903 0124 0723     		movs	r3, #7
 1904              	.LVL196:
 881:dm/dm42_fns.cc ****   uint const x_shft = is_graphics ? 0 : 1;
 1905              		.loc 1 881 0
 1906 0126 0421     		movs	r1, #4
 1907              	.LVL197:
 1908 0128 0493     		str	r3, [sp, #16]
 1909 012a 4FF0420B 		mov	fp, #66
 1910 012e 40F28F1A 		movw	r10, #399
 1911 0132 4423     		movs	r3, #68
 1912 0134 40F29112 		movw	r2, #401
 1913 0138 6FF4C679 		mvn	r9, #396
 880:dm/dm42_fns.cc ****   uint const py = is_graphics ? 4 : 2;
 1914              		.loc 1 880 0
 1915 013c 0326     		movs	r6, #3
 881:dm/dm42_fns.cc ****   uint const x_shft = is_graphics ? 0 : 1;
 1916              		.loc 1 881 0
 1917 013e 0691     		str	r1, [sp, #24]
 1918 0140 76E7     		b	.L194
 1919              	.L217:
 1920 0142 00BF     		.align	2
 1921              	.L216:
 1922 0144 00000000 		.word	.LANCHOR10
 1923 0148 3D020008 		.word	134218301
 1924 014c 29020008 		.word	134218281
 1925              		.cfi_endproc
 1926              	.LFE237:
 1928              		.section	.text._Z22shell_get_accelerationPdS_S_,"ax",%progbits
 1929              		.align	1
 1930              		.p2align 2,,3
 1931              		.global	_Z22shell_get_accelerationPdS_S_
 1932              		.syntax unified
 1933              		.thumb
 1934              		.thumb_func
 1935              		.fpu fpv4-sp-d16
 1937              	_Z22shell_get_accelerationPdS_S_:
 1938              	.LFB238:
 955:dm/dm42_fns.cc ****   DBGSHELL("shell_get_acceleration\n");
 1939              		.loc 1 955 0
 1940              		.cfi_startproc
 1941              		@ args = 0, pretend = 0, frame = 0
 1942              		@ frame_needed = 0, uses_anonymous_args = 0
 1943              		@ link register save eliminated.
 1944              	.LVL198:
 958:dm/dm42_fns.cc **** int shell_get_location(double*, double*, double*, double*, double*) {
 1945              		.loc 1 958 0
 1946 0000 0020     		movs	r0, #0
 1947              	.LVL199:
 1948 0002 7047     		bx	lr
 1949              		.cfi_endproc
 1950              	.LFE238:
ARM GAS  /tmp/ccGYckNR.s 			page 88


 1952              		.section	.text._Z18shell_get_locationPdS_S_S_S_,"ax",%progbits
 1953              		.align	1
 1954              		.p2align 2,,3
 1955              		.global	_Z18shell_get_locationPdS_S_S_S_
 1956              		.syntax unified
 1957              		.thumb
 1958              		.thumb_func
 1959              		.fpu fpv4-sp-d16
 1961              	_Z18shell_get_locationPdS_S_S_S_:
 1962              	.LFB239:
 959:dm/dm42_fns.cc ****   DBGSHELL("shell_get_location\n");
 1963              		.loc 1 959 0
 1964              		.cfi_startproc
 1965              		@ args = 4, pretend = 0, frame = 0
 1966              		@ frame_needed = 0, uses_anonymous_args = 0
 1967              		@ link register save eliminated.
 962:dm/dm42_fns.cc **** int shell_get_heading(double*, double*, double*, double*, double*, double*) {
 1968              		.loc 1 962 0
 1969 0000 0020     		movs	r0, #0
 1970 0002 7047     		bx	lr
 1971              		.cfi_endproc
 1972              	.LFE239:
 1974              		.section	.text._Z17shell_get_headingPdS_S_S_S_S_,"ax",%progbits
 1975              		.align	1
 1976              		.p2align 2,,3
 1977              		.global	_Z17shell_get_headingPdS_S_S_S_S_
 1978              		.syntax unified
 1979              		.thumb
 1980              		.thumb_func
 1981              		.fpu fpv4-sp-d16
 1983              	_Z17shell_get_headingPdS_S_S_S_S_:
 1984              	.LFB240:
 963:dm/dm42_fns.cc ****   DBGSHELL("shell_get_heading\n");
 1985              		.loc 1 963 0
 1986              		.cfi_startproc
 1987              		@ args = 8, pretend = 0, frame = 0
 1988              		@ frame_needed = 0, uses_anonymous_args = 0
 1989              		@ link register save eliminated.
 966:dm/dm42_fns.cc **** // -----
 1990              		.loc 1 966 0
 1991 0000 0020     		movs	r0, #0
 1992 0002 7047     		bx	lr
 1993              		.cfi_endproc
 1994              	.LFE240:
 1996              		.section	.text._Z17shell_malloc_failjPKci,"ax",%progbits
 1997              		.align	1
 1998              		.p2align 2,,3
 1999              		.global	_Z17shell_malloc_failjPKci
 2000              		.syntax unified
 2001              		.thumb
 2002              		.thumb_func
 2003              		.fpu fpv4-sp-d16
 2005              	_Z17shell_malloc_failjPKci:
 2006              	.LFB242:
1098:dm/dm42_fns.cc ****   char * fn = (char*)file;
 2007              		.loc 1 1098 0
 2008              		.cfi_startproc
ARM GAS  /tmp/ccGYckNR.s 			page 89


 2009              		@ args = 0, pretend = 0, frame = 0
 2010              		@ frame_needed = 0, uses_anonymous_args = 0
 2011              	.LVL200:
 2012 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2013              		.cfi_def_cfa_offset 32
 2014              		.cfi_offset 4, -32
 2015              		.cfi_offset 5, -28
 2016              		.cfi_offset 6, -24
 2017              		.cfi_offset 7, -20
 2018              		.cfi_offset 8, -16
 2019              		.cfi_offset 9, -12
 2020              		.cfi_offset 10, -8
 2021              		.cfi_offset 14, -4
1098:dm/dm42_fns.cc ****   char * fn = (char*)file;
 2022              		.loc 1 1098 0
 2023 0004 0746     		mov	r7, r0
1100:dm/dm42_fns.cc **** 
 2024              		.loc 1 1100 0
 2025 0006 0846     		mov	r0, r1
 2026              	.LVL201:
1098:dm/dm42_fns.cc ****   char * fn = (char*)file;
 2027              		.loc 1 1098 0
 2028 0008 0C46     		mov	r4, r1
 2029              	.LVL202:
 2030 000a 9046     		mov	r8, r2
1100:dm/dm42_fns.cc **** 
 2031              		.loc 1 1100 0
 2032 000c FFF7FEFF 		bl	strlen
 2033              	.LVL203:
1102:dm/dm42_fns.cc ****   t20->y = lcd_for_dm42(DISP_ALLOC_FAIL);
 2034              		.loc 1 1102 0
 2035 0010 1C4E     		ldr	r6, .L225
 2036 0012 1D4B     		ldr	r3, .L225+4
1100:dm/dm42_fns.cc **** 
 2037              		.loc 1 1100 0
 2038 0014 0546     		mov	r5, r0
 2039              	.LVL204:
1102:dm/dm42_fns.cc ****   t20->y = lcd_for_dm42(DISP_ALLOC_FAIL);
 2040              		.loc 1 1102 0
 2041 0016 306B     		ldr	r0, [r6, #48]
 2042              	.LVL205:
 2043 0018 9847     		blx	r3
 2044              	.LVL206:
1103:dm/dm42_fns.cc ****   t20->y += 18;
 2045              		.loc 1 1103 0
 2046 001a 6720     		movs	r0, #103
 2047 001c D6F83090 		ldr	r9, [r6, #48]
 2048 0020 FFF7FEFF 		bl	lcd_for_dm42
 2049              	.LVL207:
1104:dm/dm42_fns.cc ****   if ( flen > 40 ) fn += flen-40;
 2050              		.loc 1 1104 0
 2051 0024 336B     		ldr	r3, [r6, #48]
1103:dm/dm42_fns.cc ****   t20->y += 18;
 2052              		.loc 1 1103 0
 2053 0026 A9F80600 		strh	r0, [r9, #6]	@ movhi
1105:dm/dm42_fns.cc **** 
 2054              		.loc 1 1105 0
ARM GAS  /tmp/ccGYckNR.s 			page 90


 2055 002a 282D     		cmp	r5, #40
1104:dm/dm42_fns.cc ****   if ( flen > 40 ) fn += flen-40;
 2056              		.loc 1 1104 0
 2057 002c DA88     		ldrh	r2, [r3, #6]
1107:dm/dm42_fns.cc ****   lcd_puts(t20, fn);
 2058              		.loc 1 1107 0
 2059 002e 174E     		ldr	r6, .L225+8
 2060 0030 1749     		ldr	r1, .L225+12
1109:dm/dm42_fns.cc ****   lcd_print(t20,"size %i",size);
 2061              		.loc 1 1109 0
 2062 0032 DFF88090 		ldr	r9, .L225+48
1105:dm/dm42_fns.cc **** 
 2063              		.loc 1 1105 0
 2064 0036 C6BF     		itte	gt
 2065 0038 283D     		subgt	r5, r5, #40
 2066              	.LVL208:
 2067 003a 2D19     		addgt	r5, r5, r4
 2068              	.LVL209:
 2069 003c 2546     		movle	r5, r4
 2070              	.LVL210:
1104:dm/dm42_fns.cc ****   if ( flen > 40 ) fn += flen-40;
 2071              		.loc 1 1104 0
 2072 003e 1232     		adds	r2, r2, #18
1108:dm/dm42_fns.cc ****   lcd_print(t20,"at line %i", line);
 2073              		.loc 1 1108 0
 2074 0040 104C     		ldr	r4, .L225
 2075              	.LVL211:
1104:dm/dm42_fns.cc ****   if ( flen > 40 ) fn += flen-40;
 2076              		.loc 1 1104 0
 2077 0042 DA80     		strh	r2, [r3, #6]	@ movhi
1107:dm/dm42_fns.cc ****   lcd_puts(t20, fn);
 2078              		.loc 1 1107 0
 2079 0044 1846     		mov	r0, r3
 2080 0046 B047     		blx	r6
 2081              	.LVL212:
1108:dm/dm42_fns.cc ****   lcd_print(t20,"at line %i", line);
 2082              		.loc 1 1108 0
 2083 0048 2946     		mov	r1, r5
 2084 004a 206B     		ldr	r0, [r4, #48]
 2085 004c B047     		blx	r6
 2086              	.LVL213:
1109:dm/dm42_fns.cc ****   lcd_print(t20,"size %i",size);
 2087              		.loc 1 1109 0
 2088 004e 4246     		mov	r2, r8
 2089 0050 206B     		ldr	r0, [r4, #48]
 2090 0052 1049     		ldr	r1, .L225+16
 2091 0054 C847     		blx	r9
 2092              	.LVL214:
1110:dm/dm42_fns.cc ****   t20->y = LCD_Y-lcd_lineHeight(t20);
 2093              		.loc 1 1110 0
 2094 0056 3A46     		mov	r2, r7
 2095 0058 206B     		ldr	r0, [r4, #48]
 2096 005a 0F49     		ldr	r1, .L225+20
 2097 005c C847     		blx	r9
 2098              	.LVL215:
1111:dm/dm42_fns.cc ****   lcd_puts(t20,"Press EXIT to RESET the calculator...");
 2099              		.loc 1 1111 0
ARM GAS  /tmp/ccGYckNR.s 			page 91


 2100 005e 256B     		ldr	r5, [r4, #48]
 2101              	.LVL216:
 2102 0060 0E4B     		ldr	r3, .L225+24
 2103 0062 2846     		mov	r0, r5
 2104 0064 9847     		blx	r3
 2105              	.LVL217:
 2106 0066 C0F1F000 		rsb	r0, r0, #240
 2107 006a E880     		strh	r0, [r5, #6]	@ movhi
1112:dm/dm42_fns.cc ****   lcd_refresh();
 2108              		.loc 1 1112 0
 2109 006c 0C49     		ldr	r1, .L225+28
 2110 006e 206B     		ldr	r0, [r4, #48]
 2111 0070 B047     		blx	r6
 2112              	.LVL218:
1113:dm/dm42_fns.cc ****   set_reset_magic(ALLOC_FAIL_MAGIC);
 2113              		.loc 1 1113 0
 2114 0072 0C4B     		ldr	r3, .L225+32
 2115 0074 9847     		blx	r3
 2116              	.LVL219:
1114:dm/dm42_fns.cc ****   sys_reset();
 2117              		.loc 1 1114 0
 2118 0076 0C4B     		ldr	r3, .L225+36
 2119 0078 0C48     		ldr	r0, .L225+40
 2120 007a 9847     		blx	r3
 2121              	.LVL220:
1115:dm/dm42_fns.cc **** }
 2122              		.loc 1 1115 0
 2123 007c 0C4B     		ldr	r3, .L225+44
1116:dm/dm42_fns.cc **** 
 2124              		.loc 1 1116 0
 2125 007e BDE8F047 		pop	{r4, r5, r6, r7, r8, r9, r10, lr}
 2126              		.cfi_restore 14
 2127              		.cfi_restore 10
 2128              		.cfi_restore 9
 2129              		.cfi_restore 8
 2130              		.cfi_restore 7
 2131              		.cfi_restore 6
 2132              		.cfi_restore 5
 2133              		.cfi_restore 4
 2134              		.cfi_def_cfa_offset 0
 2135              	.LVL221:
1115:dm/dm42_fns.cc **** }
 2136              		.loc 1 1115 0
 2137 0082 1847     		bx	r3	@ indirect register sibling call
 2138              	.LVL222:
 2139              	.L226:
 2140              		.align	2
 2141              	.L225:
 2142 0084 00200010 		.word	268443648
 2143 0088 5D020008 		.word	134218333
 2144 008c 7D020008 		.word	134218365
 2145 0090 00000000 		.word	.LC78
 2146 0094 28000000 		.word	.LC79
 2147 0098 34000000 		.word	.LC80
 2148 009c 71020008 		.word	134218353
 2149 00a0 3C000000 		.word	.LC81
 2150 00a4 31020008 		.word	134218289
ARM GAS  /tmp/ccGYckNR.s 			page 92


 2151 00a8 11030008 		.word	134218513
 2152 00ac E7AC3E36 		.word	910077159
 2153 00b0 21040008 		.word	134218785
 2154 00b4 B1020008 		.word	134218417
 2155              		.cfi_endproc
 2156              	.LFE242:
 2158              		.section	.text._Z17shell_low_batteryv,"ax",%progbits
 2159              		.align	1
 2160              		.p2align 2,,3
 2161              		.global	_Z17shell_low_batteryv
 2162              		.syntax unified
 2163              		.thumb
 2164              		.thumb_func
 2165              		.fpu fpv4-sp-d16
 2167              	_Z17shell_low_batteryv:
 2168              	.LFB243:
1119:dm/dm42_fns.cc ****   bool lowbat = get_lowbat_state();
 2169              		.loc 1 1119 0
 2170              		.cfi_startproc
 2171              		@ args = 0, pretend = 0, frame = 0
 2172              		@ frame_needed = 0, uses_anonymous_args = 0
 2173 0000 10B5     		push	{r4, lr}
 2174              		.cfi_def_cfa_offset 8
 2175              		.cfi_offset 4, -8
 2176              		.cfi_offset 14, -4
1120:dm/dm42_fns.cc ****   DBGSHELL("shell_low_battery\n");
 2177              		.loc 1 1120 0
 2178 0002 104B     		ldr	r3, .L236
 2179 0004 9847     		blx	r3
 2180              	.LVL223:
1123:dm/dm42_fns.cc ****     SETBY_ANN(lowbat,ANN_BATTERY);
 2181              		.loc 1 1123 0
 2182 0006 104A     		ldr	r2, .L236+4
 2183 0008 1368     		ldr	r3, [r2]
1120:dm/dm42_fns.cc ****   DBGSHELL("shell_low_battery\n");
 2184              		.loc 1 1120 0
 2185 000a 041C     		adds	r4, r0, #0
1123:dm/dm42_fns.cc ****     SETBY_ANN(lowbat,ANN_BATTERY);
 2186              		.loc 1 1123 0
 2187 000c 83F01003 		eor	r3, r3, #16
 2188 0010 C3F30013 		ubfx	r3, r3, #4, #1
1120:dm/dm42_fns.cc ****   DBGSHELL("shell_low_battery\n");
 2189              		.loc 1 1120 0
 2190 0014 18BF     		it	ne
 2191 0016 0124     		movne	r4, #1
1123:dm/dm42_fns.cc ****     SETBY_ANN(lowbat,ANN_BATTERY);
 2192              		.loc 1 1123 0
 2193 0018 9C42     		cmp	r4, r3
 2194 001a 01D0     		beq	.L234
 2195              	.L227:
1128:dm/dm42_fns.cc **** 
 2196              		.loc 1 1128 0
 2197 001c 2046     		mov	r0, r4
 2198 001e 10BD     		pop	{r4, pc}
 2199              	.L234:
1124:dm/dm42_fns.cc ****     skin_repaint_annunciator(0, 0); // Always repaint all
 2200              		.loc 1 1124 0
ARM GAS  /tmp/ccGYckNR.s 			page 93


 2201 0020 1368     		ldr	r3, [r2]
 2202 0022 50B9     		cbnz	r0, .L235
1124:dm/dm42_fns.cc ****     skin_repaint_annunciator(0, 0); // Always repaint all
 2203              		.loc 1 1124 0 is_stmt 0 discriminator 2
 2204 0024 23F01003 		bic	r3, r3, #16
 2205 0028 1360     		str	r3, [r2]
 2206              	.L231:
 2207              	.LVL224:
 2208              	.LBB326:
 2209              	.LBB327:
 2210              	.LBB328:
 2211              	.LBB329:
 2212              	.LBB330:
 770:dm/dm42_fns.cc **** 
 2213              		.loc 1 770 0 is_stmt 1
 2214 002a 084B     		ldr	r3, .L236+8
 2215 002c 1B68     		ldr	r3, [r3]
 2216 002e 5B06     		lsls	r3, r3, #25
 2217 0030 F4D4     		bmi	.L227
 2218              	.LBE330:
 2219              	.LBE329:
 2220 0032 FFF7FEFF 		bl	skin_repaint_annunciator.part.1
 2221              	.LVL225:
 2222              	.LBE328:
 2223              	.LBE327:
 2224              	.LBE326:
1128:dm/dm42_fns.cc **** 
 2225              		.loc 1 1128 0
 2226 0036 2046     		mov	r0, r4
 2227 0038 10BD     		pop	{r4, pc}
 2228              	.LVL226:
 2229              	.L235:
1124:dm/dm42_fns.cc ****     skin_repaint_annunciator(0, 0); // Always repaint all
 2230              		.loc 1 1124 0 discriminator 1
 2231 003a 43F01003 		orr	r3, r3, #16
 2232 003e 1360     		str	r3, [r2]
 2233 0040 F3E7     		b	.L231
 2234              	.L237:
 2235 0042 00BF     		.align	2
 2236              	.L236:
 2237 0044 ED020008 		.word	134218477
 2238 0048 00000000 		.word	.LANCHOR0
 2239 004c 00200010 		.word	268443648
 2240              		.cfi_endproc
 2241              	.LFE243:
 2243              		.global	__aeabi_i2d
 2244              		.global	__aeabi_ddiv
 2245              		.section	.text._Z10shell_vbatv,"ax",%progbits
 2246              		.align	1
 2247              		.p2align 2,,3
 2248              		.global	_Z10shell_vbatv
 2249              		.syntax unified
 2250              		.thumb
 2251              		.thumb_func
 2252              		.fpu fpv4-sp-d16
 2254              	_Z10shell_vbatv:
 2255              	.LFB244:
ARM GAS  /tmp/ccGYckNR.s 			page 94


1130:dm/dm42_fns.cc ****   double d = get_vbat();
 2256              		.loc 1 1130 0
 2257              		.cfi_startproc
 2258              		@ args = 0, pretend = 0, frame = 0
 2259              		@ frame_needed = 0, uses_anonymous_args = 0
 2260 0000 08B5     		push	{r3, lr}
 2261              		.cfi_def_cfa_offset 8
 2262              		.cfi_offset 3, -8
 2263              		.cfi_offset 14, -4
1131:dm/dm42_fns.cc ****   return d/1000;
 2264              		.loc 1 1131 0
 2265 0002 054B     		ldr	r3, .L240
 2266 0004 9847     		blx	r3
 2267              	.LVL227:
 2268 0006 FFF7FEFF 		bl	__aeabi_i2d
 2269              	.LVL228:
1132:dm/dm42_fns.cc **** }
 2270              		.loc 1 1132 0
 2271 000a 0022     		movs	r2, #0
 2272 000c 034B     		ldr	r3, .L240+4
 2273 000e FFF7FEFF 		bl	__aeabi_ddiv
 2274              	.LVL229:
1133:dm/dm42_fns.cc **** 
 2275              		.loc 1 1133 0
 2276 0012 41EC100B 		vmov	d0, r0, r1
 2277 0016 08BD     		pop	{r3, pc}
 2278              	.L241:
 2279              		.align	2
 2280              	.L240:
 2281 0018 F1020008 		.word	134218481
 2282 001c 00408F40 		.word	1083129856
 2283              		.cfi_endproc
 2284              	.LFE244:
 2286              		.section	.text._Z12shell_dev_idv,"ax",%progbits
 2287              		.align	1
 2288              		.p2align 2,,3
 2289              		.global	_Z12shell_dev_idv
 2290              		.syntax unified
 2291              		.thumb
 2292              		.thumb_func
 2293              		.fpu fpv4-sp-d16
 2295              	_Z12shell_dev_idv:
 2296              	.LFB245:
1135:dm/dm42_fns.cc ****   return get_hw_id();
 2297              		.loc 1 1135 0
 2298              		.cfi_startproc
 2299              		@ args = 0, pretend = 0, frame = 0
 2300              		@ frame_needed = 0, uses_anonymous_args = 0
 2301 0000 08B5     		push	{r3, lr}
 2302              		.cfi_def_cfa_offset 8
 2303              		.cfi_offset 3, -8
 2304              		.cfi_offset 14, -4
1136:dm/dm42_fns.cc **** }
 2305              		.loc 1 1136 0
 2306 0002 014B     		ldr	r3, .L244
 2307 0004 9847     		blx	r3
 2308              	.LVL230:
ARM GAS  /tmp/ccGYckNR.s 			page 95


1137:dm/dm42_fns.cc **** 
 2309              		.loc 1 1137 0
 2310 0006 08BD     		pop	{r3, pc}
 2311              	.L245:
 2312              		.align	2
 2313              	.L244:
 2314 0008 C9020008 		.word	134218441
 2315              		.cfi_endproc
 2316              	.LFE245:
 2318              		.section	.text._Z17shell_random_seedv,"ax",%progbits
 2319              		.align	1
 2320              		.p2align 2,,3
 2321              		.global	_Z17shell_random_seedv
 2322              		.syntax unified
 2323              		.thumb
 2324              		.thumb_func
 2325              		.fpu fpv4-sp-d16
 2327              	_Z17shell_random_seedv:
 2328              	.LFB246:
1154:dm/dm42_fns.cc ****   DBGSHELL("shell_random_seed\n");
 2329              		.loc 1 1154 0
 2330              		.cfi_startproc
 2331              		@ args = 0, pretend = 0, frame = 16
 2332              		@ frame_needed = 0, uses_anonymous_args = 0
 2333 0000 30B5     		push	{r4, r5, lr}
 2334              		.cfi_def_cfa_offset 12
 2335              		.cfi_offset 4, -12
 2336              		.cfi_offset 5, -8
 2337              		.cfi_offset 14, -4
 2338 0002 85B0     		sub	sp, sp, #20
 2339              		.cfi_def_cfa_offset 32
1158:dm/dm42_fns.cc ****   int64_t z = ((tm.hour*60+tm.min)*60+tm.sec)*100+tm.csec;
 2340              		.loc 1 1158 0
 2341 0004 01A9     		add	r1, sp, #4
 2342 0006 02A8     		add	r0, sp, #8
 2343 0008 0E4B     		ldr	r3, .L248
 2344 000a 9847     		blx	r3
 2345              	.LVL231:
1159:dm/dm42_fns.cc ****   z = z*11574074 + julian_day(&dt);
 2346              		.loc 1 1159 0
 2347 000c 9DF80800 		ldrb	r0, [sp, #8]	@ zero_extendqisi2
 2348 0010 9DF80930 		ldrb	r3, [sp, #9]	@ zero_extendqisi2
 2349 0014 9DF80A40 		ldrb	r4, [sp, #10]	@ zero_extendqisi2
 2350 0018 9DF80B50 		ldrb	r5, [sp, #11]	@ zero_extendqisi2
1160:dm/dm42_fns.cc ****   return z;
 2351              		.loc 1 1160 0
 2352 001c 0A49     		ldr	r1, .L248+4
1159:dm/dm42_fns.cc ****   z = z*11574074 + julian_day(&dt);
 2353              		.loc 1 1159 0
 2354 001e 3C22     		movs	r2, #60
 2355 0020 12FB0033 		smlabb	r3, r2, r0, r3
 2356 0024 C3EB0313 		rsb	r3, r3, r3, lsl #4
 2357 0028 04EB8303 		add	r3, r4, r3, lsl #2
1160:dm/dm42_fns.cc ****   return z;
 2358              		.loc 1 1160 0
 2359 002c 01A8     		add	r0, sp, #4
1159:dm/dm42_fns.cc ****   z = z*11574074 + julian_day(&dt);
ARM GAS  /tmp/ccGYckNR.s 			page 96


 2360              		.loc 1 1159 0
 2361 002e 6424     		movs	r4, #100
 2362 0030 04FB0354 		mla	r4, r4, r3, r5
 2363              	.LVL232:
1160:dm/dm42_fns.cc ****   return z;
 2364              		.loc 1 1160 0
 2365 0034 8847     		blx	r1
 2366              	.LVL233:
 2367 0036 054B     		ldr	r3, .L248+8
 2368 0038 C117     		asrs	r1, r0, #31
1162:dm/dm42_fns.cc **** 
 2369              		.loc 1 1162 0
 2370 003a C3FB0401 		smlal	r0, r1, r3, r4
 2371              	.LVL234:
 2372 003e 05B0     		add	sp, sp, #20
 2373              		.cfi_def_cfa_offset 12
 2374              		@ sp needed
 2375 0040 30BD     		pop	{r4, r5, pc}
 2376              	.L249:
 2377 0042 00BF     		.align	2
 2378              	.L248:
 2379 0044 CD020008 		.word	134218445
 2380 0048 C1020008 		.word	134218433
 2381 004c 3A9BB000 		.word	11574074
 2382              		.cfi_endproc
 2383              	.LFE246:
 2385              		.section	.text._Z19shell_decimal_pointv,"ax",%progbits
 2386              		.align	1
 2387              		.p2align 2,,3
 2388              		.global	_Z19shell_decimal_pointv
 2389              		.syntax unified
 2390              		.thumb
 2391              		.thumb_func
 2392              		.fpu fpv4-sp-d16
 2394              	_Z19shell_decimal_pointv:
 2395              	.LFB247:
1168:dm/dm42_fns.cc ****   return decimal_point ? 1 : 0;
 2396              		.loc 1 1168 0
 2397              		.cfi_startproc
 2398              		@ args = 0, pretend = 0, frame = 0
 2399              		@ frame_needed = 0, uses_anonymous_args = 0
 2400              		@ link register save eliminated.
1169:dm/dm42_fns.cc **** }
 2401              		.loc 1 1169 0
 2402 0000 024B     		ldr	r3, .L251
 2403 0002 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
1170:dm/dm42_fns.cc **** 
 2404              		.loc 1 1170 0
 2405 0004 0030     		adds	r0, r0, #0
 2406 0006 18BF     		it	ne
 2407 0008 0120     		movne	r0, #1
 2408 000a 7047     		bx	lr
 2409              	.L252:
 2410              		.align	2
 2411              	.L251:
 2412 000c 00000000 		.word	.LANCHOR13
 2413              		.cfi_endproc
ARM GAS  /tmp/ccGYckNR.s 			page 97


 2414              	.LFE247:
 2416              		.section	.text._Z19shell_get_time_datePjS_Pi,"ax",%progbits
 2417              		.align	1
 2418              		.p2align 2,,3
 2419              		.global	_Z19shell_get_time_datePjS_Pi
 2420              		.syntax unified
 2421              		.thumb
 2422              		.thumb_func
 2423              		.fpu fpv4-sp-d16
 2425              	_Z19shell_get_time_datePjS_Pi:
 2426              	.LFB249:
1190:dm/dm42_fns.cc **** #ifndef DBG_NOLCD
 2427              		.loc 1 1190 0
 2428              		.cfi_startproc
 2429              		@ args = 0, pretend = 0, frame = 16
 2430              		@ frame_needed = 0, uses_anonymous_args = 0
 2431              	.LVL235:
 2432 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 2433              		.cfi_def_cfa_offset 20
 2434              		.cfi_offset 4, -20
 2435              		.cfi_offset 5, -16
 2436              		.cfi_offset 6, -12
 2437              		.cfi_offset 7, -8
 2438              		.cfi_offset 14, -4
 2439 0002 85B0     		sub	sp, sp, #20
 2440              		.cfi_def_cfa_offset 40
1190:dm/dm42_fns.cc **** #ifndef DBG_NOLCD
 2441              		.loc 1 1190 0
 2442 0004 0646     		mov	r6, r0
 2443 0006 0C46     		mov	r4, r1
1198:dm/dm42_fns.cc ****   if(tim)
 2444              		.loc 1 1198 0
 2445 0008 184B     		ldr	r3, .L269
 2446 000a 01A9     		add	r1, sp, #4
 2447              	.LVL236:
 2448 000c 02A8     		add	r0, sp, #8
 2449              	.LVL237:
1190:dm/dm42_fns.cc **** #ifndef DBG_NOLCD
 2450              		.loc 1 1190 0
 2451 000e 1546     		mov	r5, r2
1198:dm/dm42_fns.cc ****   if(tim)
 2452              		.loc 1 1198 0
 2453 0010 9847     		blx	r3
 2454              	.LVL238:
1199:dm/dm42_fns.cc ****     *tim  = ((tm.hour*100 + tm.min)*100 + tm.sec)*100 + tm.csec; // 12345600;
 2455              		.loc 1 1199 0
 2456 0012 7EB1     		cbz	r6, .L254
1200:dm/dm42_fns.cc ****   if(date)
 2457              		.loc 1 1200 0
 2458 0014 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 2459 0018 9DF80970 		ldrb	r7, [sp, #9]	@ zero_extendqisi2
 2460 001c 9DF80A00 		ldrb	r0, [sp, #10]	@ zero_extendqisi2
 2461 0020 9DF80B10 		ldrb	r1, [sp, #11]	@ zero_extendqisi2
 2462 0024 6422     		movs	r2, #100
 2463 0026 12FB0373 		smlabb	r3, r2, r3, r7
 2464 002a 02FB0303 		mla	r3, r2, r3, r0
 2465 002e 02FB0313 		mla	r3, r2, r3, r1
ARM GAS  /tmp/ccGYckNR.s 			page 98


 2466 0032 3360     		str	r3, [r6]
 2467              	.L254:
1201:dm/dm42_fns.cc ****     *date = dt.year*10000 + dt.month*100 + dt.day; // 20160103;
 2468              		.loc 1 1201 0
 2469 0034 84B1     		cbz	r4, .L255
1202:dm/dm42_fns.cc ****   if(weekday)
 2470              		.loc 1 1202 0
 2471 0036 9DF80630 		ldrb	r3, [sp, #6]	@ zero_extendqisi2
 2472 003a BDF80420 		ldrh	r2, [sp, #4]
 2473 003e 9DF80710 		ldrb	r1, [sp, #7]	@ zero_extendqisi2
 2474 0042 03EB8303 		add	r3, r3, r3, lsl #2
 2475 0046 03EB8303 		add	r3, r3, r3, lsl #2
 2476 004a 9B00     		lsls	r3, r3, #2
 2477 004c 42F21070 		movw	r0, #10000
 2478 0050 00FB0233 		mla	r3, r0, r2, r3
 2479 0054 0B44     		add	r3, r3, r1
 2480 0056 2360     		str	r3, [r4]
 2481              	.L255:
1203:dm/dm42_fns.cc ****     *weekday = tm.dow==6 ? 0 : tm.dow+1; // Free42 0-Sun,1-Mon ... Our lib 0-Mon, 1-Tue
 2482              		.loc 1 1203 0
 2483 0058 35B1     		cbz	r5, .L253
1204:dm/dm42_fns.cc **** }
 2484              		.loc 1 1204 0
 2485 005a 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 2486 005e 062B     		cmp	r3, #6
 2487 0060 14BF     		ite	ne
 2488 0062 0133     		addne	r3, r3, #1
 2489 0064 0023     		moveq	r3, #0
 2490 0066 2B60     		str	r3, [r5]
 2491              	.L253:
1205:dm/dm42_fns.cc **** 
 2492              		.loc 1 1205 0
 2493 0068 05B0     		add	sp, sp, #20
 2494              		.cfi_def_cfa_offset 20
 2495              		@ sp needed
 2496 006a F0BD     		pop	{r4, r5, r6, r7, pc}
 2497              	.LVL239:
 2498              	.L270:
 2499              		.align	2
 2500              	.L269:
 2501 006c CD020008 		.word	134218445
 2502              		.cfi_endproc
 2503              	.LFE249:
 2505              		.section	.text._Z13shell_blitterPKciiiii,"ax",%progbits
 2506              		.align	1
 2507              		.p2align 2,,3
 2508              		.global	_Z13shell_blitterPKciiiii
 2509              		.syntax unified
 2510              		.thumb
 2511              		.thumb_func
 2512              		.fpu fpv4-sp-d16
 2514              	_Z13shell_blitterPKciiiii:
 2515              	.LFB250:
1210:dm/dm42_fns.cc **** #ifndef DBG_NOLCD  
 2516              		.loc 1 1210 0
 2517              		.cfi_startproc
 2518              		@ args = 8, pretend = 0, frame = 0
ARM GAS  /tmp/ccGYckNR.s 			page 99


 2519              		@ frame_needed = 0, uses_anonymous_args = 0
 2520              		@ link register save eliminated.
 2521              	.LVL240:
1216:dm/dm42_fns.cc **** 
 2522              		.loc 1 1216 0
 2523 0000 054A     		ldr	r2, .L274
 2524              	.LVL241:
 2525              	.LBB331:
 2526              	.LBB332:
2654:dm/dm42_fns.cc ****     last_lcd_update_ms = sys_current_ms();
 2527              		.loc 1 2654 0
 2528 0002 0649     		ldr	r1, .L274+4
 2529              	.LVL242:
 2530              	.LBE332:
 2531              	.LBE331:
1216:dm/dm42_fns.cc **** 
 2532              		.loc 1 1216 0
 2533 0004 1368     		ldr	r3, [r2]
 2534              	.LVL243:
 2535              	.LBB335:
 2536              	.LBB333:
2654:dm/dm42_fns.cc ****     last_lcd_update_ms = sys_current_ms();
 2537              		.loc 1 2654 0
 2538 0006 0968     		ldr	r1, [r1]
 2539              	.LBE333:
 2540              	.LBE335:
1216:dm/dm42_fns.cc **** 
 2541              		.loc 1 1216 0
 2542 0008 43F00303 		orr	r3, r3, #3
 2543 000c 1360     		str	r3, [r2]
 2544              	.LBB336:
 2545              	.LBB334:
2654:dm/dm42_fns.cc ****     last_lcd_update_ms = sys_current_ms();
 2546              		.loc 1 2654 0
 2547 000e 01B1     		cbz	r1, .L273
 2548 0010 7047     		bx	lr
 2549              	.L273:
 2550 0012 FFF7FEBF 		b	set_lcd_update_timeout.part.10
 2551              	.LVL244:
 2552              	.L275:
 2553 0016 00BF     		.align	2
 2554              	.L274:
 2555 0018 00000000 		.word	.LANCHOR7
 2556 001c 00000000 		.word	.LANCHOR9
 2557              	.LBE334:
 2558              	.LBE336:
 2559              		.cfi_endproc
 2560              	.LFE250:
 2562              		.section	.text.skin_repaint_annunciator,"ax",%progbits
 2563              		.align	1
 2564              		.p2align 2,,3
 2565              		.global	skin_repaint_annunciator
 2566              		.syntax unified
 2567              		.thumb
 2568              		.thumb_func
 2569              		.fpu fpv4-sp-d16
 2571              	skin_repaint_annunciator:
ARM GAS  /tmp/ccGYckNR.s 			page 100


 2572              	.LFB251:
1230:dm/dm42_fns.cc **** #ifndef DBG_NOLCD
 2573              		.loc 1 1230 0
 2574              		.cfi_startproc
 2575              		@ args = 0, pretend = 0, frame = 0
 2576              		@ frame_needed = 0, uses_anonymous_args = 0
 2577              		@ link register save eliminated.
 2578              	.LVL245:
 2579              	.LBB337:
 2580              	.LBB338:
 770:dm/dm42_fns.cc **** 
 2581              		.loc 1 770 0
 2582 0000 034B     		ldr	r3, .L278
 2583 0002 1B68     		ldr	r3, [r3]
 2584 0004 5B06     		lsls	r3, r3, #25
 2585 0006 01D4     		bmi	.L276
 2586              	.LBE338:
 2587              	.LBE337:
 2588 0008 FFF7FEBF 		b	skin_repaint_annunciator.part.1
 2589              	.LVL246:
 2590              	.L276:
 2591 000c 7047     		bx	lr
 2592              	.L279:
 2593 000e 00BF     		.align	2
 2594              	.L278:
 2595 0010 00200010 		.word	268443648
 2596              		.cfi_endproc
 2597              	.LFE251:
 2599              		.section	.text._Z18shell_annunciatorsiiiiii,"ax",%progbits
 2600              		.align	1
 2601              		.p2align 2,,3
 2602              		.global	_Z18shell_annunciatorsiiiiii
 2603              		.syntax unified
 2604              		.thumb
 2605              		.thumb_func
 2606              		.fpu fpv4-sp-d16
 2608              	_Z18shell_annunciatorsiiiiii:
 2609              	.LFB252:
1241:dm/dm42_fns.cc ****   DBGSHELL("shell_annunciators\n");
 2610              		.loc 1 1241 0
 2611              		.cfi_startproc
 2612              		@ args = 8, pretend = 0, frame = 0
 2613              		@ frame_needed = 0, uses_anonymous_args = 0
 2614              		@ link register save eliminated.
 2615              	.LVL247:
 2616 0000 F0B4     		push	{r4, r5, r6, r7}
 2617              		.cfi_def_cfa_offset 16
 2618              		.cfi_offset 4, -16
 2619              		.cfi_offset 5, -12
 2620              		.cfi_offset 6, -8
 2621              		.cfi_offset 7, -4
1243:dm/dm42_fns.cc ****       SETBY_ANN(updn,ANN_UPDOWN);
 2622              		.loc 1 1243 0
 2623 0002 461C     		adds	r6, r0, #1
1241:dm/dm42_fns.cc ****   DBGSHELL("shell_annunciators\n");
 2624              		.loc 1 1241 0
 2625 0004 049D     		ldr	r5, [sp, #16]
ARM GAS  /tmp/ccGYckNR.s 			page 101


 2626 0006 059C     		ldr	r4, [sp, #20]
1243:dm/dm42_fns.cc ****       SETBY_ANN(updn,ANN_UPDOWN);
 2627              		.loc 1 1243 0
 2628 0008 06D0     		beq	.L281
1243:dm/dm42_fns.cc ****       SETBY_ANN(updn,ANN_UPDOWN);
 2629              		.loc 1 1243 0 is_stmt 0 discriminator 1
 2630 000a 444F     		ldr	r7, .L356
 2631 000c 3E68     		ldr	r6, [r7]
 2632 000e F643     		mvns	r6, r6
 2633 0010 06F00106 		and	r6, r6, #1
 2634 0014 B042     		cmp	r0, r6
 2635 0016 4BD0     		beq	.L343
 2636              	.LVL248:
 2637              	.L281:
1247:dm/dm42_fns.cc ****       SETBY_ANN(shf,ANN_SHIFT);
 2638              		.loc 1 1247 0 is_stmt 1
 2639 0018 4F1C     		adds	r7, r1, #1
 2640 001a 07D0     		beq	.L283
1247:dm/dm42_fns.cc ****       SETBY_ANN(shf,ANN_SHIFT);
 2641              		.loc 1 1247 0 is_stmt 0 discriminator 1
 2642 001c 3F4E     		ldr	r6, .L356
 2643 001e 3068     		ldr	r0, [r6]
 2644 0020 80F00200 		eor	r0, r0, #2
 2645 0024 C0F34000 		ubfx	r0, r0, #1, #1
 2646 0028 8142     		cmp	r1, r0
 2647 002a 47D0     		beq	.L344
 2648              	.LVL249:
 2649              	.L283:
1251:dm/dm42_fns.cc ****       SETBY_ANN(prt,ANN_PRINT);
 2650              		.loc 1 1251 0 is_stmt 1
 2651 002c 561C     		adds	r6, r2, #1
 2652 002e 07D0     		beq	.L285
1251:dm/dm42_fns.cc ****       SETBY_ANN(prt,ANN_PRINT);
 2653              		.loc 1 1251 0 is_stmt 0 discriminator 1
 2654 0030 3A48     		ldr	r0, .L356
 2655 0032 0168     		ldr	r1, [r0]
 2656 0034 81F00401 		eor	r1, r1, #4
 2657 0038 C1F38001 		ubfx	r1, r1, #2, #1
 2658 003c 8A42     		cmp	r2, r1
 2659 003e 43D0     		beq	.L345
 2660              	.LVL250:
 2661              	.L285:
1255:dm/dm42_fns.cc ****       SETBY_ANN(run,ANN_RUN);
 2662              		.loc 1 1255 0 is_stmt 1
 2663 0040 581C     		adds	r0, r3, #1
 2664 0042 07D0     		beq	.L287
1255:dm/dm42_fns.cc ****       SETBY_ANN(run,ANN_RUN);
 2665              		.loc 1 1255 0 is_stmt 0 discriminator 1
 2666 0044 3549     		ldr	r1, .L356
 2667 0046 0A68     		ldr	r2, [r1]
 2668 0048 82F00802 		eor	r2, r2, #8
 2669 004c C2F3C002 		ubfx	r2, r2, #3, #1
 2670 0050 9342     		cmp	r3, r2
 2671 0052 3FD0     		beq	.L346
 2672              	.LVL251:
 2673              	.L287:
1259:dm/dm42_fns.cc ****       SETBY_ANN(g,ANN_G);
ARM GAS  /tmp/ccGYckNR.s 			page 102


 2674              		.loc 1 1259 0 is_stmt 1
 2675 0054 691C     		adds	r1, r5, #1
 2676 0056 07D0     		beq	.L289
1259:dm/dm42_fns.cc ****       SETBY_ANN(g,ANN_G);
 2677              		.loc 1 1259 0 is_stmt 0 discriminator 1
 2678 0058 304A     		ldr	r2, .L356
 2679 005a 1368     		ldr	r3, [r2]
 2680 005c 83F02003 		eor	r3, r3, #32
 2681 0060 C3F34013 		ubfx	r3, r3, #5, #1
 2682 0064 9D42     		cmp	r5, r3
 2683 0066 0FD0     		beq	.L347
 2684              	.L289:
1263:dm/dm42_fns.cc ****       SETBY_ANN(rad,ANN_RAD);
 2685              		.loc 1 1263 0 is_stmt 1
 2686 0068 621C     		adds	r2, r4, #1
 2687 006a 07D0     		beq	.L291
1263:dm/dm42_fns.cc ****       SETBY_ANN(rad,ANN_RAD);
 2688              		.loc 1 1263 0 is_stmt 0 discriminator 1
 2689 006c 2B4A     		ldr	r2, .L356
 2690 006e 1368     		ldr	r3, [r2]
 2691 0070 83F04003 		eor	r3, r3, #64
 2692 0074 C3F38013 		ubfx	r3, r3, #6, #1
 2693 0078 9C42     		cmp	r4, r3
 2694 007a 0CD0     		beq	.L348
 2695              	.L291:
 2696              	.LVL252:
 2697              	.LBB339:
 2698              	.LBB340:
 2699              	.LBB341:
 2700              	.LBB342:
 770:dm/dm42_fns.cc **** 
 2701              		.loc 1 770 0 is_stmt 1
 2702 007c 284B     		ldr	r3, .L356+4
 2703 007e 1B68     		ldr	r3, [r3]
 2704 0080 5B06     		lsls	r3, r3, #25
 2705 0082 12D5     		bpl	.L349
 2706              	.L280:
 2707              	.LBE342:
 2708              	.LBE341:
 2709              	.LBE340:
 2710              	.LBE339:
1282:dm/dm42_fns.cc **** 
 2711              		.loc 1 1282 0
 2712 0084 F0BC     		pop	{r4, r5, r6, r7}
 2713              		.cfi_remember_state
 2714              		.cfi_restore 7
 2715              		.cfi_restore 6
 2716              		.cfi_restore 5
 2717              		.cfi_restore 4
 2718              		.cfi_def_cfa_offset 0
 2719              	.LVL253:
 2720 0086 7047     		bx	lr
 2721              	.LVL254:
 2722              	.L347:
 2723              		.cfi_restore_state
1260:dm/dm42_fns.cc ****       //skin_repaint_annunciator(6, ann_g);
 2724              		.loc 1 1260 0
ARM GAS  /tmp/ccGYckNR.s 			page 103


 2725 0088 002D     		cmp	r5, #0
 2726 008a 42D0     		beq	.L350
1260:dm/dm42_fns.cc ****       //skin_repaint_annunciator(6, ann_g);
 2727              		.loc 1 1260 0 is_stmt 0 discriminator 1
 2728 008c 1368     		ldr	r3, [r2]
 2729 008e 43F02003 		orr	r3, r3, #32
 2730 0092 1360     		str	r3, [r2]
 2731 0094 E8E7     		b	.L289
 2732              	.L348:
1264:dm/dm42_fns.cc ****       //skin_repaint_annunciator(7, ann_rad);
 2733              		.loc 1 1264 0 is_stmt 1
 2734 0096 002C     		cmp	r4, #0
 2735 0098 36D0     		beq	.L351
1264:dm/dm42_fns.cc ****       //skin_repaint_annunciator(7, ann_rad);
 2736              		.loc 1 1264 0 is_stmt 0 discriminator 1
 2737 009a 1368     		ldr	r3, [r2]
 2738 009c 43F04003 		orr	r3, r3, #64
 2739 00a0 1360     		str	r3, [r2]
 2740              	.LVL255:
 2741              	.LBB347:
 2742              	.LBB345:
 2743              	.LBB344:
 2744              	.LBB343:
 770:dm/dm42_fns.cc **** 
 2745              		.loc 1 770 0 is_stmt 1 discriminator 1
 2746 00a2 1F4B     		ldr	r3, .L356+4
 2747 00a4 1B68     		ldr	r3, [r3]
 2748 00a6 5B06     		lsls	r3, r3, #25
 2749 00a8 ECD4     		bmi	.L280
 2750              	.L349:
 2751              	.LBE343:
 2752              	.LBE344:
 2753              	.LBE345:
 2754              	.LBE347:
1282:dm/dm42_fns.cc **** 
 2755              		.loc 1 1282 0
 2756 00aa F0BC     		pop	{r4, r5, r6, r7}
 2757              		.cfi_remember_state
 2758              		.cfi_restore 7
 2759              		.cfi_restore 6
 2760              		.cfi_restore 5
 2761              		.cfi_restore 4
 2762              		.cfi_def_cfa_offset 0
 2763              	.LVL256:
 2764              	.LBB348:
 2765              	.LBB346:
 2766 00ac FFF7FEBF 		b	skin_repaint_annunciator.part.1
 2767              	.LVL257:
 2768              	.L343:
 2769              		.cfi_restore_state
 2770              	.LBE346:
 2771              	.LBE348:
1244:dm/dm42_fns.cc ****       //skin_repaint_annunciator(1, ann_updown);
 2772              		.loc 1 1244 0
 2773 00b0 28B3     		cbz	r0, .L352
1244:dm/dm42_fns.cc ****       //skin_repaint_annunciator(1, ann_updown);
 2774              		.loc 1 1244 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccGYckNR.s 			page 104


 2775 00b2 3868     		ldr	r0, [r7]
 2776              	.LVL258:
 2777 00b4 40F00100 		orr	r0, r0, #1
 2778 00b8 3860     		str	r0, [r7]
 2779 00ba ADE7     		b	.L281
 2780              	.L344:
1248:dm/dm42_fns.cc ****       //skin_repaint_annunciator(2, ann_shift);
 2781              		.loc 1 1248 0 is_stmt 1
 2782 00bc D1B1     		cbz	r1, .L353
1248:dm/dm42_fns.cc ****       //skin_repaint_annunciator(2, ann_shift);
 2783              		.loc 1 1248 0 is_stmt 0 discriminator 1
 2784 00be 3168     		ldr	r1, [r6]
 2785              	.LVL259:
 2786 00c0 41F00201 		orr	r1, r1, #2
 2787 00c4 3160     		str	r1, [r6]
 2788 00c6 B1E7     		b	.L283
 2789              	.L345:
1252:dm/dm42_fns.cc ****       //skin_repaint_annunciator(3, ann_print);
 2790              		.loc 1 1252 0 is_stmt 1
 2791 00c8 7AB1     		cbz	r2, .L354
1252:dm/dm42_fns.cc ****       //skin_repaint_annunciator(3, ann_print);
 2792              		.loc 1 1252 0 is_stmt 0 discriminator 1
 2793 00ca 0268     		ldr	r2, [r0]
 2794              	.LVL260:
 2795 00cc 42F00402 		orr	r2, r2, #4
 2796 00d0 0260     		str	r2, [r0]
 2797 00d2 B5E7     		b	.L285
 2798              	.L346:
1256:dm/dm42_fns.cc ****       //skin_repaint_annunciator(4, ann_run);
 2799              		.loc 1 1256 0 is_stmt 1
 2800 00d4 23B1     		cbz	r3, .L355
1256:dm/dm42_fns.cc ****       //skin_repaint_annunciator(4, ann_run);
 2801              		.loc 1 1256 0 is_stmt 0 discriminator 1
 2802 00d6 0B68     		ldr	r3, [r1]
 2803              	.LVL261:
 2804 00d8 43F00803 		orr	r3, r3, #8
 2805 00dc 0B60     		str	r3, [r1]
 2806 00de B9E7     		b	.L287
 2807              	.LVL262:
 2808              	.L355:
1256:dm/dm42_fns.cc ****       //skin_repaint_annunciator(4, ann_run);
 2809              		.loc 1 1256 0 discriminator 2
 2810 00e0 0B68     		ldr	r3, [r1]
 2811              	.LVL263:
 2812 00e2 23F00803 		bic	r3, r3, #8
 2813 00e6 0B60     		str	r3, [r1]
 2814 00e8 B4E7     		b	.L287
 2815              	.LVL264:
 2816              	.L354:
1252:dm/dm42_fns.cc ****       //skin_repaint_annunciator(3, ann_print);
 2817              		.loc 1 1252 0 is_stmt 1 discriminator 2
 2818 00ea 0268     		ldr	r2, [r0]
 2819              	.LVL265:
 2820 00ec 22F00402 		bic	r2, r2, #4
 2821 00f0 0260     		str	r2, [r0]
 2822 00f2 A5E7     		b	.L285
 2823              	.LVL266:
ARM GAS  /tmp/ccGYckNR.s 			page 105


 2824              	.L353:
1248:dm/dm42_fns.cc ****       //skin_repaint_annunciator(2, ann_shift);
 2825              		.loc 1 1248 0 discriminator 2
 2826 00f4 3168     		ldr	r1, [r6]
 2827              	.LVL267:
 2828 00f6 21F00201 		bic	r1, r1, #2
 2829 00fa 3160     		str	r1, [r6]
 2830 00fc 96E7     		b	.L283
 2831              	.LVL268:
 2832              	.L352:
1244:dm/dm42_fns.cc ****       //skin_repaint_annunciator(1, ann_updown);
 2833              		.loc 1 1244 0 discriminator 2
 2834 00fe 3868     		ldr	r0, [r7]
 2835              	.LVL269:
 2836 0100 20F00100 		bic	r0, r0, #1
 2837 0104 3860     		str	r0, [r7]
 2838 0106 87E7     		b	.L281
 2839              	.LVL270:
 2840              	.L351:
1264:dm/dm42_fns.cc ****       //skin_repaint_annunciator(7, ann_rad);
 2841              		.loc 1 1264 0 discriminator 2
 2842 0108 1368     		ldr	r3, [r2]
 2843 010a 23F04003 		bic	r3, r3, #64
 2844 010e 1360     		str	r3, [r2]
 2845 0110 B4E7     		b	.L291
 2846              	.L350:
1260:dm/dm42_fns.cc ****       //skin_repaint_annunciator(6, ann_g);
 2847              		.loc 1 1260 0 discriminator 2
 2848 0112 1368     		ldr	r3, [r2]
 2849 0114 23F02003 		bic	r3, r3, #32
 2850 0118 1360     		str	r3, [r2]
 2851 011a A5E7     		b	.L289
 2852              	.L357:
 2853              		.align	2
 2854              	.L356:
 2855 011c 00000000 		.word	.LANCHOR0
 2856 0120 00200010 		.word	268443648
 2857              		.cfi_endproc
 2858              	.LFE252:
 2860              		.section	.text._Z10shell_readPci,"ax",%progbits
 2861              		.align	1
 2862              		.p2align 2,,3
 2863              		.global	_Z10shell_readPci
 2864              		.syntax unified
 2865              		.thumb
 2866              		.thumb_func
 2867              		.fpu fpv4-sp-d16
 2869              	_Z10shell_readPci:
 2870              	.LFB254:
1299:dm/dm42_fns.cc ****   DBGSHELL("shell_read: %08x : %i\n", (unsigned)buf, buflen);
 2871              		.loc 1 1299 0
 2872              		.cfi_startproc
 2873              		@ args = 0, pretend = 0, frame = 8
 2874              		@ frame_needed = 0, uses_anonymous_args = 0
 2875              	.LVL271:
 2876 0000 30B5     		push	{r4, r5, lr}
 2877              		.cfi_def_cfa_offset 12
ARM GAS  /tmp/ccGYckNR.s 			page 106


 2878              		.cfi_offset 4, -12
 2879              		.cfi_offset 5, -8
 2880              		.cfi_offset 14, -4
1302:dm/dm42_fns.cc ****   DBGSHELL(" ... read %i  err=%i\n",rd,pgm_res);
 2881              		.loc 1 1302 0
 2882 0002 064D     		ldr	r5, .L360
 2883 0004 064C     		ldr	r4, .L360+4
1299:dm/dm42_fns.cc ****   DBGSHELL("shell_read: %08x : %i\n", (unsigned)buf, buflen);
 2884              		.loc 1 1299 0
 2885 0006 83B0     		sub	sp, sp, #12
 2886              		.cfi_def_cfa_offset 24
1302:dm/dm42_fns.cc ****   DBGSHELL(" ... read %i  err=%i\n",rd,pgm_res);
 2887              		.loc 1 1302 0
 2888 0008 0A46     		mov	r2, r1
 2889 000a 01AB     		add	r3, sp, #4
 2890 000c 0146     		mov	r1, r0
 2891              	.LVL272:
 2892 000e 6868     		ldr	r0, [r5, #4]
 2893              	.LVL273:
 2894 0010 A047     		blx	r4
 2895              	.LVL274:
 2896 0012 044B     		ldr	r3, .L360+8
 2897 0014 1870     		strb	r0, [r3]
1305:dm/dm42_fns.cc **** 
 2898              		.loc 1 1305 0
 2899 0016 0198     		ldr	r0, [sp, #4]
 2900 0018 03B0     		add	sp, sp, #12
 2901              		.cfi_def_cfa_offset 12
 2902              		@ sp needed
 2903 001a 30BD     		pop	{r4, r5, pc}
 2904              	.L361:
 2905              		.align	2
 2906              	.L360:
 2907 001c 00200010 		.word	268443648
 2908 0020 3D040008 		.word	134218813
 2909 0024 00000000 		.word	.LANCHOR14
 2910              		.cfi_endproc
 2911              	.LFE254:
 2913              		.section	.text._Z11shell_writePKci,"ax",%progbits
 2914              		.align	1
 2915              		.p2align 2,,3
 2916              		.global	_Z11shell_writePKci
 2917              		.syntax unified
 2918              		.thumb
 2919              		.thumb_func
 2920              		.fpu fpv4-sp-d16
 2922              	_Z11shell_writePKci:
 2923              	.LFB255:
1308:dm/dm42_fns.cc ****   DBGSHELL("shell_read: %08x : %i\n", (unsigned)buf, buflen);
 2924              		.loc 1 1308 0
 2925              		.cfi_startproc
 2926              		@ args = 0, pretend = 0, frame = 8
 2927              		@ frame_needed = 0, uses_anonymous_args = 0
 2928              	.LVL275:
 2929 0000 30B5     		push	{r4, r5, lr}
 2930              		.cfi_def_cfa_offset 12
 2931              		.cfi_offset 4, -12
ARM GAS  /tmp/ccGYckNR.s 			page 107


 2932              		.cfi_offset 5, -8
 2933              		.cfi_offset 14, -4
1311:dm/dm42_fns.cc ****   DBGSHELL(" ... write %i  err=%i\n",wr,pgm_res);
 2934              		.loc 1 1311 0
 2935 0002 064D     		ldr	r5, .L364
 2936 0004 064C     		ldr	r4, .L364+4
1308:dm/dm42_fns.cc ****   DBGSHELL("shell_read: %08x : %i\n", (unsigned)buf, buflen);
 2937              		.loc 1 1308 0
 2938 0006 83B0     		sub	sp, sp, #12
 2939              		.cfi_def_cfa_offset 24
1311:dm/dm42_fns.cc ****   DBGSHELL(" ... write %i  err=%i\n",wr,pgm_res);
 2940              		.loc 1 1311 0
 2941 0008 0A46     		mov	r2, r1
 2942 000a 01AB     		add	r3, sp, #4
 2943 000c 0146     		mov	r1, r0
 2944              	.LVL276:
 2945 000e 6868     		ldr	r0, [r5, #4]
 2946              	.LVL277:
 2947 0010 A047     		blx	r4
 2948              	.LVL278:
 2949 0012 044B     		ldr	r3, .L364+8
 2950 0014 1870     		strb	r0, [r3]
1314:dm/dm42_fns.cc **** 
 2951              		.loc 1 1314 0
 2952 0016 0198     		ldr	r0, [sp, #4]
 2953 0018 03B0     		add	sp, sp, #12
 2954              		.cfi_def_cfa_offset 12
 2955              		@ sp needed
 2956 001a 30BD     		pop	{r4, r5, pc}
 2957              	.L365:
 2958              		.align	2
 2959              	.L364:
 2960 001c 00200010 		.word	268443648
 2961 0020 41040008 		.word	134218817
 2962 0024 00000000 		.word	.LANCHOR14
 2963              		.cfi_endproc
 2964              	.LFE255:
 2966              		.section	.text._Z13shell_get_memv,"ax",%progbits
 2967              		.align	1
 2968              		.p2align 2,,3
 2969              		.global	_Z13shell_get_memv
 2970              		.syntax unified
 2971              		.thumb
 2972              		.thumb_func
 2973              		.fpu fpv4-sp-d16
 2975              	_Z13shell_get_memv:
 2976              	.LFB256:
1317:dm/dm42_fns.cc ****   DBGSHELL("shell_get_mem: %i\n", sys_free_mem());
 2977              		.loc 1 1317 0
 2978              		.cfi_startproc
 2979              		@ args = 0, pretend = 0, frame = 0
 2980              		@ frame_needed = 0, uses_anonymous_args = 0
 2981              		@ link register save eliminated.
1319:dm/dm42_fns.cc **** }
 2982              		.loc 1 1319 0
 2983 0000 004B     		ldr	r3, .L367
 2984 0002 1847     		bx	r3
ARM GAS  /tmp/ccGYckNR.s 			page 108


 2985              	.LVL279:
 2986              	.L368:
 2987              		.align	2
 2988              	.L367:
 2989 0004 1D040008 		.word	134218781
 2990              		.cfi_endproc
 2991              	.LFE256:
 2993              		.section	.text._Z18shell_millisecondsv,"ax",%progbits
 2994              		.align	1
 2995              		.p2align 2,,3
 2996              		.global	_Z18shell_millisecondsv
 2997              		.syntax unified
 2998              		.thumb
 2999              		.thumb_func
 3000              		.fpu fpv4-sp-d16
 3002              	_Z18shell_millisecondsv:
 3003              	.LFB257:
1322:dm/dm42_fns.cc ****   //DBGSHELL("shell_milliseconds %i  aoff=%li\n", sys_current_ms(), auto_off_cnt);
 3004              		.loc 1 1322 0
 3005              		.cfi_startproc
 3006              		@ args = 0, pretend = 0, frame = 0
 3007              		@ frame_needed = 0, uses_anonymous_args = 0
 3008 0000 10B5     		push	{r4, lr}
 3009              		.cfi_def_cfa_offset 8
 3010              		.cfi_offset 4, -8
 3011              		.cfi_offset 14, -4
1324:dm/dm42_fns.cc ****   return sys_current_ms();
 3012              		.loc 1 1324 0
 3013 0002 034B     		ldr	r3, .L371
 3014 0004 9847     		blx	r3
 3015              	.LVL280:
1325:dm/dm42_fns.cc **** }
 3016              		.loc 1 1325 0
 3017 0006 034B     		ldr	r3, .L371+4
1326:dm/dm42_fns.cc **** 
 3018              		.loc 1 1326 0
 3019 0008 BDE81040 		pop	{r4, lr}
 3020              		.cfi_restore 14
 3021              		.cfi_restore 4
 3022              		.cfi_def_cfa_offset 0
1325:dm/dm42_fns.cc **** }
 3023              		.loc 1 1325 0
 3024 000c 1847     		bx	r3
 3025              	.LVL281:
 3026              	.L372:
 3027 000e 00BF     		.align	2
 3028              	.L371:
 3029 0010 B9030008 		.word	134218681
 3030 0014 0D040008 		.word	134218765
 3031              		.cfi_endproc
 3032              	.LFE257:
 3034              		.section	.text._Z11shell_delayi,"ax",%progbits
 3035              		.align	1
 3036              		.p2align 2,,3
 3037              		.global	_Z11shell_delayi
 3038              		.syntax unified
 3039              		.thumb
ARM GAS  /tmp/ccGYckNR.s 			page 109


 3040              		.thumb_func
 3041              		.fpu fpv4-sp-d16
 3043              	_Z11shell_delayi:
 3044              	.LFB259:
1333:dm/dm42_fns.cc ****   DBGSHELL("shell_delay: %i\n", duration);
 3045              		.loc 1 1333 0
 3046              		.cfi_startproc
 3047              		@ args = 0, pretend = 0, frame = 0
 3048              		@ frame_needed = 0, uses_anonymous_args = 0
 3049              		@ link register save eliminated.
 3050              	.LVL282:
1335:dm/dm42_fns.cc ****   DBGSHELL("shell_delay end\n");
 3051              		.loc 1 1335 0
 3052 0000 004B     		ldr	r3, .L374
 3053 0002 1847     		bx	r3	@ indirect register sibling call
 3054              	.LVL283:
 3055              	.L375:
 3056              		.align	2
 3057              	.L374:
 3058 0004 05040008 		.word	134218757
 3059              		.cfi_endproc
 3060              	.LFE259:
 3062              		.section	.text._Z15shell_powerdownv,"ax",%progbits
 3063              		.align	1
 3064              		.p2align 2,,3
 3065              		.global	_Z15shell_powerdownv
 3066              		.syntax unified
 3067              		.thumb
 3068              		.thumb_func
 3069              		.fpu fpv4-sp-d16
 3071              	_Z15shell_powerdownv:
 3072              	.LFB260:
1339:dm/dm42_fns.cc ****   DBGSHELL("shell_powerdown\n");
 3073              		.loc 1 1339 0
 3074              		.cfi_startproc
 3075              		@ args = 0, pretend = 0, frame = 0
 3076              		@ frame_needed = 0, uses_anonymous_args = 0
 3077              		@ link register save eliminated.
1341:dm/dm42_fns.cc **** }
 3078              		.loc 1 1341 0
 3079 0000 024A     		ldr	r2, .L377
 3080 0002 1368     		ldr	r3, [r2]
 3081 0004 43F40073 		orr	r3, r3, #512
 3082 0008 1360     		str	r3, [r2]
 3083 000a 7047     		bx	lr
 3084              	.L378:
 3085              		.align	2
 3086              	.L377:
 3087 000c 00200010 		.word	268443648
 3088              		.cfi_endproc
 3089              	.LFE260:
 3091              		.section	.text._Z22shell_read_saved_statePvi,"ax",%progbits
 3092              		.align	1
 3093              		.p2align 2,,3
 3094              		.global	_Z22shell_read_saved_statePvi
 3095              		.syntax unified
 3096              		.thumb
ARM GAS  /tmp/ccGYckNR.s 			page 110


 3097              		.thumb_func
 3098              		.fpu fpv4-sp-d16
 3100              	_Z22shell_read_saved_statePvi:
 3101              	.LFB261:
1350:dm/dm42_fns.cc ****   DBGSHELL_STATE_RW("shell_read_saved_state: %08x : %i  from %08lx\n", (unsigned)buf, buflen, (uint
 3102              		.loc 1 1350 0
 3103              		.cfi_startproc
 3104              		@ args = 0, pretend = 0, frame = 8
 3105              		@ frame_needed = 0, uses_anonymous_args = 0
 3106              	.LVL284:
 3107 0000 30B5     		push	{r4, r5, lr}
 3108              		.cfi_def_cfa_offset 12
 3109              		.cfi_offset 4, -12
 3110              		.cfi_offset 5, -8
 3111              		.cfi_offset 14, -4
1359:dm/dm42_fns.cc ****   DBGSHELL(" ... read %i  err=%i\n",rd,pgm_res);
 3112              		.loc 1 1359 0
 3113 0002 064D     		ldr	r5, .L381
 3114 0004 064C     		ldr	r4, .L381+4
1350:dm/dm42_fns.cc ****   DBGSHELL_STATE_RW("shell_read_saved_state: %08x : %i  from %08lx\n", (unsigned)buf, buflen, (uint
 3115              		.loc 1 1350 0
 3116 0006 83B0     		sub	sp, sp, #12
 3117              		.cfi_def_cfa_offset 24
1359:dm/dm42_fns.cc ****   DBGSHELL(" ... read %i  err=%i\n",rd,pgm_res);
 3118              		.loc 1 1359 0
 3119 0008 0A46     		mov	r2, r1
 3120 000a 01AB     		add	r3, sp, #4
 3121 000c 0146     		mov	r1, r0
 3122              	.LVL285:
 3123 000e 6868     		ldr	r0, [r5, #4]
 3124              	.LVL286:
 3125 0010 A047     		blx	r4
 3126              	.LVL287:
 3127 0012 044B     		ldr	r3, .L381+8
 3128 0014 1870     		strb	r0, [r3]
1362:dm/dm42_fns.cc **** 
 3129              		.loc 1 1362 0
 3130 0016 0198     		ldr	r0, [sp, #4]
 3131 0018 03B0     		add	sp, sp, #12
 3132              		.cfi_def_cfa_offset 12
 3133              		@ sp needed
 3134 001a 30BD     		pop	{r4, r5, pc}
 3135              	.L382:
 3136              		.align	2
 3137              	.L381:
 3138 001c 00200010 		.word	268443648
 3139 0020 3D040008 		.word	134218813
 3140 0024 00000000 		.word	.LANCHOR14
 3141              		.cfi_endproc
 3142              	.LFE261:
 3144              		.section	.text._Z23shell_write_saved_statePKvi,"ax",%progbits
 3145              		.align	1
 3146              		.p2align 2,,3
 3147              		.global	_Z23shell_write_saved_statePKvi
 3148              		.syntax unified
 3149              		.thumb
 3150              		.thumb_func
ARM GAS  /tmp/ccGYckNR.s 			page 111


 3151              		.fpu fpv4-sp-d16
 3153              	_Z23shell_write_saved_statePKvi:
 3154              	.LFB262:
1364:dm/dm42_fns.cc ****   DBGSHELL_STATE_RW("shell_write_saved_state: %08x : %i  to %08lx\n", (unsigned)buf, buflen,(uint32
 3155              		.loc 1 1364 0
 3156              		.cfi_startproc
 3157              		@ args = 0, pretend = 0, frame = 8
 3158              		@ frame_needed = 0, uses_anonymous_args = 0
 3159              	.LVL288:
1367:dm/dm42_fns.cc **** 
 3160              		.loc 1 1367 0
 3161 0000 0A4B     		ldr	r3, .L391
 3162 0002 1A68     		ldr	r2, [r3]
 3163 0004 9206     		lsls	r2, r2, #26
 3164 0006 01D5     		bpl	.L390
 3165 0008 0120     		movs	r0, #1
 3166              	.LVL289:
 3167 000a 7047     		bx	lr
 3168              	.LVL290:
 3169              	.L390:
1364:dm/dm42_fns.cc ****   DBGSHELL_STATE_RW("shell_write_saved_state: %08x : %i  to %08lx\n", (unsigned)buf, buflen,(uint32
 3170              		.loc 1 1364 0
 3171 000c 10B5     		push	{r4, lr}
 3172              		.cfi_def_cfa_offset 8
 3173              		.cfi_offset 4, -8
 3174              		.cfi_offset 14, -4
 3175 000e 82B0     		sub	sp, sp, #8
 3176              		.cfi_def_cfa_offset 16
 3177 0010 0A46     		mov	r2, r1
1370:dm/dm42_fns.cc ****   DBGSHELL(" ... write %i  err=%i\n",wr,pgm_res);
 3178              		.loc 1 1370 0
 3179 0012 074C     		ldr	r4, .L391+4
 3180 0014 0146     		mov	r1, r0
 3181              	.LVL291:
 3182 0016 5868     		ldr	r0, [r3, #4]
 3183              	.LVL292:
 3184 0018 01AB     		add	r3, sp, #4
 3185 001a A047     		blx	r4
 3186              	.LVL293:
 3187 001c 054A     		ldr	r2, .L391+8
 3188 001e 0346     		mov	r3, r0
1372:dm/dm42_fns.cc **** }
 3189              		.loc 1 1372 0
 3190 0020 B0FA80F0 		clz	r0, r0
 3191 0024 4009     		lsrs	r0, r0, #5
1370:dm/dm42_fns.cc ****   DBGSHELL(" ... write %i  err=%i\n",wr,pgm_res);
 3192              		.loc 1 1370 0
 3193 0026 1370     		strb	r3, [r2]
1373:dm/dm42_fns.cc **** 
 3194              		.loc 1 1373 0
 3195 0028 02B0     		add	sp, sp, #8
 3196              		.cfi_def_cfa_offset 8
 3197              		@ sp needed
 3198 002a 10BD     		pop	{r4, pc}
 3199              	.L392:
 3200              		.align	2
 3201              	.L391:
ARM GAS  /tmp/ccGYckNR.s 			page 112


 3202 002c 00200010 		.word	268443648
 3203 0030 41040008 		.word	134218817
 3204 0034 00000000 		.word	.LANCHOR14
 3205              		.cfi_endproc
 3206              	.LFE262:
 3208              		.section	.text.clear_tlcd_row,"ax",%progbits
 3209              		.align	1
 3210              		.p2align 2,,3
 3211              		.global	clear_tlcd_row
 3212              		.syntax unified
 3213              		.thumb
 3214              		.thumb_func
 3215              		.fpu fpv4-sp-d16
 3217              	clear_tlcd_row:
 3218              	.LFB264:
1404:dm/dm42_fns.cc ****   assert_param(row>=0 && row<2);
 3219              		.loc 1 1404 0
 3220              		.cfi_startproc
 3221              		@ args = 0, pretend = 0, frame = 0
 3222              		@ frame_needed = 0, uses_anonymous_args = 0
 3223              	.LVL294:
 3224 0000 38B5     		push	{r3, r4, r5, lr}
 3225              		.cfi_def_cfa_offset 16
 3226              		.cfi_offset 3, -16
 3227              		.cfi_offset 4, -12
 3228              		.cfi_offset 5, -8
 3229              		.cfi_offset 14, -4
1408:dm/dm42_fns.cc ****     // Was HiRes -> repaint header
 3230              		.loc 1 1408 0
 3231 0002 104A     		ldr	r2, .L397
1406:dm/dm42_fns.cc ****   tlcd[row][TLCD_LINELEN] = 0;
 3232              		.loc 1 1406 0
 3233 0004 1049     		ldr	r1, .L397+4
1408:dm/dm42_fns.cc ****     // Was HiRes -> repaint header
 3234              		.loc 1 1408 0
 3235 0006 1478     		ldrb	r4, [r2]	@ zero_extendqisi2
1406:dm/dm42_fns.cc ****   tlcd[row][TLCD_LINELEN] = 0;
 3236              		.loc 1 1406 0
 3237 0008 00EB4003 		add	r3, r0, r0, lsl #1
 3238 000c C0EBC300 		rsb	r0, r0, r3, lsl #3
 3239              	.LVL295:
 3240 0010 0B18     		adds	r3, r1, r0
 3241 0012 4FF02032 		mov	r2, #538976288
1407:dm/dm42_fns.cc ****   if(is_graphics>1) {
 3242              		.loc 1 1407 0
 3243 0016 0025     		movs	r5, #0
1408:dm/dm42_fns.cc ****     // Was HiRes -> repaint header
 3244              		.loc 1 1408 0
 3245 0018 012C     		cmp	r4, #1
1406:dm/dm42_fns.cc ****   tlcd[row][TLCD_LINELEN] = 0;
 3246              		.loc 1 1406 0
 3247 001a 0A50     		str	r2, [r1, r0]	@ unaligned
 3248 001c 5A60     		str	r2, [r3, #4]	@ unaligned
 3249 001e 9A60     		str	r2, [r3, #8]	@ unaligned
 3250 0020 DA60     		str	r2, [r3, #12]	@ unaligned
 3251 0022 1A61     		str	r2, [r3, #16]	@ unaligned
 3252 0024 9A82     		strh	r2, [r3, #20]	@ unaligned
ARM GAS  /tmp/ccGYckNR.s 			page 113


1407:dm/dm42_fns.cc ****   if(is_graphics>1) {
 3253              		.loc 1 1407 0
 3254 0026 9D75     		strb	r5, [r3, #22]
1408:dm/dm42_fns.cc ****     // Was HiRes -> repaint header
 3255              		.loc 1 1408 0
 3256 0028 01DD     		ble	.L394
1410:dm/dm42_fns.cc ****   }
 3257              		.loc 1 1410 0
 3258 002a 084B     		ldr	r3, .L397+8
 3259 002c 9847     		blx	r3
 3260              	.LVL296:
 3261              	.L394:
1413:dm/dm42_fns.cc ****     is_show = 0;
 3262              		.loc 1 1413 0
 3263 002e FFF7FEFF 		bl	is_number_entry
 3264              	.LVL297:
 3265 0032 28B9     		cbnz	r0, .L393
 3266              	.LVL298:
 3267              	.LBB351:
 3268              	.LBB352:
1414:dm/dm42_fns.cc ****     is_edit = is_edit_x = 0;
 3269              		.loc 1 1414 0
 3270 0034 0649     		ldr	r1, .L397+12
1415:dm/dm42_fns.cc ****   }
 3271              		.loc 1 1415 0
 3272 0036 074A     		ldr	r2, .L397+16
 3273 0038 074B     		ldr	r3, .L397+20
1414:dm/dm42_fns.cc ****     is_edit = is_edit_x = 0;
 3274              		.loc 1 1414 0
 3275 003a 0870     		strb	r0, [r1]
1415:dm/dm42_fns.cc ****   }
 3276              		.loc 1 1415 0
 3277 003c 1070     		strb	r0, [r2]
 3278 003e 1870     		strb	r0, [r3]
 3279              	.LVL299:
 3280              	.L393:
 3281 0040 38BD     		pop	{r3, r4, r5, pc}
 3282              	.L398:
 3283 0042 00BF     		.align	2
 3284              	.L397:
 3285 0044 00000000 		.word	.LANCHOR10
 3286 0048 00000000 		.word	.LANCHOR15
 3287 004c 2D020008 		.word	134218285
 3288 0050 00000000 		.word	.LANCHOR16
 3289 0054 00000000 		.word	.LANCHOR17
 3290 0058 00000000 		.word	.LANCHOR18
 3291              	.LBE352:
 3292              	.LBE351:
 3293              		.cfi_endproc
 3294              	.LFE264:
 3296              		.section	.text.tlcd_row_empty,"ax",%progbits
 3297              		.align	1
 3298              		.p2align 2,,3
 3299              		.global	tlcd_row_empty
 3300              		.syntax unified
 3301              		.thumb
 3302              		.thumb_func
ARM GAS  /tmp/ccGYckNR.s 			page 114


 3303              		.fpu fpv4-sp-d16
 3305              	tlcd_row_empty:
 3306              	.LFB265:
1420:dm/dm42_fns.cc ****   int x = 0;
 3307              		.loc 1 1420 0
 3308              		.cfi_startproc
 3309              		@ args = 0, pretend = 0, frame = 0
 3310              		@ frame_needed = 0, uses_anonymous_args = 0
 3311              		@ link register save eliminated.
 3312              	.LVL300:
 3313 0000 00EB4003 		add	r3, r0, r0, lsl #1
 3314 0004 C0EBC300 		rsb	r0, r0, r3, lsl #3
 3315              	.LVL301:
 3316 0008 074B     		ldr	r3, .L406
 3317 000a 00F11602 		add	r2, r0, #22
 3318 000e 1A44     		add	r2, r2, r3
 3319 0010 1844     		add	r0, r0, r3
 3320 0012 01E0     		b	.L401
 3321              	.LVL302:
 3322              	.L405:
1423:dm/dm42_fns.cc ****   }
 3323              		.loc 1 1423 0
 3324 0014 9042     		cmp	r0, r2
 3325 0016 05D0     		beq	.L404
 3326              	.LVL303:
 3327              	.L401:
1422:dm/dm42_fns.cc ****     if (x == LCD_HP_CHARS) return 1;
 3328              		.loc 1 1422 0
 3329 0018 10F8013B 		ldrb	r3, [r0], #1	@ zero_extendqisi2
 3330              	.LVL304:
 3331 001c 202B     		cmp	r3, #32
 3332 001e F9D0     		beq	.L405
1425:dm/dm42_fns.cc **** }
 3333              		.loc 1 1425 0
 3334 0020 0020     		movs	r0, #0
 3335              	.LVL305:
1426:dm/dm42_fns.cc **** 
 3336              		.loc 1 1426 0
 3337 0022 7047     		bx	lr
 3338              	.LVL306:
 3339              	.L404:
1423:dm/dm42_fns.cc ****   }
 3340              		.loc 1 1423 0
 3341 0024 0120     		movs	r0, #1
 3342              	.LVL307:
 3343 0026 7047     		bx	lr
 3344              	.L407:
 3345              		.align	2
 3346              	.L406:
 3347 0028 00000000 		.word	.LANCHOR15
 3348              		.cfi_endproc
 3349              	.LFE265:
 3351              		.section	.text.get_pattern_pixels,"ax",%progbits
 3352              		.align	1
 3353              		.p2align 2,,3
 3354              		.global	get_pattern_pixels
 3355              		.syntax unified
ARM GAS  /tmp/ccGYckNR.s 			page 115


 3356              		.thumb
 3357              		.thumb_func
 3358              		.fpu fpv4-sp-d16
 3360              	get_pattern_pixels:
 3361              	.LFB266:
1435:dm/dm42_fns.cc ****   //const char * p = ptrn+width-1;
 3362              		.loc 1 1435 0
 3363              		.cfi_startproc
 3364              		@ args = 0, pretend = 0, frame = 0
 3365              		@ frame_needed = 0, uses_anonymous_args = 0
 3366              		@ link register save eliminated.
 3367              	.LVL308:
 3368 0000 10B4     		push	{r4}
 3369              		.cfi_def_cfa_offset 4
 3370              		.cfi_offset 4, -4
1441:dm/dm42_fns.cc ****     while ( width-- > 0 ) {
 3371              		.loc 1 1441 0
 3372 0002 CBB1     		cbz	r3, .L410
 3373 0004 0023     		movs	r3, #0
 3374              	.LVL309:
 3375 0006 08E0     		b	.L411
 3376              	.LVL310:
 3377              	.L425:
 3378              	.LBB355:
 3379              	.LBB356:
1444:dm/dm42_fns.cc ****     }
 3380              		.loc 1 1444 0
 3381 0008 10F8014B 		ldrb	r4, [r0], #1	@ zero_extendqisi2
 3382              	.LVL311:
 3383 000c 1442     		tst	r4, r2
1443:dm/dm42_fns.cc ****       if (*p++ & mask) val |= 3;
 3384              		.loc 1 1443 0
 3385 000e 4FEA8303 		lsl	r3, r3, #2
 3386              	.LVL312:
1444:dm/dm42_fns.cc ****     }
 3387              		.loc 1 1444 0
 3388 0012 01D0     		beq	.L413
 3389 0014 43F00303 		orr	r3, r3, #3
 3390              	.LVL313:
 3391              	.L413:
 3392 0018 0139     		subs	r1, r1, #1
 3393              	.LVL314:
 3394              	.L411:
1442:dm/dm42_fns.cc ****       val <<= 2;
 3395              		.loc 1 1442 0
 3396 001a 0029     		cmp	r1, #0
 3397 001c F4DC     		bgt	.L425
 3398              	.LBE356:
 3399              	.LBE355:
1453:dm/dm42_fns.cc **** 
 3400              		.loc 1 1453 0
 3401 001e 1846     		mov	r0, r3
 3402              	.LVL315:
 3403 0020 5DF8044B 		ldr	r4, [sp], #4
 3404              		.cfi_remember_state
 3405              		.cfi_restore 4
 3406              		.cfi_def_cfa_offset 0
ARM GAS  /tmp/ccGYckNR.s 			page 116


 3407 0024 7047     		bx	lr
 3408              	.LVL316:
 3409              	.L426:
 3410              		.cfi_restore_state
1449:dm/dm42_fns.cc ****     }
 3411              		.loc 1 1449 0
 3412 0026 10F8014B 		ldrb	r4, [r0], #1	@ zero_extendqisi2
 3413              	.LVL317:
 3414 002a 1442     		tst	r4, r2
1448:dm/dm42_fns.cc ****       if (*p++ & mask) val |= 1;
 3415              		.loc 1 1448 0
 3416 002c 4FEA4303 		lsl	r3, r3, #1
 3417              	.LVL318:
1449:dm/dm42_fns.cc ****     }
 3418              		.loc 1 1449 0
 3419 0030 01D0     		beq	.L414
1449:dm/dm42_fns.cc ****     }
 3420              		.loc 1 1449 0 is_stmt 0 discriminator 1
 3421 0032 43F00103 		orr	r3, r3, #1
 3422              	.LVL319:
 3423              	.L414:
 3424 0036 0139     		subs	r1, r1, #1
 3425              	.LVL320:
 3426              	.L410:
1447:dm/dm42_fns.cc ****       val <<= 1;
 3427              		.loc 1 1447 0 is_stmt 1
 3428 0038 0029     		cmp	r1, #0
 3429 003a F4DC     		bgt	.L426
1453:dm/dm42_fns.cc **** 
 3430              		.loc 1 1453 0
 3431 003c 1846     		mov	r0, r3
 3432              	.LVL321:
 3433 003e 5DF8044B 		ldr	r4, [sp], #4
 3434              		.cfi_restore 4
 3435              		.cfi_def_cfa_offset 0
 3436 0042 7047     		bx	lr
 3437              		.cfi_endproc
 3438              	.LFE266:
 3440              		.section	.text._Z19thell_draw_menu_keyiiPKci,"ax",%progbits
 3441              		.align	1
 3442              		.p2align 2,,3
 3443              		.global	_Z19thell_draw_menu_keyiiPKci
 3444              		.syntax unified
 3445              		.thumb
 3446              		.thumb_func
 3447              		.fpu fpv4-sp-d16
 3449              	_Z19thell_draw_menu_keyiiPKci:
 3450              	.LFB267:
1459:dm/dm42_fns.cc ****   DBGTHELL("thell_draw_menu_key[%i:%c%s]\n", n, highlight?'#':' ', str_from_hp(s, length));
 3451              		.loc 1 1459 0
 3452              		.cfi_startproc
 3453              		@ args = 0, pretend = 0, frame = 24
 3454              		@ frame_needed = 0, uses_anonymous_args = 0
 3455              	.LVL322:
 3456 0000 2DE9F042 		push	{r4, r5, r6, r7, r9, lr}
 3457              		.cfi_def_cfa_offset 24
 3458              		.cfi_offset 4, -24
ARM GAS  /tmp/ccGYckNR.s 			page 117


 3459              		.cfi_offset 5, -20
 3460              		.cfi_offset 6, -16
 3461              		.cfi_offset 7, -12
 3462              		.cfi_offset 9, -8
 3463              		.cfi_offset 14, -4
1463:dm/dm42_fns.cc **** 
 3464              		.loc 1 1463 0
 3465 0004 1C4C     		ldr	r4, .L441
 3466 0006 2468     		ldr	r4, [r4]
 3467 0008 6406     		lsls	r4, r4, #25
1459:dm/dm42_fns.cc ****   DBGTHELL("thell_draw_menu_key[%i:%c%s]\n", n, highlight?'#':' ', str_from_hp(s, length));
 3468              		.loc 1 1459 0
 3469 000a 86B0     		sub	sp, sp, #24
 3470              		.cfi_def_cfa_offset 48
1463:dm/dm42_fns.cc **** 
 3471              		.loc 1 1463 0
 3472 000c 29D4     		bmi	.L427
 3473 000e 1D46     		mov	r5, r3
1465:dm/dm42_fns.cc **** 
 3474              		.loc 1 1465 0
 3475 0010 1A4B     		ldr	r3, .L441+4
 3476              	.LVL323:
 3477 0012 1446     		mov	r4, r2
 3478 0014 0122     		movs	r2, #1
 3479              	.LVL324:
 3480 0016 8946     		mov	r9, r1
 3481 0018 1A70     		strb	r2, [r3]
1468:dm/dm42_fns.cc ****     lcd_draw_menu_bg();
 3482              		.loc 1 1468 0
 3483 001a 28B3     		cbz	r0, .L439
 3484              	.LVL325:
 3485              	.LBB357:
1474:dm/dm42_fns.cc ****     // Skip chars with 8th bit set - that way denotes free42 how to shortcut command names
 3486              		.loc 1 1474 0 discriminator 1
 3487 001c 002D     		cmp	r5, #0
 3488 001e 29DD     		ble	.L435
 3489              	.LVL326:
 3490              	.L440:
 3491 0020 04EB050E 		add	lr, r4, r5
1474:dm/dm42_fns.cc ****     // Skip chars with 8th bit set - that way denotes free42 how to shortcut command names
 3492              		.loc 1 1474 0 is_stmt 0
 3493 0024 0025     		movs	r5, #0
 3494              	.LVL327:
 3495              	.L433:
1476:dm/dm42_fns.cc ****     // Copy and normalize
 3496              		.loc 1 1476 0 is_stmt 1
 3497 0026 14F8013B 		ldrb	r3, [r4], #1	@ zero_extendqisi2
 3498              	.LVL328:
1478:dm/dm42_fns.cc ****     // Limit the length
 3499              		.loc 1 1478 0
 3500 002a 06AA     		add	r2, sp, #24
1476:dm/dm42_fns.cc ****     // Copy and normalize
 3501              		.loc 1 1476 0
 3502 002c 13F0800F 		tst	r3, #128
1478:dm/dm42_fns.cc ****     // Limit the length
 3503              		.loc 1 1478 0
 3504 0030 02EB0507 		add	r7, r2, r5
ARM GAS  /tmp/ccGYckNR.s 			page 118


 3505 0034 05F10106 		add	r6, r5, #1
 3506              	.LVL329:
1476:dm/dm42_fns.cc ****     // Copy and normalize
 3507              		.loc 1 1476 0
 3508 0038 08D1     		bne	.L431
1478:dm/dm42_fns.cc ****     // Limit the length
 3509              		.loc 1 1478 0
 3510 003a 1F2B     		cmp	r3, #31
 3511 003c 98BF     		it	ls
 3512 003e 43F08003 		orrls	r3, r3, #128
1480:dm/dm42_fns.cc ****   }
 3513              		.loc 1 1480 0
 3514 0042 0C2E     		cmp	r6, #12
1478:dm/dm42_fns.cc ****     // Limit the length
 3515              		.loc 1 1478 0
 3516 0044 07F8103C 		strb	r3, [r7, #-16]
 3517 0048 3546     		mov	r5, r6
1480:dm/dm42_fns.cc ****   }
 3518              		.loc 1 1480 0
 3519 004a 01D0     		beq	.L430
 3520              	.L431:
 3521              	.LVL330:
1474:dm/dm42_fns.cc ****     // Skip chars with 8th bit set - that way denotes free42 how to shortcut command names
 3522              		.loc 1 1474 0 discriminator 2
 3523 004c 7445     		cmp	r4, lr
 3524 004e EAD1     		bne	.L433
 3525              	.LVL331:
 3526              	.L430:
 3527              	.LBE357:
1482:dm/dm42_fns.cc **** 
 3528              		.loc 1 1482 0
 3529 0050 06AB     		add	r3, sp, #24
 3530 0052 1D44     		add	r5, r5, r3
 3531              	.LVL332:
 3532 0054 0023     		movs	r3, #0
 3533 0056 05F8103C 		strb	r3, [r5, #-16]
1484:dm/dm42_fns.cc **** }
 3534              		.loc 1 1484 0
 3535 005a 4A46     		mov	r2, r9
 3536 005c 084B     		ldr	r3, .L441+8
 3537 005e 02A9     		add	r1, sp, #8
 3538 0060 9847     		blx	r3
 3539              	.LVL333:
 3540              	.L427:
1485:dm/dm42_fns.cc **** 
 3541              		.loc 1 1485 0
 3542 0062 06B0     		add	sp, sp, #24
 3543              		.cfi_remember_state
 3544              		.cfi_def_cfa_offset 24
 3545              		@ sp needed
 3546 0064 BDE8F082 		pop	{r4, r5, r6, r7, r9, pc}
 3547              	.LVL334:
 3548              	.L439:
 3549              		.cfi_restore_state
 3550 0068 0190     		str	r0, [sp, #4]
1469:dm/dm42_fns.cc **** 
 3551              		.loc 1 1469 0
ARM GAS  /tmp/ccGYckNR.s 			page 119


 3552 006a 064B     		ldr	r3, .L441+12
 3553 006c 9847     		blx	r3
 3554              	.LVL335:
 3555              	.LBB358:
1474:dm/dm42_fns.cc ****     // Skip chars with 8th bit set - that way denotes free42 how to shortcut command names
 3556              		.loc 1 1474 0
 3557 006e 002D     		cmp	r5, #0
 3558              	.LBE358:
1469:dm/dm42_fns.cc **** 
 3559              		.loc 1 1469 0
 3560 0070 0198     		ldr	r0, [sp, #4]
 3561              	.LVL336:
 3562              	.LBB359:
1474:dm/dm42_fns.cc ****     // Skip chars with 8th bit set - that way denotes free42 how to shortcut command names
 3563              		.loc 1 1474 0
 3564 0072 D5DC     		bgt	.L440
 3565              	.LVL337:
 3566              	.L435:
 3567 0074 0025     		movs	r5, #0
 3568              	.LVL338:
 3569 0076 EBE7     		b	.L430
 3570              	.L442:
 3571              		.align	2
 3572              	.L441:
 3573 0078 00200010 		.word	268443648
 3574 007c 00000000 		.word	.LANCHOR19
 3575 0080 A9020008 		.word	134218409
 3576 0084 A5020008 		.word	134218405
 3577              	.LBE359:
 3578              		.cfi_endproc
 3579              	.LFE267:
 3581              		.section	.text._Z17thell_edit_numberPKciS0_i,"ax",%progbits
 3582              		.align	1
 3583              		.p2align 2,,3
 3584              		.global	_Z17thell_edit_numberPKciS0_i
 3585              		.syntax unified
 3586              		.thumb
 3587              		.thumb_func
 3588              		.fpu fpv4-sp-d16
 3590              	_Z17thell_edit_numberPKciS0_i:
 3591              	.LFB268:
1488:dm/dm42_fns.cc ****   assert_param(prompt_len <= EDIT_PROMPT_LEN);
 3592              		.loc 1 1488 0
 3593              		.cfi_startproc
 3594              		@ args = 0, pretend = 0, frame = 0
 3595              		@ frame_needed = 0, uses_anonymous_args = 0
 3596              	.LVL339:
 3597 0000 70B5     		push	{r4, r5, r6, lr}
 3598              		.cfi_def_cfa_offset 16
 3599              		.cfi_offset 4, -16
 3600              		.cfi_offset 5, -12
 3601              		.cfi_offset 6, -8
 3602              		.cfi_offset 14, -4
1488:dm/dm42_fns.cc ****   assert_param(prompt_len <= EDIT_PROMPT_LEN);
 3603              		.loc 1 1488 0
 3604 0002 0446     		mov	r4, r0
 3605 0004 1E46     		mov	r6, r3
ARM GAS  /tmp/ccGYckNR.s 			page 120


 3606 0006 1546     		mov	r5, r2
1492:dm/dm42_fns.cc ****   hp2font(edit_line, line, line_len);
 3607              		.loc 1 1492 0
 3608 0008 0E48     		ldr	r0, .L448
 3609              	.LVL340:
 3610 000a 0A46     		mov	r2, r1
 3611              	.LVL341:
 3612 000c 2146     		mov	r1, r4
 3613              	.LVL342:
 3614 000e FFF7FEFF 		bl	_Z7hp2fontPcPKci
 3615              	.LVL343:
1493:dm/dm42_fns.cc **** 
 3616              		.loc 1 1493 0
 3617 0012 3246     		mov	r2, r6
 3618 0014 2946     		mov	r1, r5
 3619 0016 0C48     		ldr	r0, .L448+4
 3620 0018 FFF7FEFF 		bl	_Z7hp2fontPcPKci
 3621              	.LVL344:
1495:dm/dm42_fns.cc ****   is_edit_x = prompt[0] == 'x' && prompt[1] == 0x80;
 3622              		.loc 1 1495 0
 3623 001c 0B4B     		ldr	r3, .L448+8
 3624 001e 0122     		movs	r2, #1
 3625 0020 1A70     		strb	r2, [r3]
1496:dm/dm42_fns.cc **** }
 3626              		.loc 1 1496 0
 3627 0022 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 3628 0024 782B     		cmp	r3, #120
 3629 0026 03D0     		beq	.L447
 3630 0028 094A     		ldr	r2, .L448+12
 3631 002a 0023     		movs	r3, #0
 3632 002c 1370     		strb	r3, [r2]
 3633 002e 70BD     		pop	{r4, r5, r6, pc}
 3634              	.LVL345:
 3635              	.L447:
1496:dm/dm42_fns.cc **** }
 3636              		.loc 1 1496 0 is_stmt 0 discriminator 1
 3637 0030 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 3638 0032 074A     		ldr	r2, .L448+12
 3639 0034 A3F18003 		sub	r3, #128
 3640 0038 B3FA83F3 		clz	r3, r3
 3641 003c 5B09     		lsrs	r3, r3, #5
 3642 003e 1370     		strb	r3, [r2]
 3643 0040 70BD     		pop	{r4, r5, r6, pc}
 3644              	.LVL346:
 3645              	.L449:
 3646 0042 00BF     		.align	2
 3647              	.L448:
 3648 0044 00000000 		.word	.LANCHOR20
 3649 0048 00000000 		.word	.LANCHOR21
 3650 004c 00000000 		.word	.LANCHOR18
 3651 0050 00000000 		.word	.LANCHOR17
 3652              		.cfi_endproc
 3653              	.LFE268:
 3655              		.section	.text._Z18thell_draw_patterniiPKcii,"ax",%progbits
 3656              		.align	1
 3657              		.p2align 2,,3
 3658              		.global	_Z18thell_draw_patterniiPKcii
ARM GAS  /tmp/ccGYckNR.s 			page 121


 3659              		.syntax unified
 3660              		.thumb
 3661              		.thumb_func
 3662              		.fpu fpv4-sp-d16
 3664              	_Z18thell_draw_patterniiPKcii:
 3665              	.LFB270:
1518:dm/dm42_fns.cc ****   DBGTHELL("thell_draw_pattern[%i] %i x %i - %i\n", mode, x,y, pattern_width);
 3666              		.loc 1 1518 0 is_stmt 1
 3667              		.cfi_startproc
 3668              		@ args = 4, pretend = 0, frame = 56
 3669              		@ frame_needed = 0, uses_anonymous_args = 0
 3670              	.LVL347:
 3671 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 3672              		.cfi_def_cfa_offset 36
 3673              		.cfi_offset 4, -36
 3674              		.cfi_offset 5, -32
 3675              		.cfi_offset 6, -28
 3676              		.cfi_offset 7, -24
 3677              		.cfi_offset 8, -20
 3678              		.cfi_offset 9, -16
 3679              		.cfi_offset 10, -12
 3680              		.cfi_offset 11, -8
 3681              		.cfi_offset 14, -4
 3682 0004 91B0     		sub	sp, sp, #68
 3683              		.cfi_def_cfa_offset 104
1518:dm/dm42_fns.cc ****   DBGTHELL("thell_draw_pattern[%i] %i x %i - %i\n", mode, x,y, pattern_width);
 3684              		.loc 1 1518 0
 3685 0006 8146     		mov	r9, r0
 3686 0008 0591     		str	r1, [sp, #20]
 3687 000a 9046     		mov	r8, r2
 3688 000c 0693     		str	r3, [sp, #24]
 3689 000e 1A9E     		ldr	r6, [sp, #104]
1520:dm/dm42_fns.cc ****   
 3690              		.loc 1 1520 0
 3691 0010 FFF7FEFF 		bl	graphics_mode
 3692              	.LVL348:
1522:dm/dm42_fns.cc ****     // Original graphics mode
 3693              		.loc 1 1522 0
 3694 0014 0028     		cmp	r0, #0
 3695 0016 34D0     		beq	.L483
1528:dm/dm42_fns.cc ****     // First call - clear LCD
 3696              		.loc 1 1528 0
 3697 0018 664D     		ldr	r5, .L491
 3698 001a 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 3699 001c 0446     		mov	r4, r0
 3700 001e 002B     		cmp	r3, #0
 3701 0020 35D0     		beq	.L484
 3702              	.LVL349:
 3703              	.L453:
1533:dm/dm42_fns.cc ****   const int blt_sets[] = {BLT_NONE, BLT_SET, BLT_NONE, BLT_NONE};
 3704              		.loc 1 1533 0
 3705 0022 654B     		ldr	r3, .L491+4
 3706 0024 0FCB     		ldm	r3, {r0, r1, r2, r3}
 3707 0026 08AF     		add	r7, sp, #32
 3708 0028 87E80F00 		stm	r7, {r0, r1, r2, r3}
1535:dm/dm42_fns.cc ****   const int blt_set = blt_sets[mode];
 3709              		.loc 1 1535 0
ARM GAS  /tmp/ccGYckNR.s 			page 122


 3710 002c 10AB     		add	r3, sp, #64
 3711 002e 03EB8603 		add	r3, r3, r6, lsl #2
1534:dm/dm42_fns.cc ****   const int blt_op = blt_ops[mode];
 3712              		.loc 1 1534 0
 3713 0032 0122     		movs	r2, #1
 3714 0034 0026     		movs	r6, #0
 3715 0036 0D92     		str	r2, [sp, #52]
 3716 0038 0C96     		str	r6, [sp, #48]
 3717 003a 0E96     		str	r6, [sp, #56]
 3718 003c 0F96     		str	r6, [sp, #60]
1535:dm/dm42_fns.cc ****   const int blt_set = blt_sets[mode];
 3719              		.loc 1 1535 0
 3720 003e 53F8202C 		ldr	r2, [r3, #-32]
1536:dm/dm42_fns.cc ****   const int MAXX = gr_MAXX();
 3721              		.loc 1 1536 0
 3722 0042 53F8103C 		ldr	r3, [r3, #-16]
1535:dm/dm42_fns.cc ****   const int blt_set = blt_sets[mode];
 3723              		.loc 1 1535 0
 3724 0046 0392     		str	r2, [sp, #12]
 3725              	.LVL350:
1536:dm/dm42_fns.cc ****   const int MAXX = gr_MAXX();
 3726              		.loc 1 1536 0
 3727 0048 0493     		str	r3, [sp, #16]
 3728              	.LVL351:
1537:dm/dm42_fns.cc ****   //const int MAXY = gr_MAXY();
 3729              		.loc 1 1537 0
 3730 004a FFF7FEFF 		bl	gr_MAXX
 3731              	.LVL352:
1541:dm/dm42_fns.cc ****     pattern_width += x;
 3732              		.loc 1 1541 0
 3733 004e B145     		cmp	r9, r6
 3734 0050 20DB     		blt	.L485
 3735              	.LVL353:
 3736              	.L454:
1547:dm/dm42_fns.cc ****     pattern_width = MAXX - x;
 3737              		.loc 1 1547 0
 3738 0052 069B     		ldr	r3, [sp, #24]
1551:dm/dm42_fns.cc ****   if ( gm == 2 ) {
 3739              		.loc 1 1551 0
 3740 0054 2C70     		strb	r4, [r5]
1547:dm/dm42_fns.cc ****     pattern_width = MAXX - x;
 3741              		.loc 1 1547 0
 3742 0056 4B44     		add	r3, r9, r3
 3743 0058 9842     		cmp	r0, r3
1548:dm/dm42_fns.cc ****   }
 3744              		.loc 1 1548 0
 3745 005a BCBF     		itt	lt
 3746 005c A0EB0903 		sublt	r3, r0, r9
 3747 0060 0693     		strlt	r3, [sp, #24]
 3748              	.LVL354:
 3749              	.LBB378:
1552:dm/dm42_fns.cc ****     // 2x2 pixels
 3750              		.loc 1 1552 0
 3751 0062 022C     		cmp	r4, #2
 3752 0064 1DD0     		beq	.L486
 3753              	.LBE378:
 3754              	.LBB389:
ARM GAS  /tmp/ccGYckNR.s 			page 123


1566:dm/dm42_fns.cc ****     // 1x1 pixels
 3755              		.loc 1 1566 0
 3756 0066 032C     		cmp	r4, #3
 3757 0068 6BD0     		beq	.L487
 3758              	.LVL355:
 3759              	.L464:
 3760              	.LBE389:
1578:dm/dm42_fns.cc ****   set_lcd_update_timeout();
 3761              		.loc 1 1578 0
 3762 006a 544A     		ldr	r2, .L491+8
 3763              	.LBB399:
 3764              	.LBB400:
2654:dm/dm42_fns.cc ****     last_lcd_update_ms = sys_current_ms();
 3765              		.loc 1 2654 0
 3766 006c 5449     		ldr	r1, .L491+12
 3767              	.LBE400:
 3768              	.LBE399:
1578:dm/dm42_fns.cc ****   set_lcd_update_timeout();
 3769              		.loc 1 1578 0
 3770 006e 1368     		ldr	r3, [r2]
 3771              	.LBB404:
 3772              	.LBB401:
2654:dm/dm42_fns.cc ****     last_lcd_update_ms = sys_current_ms();
 3773              		.loc 1 2654 0
 3774 0070 0968     		ldr	r1, [r1]
 3775              	.LBE401:
 3776              	.LBE404:
1578:dm/dm42_fns.cc ****   set_lcd_update_timeout();
 3777              		.loc 1 1578 0
 3778 0072 43F00203 		orr	r3, r3, #2
 3779 0076 1360     		str	r3, [r2]
 3780              	.LBB405:
 3781              	.LBB402:
2654:dm/dm42_fns.cc ****     last_lcd_update_ms = sys_current_ms();
 3782              		.loc 1 2654 0
 3783 0078 0029     		cmp	r1, #0
 3784 007a 5DD0     		beq	.L488
 3785              	.LBE402:
 3786              	.LBE405:
1580:dm/dm42_fns.cc **** 
 3787              		.loc 1 1580 0
 3788 007c 11B0     		add	sp, sp, #68
 3789              		.cfi_remember_state
 3790              		.cfi_def_cfa_offset 36
 3791              		@ sp needed
 3792 007e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3793              	.LVL356:
 3794              	.L483:
 3795              		.cfi_restore_state
1524:dm/dm42_fns.cc ****     return;
 3796              		.loc 1 1524 0
 3797 0082 4C4B     		ldr	r3, .L491
 3798 0084 0122     		movs	r2, #1
 3799 0086 1A70     		strb	r2, [r3]
1580:dm/dm42_fns.cc **** 
 3800              		.loc 1 1580 0
 3801 0088 11B0     		add	sp, sp, #68
ARM GAS  /tmp/ccGYckNR.s 			page 124


 3802              		.cfi_remember_state
 3803              		.cfi_def_cfa_offset 36
 3804              		@ sp needed
 3805 008a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3806              	.LVL357:
 3807              	.L484:
 3808              		.cfi_restore_state
1530:dm/dm42_fns.cc ****   }
 3809              		.loc 1 1530 0
 3810 008e 4D4B     		ldr	r3, .L491+16
 3811 0090 9847     		blx	r3
 3812              	.LVL358:
 3813 0092 C6E7     		b	.L453
 3814              	.LVL359:
 3815              	.L485:
1542:dm/dm42_fns.cc ****     pattern += -x;
 3816              		.loc 1 1542 0
 3817 0094 069B     		ldr	r3, [sp, #24]
 3818 0096 4B44     		add	r3, r3, r9
1543:dm/dm42_fns.cc ****     x=0;
 3819              		.loc 1 1543 0
 3820 0098 A8EB0908 		sub	r8, r8, r9
 3821              	.LVL360:
1542:dm/dm42_fns.cc ****     pattern += -x;
 3822              		.loc 1 1542 0
 3823 009c 0693     		str	r3, [sp, #24]
 3824              	.LVL361:
1544:dm/dm42_fns.cc ****   }
 3825              		.loc 1 1544 0
 3826 009e B146     		mov	r9, r6
 3827 00a0 D7E7     		b	.L454
 3828              	.LVL362:
 3829              	.L486:
 3830              	.LBB406:
 3831              	.LBB379:
1554:dm/dm42_fns.cc ****       int const w = pattern_width<12 ? pattern_width : 12;
 3832              		.loc 1 1554 0 discriminator 1
 3833 00a2 069B     		ldr	r3, [sp, #24]
 3834 00a4 002B     		cmp	r3, #0
 3835 00a6 E0DD     		ble	.L464
 3836 00a8 059B     		ldr	r3, [sp, #20]
 3837              	.LBB380:
 3838              	.LBB381:
 3839              	.LBB382:
1560:dm/dm42_fns.cc ****         bitblt24(2*x, ww, yy+1, val, blt_op, blt_set);
 3840              		.loc 1 1560 0
 3841 00aa DFF81CB1 		ldr	fp, .L491+20
 3842 00ae DDF810A0 		ldr	r10, [sp, #16]
 3843 00b2 CDF81080 		str	r8, [sp, #16]
 3844 00b6 5B00     		lsls	r3, r3, #1
 3845 00b8 0793     		str	r3, [sp, #28]
 3846 00ba 1033     		adds	r3, r3, #16
 3847 00bc 4FEA4909 		lsl	r9, r9, #1
 3848 00c0 0593     		str	r3, [sp, #20]
 3849              	.LVL363:
 3850              	.L465:
 3851              	.LBE382:
ARM GAS  /tmp/ccGYckNR.s 			page 125


 3852              	.LBE381:
1555:dm/dm42_fns.cc ****       int const ww = 2*w;
 3853              		.loc 1 1555 0
 3854 00c2 069E     		ldr	r6, [sp, #24]
 3855 00c4 049B     		ldr	r3, [sp, #16]
1557:dm/dm42_fns.cc ****       for(int m = 1; m<0x100; m<<=1,yy+=2) {
 3856              		.loc 1 1557 0
 3857 00c6 079F     		ldr	r7, [sp, #28]
1555:dm/dm42_fns.cc ****       int const ww = 2*w;
 3858              		.loc 1 1555 0
 3859 00c8 0C2E     		cmp	r6, #12
 3860 00ca A8BF     		it	ge
 3861 00cc 0C26     		movge	r6, #12
 3862              	.LVL364:
1556:dm/dm42_fns.cc ****       int yy = 2*y;
 3863              		.loc 1 1556 0
 3864 00ce 4FEA4608 		lsl	r8, r6, #1
 3865              	.LBB388:
1558:dm/dm42_fns.cc ****         int val = get_pattern_pixels(pattern, w, m, 1);
 3866              		.loc 1 1558 0
 3867 00d2 0125     		movs	r5, #1
 3868 00d4 1E44     		add	r6, r6, r3
 3869              	.LVL365:
 3870              	.L463:
 3871 00d6 049B     		ldr	r3, [sp, #16]
 3872 00d8 0024     		movs	r4, #0
 3873              	.L460:
 3874              	.LVL366:
 3875              	.LBB387:
 3876              	.LBB383:
 3877              	.LBB384:
 3878              	.LBB385:
 3879              	.LBB386:
1442:dm/dm42_fns.cc ****       val <<= 2;
 3880              		.loc 1 1442 0
 3881 00da 9E42     		cmp	r6, r3
 3882 00dc 09D0     		beq	.L461
 3883              	.L489:
1444:dm/dm42_fns.cc ****     }
 3884              		.loc 1 1444 0
 3885 00de 13F8012B 		ldrb	r2, [r3], #1	@ zero_extendqisi2
 3886              	.LVL367:
 3887 00e2 2A42     		tst	r2, r5
1443:dm/dm42_fns.cc ****       if (*p++ & mask) val |= 3;
 3888              		.loc 1 1443 0
 3889 00e4 4FEA8404 		lsl	r4, r4, #2
 3890              	.LVL368:
1444:dm/dm42_fns.cc ****     }
 3891              		.loc 1 1444 0
 3892 00e8 F7D0     		beq	.L460
1442:dm/dm42_fns.cc ****       val <<= 2;
 3893              		.loc 1 1442 0
 3894 00ea 9E42     		cmp	r6, r3
1444:dm/dm42_fns.cc ****     }
 3895              		.loc 1 1444 0
 3896 00ec 44F00304 		orr	r4, r4, #3
 3897              	.LVL369:
ARM GAS  /tmp/ccGYckNR.s 			page 126


1442:dm/dm42_fns.cc ****       val <<= 2;
 3898              		.loc 1 1442 0
 3899 00f0 F5D1     		bne	.L489
 3900              	.L461:
 3901              	.LVL370:
 3902              	.LBE386:
 3903              	.LBE385:
 3904              	.LBE384:
 3905              	.LBE383:
1560:dm/dm42_fns.cc ****         bitblt24(2*x, ww, yy+1, val, blt_op, blt_set);
 3906              		.loc 1 1560 0
 3907 00f2 039B     		ldr	r3, [sp, #12]
 3908 00f4 0093     		str	r3, [sp]
 3909 00f6 3A46     		mov	r2, r7
 3910 00f8 2346     		mov	r3, r4
 3911 00fa 4146     		mov	r1, r8
 3912 00fc 4846     		mov	r0, r9
 3913 00fe CDF804A0 		str	r10, [sp, #4]
 3914 0102 D847     		blx	fp
 3915              	.LVL371:
1561:dm/dm42_fns.cc ****       }
 3916              		.loc 1 1561 0
 3917 0104 039B     		ldr	r3, [sp, #12]
 3918 0106 0093     		str	r3, [sp]
 3919 0108 7A1C     		adds	r2, r7, #1
 3920 010a 2346     		mov	r3, r4
 3921 010c CDF804A0 		str	r10, [sp, #4]
 3922 0110 4146     		mov	r1, r8
 3923 0112 4846     		mov	r0, r9
 3924 0114 D847     		blx	fp
 3925              	.LVL372:
 3926              	.LBE387:
1558:dm/dm42_fns.cc ****         int val = get_pattern_pixels(pattern, w, m, 1);
 3927              		.loc 1 1558 0
 3928 0116 059B     		ldr	r3, [sp, #20]
 3929 0118 0237     		adds	r7, r7, #2
 3930              	.LVL373:
 3931 011a BB42     		cmp	r3, r7
 3932 011c 4FEA4505 		lsl	r5, r5, #1
 3933              	.LVL374:
 3934 0120 D9D1     		bne	.L463
 3935              	.LBE388:
 3936              	.LBE380:
1554:dm/dm42_fns.cc ****       int const w = pattern_width<12 ? pattern_width : 12;
 3937              		.loc 1 1554 0
 3938 0122 069B     		ldr	r3, [sp, #24]
 3939 0124 049A     		ldr	r2, [sp, #16]
 3940 0126 0C3B     		subs	r3, r3, #12
 3941 0128 0C32     		adds	r2, r2, #12
 3942 012a 002B     		cmp	r3, #0
 3943 012c 0693     		str	r3, [sp, #24]
 3944              	.LVL375:
 3945 012e 0492     		str	r2, [sp, #16]
 3946 0130 09F11809 		add	r9, r9, #24
 3947 0134 C5DC     		bgt	.L465
 3948 0136 98E7     		b	.L464
 3949              	.LVL376:
ARM GAS  /tmp/ccGYckNR.s 			page 127


 3950              	.L488:
 3951              	.LBE379:
 3952              	.LBE406:
1580:dm/dm42_fns.cc **** 
 3953              		.loc 1 1580 0
 3954 0138 11B0     		add	sp, sp, #68
 3955              		.cfi_remember_state
 3956              		.cfi_def_cfa_offset 36
 3957              		@ sp needed
 3958 013a BDE8F04F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 3959              		.cfi_restore 14
 3960              		.cfi_restore 11
 3961              		.cfi_restore 10
 3962              		.cfi_restore 9
 3963              		.cfi_restore 8
 3964              		.cfi_restore 7
 3965              		.cfi_restore 6
 3966              		.cfi_restore 5
 3967              		.cfi_restore 4
 3968              		.cfi_def_cfa_offset 0
 3969              	.LVL377:
 3970              	.LBB407:
 3971              	.LBB403:
 3972 013e FFF7FEBF 		b	set_lcd_update_timeout.part.10
 3973              	.LVL378:
 3974              	.L487:
 3975              		.cfi_restore_state
 3976              	.LBE403:
 3977              	.LBE407:
 3978              	.LBB408:
 3979              	.LBB390:
1568:dm/dm42_fns.cc ****       int const w = pattern_width<24 ? pattern_width : 24;
 3980              		.loc 1 1568 0 discriminator 1
 3981 0142 069B     		ldr	r3, [sp, #24]
 3982 0144 002B     		cmp	r3, #0
 3983 0146 90DD     		ble	.L464
 3984 0148 A9EB0803 		sub	r3, r9, r8
 3985 014c 0793     		str	r3, [sp, #28]
 3986 014e 059B     		ldr	r3, [sp, #20]
 3987              	.LBB391:
 3988              	.LBB392:
 3989              	.LBB393:
1573:dm/dm42_fns.cc ****       }
 3990              		.loc 1 1573 0
 3991 0150 DFF874A0 		ldr	r10, .L491+20
 3992 0154 03F1080B 		add	fp, r3, #8
 3993              	.LVL379:
 3994              	.L470:
 3995              	.LBE393:
 3996              	.LBE392:
1569:dm/dm42_fns.cc ****       int yy = y;
 3997              		.loc 1 1569 0
 3998 0158 069F     		ldr	r7, [sp, #24]
 3999 015a 079B     		ldr	r3, [sp, #28]
1570:dm/dm42_fns.cc ****       for(int m = 1; m<0x100; m<<=1,yy++) {
 4000              		.loc 1 1570 0
 4001 015c 059E     		ldr	r6, [sp, #20]
ARM GAS  /tmp/ccGYckNR.s 			page 128


1569:dm/dm42_fns.cc ****       int yy = y;
 4002              		.loc 1 1569 0
 4003 015e 182F     		cmp	r7, #24
 4004 0160 A8BF     		it	ge
 4005 0162 1827     		movge	r7, #24
 4006 0164 08EB0705 		add	r5, r8, r7
 4007 0168 08EB0309 		add	r9, r8, r3
 4008              	.LBB398:
1571:dm/dm42_fns.cc ****         int val = get_pattern_pixels(pattern, w, m, 0);
 4009              		.loc 1 1571 0
 4010 016c 0124     		movs	r4, #1
 4011              	.LVL380:
 4012              	.L469:
 4013 016e 4246     		mov	r2, r8
 4014 0170 0023     		movs	r3, #0
 4015              	.L466:
 4016              	.LVL381:
 4017              	.LBB396:
 4018              	.LBB394:
 4019              	.LBB395:
1447:dm/dm42_fns.cc ****       val <<= 1;
 4020              		.loc 1 1447 0
 4021 0172 9542     		cmp	r5, r2
 4022 0174 09D0     		beq	.L467
 4023              	.L490:
1449:dm/dm42_fns.cc ****     }
 4024              		.loc 1 1449 0
 4025 0176 12F8011B 		ldrb	r1, [r2], #1	@ zero_extendqisi2
 4026              	.LVL382:
 4027 017a 2142     		tst	r1, r4
1448:dm/dm42_fns.cc ****       if (*p++ & mask) val |= 1;
 4028              		.loc 1 1448 0
 4029 017c 4FEA4303 		lsl	r3, r3, #1
 4030              	.LVL383:
1449:dm/dm42_fns.cc ****     }
 4031              		.loc 1 1449 0
 4032 0180 F7D0     		beq	.L466
1447:dm/dm42_fns.cc ****       val <<= 1;
 4033              		.loc 1 1447 0
 4034 0182 9542     		cmp	r5, r2
1449:dm/dm42_fns.cc ****     }
 4035              		.loc 1 1449 0
 4036 0184 43F00103 		orr	r3, r3, #1
 4037              	.LVL384:
1447:dm/dm42_fns.cc ****       val <<= 1;
 4038              		.loc 1 1447 0
 4039 0188 F5D1     		bne	.L490
 4040              	.L467:
 4041              	.LVL385:
 4042              	.LBE395:
 4043              	.LBE394:
1573:dm/dm42_fns.cc ****       }
 4044              		.loc 1 1573 0
 4045 018a 049A     		ldr	r2, [sp, #16]
 4046 018c 0192     		str	r2, [sp, #4]
 4047 018e 039A     		ldr	r2, [sp, #12]
 4048 0190 0092     		str	r2, [sp]
ARM GAS  /tmp/ccGYckNR.s 			page 129


 4049 0192 3946     		mov	r1, r7
 4050 0194 3246     		mov	r2, r6
 4051 0196 4846     		mov	r0, r9
 4052              	.LBE396:
1571:dm/dm42_fns.cc ****         int val = get_pattern_pixels(pattern, w, m, 0);
 4053              		.loc 1 1571 0
 4054 0198 0136     		adds	r6, r6, #1
 4055              	.LVL386:
 4056              	.LBB397:
1573:dm/dm42_fns.cc ****       }
 4057              		.loc 1 1573 0
 4058 019a D047     		blx	r10
 4059              	.LVL387:
 4060              	.LBE397:
1571:dm/dm42_fns.cc ****         int val = get_pattern_pixels(pattern, w, m, 0);
 4061              		.loc 1 1571 0
 4062 019c B345     		cmp	fp, r6
 4063 019e 4FEA4404 		lsl	r4, r4, #1
 4064              	.LVL388:
 4065 01a2 E4D1     		bne	.L469
 4066              	.LBE398:
 4067              	.LBE391:
1568:dm/dm42_fns.cc ****       int const w = pattern_width<24 ? pattern_width : 24;
 4068              		.loc 1 1568 0
 4069 01a4 069B     		ldr	r3, [sp, #24]
 4070 01a6 183B     		subs	r3, r3, #24
 4071 01a8 002B     		cmp	r3, #0
 4072 01aa 0693     		str	r3, [sp, #24]
 4073              	.LVL389:
 4074 01ac 08F11808 		add	r8, r8, #24
 4075 01b0 D2DC     		bgt	.L470
 4076 01b2 5AE7     		b	.L464
 4077              	.L492:
 4078              		.align	2
 4079              	.L491:
 4080 01b4 00000000 		.word	.LANCHOR10
 4081 01b8 00000000 		.word	.LANCHOR22
 4082 01bc 00000000 		.word	.LANCHOR7
 4083 01c0 00000000 		.word	.LANCHOR9
 4084 01c4 2D020008 		.word	134218285
 4085 01c8 25020008 		.word	134218277
 4086              	.LBE390:
 4087              	.LBE408:
 4088              		.cfi_endproc
 4089              	.LFE270:
 4091              		.section	.text._Z16thell_draw_pixelii,"ax",%progbits
 4092              		.align	1
 4093              		.p2align 2,,3
 4094              		.global	_Z16thell_draw_pixelii
 4095              		.syntax unified
 4096              		.thumb
 4097              		.thumb_func
 4098              		.fpu fpv4-sp-d16
 4100              	_Z16thell_draw_pixelii:
 4101              	.LFB271:
1583:dm/dm42_fns.cc ****   int gm = graphics_mode();
 4102              		.loc 1 1583 0
ARM GAS  /tmp/ccGYckNR.s 			page 130


 4103              		.cfi_startproc
 4104              		@ args = 0, pretend = 0, frame = 0
 4105              		@ frame_needed = 0, uses_anonymous_args = 0
 4106              	.LVL390:
 4107 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 4108              		.cfi_def_cfa_offset 24
 4109              		.cfi_offset 4, -24
 4110              		.cfi_offset 5, -20
 4111              		.cfi_offset 6, -16
 4112              		.cfi_offset 7, -12
 4113              		.cfi_offset 8, -8
 4114              		.cfi_offset 14, -4
 4115 0004 82B0     		sub	sp, sp, #8
 4116              		.cfi_def_cfa_offset 32
1583:dm/dm42_fns.cc ****   int gm = graphics_mode();
 4117              		.loc 1 1583 0
 4118 0006 0646     		mov	r6, r0
 4119 0008 0F46     		mov	r7, r1
1584:dm/dm42_fns.cc ****   DBGTHELL("thell_draw_pixel[%i] %i x %i\n",gm,x,y);
 4120              		.loc 1 1584 0
 4121 000a FFF7FEFF 		bl	graphics_mode
 4122              	.LVL391:
1587:dm/dm42_fns.cc ****     // Original graphics mode
 4123              		.loc 1 1587 0
 4124 000e C0B1     		cbz	r0, .L500
1593:dm/dm42_fns.cc ****     // First call - clear LCD
 4125              		.loc 1 1593 0
 4126 0010 1F4D     		ldr	r5, .L505
 4127 0012 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 4128 0014 0446     		mov	r4, r0
 4129 0016 D3B1     		cbz	r3, .L501
 4130              	.LVL392:
 4131              	.L496:
1599:dm/dm42_fns.cc ****     // 2x2 pixels
 4132              		.loc 1 1599 0
 4133 0018 022C     		cmp	r4, #2
1598:dm/dm42_fns.cc ****   if ( gm == 2 ) {
 4134              		.loc 1 1598 0
 4135 001a 2C70     		strb	r4, [r5]
1599:dm/dm42_fns.cc ****     // 2x2 pixels
 4136              		.loc 1 1599 0
 4137 001c 24D0     		beq	.L502
1606:dm/dm42_fns.cc ****     // 1x1 pixels
 4138              		.loc 1 1606 0
 4139 001e 032C     		cmp	r4, #3
 4140 0020 18D0     		beq	.L503
 4141              	.LVL393:
 4142              	.L498:
1611:dm/dm42_fns.cc ****   set_lcd_update_timeout();
 4143              		.loc 1 1611 0
 4144 0022 1C4A     		ldr	r2, .L505+4
 4145              	.LBB409:
 4146              	.LBB410:
2654:dm/dm42_fns.cc ****     last_lcd_update_ms = sys_current_ms();
 4147              		.loc 1 2654 0
 4148 0024 1C49     		ldr	r1, .L505+8
 4149              	.LBE410:
ARM GAS  /tmp/ccGYckNR.s 			page 131


 4150              	.LBE409:
1611:dm/dm42_fns.cc ****   set_lcd_update_timeout();
 4151              		.loc 1 1611 0
 4152 0026 1368     		ldr	r3, [r2]
 4153              	.LBB414:
 4154              	.LBB411:
2654:dm/dm42_fns.cc ****     last_lcd_update_ms = sys_current_ms();
 4155              		.loc 1 2654 0
 4156 0028 0968     		ldr	r1, [r1]
 4157              	.LBE411:
 4158              	.LBE414:
1611:dm/dm42_fns.cc ****   set_lcd_update_timeout();
 4159              		.loc 1 1611 0
 4160 002a 43F00203 		orr	r3, r3, #2
 4161 002e 1360     		str	r3, [r2]
 4162              	.LBB415:
 4163              	.LBB412:
2654:dm/dm42_fns.cc ****     last_lcd_update_ms = sys_current_ms();
 4164              		.loc 1 2654 0
 4165 0030 11B1     		cbz	r1, .L504
 4166              	.LBE412:
 4167              	.LBE415:
1613:dm/dm42_fns.cc **** 
 4168              		.loc 1 1613 0
 4169 0032 02B0     		add	sp, sp, #8
 4170              		.cfi_remember_state
 4171              		.cfi_def_cfa_offset 24
 4172              		@ sp needed
 4173 0034 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 4174              	.L504:
 4175              		.cfi_restore_state
 4176 0038 02B0     		add	sp, sp, #8
 4177              		.cfi_remember_state
 4178              		.cfi_def_cfa_offset 24
 4179              		@ sp needed
 4180 003a BDE8F041 		pop	{r4, r5, r6, r7, r8, lr}
 4181              		.cfi_restore 14
 4182              		.cfi_restore 8
 4183              		.cfi_restore 7
 4184              		.cfi_restore 6
 4185              		.cfi_restore 5
 4186              		.cfi_restore 4
 4187              		.cfi_def_cfa_offset 0
 4188              	.LBB416:
 4189              	.LBB413:
 4190 003e FFF7FEBF 		b	set_lcd_update_timeout.part.10
 4191              	.LVL394:
 4192              	.L500:
 4193              		.cfi_restore_state
 4194              	.LBE413:
 4195              	.LBE416:
1589:dm/dm42_fns.cc ****     return;
 4196              		.loc 1 1589 0
 4197 0042 134B     		ldr	r3, .L505
 4198 0044 0122     		movs	r2, #1
 4199 0046 1A70     		strb	r2, [r3]
1613:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 132


 4200              		.loc 1 1613 0
 4201 0048 02B0     		add	sp, sp, #8
 4202              		.cfi_remember_state
 4203              		.cfi_def_cfa_offset 24
 4204              		@ sp needed
 4205 004a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 4206              	.LVL395:
 4207              	.L501:
 4208              		.cfi_restore_state
1595:dm/dm42_fns.cc ****   }
 4209              		.loc 1 1595 0
 4210 004e 134B     		ldr	r3, .L505+12
 4211 0050 9847     		blx	r3
 4212              	.LVL396:
 4213 0052 E1E7     		b	.L496
 4214              	.L503:
1608:dm/dm42_fns.cc ****   }
 4215              		.loc 1 1608 0
 4216 0054 0021     		movs	r1, #0
 4217 0056 0123     		movs	r3, #1
 4218 0058 0191     		str	r1, [sp, #4]
 4219 005a 0091     		str	r1, [sp]
 4220 005c 3A46     		mov	r2, r7
 4221 005e 3046     		mov	r0, r6
 4222 0060 1946     		mov	r1, r3
 4223 0062 0F4C     		ldr	r4, .L505+16
 4224              	.LVL397:
 4225 0064 A047     		blx	r4
 4226              	.LVL398:
 4227 0066 DCE7     		b	.L498
 4228              	.LVL399:
 4229              	.L502:
1602:dm/dm42_fns.cc ****     bitblt24(x, 2, y+1, 3, BLT_OR, BLT_NONE);
 4230              		.loc 1 1602 0
 4231 0068 0025     		movs	r5, #0
1601:dm/dm42_fns.cc ****     bitblt24(x, 2, y,   3, BLT_OR, BLT_NONE);
 4232              		.loc 1 1601 0
 4233 006a 7F00     		lsls	r7, r7, #1
 4234              	.LVL400:
 4235 006c 7600     		lsls	r6, r6, #1
 4236              	.LVL401:
1602:dm/dm42_fns.cc ****     bitblt24(x, 2, y+1, 3, BLT_OR, BLT_NONE);
 4237              		.loc 1 1602 0
 4238 006e 3A46     		mov	r2, r7
 4239 0070 3046     		mov	r0, r6
 4240 0072 2146     		mov	r1, r4
 4241 0074 0195     		str	r5, [sp, #4]
 4242 0076 0095     		str	r5, [sp]
 4243 0078 DFF82480 		ldr	r8, .L505+16
 4244 007c 0323     		movs	r3, #3
 4245 007e C047     		blx	r8
 4246              	.LVL402:
1603:dm/dm42_fns.cc ****   }
 4247              		.loc 1 1603 0
 4248 0080 0195     		str	r5, [sp, #4]
 4249 0082 0095     		str	r5, [sp]
 4250 0084 7A1C     		adds	r2, r7, #1
ARM GAS  /tmp/ccGYckNR.s 			page 133


 4251 0086 3046     		mov	r0, r6
 4252 0088 2146     		mov	r1, r4
 4253 008a 0323     		movs	r3, #3
 4254 008c C047     		blx	r8
 4255              	.LVL403:
 4256 008e C8E7     		b	.L498
 4257              	.L506:
 4258              		.align	2
 4259              	.L505:
 4260 0090 00000000 		.word	.LANCHOR10
 4261 0094 00000000 		.word	.LANCHOR7
 4262 0098 00000000 		.word	.LANCHOR9
 4263 009c 2D020008 		.word	134218285
 4264 00a0 25020008 		.word	134218277
 4265              		.cfi_endproc
 4266              	.LFE271:
 4268              		.section	.text._Z16thell_start_showv,"ax",%progbits
 4269              		.align	1
 4270              		.p2align 2,,3
 4271              		.global	_Z16thell_start_showv
 4272              		.syntax unified
 4273              		.thumb
 4274              		.thumb_func
 4275              		.fpu fpv4-sp-d16
 4277              	_Z16thell_start_showv:
 4278              	.LFB272:
1617:dm/dm42_fns.cc ****   DBGTHELL("thell_start_show\n");
 4279              		.loc 1 1617 0
 4280              		.cfi_startproc
 4281              		@ args = 0, pretend = 0, frame = 0
 4282              		@ frame_needed = 0, uses_anonymous_args = 0
 4283              		@ link register save eliminated.
1619:dm/dm42_fns.cc **** }
 4284              		.loc 1 1619 0
 4285 0000 014B     		ldr	r3, .L508
 4286 0002 0122     		movs	r2, #1
 4287 0004 1A70     		strb	r2, [r3]
 4288 0006 7047     		bx	lr
 4289              	.L509:
 4290              		.align	2
 4291              	.L508:
 4292 0008 00000000 		.word	.LANCHOR16
 4293              		.cfi_endproc
 4294              	.LFE272:
 4296              		.section	.text._Z19thell_clear_displayv,"ax",%progbits
 4297              		.align	1
 4298              		.p2align 2,,3
 4299              		.global	_Z19thell_clear_displayv
 4300              		.syntax unified
 4301              		.thumb
 4302              		.thumb_func
 4303              		.fpu fpv4-sp-d16
 4305              	_Z19thell_clear_displayv:
 4306              	.LFB273:
1622:dm/dm42_fns.cc ****   clear_tlcd_row(0);
 4307              		.loc 1 1622 0
 4308              		.cfi_startproc
ARM GAS  /tmp/ccGYckNR.s 			page 134


 4309              		@ args = 0, pretend = 0, frame = 0
 4310              		@ frame_needed = 0, uses_anonymous_args = 0
 4311 0000 08B5     		push	{r3, lr}
 4312              		.cfi_def_cfa_offset 8
 4313              		.cfi_offset 3, -8
 4314              		.cfi_offset 14, -4
1623:dm/dm42_fns.cc ****   clear_tlcd_row(1);
 4315              		.loc 1 1623 0
 4316 0002 0020     		movs	r0, #0
 4317 0004 FFF7FEFF 		bl	clear_tlcd_row
 4318              	.LVL404:
1624:dm/dm42_fns.cc **** }
 4319              		.loc 1 1624 0
 4320 0008 0120     		movs	r0, #1
1625:dm/dm42_fns.cc **** 
 4321              		.loc 1 1625 0
 4322 000a BDE80840 		pop	{r3, lr}
 4323              		.cfi_restore 14
 4324              		.cfi_restore 3
 4325              		.cfi_def_cfa_offset 0
1624:dm/dm42_fns.cc **** }
 4326              		.loc 1 1624 0
 4327 000e FFF7FEBF 		b	clear_tlcd_row
 4328              	.LVL405:
 4329              		.cfi_endproc
 4330              	.LFE273:
 4332 0012 00BF     		.section	.text._Z15thell_clear_rowi,"ax",%progbits
 4333              		.align	1
 4334              		.p2align 2,,3
 4335              		.global	_Z15thell_clear_rowi
 4336              		.syntax unified
 4337              		.thumb
 4338              		.thumb_func
 4339              		.fpu fpv4-sp-d16
 4341              	_Z15thell_clear_rowi:
 4342              	.LFB274:
1629:dm/dm42_fns.cc ****   clear_tlcd_row(row);
 4343              		.loc 1 1629 0
 4344              		.cfi_startproc
 4345              		@ args = 0, pretend = 0, frame = 0
 4346              		@ frame_needed = 0, uses_anonymous_args = 0
 4347              		@ link register save eliminated.
 4348              	.LVL406:
1630:dm/dm42_fns.cc **** }
 4349              		.loc 1 1630 0
 4350 0000 FFF7FEBF 		b	clear_tlcd_row
 4351              	.LVL407:
 4352              		.cfi_endproc
 4353              	.LFE274:
 4355              		.section	.text.set_disp_main_menu,"ax",%progbits
 4356              		.align	1
 4357              		.p2align 2,,3
 4358              		.global	set_disp_main_menu
 4359              		.syntax unified
 4360              		.thumb
 4361              		.thumb_func
 4362              		.fpu fpv4-sp-d16
ARM GAS  /tmp/ccGYckNR.s 			page 135


 4364              	set_disp_main_menu:
 4365              	.LFB277:
1664:dm/dm42_fns.cc ****   SETBY_PS(val, PERM_MAIN_MENU);
 4366              		.loc 1 1664 0
 4367              		.cfi_startproc
 4368              		@ args = 0, pretend = 0, frame = 0
 4369              		@ frame_needed = 0, uses_anonymous_args = 0
 4370              		@ link register save eliminated.
 4371              	.LVL408:
 4372              	.LBB419:
 4373              	.LBB420:
1665:dm/dm42_fns.cc **** }
 4374              		.loc 1 1665 0
 4375 0000 054A     		ldr	r2, .L517
 4376 0002 1368     		ldr	r3, [r2]
 4377              	.LBE420:
 4378              	.LBE419:
 4379 0004 18B9     		cbnz	r0, .L516
1665:dm/dm42_fns.cc **** }
 4380              		.loc 1 1665 0 is_stmt 0 discriminator 2
 4381 0006 23F48073 		bic	r3, r3, #256
 4382 000a 1360     		str	r3, [r2]
 4383 000c 7047     		bx	lr
 4384              	.L516:
 4385              	.LVL409:
 4386              	.LBB422:
 4387              	.LBB421:
1665:dm/dm42_fns.cc **** }
 4388              		.loc 1 1665 0
 4389 000e 43F48073 		orr	r3, r3, #256
 4390 0012 1360     		str	r3, [r2]
 4391 0014 7047     		bx	lr
 4392              	.L518:
 4393 0016 00BF     		.align	2
 4394              	.L517:
 4395 0018 00000000 		.word	.LANCHOR8
 4396              	.LBE421:
 4397              	.LBE422:
 4398              		.cfi_endproc
 4399              	.LFE277:
 4401              		.section	.text.is_disp_main_menu,"ax",%progbits
 4402              		.align	1
 4403              		.p2align 2,,3
 4404              		.global	is_disp_main_menu
 4405              		.syntax unified
 4406              		.thumb
 4407              		.thumb_func
 4408              		.fpu fpv4-sp-d16
 4410              	is_disp_main_menu:
 4411              	.LFB278:
1668:dm/dm42_fns.cc ****   return PS(PERM_MAIN_MENU);
 4412              		.loc 1 1668 0 is_stmt 1
 4413              		.cfi_startproc
 4414              		@ args = 0, pretend = 0, frame = 0
 4415              		@ frame_needed = 0, uses_anonymous_args = 0
 4416              		@ link register save eliminated.
1669:dm/dm42_fns.cc **** }
ARM GAS  /tmp/ccGYckNR.s 			page 136


 4417              		.loc 1 1669 0
 4418 0000 024B     		ldr	r3, .L520
 4419 0002 1868     		ldr	r0, [r3]
1670:dm/dm42_fns.cc **** 
 4420              		.loc 1 1670 0
 4421 0004 00F48070 		and	r0, r0, #256
 4422 0008 7047     		bx	lr
 4423              	.L521:
 4424 000a 00BF     		.align	2
 4425              	.L520:
 4426 000c 00000000 		.word	.LANCHOR8
 4427              		.cfi_endproc
 4428              	.LFE278:
 4430              		.section	.text.get_disp_date_sep,"ax",%progbits
 4431              		.align	1
 4432              		.p2align 2,,3
 4433              		.global	get_disp_date_sep
 4434              		.syntax unified
 4435              		.thumb
 4436              		.thumb_func
 4437              		.fpu fpv4-sp-d16
 4439              	get_disp_date_sep:
 4440              	.LFB279:
1682:dm/dm42_fns.cc ****   int ix = is_disp(DISP_DATE_SEP);
 4441              		.loc 1 1682 0
 4442              		.cfi_startproc
 4443              		@ args = 0, pretend = 0, frame = 0
 4444              		@ frame_needed = 0, uses_anonymous_args = 0
 4445              	.LVL410:
 4446 0000 08B5     		push	{r3, lr}
 4447              		.cfi_def_cfa_offset 8
 4448              		.cfi_offset 3, -8
 4449              		.cfi_offset 14, -4
 4450              	.LBB423:
 4451              	.LBB424:
 4452 0002 FFF7FEFF 		bl	is_disp.part.6
 4453              	.LVL411:
 4454              	.LBE424:
 4455              	.LBE423:
1684:dm/dm42_fns.cc **** }
 4456              		.loc 1 1684 0
 4457 0006 014B     		ldr	r3, .L524
1685:dm/dm42_fns.cc **** 
 4458              		.loc 1 1685 0
 4459 0008 185C     		ldrb	r0, [r3, r0]	@ zero_extendqisi2
 4460 000a 08BD     		pop	{r3, pc}
 4461              	.L525:
 4462              		.align	2
 4463              	.L524:
 4464 000c 00000000 		.word	.LANCHOR23
 4465              		.cfi_endproc
 4466              	.LFE279:
 4468              		.section	.text.toggle_disp,"ax",%progbits
 4469              		.align	1
 4470              		.p2align 2,,3
 4471              		.global	toggle_disp
 4472              		.syntax unified
ARM GAS  /tmp/ccGYckNR.s 			page 137


 4473              		.thumb
 4474              		.thumb_func
 4475              		.fpu fpv4-sp-d16
 4477              	toggle_disp:
 4478              	.LFB280:
1688:dm/dm42_fns.cc ****   switch (what) {
 4479              		.loc 1 1688 0
 4480              		.cfi_startproc
 4481              		@ args = 0, pretend = 0, frame = 0
 4482              		@ frame_needed = 0, uses_anonymous_args = 0
 4483              	.LVL412:
 4484              	.LBB425:
1689:dm/dm42_fns.cc ****     case DISP_STATFN: {
 4485              		.loc 1 1689 0
 4486 0000 0138     		subs	r0, r0, #1
 4487              	.LVL413:
 4488              	.LBE425:
1688:dm/dm42_fns.cc ****   switch (what) {
 4489              		.loc 1 1688 0
 4490 0002 08B5     		push	{r3, lr}
 4491              		.cfi_def_cfa_offset 8
 4492              		.cfi_offset 3, -8
 4493              		.cfi_offset 14, -4
 4494              	.LBB438:
1689:dm/dm42_fns.cc ****     case DISP_STATFN: {
 4495              		.loc 1 1689 0
 4496 0004 0628     		cmp	r0, #6
 4497 0006 0ED8     		bhi	.L526
 4498 0008 DFE800F0 		tbb	[pc, r0]
 4499              	.L529:
 4500 000c 0E       		.byte	(.L528-.L529)/2
 4501 000d 1A       		.byte	(.L530-.L529)/2
 4502 000e 26       		.byte	(.L531-.L529)/2
 4503 000f 32       		.byte	(.L532-.L529)/2
 4504 0010 46       		.byte	(.L533-.L529)/2
 4505 0011 52       		.byte	(.L534-.L529)/2
 4506 0012 04       		.byte	(.L535-.L529)/2
 4507 0013 00       		.p2align 1
 4508              	.L535:
 4509              	.LBB426:
 4510              	.LBB427:
1723:dm/dm42_fns.cc ****         SETBY_PS(newval, DISP_VOLTAGE);
 4511              		.loc 1 1723 0
 4512 0014 354B     		ldr	r3, .L550
 4513 0016 1A68     		ldr	r2, [r3]
 4514              	.LVL414:
1724:dm/dm42_fns.cc ****       }
 4515              		.loc 1 1724 0
 4516 0018 12F0010F 		tst	r2, #1
 4517 001c 1A68     		ldr	r2, [r3]
 4518              	.LVL415:
 4519 001e 5ED0     		beq	.L548
1724:dm/dm42_fns.cc ****       }
 4520              		.loc 1 1724 0 is_stmt 0 discriminator 2
 4521 0020 22F00102 		bic	r2, r2, #1
 4522 0024 1A60     		str	r2, [r3]
 4523              	.L526:
ARM GAS  /tmp/ccGYckNR.s 			page 138


 4524 0026 08BD     		pop	{r3, pc}
 4525              	.L528:
 4526              	.LBE427:
 4527              	.LBB428:
1691:dm/dm42_fns.cc ****         SETBY_PS(newval, DISP_STATFN);
 4528              		.loc 1 1691 0 is_stmt 1
 4529 0028 304B     		ldr	r3, .L550
 4530 002a 1A68     		ldr	r2, [r3]
 4531              	.LVL416:
1692:dm/dm42_fns.cc ****       }
 4532              		.loc 1 1692 0
 4533 002c 12F0020F 		tst	r2, #2
 4534 0030 1A68     		ldr	r2, [r3]
 4535              	.LVL417:
 4536 0032 0CBF     		ite	eq
 4537 0034 42F00202 		orreq	r2, r2, #2
 4538 0038 22F00202 		bicne	r2, r2, #2
 4539 003c 1A60     		str	r2, [r3]
 4540 003e 08BD     		pop	{r3, pc}
 4541              	.L530:
 4542              	.LBE428:
 4543              	.LBB429:
1696:dm/dm42_fns.cc ****         SETBY_PS(newval, DISP_DOW);
 4544              		.loc 1 1696 0
 4545 0040 2A4B     		ldr	r3, .L550
 4546 0042 1A68     		ldr	r2, [r3]
 4547              	.LVL418:
1697:dm/dm42_fns.cc ****       }
 4548              		.loc 1 1697 0
 4549 0044 12F0040F 		tst	r2, #4
 4550 0048 1A68     		ldr	r2, [r3]
 4551              	.LVL419:
 4552 004a 0CBF     		ite	eq
 4553 004c 42F00402 		orreq	r2, r2, #4
 4554 0050 22F00402 		bicne	r2, r2, #4
 4555 0054 1A60     		str	r2, [r3]
 4556 0056 08BD     		pop	{r3, pc}
 4557              	.L531:
 4558              	.LBE429:
 4559              	.LBB430:
1701:dm/dm42_fns.cc ****         SETBY_PS(newval, DISP_DATE);
 4560              		.loc 1 1701 0
 4561 0058 244B     		ldr	r3, .L550
 4562 005a 1A68     		ldr	r2, [r3]
 4563              	.LVL420:
1702:dm/dm42_fns.cc ****       }
 4564              		.loc 1 1702 0
 4565 005c 12F0080F 		tst	r2, #8
 4566 0060 1A68     		ldr	r2, [r3]
 4567              	.LVL421:
 4568 0062 0CBF     		ite	eq
 4569 0064 42F00802 		orreq	r2, r2, #8
 4570 0068 22F00802 		bicne	r2, r2, #8
 4571 006c 1A60     		str	r2, [r3]
 4572 006e 08BD     		pop	{r3, pc}
 4573              	.L532:
 4574              	.LVL422:
ARM GAS  /tmp/ccGYckNR.s 			page 139


 4575              	.LBE430:
 4576              	.LBB431:
 4577              	.LBB432:
 4578              	.LBB433:
 4579 0070 FFF7FEFF 		bl	is_disp.part.6
 4580              	.LVL423:
 4581              	.LBE433:
 4582              	.LBE432:
1706:dm/dm42_fns.cc ****         if (newval >= MAX_DATE_SEPARATORS) newval=0;
 4583              		.loc 1 1706 0
 4584 0074 0130     		adds	r0, r0, #1
 4585              	.LVL424:
1707:dm/dm42_fns.cc ****         SETBY_PS(newval&1, DISP_DATE_SEP0);
 4586              		.loc 1 1707 0
 4587 0076 0228     		cmp	r0, #2
 4588 0078 2ADC     		bgt	.L546
1708:dm/dm42_fns.cc ****         SETBY_PS(newval&2, DISP_DATE_SEP1);
 4589              		.loc 1 1708 0
 4590 007a C307     		lsls	r3, r0, #31
 4591 007c 33D5     		bpl	.L549
1708:dm/dm42_fns.cc ****         SETBY_PS(newval&2, DISP_DATE_SEP1);
 4592              		.loc 1 1708 0 is_stmt 0 discriminator 1
 4593 007e 1B4B     		ldr	r3, .L550
 4594 0080 1A68     		ldr	r2, [r3]
 4595 0082 42F01002 		orr	r2, r2, #16
 4596 0086 00F00200 		and	r0, r0, #2
 4597              	.LVL425:
 4598 008a 1A60     		str	r2, [r3]
 4599              	.L541:
1709:dm/dm42_fns.cc ****       }
 4600              		.loc 1 1709 0 is_stmt 1
 4601 008c 1A68     		ldr	r2, [r3]
 4602 008e D8B1     		cbz	r0, .L542
1709:dm/dm42_fns.cc ****       }
 4603              		.loc 1 1709 0 is_stmt 0 discriminator 1
 4604 0090 42F02002 		orr	r2, r2, #32
 4605 0094 1A60     		str	r2, [r3]
 4606 0096 08BD     		pop	{r3, pc}
 4607              	.L533:
 4608              	.LBE431:
 4609              	.LBB434:
1713:dm/dm42_fns.cc ****         SETBY_PS(newval, DISP_SHORTMON);
 4610              		.loc 1 1713 0 is_stmt 1
 4611 0098 144B     		ldr	r3, .L550
 4612 009a 1A68     		ldr	r2, [r3]
 4613              	.LVL426:
1714:dm/dm42_fns.cc ****       }
 4614              		.loc 1 1714 0
 4615 009c 12F0400F 		tst	r2, #64
 4616 00a0 1A68     		ldr	r2, [r3]
 4617              	.LVL427:
 4618 00a2 0CBF     		ite	eq
 4619 00a4 42F04002 		orreq	r2, r2, #64
 4620 00a8 22F04002 		bicne	r2, r2, #64
 4621 00ac 1A60     		str	r2, [r3]
 4622 00ae 08BD     		pop	{r3, pc}
 4623              	.L534:
ARM GAS  /tmp/ccGYckNR.s 			page 140


 4624              	.LBE434:
 4625              	.LBB435:
1718:dm/dm42_fns.cc ****         SETBY_PS(newval, DISP_TIME);
 4626              		.loc 1 1718 0
 4627 00b0 0E4B     		ldr	r3, .L550
 4628 00b2 1A68     		ldr	r2, [r3]
 4629              	.LVL428:
1719:dm/dm42_fns.cc ****       }
 4630              		.loc 1 1719 0
 4631 00b4 12F0800F 		tst	r2, #128
 4632 00b8 1A68     		ldr	r2, [r3]
 4633              	.LVL429:
 4634 00ba 0CBF     		ite	eq
 4635 00bc 42F08002 		orreq	r2, r2, #128
 4636 00c0 22F08002 		bicne	r2, r2, #128
 4637 00c4 1A60     		str	r2, [r3]
 4638 00c6 08BD     		pop	{r3, pc}
 4639              	.L542:
 4640              	.LBE435:
 4641              	.LBB436:
1709:dm/dm42_fns.cc ****       }
 4642              		.loc 1 1709 0 discriminator 2
 4643 00c8 22F02002 		bic	r2, r2, #32
 4644 00cc 1A60     		str	r2, [r3]
 4645 00ce 08BD     		pop	{r3, pc}
 4646              	.LVL430:
 4647              	.L546:
 4648 00d0 0020     		movs	r0, #0
 4649              	.LVL431:
 4650              	.L539:
1708:dm/dm42_fns.cc ****         SETBY_PS(newval&2, DISP_DATE_SEP1);
 4651              		.loc 1 1708 0 discriminator 2
 4652 00d2 064B     		ldr	r3, .L550
 4653 00d4 1A68     		ldr	r2, [r3]
 4654 00d6 22F01002 		bic	r2, r2, #16
 4655 00da 1A60     		str	r2, [r3]
 4656 00dc D6E7     		b	.L541
 4657              	.L548:
 4658              	.LBE436:
 4659              	.LBB437:
1724:dm/dm42_fns.cc ****       }
 4660              		.loc 1 1724 0 discriminator 1
 4661 00de 42F00102 		orr	r2, r2, #1
 4662 00e2 1A60     		str	r2, [r3]
 4663 00e4 08BD     		pop	{r3, pc}
 4664              	.LVL432:
 4665              	.L549:
 4666 00e6 00F00200 		and	r0, r0, #2
 4667              	.LVL433:
 4668 00ea F2E7     		b	.L539
 4669              	.L551:
 4670              		.align	2
 4671              	.L550:
 4672 00ec 00000000 		.word	.LANCHOR8
 4673              	.LBE437:
 4674              	.LBE426:
 4675              	.LBE438:
ARM GAS  /tmp/ccGYckNR.s 			page 141


 4676              		.cfi_endproc
 4677              	.LFE280:
 4679              		.section	.text.is_disp,"ax",%progbits
 4680              		.align	1
 4681              		.p2align 2,,3
 4682              		.global	is_disp
 4683              		.syntax unified
 4684              		.thumb
 4685              		.thumb_func
 4686              		.fpu fpv4-sp-d16
 4688              	is_disp:
 4689              	.LFB281:
1730:dm/dm42_fns.cc ****   int val = 0;
 4690              		.loc 1 1730 0
 4691              		.cfi_startproc
 4692              		@ args = 0, pretend = 0, frame = 0
 4693              		@ frame_needed = 0, uses_anonymous_args = 0
 4694              		@ link register save eliminated.
 4695              	.LVL434:
1733:dm/dm42_fns.cc ****     case DISP_STATFN:   val = PS(DISP_STATFN);   break;
 4696              		.loc 1 1733 0
 4697 0000 0138     		subs	r0, r0, #1
 4698              	.LVL435:
 4699 0002 0628     		cmp	r0, #6
 4700 0004 25D8     		bhi	.L562
 4701 0006 DFE800F0 		tbb	[pc, r0]
 4702              	.L555:
 4703 000a 09       		.byte	(.L554-.L555)/2
 4704 000b 0E       		.byte	(.L556-.L555)/2
 4705 000c 13       		.byte	(.L557-.L555)/2
 4706 000d 18       		.byte	(.L558-.L555)/2
 4707 000e 1A       		.byte	(.L559-.L555)/2
 4708 000f 1F       		.byte	(.L560-.L555)/2
 4709 0010 04       		.byte	(.L561-.L555)/2
 4710 0011 00       		.p2align 1
 4711              	.L561:
1739:dm/dm42_fns.cc **** 
 4712              		.loc 1 1739 0
 4713 0012 114B     		ldr	r3, .L563
 4714 0014 1868     		ldr	r0, [r3]
 4715              	.LVL436:
 4716 0016 00F00100 		and	r0, r0, #1
 4717              	.LVL437:
 4718 001a 7047     		bx	lr
 4719              	.LVL438:
 4720              	.L554:
1734:dm/dm42_fns.cc ****     case DISP_DOW:      val = PS(DISP_DOW);      break;
 4721              		.loc 1 1734 0
 4722 001c 0E4B     		ldr	r3, .L563
 4723 001e 1868     		ldr	r0, [r3]
 4724 0020 00F00200 		and	r0, r0, #2
 4725              	.LVL439:
 4726 0024 7047     		bx	lr
 4727              	.LVL440:
 4728              	.L556:
1735:dm/dm42_fns.cc ****     case DISP_DATE:     val = PS(DISP_DATE);     break;
 4729              		.loc 1 1735 0
ARM GAS  /tmp/ccGYckNR.s 			page 142


 4730 0026 0C4B     		ldr	r3, .L563
 4731 0028 1868     		ldr	r0, [r3]
 4732 002a 00F00400 		and	r0, r0, #4
 4733              	.LVL441:
 4734 002e 7047     		bx	lr
 4735              	.LVL442:
 4736              	.L557:
1736:dm/dm42_fns.cc ****     case DISP_SHORTMON: val = PS(DISP_SHORTMON); break;
 4737              		.loc 1 1736 0
 4738 0030 094B     		ldr	r3, .L563
 4739 0032 1868     		ldr	r0, [r3]
 4740 0034 00F00800 		and	r0, r0, #8
 4741              	.LVL443:
 4742 0038 7047     		bx	lr
 4743              	.LVL444:
 4744              	.L558:
 4745 003a FFF7FEBF 		b	is_disp.part.6
 4746              	.LVL445:
 4747              	.L559:
1737:dm/dm42_fns.cc ****     case DISP_TIME:     val = PS(DISP_TIME);     break;
 4748              		.loc 1 1737 0
 4749 003e 064B     		ldr	r3, .L563
 4750 0040 1868     		ldr	r0, [r3]
 4751 0042 00F04000 		and	r0, r0, #64
 4752              	.LVL446:
 4753 0046 7047     		bx	lr
 4754              	.LVL447:
 4755              	.L560:
1738:dm/dm42_fns.cc ****     case DISP_VOLTAGE:  val = PS(DISP_VOLTAGE);  break;
 4756              		.loc 1 1738 0
 4757 0048 034B     		ldr	r3, .L563
 4758 004a 1868     		ldr	r0, [r3]
 4759 004c 00F08000 		and	r0, r0, #128
 4760              	.LVL448:
 4761 0050 7047     		bx	lr
 4762              	.LVL449:
 4763              	.L562:
1731:dm/dm42_fns.cc **** 
 4764              		.loc 1 1731 0
 4765 0052 0020     		movs	r0, #0
1748:dm/dm42_fns.cc **** 
 4766              		.loc 1 1748 0
 4767 0054 7047     		bx	lr
 4768              	.L564:
 4769 0056 00BF     		.align	2
 4770              	.L563:
 4771 0058 00000000 		.word	.LANCHOR8
 4772              		.cfi_endproc
 4773              	.LFE281:
 4775              		.section	.text.get_reg_font_offset,"ax",%progbits
 4776              		.align	1
 4777              		.p2align 2,,3
 4778              		.global	get_reg_font_offset
 4779              		.syntax unified
 4780              		.thumb
 4781              		.thumb_func
 4782              		.fpu fpv4-sp-d16
ARM GAS  /tmp/ccGYckNR.s 			page 143


 4784              	get_reg_font_offset:
 4785              	.LFB282:
1761:dm/dm42_fns.cc ****   int offs = (reg_font_offset >> (line_reg_nr*REG_OFFS_BITS)) & REG_OFFS_MASK;
 4786              		.loc 1 1761 0
 4787              		.cfi_startproc
 4788              		@ args = 0, pretend = 0, frame = 0
 4789              		@ frame_needed = 0, uses_anonymous_args = 0
 4790              		@ link register save eliminated.
 4791              	.LVL450:
1762:dm/dm42_fns.cc ****   return (offs < REG_OFFS_HALF) ? offs : offs-REG_OFFS_RANGE;
 4792              		.loc 1 1762 0
 4793 0000 054B     		ldr	r3, .L567
 4794 0002 1B68     		ldr	r3, [r3]
 4795 0004 8000     		lsls	r0, r0, #2
 4796              	.LVL451:
 4797 0006 23FA00F0 		lsr	r0, r3, r0
 4798 000a 00F00F00 		and	r0, r0, #15
 4799              	.LVL452:
1763:dm/dm42_fns.cc **** }
 4800              		.loc 1 1763 0
 4801 000e 0728     		cmp	r0, #7
 4802 0010 C8BF     		it	gt
 4803 0012 1038     		subgt	r0, r0, #16
 4804              	.LVL453:
1764:dm/dm42_fns.cc **** 
 4805              		.loc 1 1764 0
 4806 0014 7047     		bx	lr
 4807              	.L568:
 4808 0016 00BF     		.align	2
 4809              	.L567:
 4810 0018 00000000 		.word	.LANCHOR24
 4811              		.cfi_endproc
 4812              	.LFE282:
 4814              		.section	.text.inc_reg_font_offset,"ax",%progbits
 4815              		.align	1
 4816              		.p2align 2,,3
 4817              		.global	inc_reg_font_offset
 4818              		.syntax unified
 4819              		.thumb
 4820              		.thumb_func
 4821              		.fpu fpv4-sp-d16
 4823              	inc_reg_font_offset:
 4824              	.LFB283:
1766:dm/dm42_fns.cc ****   int offs = get_reg_font_offset(line_reg_nr)+1;
 4825              		.loc 1 1766 0
 4826              		.cfi_startproc
 4827              		@ args = 0, pretend = 0, frame = 0
 4828              		@ frame_needed = 0, uses_anonymous_args = 0
 4829              		@ link register save eliminated.
 4830              	.LVL454:
 4831 0000 30B4     		push	{r4, r5}
 4832              		.cfi_def_cfa_offset 8
 4833              		.cfi_offset 4, -8
 4834              		.cfi_offset 5, -4
 4835              	.LBB439:
 4836              	.LBB440:
1762:dm/dm42_fns.cc ****   return (offs < REG_OFFS_HALF) ? offs : offs-REG_OFFS_RANGE;
ARM GAS  /tmp/ccGYckNR.s 			page 144


 4837              		.loc 1 1762 0
 4838 0002 114D     		ldr	r5, .L585
 4839 0004 2B68     		ldr	r3, [r5]
 4840 0006 8100     		lsls	r1, r0, #2
 4841 0008 23FA01F0 		lsr	r0, r3, r1
 4842              	.LVL455:
 4843 000c 00F00F00 		and	r0, r0, #15
 4844              	.LVL456:
1763:dm/dm42_fns.cc **** }
 4845              		.loc 1 1763 0
 4846 0010 0728     		cmp	r0, #7
 4847 0012 C8BF     		it	gt
 4848 0014 1038     		subgt	r0, r0, #16
 4849              	.LVL457:
 4850              	.LBE440:
 4851              	.LBE439:
1767:dm/dm42_fns.cc ****   if (offs > MAX_REG_OFFS) offs = -MAX_REG_OFFS;
 4852              		.loc 1 1767 0
 4853 0016 0130     		adds	r0, r0, #1
 4854              	.LVL458:
1768:dm/dm42_fns.cc ****   set_reg_font_offset(line_reg_nr, offs);
 4855              		.loc 1 1768 0
 4856 0018 0528     		cmp	r0, #5
 4857 001a 0FDC     		bgt	.L583
 4858              	.LVL459:
 4859              	.LBB441:
 4860              	.LBB442:
1777:dm/dm42_fns.cc **** 
 4861              		.loc 1 1777 0
 4862 001c 0F24     		movs	r4, #15
1779:dm/dm42_fns.cc ****     if ( offs > REG_OFFS_MAX ) offs = REG_OFFS_MAX;
 4863              		.loc 1 1779 0
 4864 001e 0028     		cmp	r0, #0
1777:dm/dm42_fns.cc **** 
 4865              		.loc 1 1777 0
 4866 0020 04FA01F4 		lsl	r4, r4, r1
 4867              	.LVL460:
1779:dm/dm42_fns.cc ****     if ( offs > REG_OFFS_MAX ) offs = REG_OFFS_MAX;
 4868              		.loc 1 1779 0
 4869 0024 08DA     		bge	.L584
 4870 0026 00F00F02 		and	r2, r0, #15
 4871              	.LVL461:
 4872              	.L573:
1787:dm/dm42_fns.cc **** 
 4873              		.loc 1 1787 0
 4874 002a 23EA0403 		bic	r3, r3, r4
 4875 002e 8A40     		lsls	r2, r2, r1
 4876              	.LVL462:
 4877 0030 1343     		orrs	r3, r3, r2
 4878 0032 2B60     		str	r3, [r5]
 4879              	.LVL463:
 4880              	.LBE442:
 4881              	.LBE441:
1771:dm/dm42_fns.cc **** 
 4882              		.loc 1 1771 0
 4883 0034 30BC     		pop	{r4, r5}
 4884              		.cfi_remember_state
ARM GAS  /tmp/ccGYckNR.s 			page 145


 4885              		.cfi_restore 5
 4886              		.cfi_restore 4
 4887              		.cfi_def_cfa_offset 0
 4888 0036 7047     		bx	lr
 4889              	.LVL464:
 4890              	.L584:
 4891              		.cfi_restore_state
 4892              	.LBB444:
 4893              	.LBB443:
1781:dm/dm42_fns.cc ****   } else {
 4894              		.loc 1 1781 0
 4895 0038 0246     		mov	r2, r0
 4896              	.LVL465:
 4897 003a F6E7     		b	.L573
 4898              	.LVL466:
 4899              	.L583:
1777:dm/dm42_fns.cc **** 
 4900              		.loc 1 1777 0
 4901 003c 0F24     		movs	r4, #15
 4902 003e 8C40     		lsls	r4, r4, r1
 4903              	.LVL467:
 4904 0040 0B22     		movs	r2, #11
 4905              	.LBE443:
 4906              	.LBE444:
1768:dm/dm42_fns.cc ****   set_reg_font_offset(line_reg_nr, offs);
 4907              		.loc 1 1768 0
 4908 0042 6FF00400 		mvn	r0, #4
 4909 0046 F0E7     		b	.L573
 4910              	.L586:
 4911              		.align	2
 4912              	.L585:
 4913 0048 00000000 		.word	.LANCHOR24
 4914              		.cfi_endproc
 4915              	.LFE283:
 4917              		.section	.text.set_reg_font_offset,"ax",%progbits
 4918              		.align	1
 4919              		.p2align 2,,3
 4920              		.global	set_reg_font_offset
 4921              		.syntax unified
 4922              		.thumb
 4923              		.thumb_func
 4924              		.fpu fpv4-sp-d16
 4926              	set_reg_font_offset:
 4927              	.LFB284:
1774:dm/dm42_fns.cc ****   uint32_t val = 0;
 4928              		.loc 1 1774 0
 4929              		.cfi_startproc
 4930              		@ args = 0, pretend = 0, frame = 0
 4931              		@ frame_needed = 0, uses_anonymous_args = 0
 4932              		@ link register save eliminated.
 4933              	.LVL468:
 4934 0000 30B4     		push	{r4, r5}
 4935              		.cfi_def_cfa_offset 8
 4936              		.cfi_offset 4, -8
 4937              		.cfi_offset 5, -4
1777:dm/dm42_fns.cc **** 
 4938              		.loc 1 1777 0
ARM GAS  /tmp/ccGYckNR.s 			page 146


 4939 0002 0F23     		movs	r3, #15
1776:dm/dm42_fns.cc ****   uint32_t msk = REG_OFFS_MASK << shift;
 4940              		.loc 1 1776 0
 4941 0004 8500     		lsls	r5, r0, #2
 4942              	.LVL469:
1779:dm/dm42_fns.cc ****     if ( offs > REG_OFFS_MAX ) offs = REG_OFFS_MAX;
 4943              		.loc 1 1779 0
 4944 0006 081E     		subs	r0, r1, #0
 4945              	.LVL470:
1777:dm/dm42_fns.cc **** 
 4946              		.loc 1 1777 0
 4947 0008 03FA05F4 		lsl	r4, r3, r5
 4948              	.LVL471:
1779:dm/dm42_fns.cc ****     if ( offs > REG_OFFS_MAX ) offs = REG_OFFS_MAX;
 4949              		.loc 1 1779 0
 4950 000c 0CDB     		blt	.L588
 4951 000e 0728     		cmp	r0, #7
 4952 0010 A8BF     		it	ge
 4953 0012 0720     		movge	r0, #7
 4954              	.LVL472:
1781:dm/dm42_fns.cc ****   } else {
 4955              		.loc 1 1781 0
 4956 0014 0246     		mov	r2, r0
 4957              	.LVL473:
 4958              	.L589:
1787:dm/dm42_fns.cc **** 
 4959              		.loc 1 1787 0
 4960 0016 0849     		ldr	r1, .L591
 4961 0018 0B68     		ldr	r3, [r1]
 4962 001a AA40     		lsls	r2, r2, r5
 4963              	.LVL474:
 4964 001c 23EA0403 		bic	r3, r3, r4
 4965 0020 1343     		orrs	r3, r3, r2
 4966 0022 0B60     		str	r3, [r1]
1790:dm/dm42_fns.cc **** 
 4967              		.loc 1 1790 0
 4968 0024 30BC     		pop	{r4, r5}
 4969              		.cfi_remember_state
 4970              		.cfi_restore 5
 4971              		.cfi_restore 4
 4972              		.cfi_def_cfa_offset 0
 4973              	.LVL475:
 4974 0026 7047     		bx	lr
 4975              	.LVL476:
 4976              	.L588:
 4977              		.cfi_restore_state
 4978 0028 6FF00701 		mvn	r1, #7
 4979 002c 8842     		cmp	r0, r1
 4980 002e B8BF     		it	lt
 4981 0030 0846     		movlt	r0, r1
 4982              	.LVL477:
1784:dm/dm42_fns.cc ****   }
 4983              		.loc 1 1784 0
 4984 0032 00F00F02 		and	r2, r0, #15
 4985              	.LVL478:
 4986 0036 EEE7     		b	.L589
 4987              	.L592:
ARM GAS  /tmp/ccGYckNR.s 			page 147


 4988              		.align	2
 4989              	.L591:
 4990 0038 00000000 		.word	.LANCHOR24
 4991              		.cfi_endproc
 4992              	.LFE284:
 4994              		.section	.text.set_stack_layout,"ax",%progbits
 4995              		.align	1
 4996              		.p2align 2,,3
 4997              		.global	set_stack_layout
 4998              		.syntax unified
 4999              		.thumb
 5000              		.thumb_func
 5001              		.fpu fpv4-sp-d16
 5003              	set_stack_layout:
 5004              	.LFB285:
1794:dm/dm42_fns.cc ****   stack_layout = layout;
 5005              		.loc 1 1794 0
 5006              		.cfi_startproc
 5007              		@ args = 0, pretend = 0, frame = 0
 5008              		@ frame_needed = 0, uses_anonymous_args = 0
 5009              		@ link register save eliminated.
 5010              	.LVL479:
1795:dm/dm42_fns.cc **** }
 5011              		.loc 1 1795 0
 5012 0000 014B     		ldr	r3, .L594
 5013 0002 1860     		str	r0, [r3]
 5014 0004 7047     		bx	lr
 5015              	.L595:
 5016 0006 00BF     		.align	2
 5017              	.L594:
 5018 0008 00000000 		.word	.LANCHOR25
 5019              		.cfi_endproc
 5020              	.LFE285:
 5022              		.section	.text.get_stack_layout,"ax",%progbits
 5023              		.align	1
 5024              		.p2align 2,,3
 5025              		.global	get_stack_layout
 5026              		.syntax unified
 5027              		.thumb
 5028              		.thumb_func
 5029              		.fpu fpv4-sp-d16
 5031              	get_stack_layout:
 5032              	.LFB286:
1798:dm/dm42_fns.cc ****   return stack_layout;
 5033              		.loc 1 1798 0
 5034              		.cfi_startproc
 5035              		@ args = 0, pretend = 0, frame = 0
 5036              		@ frame_needed = 0, uses_anonymous_args = 0
 5037              		@ link register save eliminated.
1799:dm/dm42_fns.cc **** }
 5038              		.loc 1 1799 0
 5039 0000 014B     		ldr	r3, .L597
1800:dm/dm42_fns.cc **** 
 5040              		.loc 1 1800 0
 5041 0002 1868     		ldr	r0, [r3]
 5042 0004 7047     		bx	lr
 5043              	.L598:
ARM GAS  /tmp/ccGYckNR.s 			page 148


 5044 0006 00BF     		.align	2
 5045              	.L597:
 5046 0008 00000000 		.word	.LANCHOR25
 5047              		.cfi_endproc
 5048              	.LFE286:
 5050              		.section	.text.get_stack_layout_str,"ax",%progbits
 5051              		.align	1
 5052              		.p2align 2,,3
 5053              		.global	get_stack_layout_str
 5054              		.syntax unified
 5055              		.thumb
 5056              		.thumb_func
 5057              		.fpu fpv4-sp-d16
 5059              	get_stack_layout_str:
 5060              	.LFB287:
1802:dm/dm42_fns.cc ****   char * t = s;
 5061              		.loc 1 1802 0
 5062              		.cfi_startproc
 5063              		@ args = 0, pretend = 0, frame = 0
 5064              		@ frame_needed = 0, uses_anonymous_args = 0
 5065              		@ link register save eliminated.
 5066              	.LVL480:
1805:dm/dm42_fns.cc **** 
 5067              		.loc 1 1805 0
 5068 0000 CB07     		lsls	r3, r1, #31
 5069 0002 45BF     		ittet	mi
 5070 0004 4C23     		movmi	r3, #76
 5071 0006 0370     		strbmi	r3, [r0]
 5072 0008 0346     		movpl	r3, r0
 5073 000a 431C     		addmi	r3, r0, #1
 5074              	.LVL481:
1807:dm/dm42_fns.cc **** 
 5075              		.loc 1 1807 0
 5076 000c 5822     		movs	r2, #88
 5077 000e 1A70     		strb	r2, [r3]
1809:dm/dm42_fns.cc ****   if ( layout & STACK_REG_Z ) *t++ = 'Z';
 5078              		.loc 1 1809 0
 5079 0010 8A07     		lsls	r2, r1, #30
 5080 0012 45BF     		ittet	mi
 5081 0014 5922     		movmi	r2, #89
 5082 0016 5A70     		strbmi	r2, [r3, #1]
1807:dm/dm42_fns.cc **** 
 5083              		.loc 1 1807 0
 5084 0018 0133     		addpl	r3, r3, #1
 5085              	.LVL482:
1809:dm/dm42_fns.cc ****   if ( layout & STACK_REG_Z ) *t++ = 'Z';
 5086              		.loc 1 1809 0
 5087 001a 0233     		addmi	r3, r3, #2
 5088              	.LVL483:
1810:dm/dm42_fns.cc ****   if ( layout & STACK_REG_T ) *t++ = 'T';
 5089              		.loc 1 1810 0
 5090 001c 4A07     		lsls	r2, r1, #29
 5091 001e 02D5     		bpl	.L603
 5092              	.LVL484:
1810:dm/dm42_fns.cc ****   if ( layout & STACK_REG_T ) *t++ = 'T';
 5093              		.loc 1 1810 0 is_stmt 0 discriminator 1
 5094 0020 5A22     		movs	r2, #90
ARM GAS  /tmp/ccGYckNR.s 			page 149


 5095 0022 1A70     		strb	r2, [r3]
 5096 0024 0133     		adds	r3, r3, #1
 5097              	.LVL485:
 5098              	.L603:
1811:dm/dm42_fns.cc ****   if ( layout & STACK_REG_L ) *t++ = 'L';
 5099              		.loc 1 1811 0 is_stmt 1
 5100 0026 0A07     		lsls	r2, r1, #28
 5101 0028 02D5     		bpl	.L604
 5102              	.LVL486:
1811:dm/dm42_fns.cc ****   if ( layout & STACK_REG_L ) *t++ = 'L';
 5103              		.loc 1 1811 0 is_stmt 0 discriminator 1
 5104 002a 5422     		movs	r2, #84
 5105 002c 1A70     		strb	r2, [r3]
 5106 002e 0133     		adds	r3, r3, #1
 5107              	.LVL487:
 5108              	.L604:
1812:dm/dm42_fns.cc ****   if ( layout & STACK_REG_A ) *t++ = 'A';
 5109              		.loc 1 1812 0 is_stmt 1
 5110 0030 CA06     		lsls	r2, r1, #27
 5111 0032 02D5     		bpl	.L605
 5112              	.LVL488:
1812:dm/dm42_fns.cc ****   if ( layout & STACK_REG_A ) *t++ = 'A';
 5113              		.loc 1 1812 0 is_stmt 0 discriminator 1
 5114 0034 4C22     		movs	r2, #76
 5115 0036 1A70     		strb	r2, [r3]
 5116 0038 0133     		adds	r3, r3, #1
 5117              	.LVL489:
 5118              	.L605:
1813:dm/dm42_fns.cc **** 
 5119              		.loc 1 1813 0 is_stmt 1
 5120 003a 8A06     		lsls	r2, r1, #26
 5121 003c 02D5     		bpl	.L606
 5122              	.LVL490:
1813:dm/dm42_fns.cc **** 
 5123              		.loc 1 1813 0 is_stmt 0 discriminator 1
 5124 003e 4122     		movs	r2, #65
 5125 0040 1A70     		strb	r2, [r3]
 5126 0042 0133     		adds	r3, r3, #1
 5127              	.LVL491:
 5128              	.L606:
1815:dm/dm42_fns.cc ****   return s;
 5129              		.loc 1 1815 0 is_stmt 1
 5130 0044 0022     		movs	r2, #0
 5131 0046 1A70     		strb	r2, [r3]
1817:dm/dm42_fns.cc **** 
 5132              		.loc 1 1817 0
 5133 0048 7047     		bx	lr
 5134              		.cfi_endproc
 5135              	.LFE287:
 5137 004a 00BF     		.section	.text.is_print_to_file,"ax",%progbits
 5138              		.align	1
 5139              		.p2align 2,,3
 5140              		.global	is_print_to_file
 5141              		.syntax unified
 5142              		.thumb
 5143              		.thumb_func
 5144              		.fpu fpv4-sp-d16
ARM GAS  /tmp/ccGYckNR.s 			page 150


 5146              	is_print_to_file:
 5147              	.LFB288:
1831:dm/dm42_fns.cc ****   int res = 0;
 5148              		.loc 1 1831 0
 5149              		.cfi_startproc
 5150              		@ args = 0, pretend = 0, frame = 0
 5151              		@ frame_needed = 0, uses_anonymous_args = 0
 5152              		@ link register save eliminated.
 5153              	.LVL492:
1834:dm/dm42_fns.cc ****     case PRTOF_TEXT:      res = PS(PRTOF_TEXT);      break;
 5154              		.loc 1 1834 0
 5155 0000 0728     		cmp	r0, #7
 5156 0002 19D8     		bhi	.L627
 5157 0004 DFE800F0 		tbb	[pc, r0]
 5158              	.L623:
 5159 0008 13       		.byte	(.L622-.L623)/2
 5160 0009 0E       		.byte	(.L624-.L623)/2
 5161 000a 18       		.byte	(.L627-.L623)/2
 5162 000b 18       		.byte	(.L627-.L623)/2
 5163 000c 18       		.byte	(.L627-.L623)/2
 5164 000d 18       		.byte	(.L627-.L623)/2
 5165 000e 09       		.byte	(.L625-.L623)/2
 5166 000f 04       		.byte	(.L626-.L623)/2
 5167              		.p2align 1
 5168              	.L626:
1838:dm/dm42_fns.cc ****   }
 5169              		.loc 1 1838 0
 5170 0010 0A4B     		ldr	r3, .L628
 5171 0012 1868     		ldr	r0, [r3]
 5172              	.LVL493:
 5173 0014 00F40060 		and	r0, r0, #2048
 5174              	.LVL494:
 5175 0018 7047     		bx	lr
 5176              	.LVL495:
 5177              	.L625:
1837:dm/dm42_fns.cc ****     case PRTOF_NOIR:      res = PS(PRTOF_NOIR);      break;
 5178              		.loc 1 1837 0
 5179 001a 084B     		ldr	r3, .L628
 5180 001c 1868     		ldr	r0, [r3]
 5181              	.LVL496:
 5182 001e 00F48050 		and	r0, r0, #4096
 5183              	.LVL497:
 5184 0022 7047     		bx	lr
 5185              	.LVL498:
 5186              	.L624:
1836:dm/dm42_fns.cc ****     case PRTOF_GR_IN_TXT: res = PS(PRTOF_GR_IN_TXT); break;
 5187              		.loc 1 1836 0
 5188 0024 054B     		ldr	r3, .L628
 5189 0026 1868     		ldr	r0, [r3]
 5190              	.LVL499:
 5191 0028 00F48060 		and	r0, r0, #1024
 5192              	.LVL500:
 5193 002c 7047     		bx	lr
 5194              	.LVL501:
 5195              	.L622:
1835:dm/dm42_fns.cc ****     case PRTOF_GRAPHICS:  res = PS(PRTOF_GRAPHICS);  break;
 5196              		.loc 1 1835 0
ARM GAS  /tmp/ccGYckNR.s 			page 151


 5197 002e 034B     		ldr	r3, .L628
 5198 0030 1868     		ldr	r0, [r3]
 5199              	.LVL502:
 5200 0032 00F40070 		and	r0, r0, #512
 5201              	.LVL503:
 5202 0036 7047     		bx	lr
 5203              	.LVL504:
 5204              	.L627:
1832:dm/dm42_fns.cc **** 
 5205              		.loc 1 1832 0
 5206 0038 0020     		movs	r0, #0
 5207              	.LVL505:
1842:dm/dm42_fns.cc **** 
 5208              		.loc 1 1842 0
 5209 003a 7047     		bx	lr
 5210              	.L629:
 5211              		.align	2
 5212              	.L628:
 5213 003c 00000000 		.word	.LANCHOR8
 5214              		.cfi_endproc
 5215              	.LFE288:
 5217              		.section	.text.set_print_to_file_flag,"ax",%progbits
 5218              		.align	1
 5219              		.p2align 2,,3
 5220              		.global	set_print_to_file_flag
 5221              		.syntax unified
 5222              		.thumb
 5223              		.thumb_func
 5224              		.fpu fpv4-sp-d16
 5226              	set_print_to_file_flag:
 5227              	.LFB289:
1844:dm/dm42_fns.cc ****   switch(what) {
 5228              		.loc 1 1844 0
 5229              		.cfi_startproc
 5230              		@ args = 0, pretend = 0, frame = 0
 5231              		@ frame_needed = 0, uses_anonymous_args = 0
 5232              		@ link register save eliminated.
 5233              	.LVL506:
1845:dm/dm42_fns.cc ****     case PRTOF_TEXT:      SETBY_PS(val, PRTOF_TEXT);      break;
 5234              		.loc 1 1845 0
 5235 0000 0728     		cmp	r0, #7
 5236 0002 0BD8     		bhi	.L630
 5237 0004 DFE800F0 		tbb	[pc, r0]
 5238              	.L633:
 5239 0008 19       		.byte	(.L632-.L633)/2
 5240 0009 12       		.byte	(.L634-.L633)/2
 5241 000a 0A       		.byte	(.L630-.L633)/2
 5242 000b 0A       		.byte	(.L630-.L633)/2
 5243 000c 0A       		.byte	(.L630-.L633)/2
 5244 000d 0A       		.byte	(.L630-.L633)/2
 5245 000e 0B       		.byte	(.L635-.L633)/2
 5246 000f 04       		.byte	(.L636-.L633)/2
 5247              		.p2align 1
 5248              	.L636:
1849:dm/dm42_fns.cc **** 
 5249              		.loc 1 1849 0
 5250 0010 154A     		ldr	r2, .L642
ARM GAS  /tmp/ccGYckNR.s 			page 152


 5251 0012 1368     		ldr	r3, [r2]
 5252 0014 21BB     		cbnz	r1, .L641
1849:dm/dm42_fns.cc **** 
 5253              		.loc 1 1849 0 is_stmt 0 discriminator 2
 5254 0016 23F40063 		bic	r3, r3, #2048
 5255 001a 1360     		str	r3, [r2]
 5256              	.L630:
 5257 001c 7047     		bx	lr
 5258              	.L635:
1848:dm/dm42_fns.cc ****     case PRTOF_NOIR:      SETBY_PS(val, PRTOF_NOIR);      break;
 5259              		.loc 1 1848 0 is_stmt 1
 5260 001e 124A     		ldr	r2, .L642
 5261 0020 1368     		ldr	r3, [r2]
 5262 0022 C9B1     		cbz	r1, .L639
1848:dm/dm42_fns.cc ****     case PRTOF_NOIR:      SETBY_PS(val, PRTOF_NOIR);      break;
 5263              		.loc 1 1848 0 is_stmt 0 discriminator 1
 5264 0024 43F48053 		orr	r3, r3, #4096
 5265 0028 1360     		str	r3, [r2]
 5266 002a 7047     		bx	lr
 5267              	.L634:
1847:dm/dm42_fns.cc ****     case PRTOF_GR_IN_TXT: SETBY_PS(val, PRTOF_GR_IN_TXT); break;
 5268              		.loc 1 1847 0 is_stmt 1
 5269 002c 0E4A     		ldr	r2, .L642
 5270 002e 1368     		ldr	r3, [r2]
 5271 0030 71B1     		cbz	r1, .L638
1847:dm/dm42_fns.cc ****     case PRTOF_GR_IN_TXT: SETBY_PS(val, PRTOF_GR_IN_TXT); break;
 5272              		.loc 1 1847 0 is_stmt 0 discriminator 1
 5273 0032 43F48063 		orr	r3, r3, #1024
 5274 0036 1360     		str	r3, [r2]
 5275 0038 7047     		bx	lr
 5276              	.L632:
 5277              	.LVL507:
 5278              	.LBB447:
 5279              	.LBB448:
1846:dm/dm42_fns.cc ****     case PRTOF_GRAPHICS:  SETBY_PS(val, PRTOF_GRAPHICS);  break;
 5280              		.loc 1 1846 0 is_stmt 1
 5281 003a 0B4A     		ldr	r2, .L642
 5282 003c 1368     		ldr	r3, [r2]
 5283 003e 19B1     		cbz	r1, .L637
 5284 0040 43F40073 		orr	r3, r3, #512
 5285 0044 1360     		str	r3, [r2]
 5286 0046 7047     		bx	lr
 5287              	.L637:
 5288 0048 23F40073 		bic	r3, r3, #512
 5289 004c 1360     		str	r3, [r2]
 5290 004e 7047     		bx	lr
 5291              	.LVL508:
 5292              	.L638:
 5293              	.LBE448:
 5294              	.LBE447:
1847:dm/dm42_fns.cc ****     case PRTOF_GR_IN_TXT: SETBY_PS(val, PRTOF_GR_IN_TXT); break;
 5295              		.loc 1 1847 0 discriminator 2
 5296 0050 23F48063 		bic	r3, r3, #1024
 5297 0054 1360     		str	r3, [r2]
 5298 0056 7047     		bx	lr
 5299              	.L639:
1848:dm/dm42_fns.cc ****     case PRTOF_NOIR:      SETBY_PS(val, PRTOF_NOIR);      break;
ARM GAS  /tmp/ccGYckNR.s 			page 153


 5300              		.loc 1 1848 0 discriminator 2
 5301 0058 23F48053 		bic	r3, r3, #4096
 5302 005c 1360     		str	r3, [r2]
 5303 005e 7047     		bx	lr
 5304              	.L641:
1849:dm/dm42_fns.cc **** 
 5305              		.loc 1 1849 0 discriminator 1
 5306 0060 43F40063 		orr	r3, r3, #2048
 5307 0064 1360     		str	r3, [r2]
 5308 0066 7047     		bx	lr
 5309              	.L643:
 5310              		.align	2
 5311              	.L642:
 5312 0068 00000000 		.word	.LANCHOR8
 5313              		.cfi_endproc
 5314              	.LFE289:
 5316              		.section	.text.prtof_buf_flush,"ax",%progbits
 5317              		.align	1
 5318              		.p2align 2,,3
 5319              		.global	prtof_buf_flush
 5320              		.syntax unified
 5321              		.thumb
 5322              		.thumb_func
 5323              		.fpu fpv4-sp-d16
 5325              	prtof_buf_flush:
 5326              	.LFB290:
1884:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[what];
 5327              		.loc 1 1884 0
 5328              		.cfi_startproc
 5329              		@ args = 0, pretend = 0, frame = 8
 5330              		@ frame_needed = 0, uses_anonymous_args = 0
 5331              	.LVL509:
 5332 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 5333              		.cfi_def_cfa_offset 24
 5334              		.cfi_offset 4, -24
 5335              		.cfi_offset 5, -20
 5336              		.cfi_offset 6, -16
 5337              		.cfi_offset 7, -12
 5338              		.cfi_offset 8, -8
 5339              		.cfi_offset 14, -4
1885:dm/dm42_fns.cc ****   FRESULT res;
 5340              		.loc 1 1885 0
 5341 0004 384B     		ldr	r3, .L673
 5342 0006 53F82040 		ldr	r4, [r3, r0, lsl #2]
 5343              	.LVL510:
1884:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[what];
 5344              		.loc 1 1884 0
 5345 000a 82B0     		sub	sp, sp, #8
 5346              		.cfi_def_cfa_offset 32
1891:dm/dm42_fns.cc ****     return;
 5347              		.loc 1 1891 0
 5348 000c 002C     		cmp	r4, #0
 5349 000e 37D0     		beq	.L644
1891:dm/dm42_fns.cc ****     return;
 5350              		.loc 1 1891 0 is_stmt 0 discriminator 1
 5351 0010 E26A     		ldr	r2, [r4, #44]
 5352 0012 002A     		cmp	r2, #0
ARM GAS  /tmp/ccGYckNR.s 			page 154


 5353 0014 34D0     		beq	.L644
1894:dm/dm42_fns.cc **** 
 5354              		.loc 1 1894 0 is_stmt 1
 5355 0016 0029     		cmp	r1, #0
 5356 0018 35D1     		bne	.L658
1894:dm/dm42_fns.cc **** 
 5357              		.loc 1 1894 0 is_stmt 0 discriminator 1
 5358 001a 666A     		ldr	r6, [r4, #36]
 5359 001c A36A     		ldr	r3, [r4, #40]
 5360 001e F61A     		subs	r6, r6, r3
 5361 0020 B242     		cmp	r2, r6
 5362 0022 2DD3     		bcc	.L644
 5363              	.L646:
 5364              	.LVL511:
1899:dm/dm42_fns.cc **** 
 5365              		.loc 1 1899 0 is_stmt 1 discriminator 4
 5366 0024 0023     		movs	r3, #0
1903:dm/dm42_fns.cc ****     if ( res != FR_OK ) { buf->err_cnt++; goto prtof_wf_err; }
 5367              		.loc 1 1903 0 discriminator 4
 5368 0026 314F     		ldr	r7, .L673+4
1899:dm/dm42_fns.cc **** 
 5369              		.loc 1 1899 0 discriminator 4
 5370 0028 A362     		str	r3, [r4, #40]
 5371 002a 0546     		mov	r5, r0
1901:dm/dm42_fns.cc **** 
 5372              		.loc 1 1901 0 discriminator 4
 5373 002c 304B     		ldr	r3, .L673+8
 5374 002e 0120     		movs	r0, #1
 5375              	.LVL512:
 5376 0030 9847     		blx	r3
 5377              	.LVL513:
1903:dm/dm42_fns.cc ****     if ( res != FR_OK ) { buf->err_cnt++; goto prtof_wf_err; }
 5378              		.loc 1 1903 0 discriminator 4
 5379 0032 7868     		ldr	r0, [r7, #4]
 5380 0034 2F4B     		ldr	r3, .L673+12
 5381 0036 3222     		movs	r2, #50
 5382 0038 2146     		mov	r1, r4
 5383 003a 9847     		blx	r3
 5384              	.LVL514:
1904:dm/dm42_fns.cc **** 
 5385              		.loc 1 1904 0 discriminator 4
 5386 003c 90B9     		cbnz	r0, .L670
1907:dm/dm42_fns.cc ****       switch (what) {
 5387              		.loc 1 1907 0
 5388 003e 7868     		ldr	r0, [r7, #4]
 5389              	.LVL515:
 5390 0040 C168     		ldr	r1, [r0, #12]
 5391 0042 61B9     		cbnz	r1, .L649
1908:dm/dm42_fns.cc ****         case  PRTOF_GRAPHICS:
 5392              		.loc 1 1908 0
 5393 0044 002D     		cmp	r5, #0
 5394 0046 46D0     		beq	.L650
 5395 0048 012D     		cmp	r5, #1
 5396 004a 08D1     		bne	.L649
1910:dm/dm42_fns.cc ****           break;
 5397              		.loc 1 1910 0
 5398 004c 0A46     		mov	r2, r1
ARM GAS  /tmp/ccGYckNR.s 			page 155


 5399 004e DFF8B880 		ldr	r8, .L673+32
 5400 0052 294B     		ldr	r3, .L673+16
 5401 0054 A621     		movs	r1, #166
 5402 0056 C047     		blx	r8
 5403              	.LVL516:
1918:dm/dm42_fns.cc ****         buf->err_cnt++;
 5404              		.loc 1 1918 0
 5405 0058 20B9     		cbnz	r0, .L670
 5406              	.LVL517:
 5407              	.L669:
 5408 005a 7868     		ldr	r0, [r7, #4]
 5409 005c C168     		ldr	r1, [r0, #12]
 5410              	.L649:
1925:dm/dm42_fns.cc ****     if ( res != FR_OK ) { buf->err_cnt++; goto prtof_wf_err; }
 5411              		.loc 1 1925 0
 5412 005e 274B     		ldr	r3, .L673+20
 5413 0060 9847     		blx	r3
 5414              	.LVL518:
1926:dm/dm42_fns.cc **** 
 5415              		.loc 1 1926 0
 5416 0062 D0B1     		cbz	r0, .L671
 5417              	.LVL519:
 5418              	.L670:
1942:dm/dm42_fns.cc ****         goto prtof_wf_err;
 5419              		.loc 1 1942 0
 5420 0064 636B     		ldr	r3, [r4, #52]
 5421 0066 0133     		adds	r3, r3, #1
 5422 0068 6363     		str	r3, [r4, #52]
 5423              	.L648:
1951:dm/dm42_fns.cc **** 
 5424              		.loc 1 1951 0
 5425 006a 204A     		ldr	r2, .L673+4
 5426 006c 244B     		ldr	r3, .L673+24
 5427 006e 5068     		ldr	r0, [r2, #4]
 5428 0070 9847     		blx	r3
 5429              	.LVL520:
1953:dm/dm42_fns.cc **** 
 5430              		.loc 1 1953 0
 5431 0072 1F4B     		ldr	r3, .L673+8
 5432 0074 0020     		movs	r0, #0
 5433 0076 9847     		blx	r3
 5434              	.LVL521:
1956:dm/dm42_fns.cc **** 
 5435              		.loc 1 1956 0
 5436 0078 E26A     		ldr	r2, [r4, #44]
 5437 007a 921B     		subs	r2, r2, r6
 5438 007c E262     		str	r2, [r4, #44]
1959:dm/dm42_fns.cc ****       memmove(buf->buf, buf->buf+wsize, buf->len);
 5439              		.loc 1 1959 0
 5440 007e 22B9     		cbnz	r2, .L672
 5441              	.LVL522:
 5442              	.L644:
1965:dm/dm42_fns.cc **** 
 5443              		.loc 1 1965 0
 5444 0080 02B0     		add	sp, sp, #8
 5445              		.cfi_remember_state
 5446              		.cfi_def_cfa_offset 24
ARM GAS  /tmp/ccGYckNR.s 			page 156


 5447              		@ sp needed
 5448 0082 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 5449              	.LVL523:
 5450              	.L658:
 5451              		.cfi_restore_state
 5452 0086 1646     		mov	r6, r2
 5453 0088 CCE7     		b	.L646
 5454              	.LVL524:
 5455              	.L672:
1960:dm/dm42_fns.cc **** 
 5456              		.loc 1 1960 0
 5457 008a 04F13800 		add	r0, r4, #56
 5458 008e 8119     		adds	r1, r0, r6
 5459 0090 FFF7FEFF 		bl	memmove
 5460              	.LVL525:
1965:dm/dm42_fns.cc **** 
 5461              		.loc 1 1965 0
 5462 0094 02B0     		add	sp, sp, #8
 5463              		.cfi_remember_state
 5464              		.cfi_def_cfa_offset 24
 5465              		@ sp needed
 5466 0096 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 5467              	.LVL526:
 5468              	.L671:
 5469              		.cfi_restore_state
1928:dm/dm42_fns.cc ****     if ( res != FR_OK ) { buf->err_cnt++; goto prtof_wf_err; }
 5470              		.loc 1 1928 0
 5471 009a 144F     		ldr	r7, .L673+4
 5472 009c DFF87080 		ldr	r8, .L673+40
 5473 00a0 7868     		ldr	r0, [r7, #4]
 5474              	.LVL527:
 5475 00a2 01AB     		add	r3, sp, #4
 5476 00a4 3246     		mov	r2, r6
 5477 00a6 04F13801 		add	r1, r4, #56
 5478 00aa C047     		blx	r8
 5479              	.LVL528:
1929:dm/dm42_fns.cc **** 
 5480              		.loc 1 1929 0
 5481 00ac 0028     		cmp	r0, #0
 5482 00ae D9D1     		bne	.L670
1931:dm/dm42_fns.cc ****       // Update bmp header
 5483              		.loc 1 1931 0
 5484 00b0 012D     		cmp	r5, #1
 5485 00b2 DAD1     		bne	.L648
1935:dm/dm42_fns.cc **** 
 5486              		.loc 1 1935 0
 5487 00b4 7868     		ldr	r0, [r7, #4]
 5488              	.LVL529:
1938:dm/dm42_fns.cc ****       printf("Update bmp header %ix%i\n", PRTOF_BMP_WIDTH, img_h);
 5489              		.loc 1 1938 0
 5490 00b6 1349     		ldr	r1, .L673+28
 5491 00b8 C268     		ldr	r2, [r0, #12]
1940:dm/dm42_fns.cc ****       if (fail) {
 5492              		.loc 1 1940 0
 5493 00ba 134F     		ldr	r7, .L673+32
 5494 00bc 0E4B     		ldr	r3, .L673+16
1938:dm/dm42_fns.cc ****       printf("Update bmp header %ix%i\n", PRTOF_BMP_WIDTH, img_h);
ARM GAS  /tmp/ccGYckNR.s 			page 157


 5495              		.loc 1 1938 0
 5496 00be A2F18205 		sub	r5, r2, #130
 5497              	.LVL530:
 5498 00c2 A1FB0525 		umull	r2, r5, r1, r5
 5499 00c6 2D09     		lsrs	r5, r5, #4
 5500              	.LVL531:
1940:dm/dm42_fns.cc ****       if (fail) {
 5501              		.loc 1 1940 0
 5502 00c8 6A42     		negs	r2, r5
 5503 00ca A621     		movs	r1, #166
 5504 00cc B847     		blx	r7
 5505              	.LVL532:
1941:dm/dm42_fns.cc ****         buf->err_cnt++;
 5506              		.loc 1 1941 0
 5507 00ce 0028     		cmp	r0, #0
 5508 00d0 C8D1     		bne	.L670
1947:dm/dm42_fns.cc ****     }
 5509              		.loc 1 1947 0
 5510 00d2 2563     		str	r5, [r4, #48]
 5511 00d4 C9E7     		b	.L648
 5512              	.LVL533:
 5513              	.L650:
1914:dm/dm42_fns.cc ****           if ( res != FR_OK ) { buf->err_cnt++; goto prtof_wf_err; }
 5514              		.loc 1 1914 0
 5515 00d6 DFF83880 		ldr	r8, .L673+40
 5516 00da 0C49     		ldr	r1, .L673+36
 5517 00dc 01AB     		add	r3, sp, #4
 5518 00de 0322     		movs	r2, #3
 5519 00e0 C047     		blx	r8
 5520              	.LVL534:
1915:dm/dm42_fns.cc ****           break;
 5521              		.loc 1 1915 0
 5522 00e2 0028     		cmp	r0, #0
 5523 00e4 BED1     		bne	.L670
 5524 00e6 B8E7     		b	.L669
 5525              	.L674:
 5526              		.align	2
 5527              	.L673:
 5528 00e8 00000000 		.word	.LANCHOR26
 5529 00ec 00200010 		.word	268443648
 5530 00f0 E1030008 		.word	134218721
 5531 00f4 35040008 		.word	134218805
 5532 00f8 DCF2F400 		.word	16052956
 5533 00fc 45040008 		.word	134218821
 5534 0100 39040008 		.word	134218809
 5535 0104 ABAAAAAA 		.word	-1431655765
 5536 0108 59040008 		.word	134218841
 5537 010c 00000000 		.word	.LC82
 5538 0110 41040008 		.word	134218817
 5539              		.cfi_endproc
 5540              	.LFE290:
 5542              		.section	.text.prtof_buf_size,"ax",%progbits
 5543              		.align	1
 5544              		.p2align 2,,3
 5545              		.global	prtof_buf_size
 5546              		.syntax unified
 5547              		.thumb
ARM GAS  /tmp/ccGYckNR.s 			page 158


 5548              		.thumb_func
 5549              		.fpu fpv4-sp-d16
 5551              	prtof_buf_size:
 5552              	.LFB291:
1969:dm/dm42_fns.cc ****   return what==PRTOF_TEXT ? PRTOF_TXT_BUF_SIZE: PRTOF_GR_BUF_SIZE;
 5553              		.loc 1 1969 0
 5554              		.cfi_startproc
 5555              		@ args = 0, pretend = 0, frame = 0
 5556              		@ frame_needed = 0, uses_anonymous_args = 0
 5557              		@ link register save eliminated.
 5558              	.LVL535:
1970:dm/dm42_fns.cc **** }
 5559              		.loc 1 1970 0
 5560 0000 0028     		cmp	r0, #0
1971:dm/dm42_fns.cc **** 
 5561              		.loc 1 1971 0
 5562 0002 0CBF     		ite	eq
 5563 0004 4FF42070 		moveq	r0, #640
 5564              	.LVL536:
 5565 0008 4FF4F060 		movne	r0, #1920
 5566 000c 7047     		bx	lr
 5567              		.cfi_endproc
 5568              	.LFE291:
 5570 000e 00BF     		.section	.text.prtof_buf_write,"ax",%progbits
 5571              		.align	1
 5572              		.p2align 2,,3
 5573              		.global	prtof_buf_write
 5574              		.syntax unified
 5575              		.thumb
 5576              		.thumb_func
 5577              		.fpu fpv4-sp-d16
 5579              	prtof_buf_write:
 5580              	.LFB292:
1974:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[what];
 5581              		.loc 1 1974 0
 5582              		.cfi_startproc
 5583              		@ args = 0, pretend = 0, frame = 0
 5584              		@ frame_needed = 0, uses_anonymous_args = 0
 5585              	.LVL537:
1975:dm/dm42_fns.cc **** 
 5586              		.loc 1 1975 0
 5587 0000 0D4B     		ldr	r3, .L682
1974:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[what];
 5588              		.loc 1 1974 0
 5589 0002 70B5     		push	{r4, r5, r6, lr}
 5590              		.cfi_def_cfa_offset 16
 5591              		.cfi_offset 4, -16
 5592              		.cfi_offset 5, -12
 5593              		.cfi_offset 6, -8
 5594              		.cfi_offset 14, -4
1975:dm/dm42_fns.cc **** 
 5595              		.loc 1 1975 0
 5596 0004 53F82040 		ldr	r4, [r3, r0, lsl #2]
 5597              	.LVL538:
1977:dm/dm42_fns.cc ****     len = buf->buf_size - buf->len;
 5598              		.loc 1 1977 0
 5599 0008 E36A     		ldr	r3, [r4, #44]
ARM GAS  /tmp/ccGYckNR.s 			page 159


 5600 000a 256A     		ldr	r5, [r4, #32]
1974:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[what];
 5601              		.loc 1 1974 0
 5602 000c 0646     		mov	r6, r0
1977:dm/dm42_fns.cc ****     len = buf->buf_size - buf->len;
 5603              		.loc 1 1977 0
 5604 000e 9818     		adds	r0, r3, r2
 5605              	.LVL539:
 5606 0010 A842     		cmp	r0, r5
 5607              	.LVL540:
1978:dm/dm42_fns.cc ****     // FIXME: report overflow?
 5608              		.loc 1 1978 0
 5609 0012 8CBF     		ite	hi
 5610 0014 ED1A     		subhi	r5, r5, r3
 5611 0016 1546     		movls	r5, r2
1983:dm/dm42_fns.cc ****   buf->len += len;
 5612              		.loc 1 1983 0
 5613 0018 04F13800 		add	r0, r4, #56
 5614 001c 1844     		add	r0, r0, r3
 5615 001e 2A46     		mov	r2, r5
 5616 0020 FFF7FEFF 		bl	memcpy
 5617              	.LVL541:
1984:dm/dm42_fns.cc **** 
 5618              		.loc 1 1984 0
 5619 0024 E26A     		ldr	r2, [r4, #44]
 5620 0026 2A44     		add	r2, r2, r5
1986:dm/dm42_fns.cc **** 
 5621              		.loc 1 1986 0
 5622 0028 3046     		mov	r0, r6
1984:dm/dm42_fns.cc **** 
 5623              		.loc 1 1984 0
 5624 002a E262     		str	r2, [r4, #44]
1986:dm/dm42_fns.cc **** 
 5625              		.loc 1 1986 0
 5626 002c 0021     		movs	r1, #0
 5627 002e FFF7FEFF 		bl	prtof_buf_flush
 5628              	.LVL542:
1989:dm/dm42_fns.cc **** 
 5629              		.loc 1 1989 0
 5630 0032 0020     		movs	r0, #0
 5631 0034 70BD     		pop	{r4, r5, r6, pc}
 5632              	.LVL543:
 5633              	.L683:
 5634 0036 00BF     		.align	2
 5635              	.L682:
 5636 0038 00000000 		.word	.LANCHOR26
 5637              		.cfi_endproc
 5638              	.LFE292:
 5640              		.section	.text.prtof_buf_update,"ax",%progbits
 5641              		.align	1
 5642              		.p2align 2,,3
 5643              		.global	prtof_buf_update
 5644              		.syntax unified
 5645              		.thumb
 5646              		.thumb_func
 5647              		.fpu fpv4-sp-d16
 5649              	prtof_buf_update:
ARM GAS  /tmp/ccGYckNR.s 			page 160


 5650              	.LFB293:
1994:dm/dm42_fns.cc ****   int buf_size = prtof_buf_size(what);
 5651              		.loc 1 1994 0
 5652              		.cfi_startproc
 5653              		@ args = 0, pretend = 0, frame = 0
 5654              		@ frame_needed = 0, uses_anonymous_args = 0
 5655              	.LVL544:
 5656 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 5657              		.cfi_def_cfa_offset 24
 5658              		.cfi_offset 3, -24
 5659              		.cfi_offset 4, -20
 5660              		.cfi_offset 5, -16
 5661              		.cfi_offset 6, -12
 5662              		.cfi_offset 7, -8
 5663              		.cfi_offset 14, -4
 5664              	.LBB449:
 5665              	.LBB450:
1970:dm/dm42_fns.cc **** }
 5666              		.loc 1 1970 0
 5667 0002 051E     		subs	r5, r0, #0
 5668 0004 15BF     		itete	ne
 5669 0006 4FF4F762 		movne	r2, #1976
 5670 000a 4FF42E72 		moveq	r2, #696
 5671 000e 4FF4F067 		movne	r7, #1920
 5672 0012 4FF42077 		moveq	r7, #640
 5673              	.LVL545:
 5674              	.LBE450:
 5675              	.LBE449:
1997:dm/dm42_fns.cc ****   prtof_buf_t ** pbuf = prtof_buf + what;
 5676              		.loc 1 1997 0
 5677 0016 FFF7FEFF 		bl	is_print_to_file
 5678              	.LVL546:
1998:dm/dm42_fns.cc **** 
 5679              		.loc 1 1998 0
 5680 001a 154E     		ldr	r6, .L695
 5681              	.LVL547:
2000:dm/dm42_fns.cc ****     if(pbuf[0] == NULL) {
 5682              		.loc 1 2000 0
 5683 001c 28B1     		cbz	r0, .L686
2001:dm/dm42_fns.cc ****       // Allocate
 5684              		.loc 1 2001 0
 5685 001e 56F82540 		ldr	r4, [r6, r5, lsl #2]
 5686 0022 7CB1     		cbz	r4, .L694
2020:dm/dm42_fns.cc **** }
 5687              		.loc 1 2020 0
 5688 0024 0024     		movs	r4, #0
 5689              	.LVL548:
 5690              	.L684:
2021:dm/dm42_fns.cc **** 
 5691              		.loc 1 2021 0
 5692 0026 2046     		mov	r0, r4
 5693 0028 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 5694              	.LVL549:
 5695              	.L686:
 5696 002a 0446     		mov	r4, r0
2015:dm/dm42_fns.cc ****     free(pbuf[0]);
 5697              		.loc 1 2015 0
ARM GAS  /tmp/ccGYckNR.s 			page 161


 5698 002c 0121     		movs	r1, #1
 5699 002e 2846     		mov	r0, r5
 5700              	.LVL550:
 5701 0030 FFF7FEFF 		bl	prtof_buf_flush
 5702              	.LVL551:
2016:dm/dm42_fns.cc ****     pbuf[0] = NULL;
 5703              		.loc 1 2016 0
 5704 0034 56F82500 		ldr	r0, [r6, r5, lsl #2]
 5705 0038 FFF7FEFF 		bl	free
 5706              	.LVL552:
2017:dm/dm42_fns.cc ****   }
 5707              		.loc 1 2017 0
 5708 003c 46F82540 		str	r4, [r6, r5, lsl #2]
2021:dm/dm42_fns.cc **** 
 5709              		.loc 1 2021 0
 5710 0040 2046     		mov	r0, r4
 5711 0042 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 5712              	.LVL553:
 5713              	.L694:
2003:dm/dm42_fns.cc ****       if (pbuf[0] == NULL)
 5714              		.loc 1 2003 0
 5715 0044 1046     		mov	r0, r2
 5716              	.LVL554:
 5717 0046 FFF7FEFF 		bl	malloc
 5718              	.LVL555:
 5719 004a 46F82500 		str	r0, [r6, r5, lsl #2]
2004:dm/dm42_fns.cc ****         return 1; // Fail
 5720              		.loc 1 2004 0
 5721 004e 60B1     		cbz	r0, .L691
2009:dm/dm42_fns.cc ****       pbuf[0]->err_cnt = 0;
 5722              		.loc 1 2009 0
 5723 0050 012D     		cmp	r5, #1
2008:dm/dm42_fns.cc ****       pbuf[0]->pre_write = what == PRTOF_GRAPHICS ? PRTOF_BMP_HDR_SIZE : PRTOF_TXT_HDR_SIZE;
 5724              		.loc 1 2008 0
 5725 0052 07F4C062 		and	r2, r7, #1536
2009:dm/dm42_fns.cc ****       pbuf[0]->err_cnt = 0;
 5726              		.loc 1 2009 0
 5727 0056 14BF     		ite	ne
 5728 0058 0323     		movne	r3, #3
 5729 005a 8223     		moveq	r3, #130
2006:dm/dm42_fns.cc ****       pbuf[0]->len = 0;
 5730              		.loc 1 2006 0
 5731 005c 0762     		str	r7, [r0, #32]
2008:dm/dm42_fns.cc ****       pbuf[0]->pre_write = what == PRTOF_GRAPHICS ? PRTOF_BMP_HDR_SIZE : PRTOF_TXT_HDR_SIZE;
 5732              		.loc 1 2008 0
 5733 005e 4262     		str	r2, [r0, #36]
2007:dm/dm42_fns.cc ****       pbuf[0]->flush_limit = buf_size & 0xFFFE00;
 5734              		.loc 1 2007 0
 5735 0060 C462     		str	r4, [r0, #44]
2010:dm/dm42_fns.cc ****       pbuf[0]->lines = 0;
 5736              		.loc 1 2010 0
 5737 0062 4463     		str	r4, [r0, #52]
2011:dm/dm42_fns.cc ****     }
 5738              		.loc 1 2011 0
 5739 0064 0463     		str	r4, [r0, #48]
2009:dm/dm42_fns.cc ****       pbuf[0]->err_cnt = 0;
 5740              		.loc 1 2009 0
ARM GAS  /tmp/ccGYckNR.s 			page 162


 5741 0066 8362     		str	r3, [r0, #40]
 5742 0068 DDE7     		b	.L684
 5743              	.L691:
2005:dm/dm42_fns.cc ****       pbuf[0]->buf_size = buf_size;
 5744              		.loc 1 2005 0
 5745 006a 0124     		movs	r4, #1
 5746 006c DBE7     		b	.L684
 5747              	.L696:
 5748 006e 00BF     		.align	2
 5749              	.L695:
 5750 0070 00000000 		.word	.LANCHOR26
 5751              		.cfi_endproc
 5752              	.LFE293:
 5754              		.section	.text.set_print_to_file.part.8,"ax",%progbits
 5755              		.align	1
 5756              		.p2align 2,,3
 5757              		.syntax unified
 5758              		.thumb
 5759              		.thumb_func
 5760              		.fpu fpv4-sp-d16
 5762              	set_print_to_file.part.8:
 5763              	.LFB332:
2131:dm/dm42_fns.cc ****   const char * msg = NULL;
 5764              		.loc 1 2131 0
 5765              		.cfi_startproc
 5766              		@ args = 0, pretend = 0, frame = 0
 5767              		@ frame_needed = 0, uses_anonymous_args = 0
 5768              	.LVL556:
 5769 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 5770              		.cfi_def_cfa_offset 24
 5771              		.cfi_offset 4, -24
 5772              		.cfi_offset 5, -20
 5773              		.cfi_offset 6, -16
 5774              		.cfi_offset 7, -12
 5775              		.cfi_offset 8, -8
 5776              		.cfi_offset 14, -4
2131:dm/dm42_fns.cc ****   const char * msg = NULL;
 5777              		.loc 1 2131 0
 5778 0004 0D46     		mov	r5, r1
2145:dm/dm42_fns.cc ****   prtof_buf_update(what);
 5779              		.loc 1 2145 0
 5780 0006 0021     		movs	r1, #0
 5781              	.LVL557:
2131:dm/dm42_fns.cc ****   const char * msg = NULL;
 5782              		.loc 1 2131 0
 5783 0008 0446     		mov	r4, r0
 5784 000a 1646     		mov	r6, r2
2145:dm/dm42_fns.cc ****   prtof_buf_update(what);
 5785              		.loc 1 2145 0
 5786 000c FFF7FEFF 		bl	set_print_to_file_flag
 5787              	.LVL558:
2146:dm/dm42_fns.cc **** 
 5788              		.loc 1 2146 0
 5789 0010 FFF7FEFF 		bl	prtof_buf_update
 5790              	.LVL559:
2148:dm/dm42_fns.cc ****     set_print_to_file_flag(what, 1);
 5791              		.loc 1 2148 0
ARM GAS  /tmp/ccGYckNR.s 			page 163


 5792 0014 0DB9     		cbnz	r5, .L712
 5793              	.LVL560:
 5794              	.L697:
 5795 0016 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 5796              	.LVL561:
 5797              	.L712:
2149:dm/dm42_fns.cc ****     res = prtof_buf_update(what);
 5798              		.loc 1 2149 0
 5799 001a 2046     		mov	r0, r4
 5800 001c 0121     		movs	r1, #1
 5801 001e FFF7FEFF 		bl	set_print_to_file_flag
 5802              	.LVL562:
2150:dm/dm42_fns.cc ****     if (res) {
 5803              		.loc 1 2150 0
 5804 0022 2046     		mov	r0, r4
 5805 0024 FFF7FEFF 		bl	prtof_buf_update
 5806              	.LVL563:
2151:dm/dm42_fns.cc ****       msg = "Cannot allocate memory";
 5807              		.loc 1 2151 0
 5808 0028 38B3     		cbz	r0, .L713
2152:dm/dm42_fns.cc ****       goto set_ptf_err;
 5809              		.loc 1 2152 0
 5810 002a 1E4F     		ldr	r7, .L715
 5811              	.LVL564:
 5812              	.L700:
2172:dm/dm42_fns.cc ****       prtof_buf_update(what); // Dealloc if allocated
 5813              		.loc 1 2172 0
 5814 002c 2046     		mov	r0, r4
 5815 002e 0021     		movs	r1, #0
 5816 0030 FFF7FEFF 		bl	set_print_to_file_flag
 5817              	.LVL565:
2173:dm/dm42_fns.cc ****     }
 5818              		.loc 1 2173 0
 5819 0034 2046     		mov	r0, r4
 5820 0036 FFF7FEFF 		bl	prtof_buf_update
 5821              	.LVL566:
2177:dm/dm42_fns.cc ****       lcd_for_dm42(DISP_PRBUF_ALLOC_FAIL);
 5822              		.loc 1 2177 0
 5823 003a 002E     		cmp	r6, #0
 5824 003c EBD0     		beq	.L697
2179:dm/dm42_fns.cc ****       lcd_puts(t24, "");
 5825              		.loc 1 2179 0
 5826 003e 1A4D     		ldr	r5, .L715+4
 5827 0040 1A4E     		ldr	r6, .L715+8
 5828              	.LVL567:
2178:dm/dm42_fns.cc ****       lcd_puts(t24, msg);
 5829              		.loc 1 2178 0
 5830 0042 6920     		movs	r0, #105
 5831 0044 FFF7FEFF 		bl	lcd_for_dm42
 5832              	.LVL568:
2179:dm/dm42_fns.cc ****       lcd_puts(t24, "");
 5833              		.loc 1 2179 0
 5834 0048 3946     		mov	r1, r7
 5835 004a 686B     		ldr	r0, [r5, #52]
 5836 004c B047     		blx	r6
 5837              	.LVL569:
2180:dm/dm42_fns.cc ****       lcd_print(t24,"(Buffer size %i bytes)", prtof_buf_size(what));
ARM GAS  /tmp/ccGYckNR.s 			page 164


 5838              		.loc 1 2180 0
 5839 004e 686B     		ldr	r0, [r5, #52]
 5840 0050 1749     		ldr	r1, .L715+12
 5841 0052 B047     		blx	r6
 5842              	.LVL570:
 5843              	.LBB451:
 5844              	.LBB452:
1970:dm/dm42_fns.cc **** }
 5845              		.loc 1 1970 0
 5846 0054 002C     		cmp	r4, #0
 5847              	.LBE452:
 5848              	.LBE451:
2181:dm/dm42_fns.cc ****       lcd_puts(t24, "Press a key to continue");
 5849              		.loc 1 2181 0
 5850 0056 0CBF     		ite	eq
 5851 0058 4FF42072 		moveq	r2, #640
 5852 005c 4FF4F062 		movne	r2, #1920
 5853 0060 686B     		ldr	r0, [r5, #52]
 5854 0062 144B     		ldr	r3, .L715+16
 5855 0064 1449     		ldr	r1, .L715+20
 5856 0066 9847     		blx	r3
 5857              	.LVL571:
2182:dm/dm42_fns.cc ****       lcd_refresh();
 5858              		.loc 1 2182 0
 5859 0068 686B     		ldr	r0, [r5, #52]
 5860 006a 1449     		ldr	r1, .L715+24
 5861 006c B047     		blx	r6
 5862              	.LVL572:
2183:dm/dm42_fns.cc ****       wait_for_key_press();
 5863              		.loc 1 2183 0
 5864 006e 144B     		ldr	r3, .L715+28
 5865 0070 9847     		blx	r3
 5866              	.LVL573:
2184:dm/dm42_fns.cc ****     }
 5867              		.loc 1 2184 0
 5868 0072 144B     		ldr	r3, .L715+32
2188:dm/dm42_fns.cc **** 
 5869              		.loc 1 2188 0
 5870 0074 BDE8F041 		pop	{r4, r5, r6, r7, r8, lr}
 5871              		.cfi_remember_state
 5872              		.cfi_restore 14
 5873              		.cfi_restore 8
 5874              		.cfi_restore 7
 5875              		.cfi_restore 6
 5876              		.cfi_restore 5
 5877              		.cfi_restore 4
 5878              		.cfi_def_cfa_offset 0
 5879              	.LVL574:
2184:dm/dm42_fns.cc ****     }
 5880              		.loc 1 2184 0
 5881 0078 1847     		bx	r3	@ indirect register sibling call
 5882              	.LVL575:
 5883              	.L713:
 5884              		.cfi_restore_state
 5885              	.LBB453:
 5886              	.LBB454:
2117:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 165


 5887              		.loc 1 2117 0
 5888 007a 134A     		ldr	r2, .L715+36
2119:dm/dm42_fns.cc ****     return 1;
 5889              		.loc 1 2119 0
 5890 007c 134B     		ldr	r3, .L715+40
 5891 007e 1448     		ldr	r0, .L715+44
 5892              	.LVL576:
2117:dm/dm42_fns.cc **** 
 5893              		.loc 1 2117 0
 5894 0080 52F82450 		ldr	r5, [r2, r4, lsl #2]
 5895              	.LVL577:
2119:dm/dm42_fns.cc ****     return 1;
 5896              		.loc 1 2119 0
 5897 0084 9847     		blx	r3
 5898              	.LVL578:
 5899 0086 08B1     		cbz	r0, .L714
 5900              	.LBE454:
 5901              	.LBE453:
2158:dm/dm42_fns.cc ****       goto set_ptf_err;
 5902              		.loc 1 2158 0
 5903 0088 124F     		ldr	r7, .L715+48
 5904 008a CFE7     		b	.L700
 5905              	.L714:
 5906              	.LBB457:
 5907              	.LBB455:
2122:dm/dm42_fns.cc ****   make_date_filename(buf->fname, PRINT_DIR, ext);
 5908              		.loc 1 2122 0
 5909 008c 124E     		ldr	r6, .L715+52
 5910              	.LVL579:
 5911 008e 134A     		ldr	r2, .L715+56
 5912              	.LVL580:
2123:dm/dm42_fns.cc **** 
 5913              		.loc 1 2123 0
 5914 0090 134B     		ldr	r3, .L715+60
 5915 0092 0F49     		ldr	r1, .L715+44
 5916 0094 2846     		mov	r0, r5
 5917 0096 012C     		cmp	r4, #1
 5918 0098 18BF     		it	ne
 5919 009a 3246     		movne	r2, r6
 5920              	.LVL581:
 5921              	.LBE455:
 5922              	.LBE457:
2188:dm/dm42_fns.cc **** 
 5923              		.loc 1 2188 0
 5924 009c BDE8F041 		pop	{r4, r5, r6, r7, r8, lr}
 5925              		.cfi_restore 14
 5926              		.cfi_restore 8
 5927              		.cfi_restore 7
 5928              		.cfi_restore 6
 5929              		.cfi_restore 5
 5930              		.cfi_restore 4
 5931              		.cfi_def_cfa_offset 0
 5932              	.LVL582:
 5933              	.LBB458:
 5934              	.LBB456:
2123:dm/dm42_fns.cc **** 
 5935              		.loc 1 2123 0
ARM GAS  /tmp/ccGYckNR.s 			page 166


 5936 00a0 1847     		bx	r3	@ indirect register sibling call
 5937              	.LVL583:
 5938              	.L716:
 5939 00a2 00BF     		.align	2
 5940              	.L715:
 5941 00a4 30000000 		.word	.LC86
 5942 00a8 00200010 		.word	268443648
 5943 00ac 7D020008 		.word	134218365
 5944 00b0 00000000 		.word	.LC3
 5945 00b4 B1020008 		.word	134218417
 5946 00b8 50000000 		.word	.LC88
 5947 00bc 68000000 		.word	.LC89
 5948 00c0 31020008 		.word	134218289
 5949 00c4 99030008 		.word	134218649
 5950 00c8 00000000 		.word	.LANCHOR26
 5951 00cc D1030008 		.word	134218705
 5952 00d0 48000000 		.word	.LC87
 5953 00d4 10000000 		.word	.LC85
 5954 00d8 08000000 		.word	.LC84
 5955 00dc 00000000 		.word	.LC83
 5956 00e0 5D040008 		.word	134218845
 5957              	.LBE456:
 5958              	.LBE458:
 5959              		.cfi_endproc
 5960              	.LFE332:
 5962              		.section	.text.prtof_add_text,"ax",%progbits
 5963              		.align	1
 5964              		.p2align 2,,3
 5965              		.global	prtof_add_text
 5966              		.syntax unified
 5967              		.thumb
 5968              		.thumb_func
 5969              		.fpu fpv4-sp-d16
 5971              	prtof_add_text:
 5972              	.LFB294:
2025:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[PRTOF_TEXT];
 5973              		.loc 1 2025 0
 5974              		.cfi_startproc
 5975              		@ args = 0, pretend = 0, frame = 0
 5976              		@ frame_needed = 0, uses_anonymous_args = 0
 5977              	.LVL584:
2026:dm/dm42_fns.cc **** 
 5978              		.loc 1 2026 0
 5979 0000 174B     		ldr	r3, .L727
2025:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[PRTOF_TEXT];
 5980              		.loc 1 2025 0
 5981 0002 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 5982              		.cfi_def_cfa_offset 32
 5983              		.cfi_offset 4, -32
 5984              		.cfi_offset 5, -28
 5985              		.cfi_offset 6, -24
 5986              		.cfi_offset 7, -20
 5987              		.cfi_offset 8, -16
 5988              		.cfi_offset 9, -12
 5989              		.cfi_offset 10, -8
 5990              		.cfi_offset 14, -4
2026:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 167


 5991              		.loc 1 2026 0
 5992 0006 1F68     		ldr	r7, [r3]
 5993              	.LVL585:
2028:dm/dm42_fns.cc ****   char * p = pa;
 5994              		.loc 1 2028 0
 5995 0008 FB6A     		ldr	r3, [r7, #44]
 5996 000a 07F13808 		add	r8, r7, #56
 5997              	.LBB459:
2031:dm/dm42_fns.cc ****     p += hp2utfchar(p, str[x]);
 5998              		.loc 1 2031 0
 5999 000e 0029     		cmp	r1, #0
 6000              	.LBE459:
2028:dm/dm42_fns.cc ****   char * p = pa;
 6001              		.loc 1 2028 0
 6002 0010 9844     		add	r8, r8, r3
 6003              	.LVL586:
 6004              	.LBB460:
2031:dm/dm42_fns.cc ****     p += hp2utfchar(p, str[x]);
 6005              		.loc 1 2031 0
 6006 0012 23DD     		ble	.L721
 6007 0014 9146     		mov	r9, r2
 6008 0016 0546     		mov	r5, r0
 6009 0018 4618     		adds	r6, r0, r1
 6010 001a 4446     		mov	r4, r8
2033:dm/dm42_fns.cc ****   }
 6011              		.loc 1 2033 0
 6012 001c 4FF0200A 		mov	r10, #32
 6013              	.LVL587:
 6014              	.L720:
2032:dm/dm42_fns.cc ****     if (dbl) *p++ = ' ';
 6015              		.loc 1 2032 0
 6016 0020 2046     		mov	r0, r4
 6017 0022 15F8011B 		ldrb	r1, [r5], #1	@ zero_extendqisi2
 6018              	.LVL588:
 6019 0026 FFF7FEFF 		bl	_Z10hp2utfcharPch
 6020              	.LVL589:
 6021 002a 0444     		add	r4, r4, r0
 6022              	.LVL590:
2033:dm/dm42_fns.cc ****   }
 6023              		.loc 1 2033 0
 6024 002c B9F1000F 		cmp	r9, #0
 6025 0030 02D0     		beq	.L719
2033:dm/dm42_fns.cc ****   }
 6026              		.loc 1 2033 0 is_stmt 0 discriminator 1
 6027 0032 84F800A0 		strb	r10, [r4]
 6028 0036 0134     		adds	r4, r4, #1
 6029              	.LVL591:
 6030              	.L719:
2031:dm/dm42_fns.cc ****     p += hp2utfchar(p, str[x]);
 6031              		.loc 1 2031 0 is_stmt 1 discriminator 2
 6032 0038 B542     		cmp	r5, r6
 6033 003a F1D1     		bne	.L720
 6034              	.LVL592:
 6035              	.L718:
 6036              	.LBE460:
2035:dm/dm42_fns.cc **** 
 6037              		.loc 1 2035 0
ARM GAS  /tmp/ccGYckNR.s 			page 168


 6038 003c 0A21     		movs	r1, #10
 6039 003e 2046     		mov	r0, r4
 6040 0040 FFF7FEFF 		bl	_Z10hp2utfcharPch
 6041              	.LVL593:
2037:dm/dm42_fns.cc **** 
 6042              		.loc 1 2037 0
 6043 0044 FB6A     		ldr	r3, [r7, #44]
2035:dm/dm42_fns.cc **** 
 6044              		.loc 1 2035 0
 6045 0046 2044     		add	r0, r0, r4
 6046              	.LVL594:
2037:dm/dm42_fns.cc **** 
 6047              		.loc 1 2037 0
 6048 0048 A0EB0800 		sub	r0, r0, r8
 6049              	.LVL595:
 6050 004c 1844     		add	r0, r0, r3
2039:dm/dm42_fns.cc **** }
 6051              		.loc 1 2039 0
 6052 004e 0021     		movs	r1, #0
2037:dm/dm42_fns.cc **** 
 6053              		.loc 1 2037 0
 6054 0050 F862     		str	r0, [r7, #44]
2039:dm/dm42_fns.cc **** }
 6055              		.loc 1 2039 0
 6056 0052 0846     		mov	r0, r1
2040:dm/dm42_fns.cc **** 
 6057              		.loc 1 2040 0
 6058 0054 BDE8F047 		pop	{r4, r5, r6, r7, r8, r9, r10, lr}
 6059              		.cfi_remember_state
 6060              		.cfi_restore 14
 6061              		.cfi_restore 10
 6062              		.cfi_restore 9
 6063              		.cfi_restore 8
 6064              		.cfi_restore 7
 6065              		.cfi_restore 6
 6066              		.cfi_restore 5
 6067              		.cfi_restore 4
 6068              		.cfi_def_cfa_offset 0
 6069              	.LVL596:
2039:dm/dm42_fns.cc **** }
 6070              		.loc 1 2039 0
 6071 0058 FFF7FEBF 		b	prtof_buf_flush
 6072              	.LVL597:
 6073              	.L721:
 6074              		.cfi_restore_state
2029:dm/dm42_fns.cc **** 
 6075              		.loc 1 2029 0
 6076 005c 4446     		mov	r4, r8
 6077 005e EDE7     		b	.L718
 6078              	.L728:
 6079              		.align	2
 6080              	.L727:
 6081 0060 00000000 		.word	.LANCHOR26
 6082              		.cfi_endproc
 6083              	.LFE294:
 6085              		.section	.text.prtof_add_gr_text,"ax",%progbits
 6086              		.align	1
ARM GAS  /tmp/ccGYckNR.s 			page 169


 6087              		.p2align 2,,3
 6088              		.global	prtof_add_gr_text
 6089              		.syntax unified
 6090              		.thumb
 6091              		.thumb_func
 6092              		.fpu fpv4-sp-d16
 6094              	prtof_add_gr_text:
 6095              	.LFB295:
2052:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[PRTOF_TEXT];
 6096              		.loc 1 2052 0
 6097              		.cfi_startproc
 6098              		@ args = 0, pretend = 0, frame = 24
 6099              		@ frame_needed = 0, uses_anonymous_args = 0
 6100              	.LVL598:
 6101 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 6102              		.cfi_def_cfa_offset 36
 6103              		.cfi_offset 4, -36
 6104              		.cfi_offset 5, -32
 6105              		.cfi_offset 6, -28
 6106              		.cfi_offset 7, -24
 6107              		.cfi_offset 8, -20
 6108              		.cfi_offset 9, -16
 6109              		.cfi_offset 10, -12
 6110              		.cfi_offset 11, -8
 6111              		.cfi_offset 14, -4
2057:dm/dm42_fns.cc **** 
 6112              		.loc 1 2057 0
 6113 0004 4FF6FE72 		movw	r2, #65534
 6114              	.LVL599:
2052:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[PRTOF_TEXT];
 6115              		.loc 1 2052 0
 6116 0008 87B0     		sub	sp, sp, #28
 6117              		.cfi_def_cfa_offset 64
2059:dm/dm42_fns.cc **** 
 6118              		.loc 1 2059 0
 6119 000a 1340     		ands	r3, r3, r2
 6120              	.LVL600:
 6121 000c 0193     		str	r3, [sp, #4]
 6122 000e 50D0     		beq	.L729
2053:dm/dm42_fns.cc **** 
 6123              		.loc 1 2053 0
 6124 0010 2A4B     		ldr	r3, .L742
 6125              	.LVL601:
 6126 0012 2B4E     		ldr	r6, .L742+4
 6127 0014 D3F80090 		ldr	r9, [r3]
 6128 0018 0491     		str	r1, [sp, #16]
 6129 001a 09F13803 		add	r3, r9, #56
 6130 001e 0293     		str	r3, [sp, #8]
 6131 0020 4A00     		lsls	r2, r1, #1
 6132 0022 CB43     		mvns	r3, r1
 6133 0024 00EB0108 		add	r8, r0, r1
 6134 0028 0392     		str	r2, [sp, #12]
 6135 002a 0027     		movs	r7, #0
 6136 002c 0593     		str	r3, [sp, #20]
 6137              	.LVL602:
 6138              	.L736:
 6139              	.LBB461:
ARM GAS  /tmp/ccGYckNR.s 			page 170


 6140              	.LBB462:
2062:dm/dm42_fns.cc ****     char * p = pa;
 6141              		.loc 1 2062 0
 6142 002e 029B     		ldr	r3, [sp, #8]
 6143 0030 D9F82C50 		ldr	r5, [r9, #44]
 6144 0034 1D44     		add	r5, r5, r3
 6145              	.LVL603:
 6146              	.LBB463:
2065:dm/dm42_fns.cc ****       int b2 = bits[x];
 6147              		.loc 1 2065 0
 6148 0036 049B     		ldr	r3, [sp, #16]
 6149 0038 002B     		cmp	r3, #0
 6150 003a 3DDD     		ble	.L737
 6151 003c 059A     		ldr	r2, [sp, #20]
 6152 003e 03EB080B 		add	fp, r3, r8
 6153 0042 02EB080A 		add	r10, r2, r8
 6154 0046 C446     		mov	ip, r8
 6155 0048 2C46     		mov	r4, r5
 6156              	.LVL604:
 6157              	.L734:
 6158              	.LBB464:
2066:dm/dm42_fns.cc ****       int b1 = bits[x+bpl];
 6159              		.loc 1 2066 0
 6160 004a 1AF8010F 		ldrb	r0, [r10, #1]!	@ zero_extendqisi2
 6161              	.LVL605:
2067:dm/dm42_fns.cc **** 
 6162              		.loc 1 2067 0
 6163 004e 1CF8011B 		ldrb	r1, [ip], #1	@ zero_extendqisi2
 6164              	.LVL606:
 6165 0052 0422     		movs	r2, #4
 6166              	.LVL607:
 6167              	.L733:
 6168              	.LBB465:
 6169              	.LBB466:
2070:dm/dm42_fns.cc ****         //strcpy(p, box_chars[a]);
 6170              		.loc 1 2070 0
 6171 0054 8B00     		lsls	r3, r1, #2
 6172 0056 00F0030E 		and	lr, r0, #3
 6173 005a 03F00C03 		and	r3, r3, #12
 6174 005e 43EA0E03 		orr	r3, r3, lr
 6175              	.LVL608:
2073:dm/dm42_fns.cc ****         b1>>=2; b2>>=2;
 6176              		.loc 1 2073 0
 6177 0062 002B     		cmp	r3, #0
2072:dm/dm42_fns.cc ****         p+= a ? 3 : 1;
 6178              		.loc 1 2072 0
 6179 0064 56F82330 		ldr	r3, [r6, r3, lsl #2]
 6180              	.LVL609:
2073:dm/dm42_fns.cc ****         b1>>=2; b2>>=2;
 6181              		.loc 1 2073 0
 6182 0068 0CBF     		ite	eq
 6183 006a 4FF0010E 		moveq	lr, #1
 6184              	.LVL610:
 6185 006e 4FF0030E 		movne	lr, #3
2072:dm/dm42_fns.cc ****         p+= a ? 3 : 1;
 6186              		.loc 1 2072 0
 6187 0072 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccGYckNR.s 			page 171


 6188 0074 2360     		str	r3, [r4]
 6189              	.LBE466:
2069:dm/dm42_fns.cc ****         int a = ((b1&3)<<2)|(b2&3);
 6190              		.loc 1 2069 0
 6191 0076 013A     		subs	r2, r2, #1
 6192              	.LVL611:
 6193              	.LBB467:
2074:dm/dm42_fns.cc ****       }
 6194              		.loc 1 2074 0
 6195 0078 4FEAA101 		asr	r1, r1, #2
 6196              	.LVL612:
 6197 007c 4FEAA000 		asr	r0, r0, #2
 6198              	.LVL613:
2073:dm/dm42_fns.cc ****         b1>>=2; b2>>=2;
 6199              		.loc 1 2073 0
 6200 0080 7444     		add	r4, r4, lr
 6201              	.LVL614:
 6202              	.LBE467:
2069:dm/dm42_fns.cc ****         int a = ((b1&3)<<2)|(b2&3);
 6203              		.loc 1 2069 0
 6204 0082 E7D1     		bne	.L733
 6205              	.LVL615:
 6206              	.LBE465:
 6207              	.LBE464:
2065:dm/dm42_fns.cc ****       int b2 = bits[x];
 6208              		.loc 1 2065 0 discriminator 2
 6209 0084 E345     		cmp	fp, ip
 6210 0086 E0D1     		bne	.L734
 6211              	.LVL616:
 6212              	.L731:
 6213              	.LBE463:
2079:dm/dm42_fns.cc ****     buf->len += p-pa;
 6214              		.loc 1 2079 0 discriminator 2
 6215 0088 0A21     		movs	r1, #10
 6216 008a 2046     		mov	r0, r4
 6217 008c FFF7FEFF 		bl	_Z10hp2utfcharPch
 6218              	.LVL617:
2080:dm/dm42_fns.cc ****     prtof_buf_flush(PRTOF_TEXT, PRTOF_LIMIT_FLUSH);
 6219              		.loc 1 2080 0 discriminator 2
 6220 0090 D9F82C30 		ldr	r3, [r9, #44]
2079:dm/dm42_fns.cc ****     buf->len += p-pa;
 6221              		.loc 1 2079 0 discriminator 2
 6222 0094 2044     		add	r0, r0, r4
 6223              	.LVL618:
2080:dm/dm42_fns.cc ****     prtof_buf_flush(PRTOF_TEXT, PRTOF_LIMIT_FLUSH);
 6224              		.loc 1 2080 0 discriminator 2
 6225 0096 451B     		subs	r5, r0, r5
 6226              	.LVL619:
 6227 0098 1D44     		add	r5, r5, r3
2081:dm/dm42_fns.cc ****   }
 6228              		.loc 1 2081 0 discriminator 2
 6229 009a 0021     		movs	r1, #0
 6230 009c 039B     		ldr	r3, [sp, #12]
2080:dm/dm42_fns.cc ****     prtof_buf_flush(PRTOF_TEXT, PRTOF_LIMIT_FLUSH);
 6231              		.loc 1 2080 0 discriminator 2
 6232 009e C9F82C50 		str	r5, [r9, #44]
2081:dm/dm42_fns.cc ****   }
ARM GAS  /tmp/ccGYckNR.s 			page 172


 6233              		.loc 1 2081 0 discriminator 2
 6234 00a2 0846     		mov	r0, r1
 6235              	.LVL620:
 6236 00a4 9844     		add	r8, r8, r3
 6237 00a6 FFF7FEFF 		bl	prtof_buf_flush
 6238              	.LVL621:
 6239              	.LBE462:
2061:dm/dm42_fns.cc ****     char * pa = buf->buf+buf->len;
 6240              		.loc 1 2061 0 discriminator 2
 6241 00aa 019B     		ldr	r3, [sp, #4]
 6242 00ac 0237     		adds	r7, r7, #2
 6243              	.LVL622:
 6244 00ae BB42     		cmp	r3, r7
 6245 00b0 BDDC     		bgt	.L736
 6246              	.LVL623:
 6247              	.L729:
 6248              	.LBE461:
2083:dm/dm42_fns.cc **** 
 6249              		.loc 1 2083 0
 6250 00b2 07B0     		add	sp, sp, #28
 6251              		.cfi_remember_state
 6252              		.cfi_def_cfa_offset 36
 6253              		@ sp needed
 6254 00b4 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 6255              	.LVL624:
 6256              	.L737:
 6257              		.cfi_restore_state
 6258              	.LBB469:
 6259              	.LBB468:
2063:dm/dm42_fns.cc **** 
 6260              		.loc 1 2063 0
 6261 00b8 2C46     		mov	r4, r5
 6262 00ba E5E7     		b	.L731
 6263              	.L743:
 6264              		.align	2
 6265              	.L742:
 6266 00bc 00000000 		.word	.LANCHOR26
 6267 00c0 00000000 		.word	.LANCHOR27
 6268              	.LBE468:
 6269              	.LBE469:
 6270              		.cfi_endproc
 6271              	.LFE295:
 6273              		.section	.text.prtof_add_graphics_lines,"ax",%progbits
 6274              		.align	1
 6275              		.p2align 2,,3
 6276              		.global	prtof_add_graphics_lines
 6277              		.syntax unified
 6278              		.thumb
 6279              		.thumb_func
 6280              		.fpu fpv4-sp-d16
 6282              	prtof_add_graphics_lines:
 6283              	.LFB296:
2086:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[PRTOF_GRAPHICS];
 6284              		.loc 1 2086 0
 6285              		.cfi_startproc
 6286              		@ args = 0, pretend = 0, frame = 24
 6287              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccGYckNR.s 			page 173


 6288              	.LVL625:
 6289 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 6290              		.cfi_def_cfa_offset 36
 6291              		.cfi_offset 4, -36
 6292              		.cfi_offset 5, -32
 6293              		.cfi_offset 6, -28
 6294              		.cfi_offset 7, -24
 6295              		.cfi_offset 8, -20
 6296              		.cfi_offset 9, -16
 6297              		.cfi_offset 10, -12
 6298              		.cfi_offset 11, -8
 6299              		.cfi_offset 14, -4
2087:dm/dm42_fns.cc **** 
 6300              		.loc 1 2087 0
 6301 0004 294A     		ldr	r2, .L760
 6302              	.LVL626:
2086:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[PRTOF_GRAPHICS];
 6303              		.loc 1 2086 0
 6304 0006 87B0     		sub	sp, sp, #28
 6305              		.cfi_def_cfa_offset 64
2087:dm/dm42_fns.cc **** 
 6306              		.loc 1 2087 0
 6307 0008 5268     		ldr	r2, [r2, #4]
 6308 000a 0492     		str	r2, [sp, #16]
 6309              	.LVL627:
 6310 000c 1546     		mov	r5, r2
2089:dm/dm42_fns.cc ****   char * p = pa;
 6311              		.loc 1 2089 0
 6312 000e D26A     		ldr	r2, [r2, #44]
 6313              	.LVL628:
2086:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[PRTOF_GRAPHICS];
 6314              		.loc 1 2086 0
 6315 0010 0391     		str	r1, [sp, #12]
 6316 0012 0E46     		mov	r6, r1
2089:dm/dm42_fns.cc ****   char * p = pa;
 6317              		.loc 1 2089 0
 6318 0014 05F13801 		add	r1, r5, #56
 6319              	.LVL629:
2086:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[PRTOF_GRAPHICS];
 6320              		.loc 1 2086 0
 6321 0018 0746     		mov	r7, r0
 6322              	.LBB470:
2091:dm/dm42_fns.cc ****   int pad = max(0, PRTOF_BMP_BPL-bpl);
 6323              		.loc 1 2091 0
 6324 001a 172E     		cmp	r6, #23
 6325              	.LBE470:
2089:dm/dm42_fns.cc ****   char * p = pa;
 6326              		.loc 1 2089 0
 6327 001c 01EB0200 		add	r0, r1, r2
 6328              	.LVL630:
2086:dm/dm42_fns.cc ****   prtof_buf_t * buf = prtof_buf[PRTOF_GRAPHICS];
 6329              		.loc 1 2086 0
 6330 0020 0293     		str	r3, [sp, #8]
2089:dm/dm42_fns.cc ****   char * p = pa;
 6331              		.loc 1 2089 0
 6332 0022 0590     		str	r0, [sp, #20]
 6333              	.LVL631:
ARM GAS  /tmp/ccGYckNR.s 			page 174


 6334              	.LBB471:
2091:dm/dm42_fns.cc ****   int pad = max(0, PRTOF_BMP_BPL-bpl);
 6335              		.loc 1 2091 0
 6336 0024 39DC     		bgt	.L753
 6337              	.LBE471:
 6338              	.LBB472:
2096:dm/dm42_fns.cc ****     for(int x=0; x<bpl; x++)
 6339              		.loc 1 2096 0
 6340 0026 029B     		ldr	r3, [sp, #8]
 6341 0028 C6F11801 		rsb	r1, r6, #24
 6342 002c 002B     		cmp	r3, #0
 6343 002e 0191     		str	r1, [sp, #4]
 6344              	.LBE472:
 6345              	.LBB478:
2091:dm/dm42_fns.cc ****   int pad = max(0, PRTOF_BMP_BPL-bpl);
 6346              		.loc 1 2091 0
 6347 0030 B146     		mov	r9, r6
 6348              	.LVL632:
 6349              	.LBE478:
 6350              	.LBB479:
2096:dm/dm42_fns.cc ****     for(int x=0; x<bpl; x++)
 6351              		.loc 1 2096 0
 6352 0032 39DD     		ble	.L754
 6353              	.LVL633:
 6354              	.L759:
 6355              	.LBB473:
 6356              	.LBB474:
2098:dm/dm42_fns.cc ****     p += bpl;
 6357              		.loc 1 2098 0
 6358 0034 1E4D     		ldr	r5, .L760+4
 6359              	.LVL634:
 6360              	.LBE474:
 6361              	.LBE473:
2096:dm/dm42_fns.cc ****     for(int x=0; x<bpl; x++)
 6362              		.loc 1 2096 0
 6363 0036 059E     		ldr	r6, [sp, #20]
 6364              	.LVL635:
 6365 0038 4FF00008 		mov	r8, #0
 6366              	.LVL636:
 6367              	.L752:
 6368              	.LBB476:
 6369              	.LBB475:
2097:dm/dm42_fns.cc ****       p[x] = reverse_byte(bits[x]);
 6370              		.loc 1 2097 0 discriminator 3
 6371 003c B9F1000F 		cmp	r9, #0
 6372 0040 0BDD     		ble	.L750
 6373 0042 BA46     		mov	r10, r7
 6374 0044 06F1FF3B 		add	fp, r6, #-1
 6375 0048 07EB0904 		add	r4, r7, r9
 6376              	.LVL637:
 6377              	.L751:
2098:dm/dm42_fns.cc ****     p += bpl;
 6378              		.loc 1 2098 0 discriminator 2
 6379 004c 1AF8010B 		ldrb	r0, [r10], #1	@ zero_extendqisi2
 6380 0050 A847     		blx	r5
 6381              	.LVL638:
2097:dm/dm42_fns.cc ****       p[x] = reverse_byte(bits[x]);
ARM GAS  /tmp/ccGYckNR.s 			page 175


 6382              		.loc 1 2097 0 discriminator 2
 6383 0052 5445     		cmp	r4, r10
2098:dm/dm42_fns.cc ****     p += bpl;
 6384              		.loc 1 2098 0 discriminator 2
 6385 0054 0BF8010F 		strb	r0, [fp, #1]!
2097:dm/dm42_fns.cc ****       p[x] = reverse_byte(bits[x]);
 6386              		.loc 1 2097 0 discriminator 2
 6387 0058 F8D1     		bne	.L751
 6388              	.L750:
 6389              	.LBE475:
2100:dm/dm42_fns.cc ****       memset(p, 0, pad);
 6390              		.loc 1 2100 0
 6391 005a 019B     		ldr	r3, [sp, #4]
2099:dm/dm42_fns.cc ****     if (pad) {
 6392              		.loc 1 2099 0
 6393 005c 4E44     		add	r6, r6, r9
 6394              	.LVL639:
2100:dm/dm42_fns.cc ****       memset(p, 0, pad);
 6395              		.loc 1 2100 0
 6396 005e A3B9     		cbnz	r3, .L758
 6397              	.L749:
2104:dm/dm42_fns.cc ****   }
 6398              		.loc 1 2104 0 discriminator 2
 6399 0060 039B     		ldr	r3, [sp, #12]
 6400 0062 1F44     		add	r7, r7, r3
 6401              	.LVL640:
 6402              	.LBE476:
2096:dm/dm42_fns.cc ****     for(int x=0; x<bpl; x++)
 6403              		.loc 1 2096 0 discriminator 2
 6404 0064 029B     		ldr	r3, [sp, #8]
 6405 0066 08F10108 		add	r8, r8, #1
 6406              	.LVL641:
 6407 006a 4345     		cmp	r3, r8
 6408 006c E6D1     		bne	.L752
 6409 006e 059B     		ldr	r3, [sp, #20]
 6410 0070 F61A     		subs	r6, r6, r3
 6411              	.LVL642:
 6412 0072 049B     		ldr	r3, [sp, #16]
 6413 0074 DA6A     		ldr	r2, [r3, #44]
 6414              	.LVL643:
 6415              	.L746:
 6416              	.LBE479:
2107:dm/dm42_fns.cc **** 
 6417              		.loc 1 2107 0
 6418 0076 049B     		ldr	r3, [sp, #16]
 6419 0078 1644     		add	r6, r6, r2
2109:dm/dm42_fns.cc **** }
 6420              		.loc 1 2109 0
 6421 007a 0021     		movs	r1, #0
 6422 007c 0120     		movs	r0, #1
2107:dm/dm42_fns.cc **** 
 6423              		.loc 1 2107 0
 6424 007e DE62     		str	r6, [r3, #44]
2110:dm/dm42_fns.cc **** 
 6425              		.loc 1 2110 0
 6426 0080 07B0     		add	sp, sp, #28
 6427              		.cfi_remember_state
ARM GAS  /tmp/ccGYckNR.s 			page 176


 6428              		.cfi_def_cfa_offset 36
 6429              		@ sp needed
 6430 0082 BDE8F04F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 6431              		.cfi_restore 14
 6432              		.cfi_restore 11
 6433              		.cfi_restore 10
 6434              		.cfi_restore 9
 6435              		.cfi_restore 8
 6436              		.cfi_restore 7
 6437              		.cfi_restore 6
 6438              		.cfi_restore 5
 6439              		.cfi_restore 4
 6440              		.cfi_def_cfa_offset 0
 6441              	.LVL644:
2109:dm/dm42_fns.cc **** }
 6442              		.loc 1 2109 0
 6443 0086 FFF7FEBF 		b	prtof_buf_flush
 6444              	.LVL645:
 6445              	.L758:
 6446              		.cfi_restore_state
 6447              	.LBB480:
 6448              	.LBB477:
2101:dm/dm42_fns.cc ****       p += pad;
 6449              		.loc 1 2101 0
 6450 008a 019C     		ldr	r4, [sp, #4]
 6451 008c 3046     		mov	r0, r6
 6452 008e 2246     		mov	r2, r4
 6453 0090 0021     		movs	r1, #0
 6454 0092 FFF7FEFF 		bl	memset
 6455              	.LVL646:
2102:dm/dm42_fns.cc ****     }
 6456              		.loc 1 2102 0
 6457 0096 2644     		add	r6, r6, r4
 6458              	.LVL647:
 6459 0098 E2E7     		b	.L749
 6460              	.LVL648:
 6461              	.L753:
 6462              	.LBE477:
 6463              	.LBE480:
 6464              	.LBB481:
 6465 009a 0023     		movs	r3, #0
 6466              	.LVL649:
 6467 009c 0193     		str	r3, [sp, #4]
 6468              	.LBE481:
 6469              	.LBB482:
2096:dm/dm42_fns.cc ****     for(int x=0; x<bpl; x++)
 6470              		.loc 1 2096 0
 6471 009e 029B     		ldr	r3, [sp, #8]
 6472 00a0 002B     		cmp	r3, #0
 6473              	.LBE482:
 6474              	.LBB483:
2091:dm/dm42_fns.cc ****   int pad = max(0, PRTOF_BMP_BPL-bpl);
 6475              		.loc 1 2091 0
 6476 00a2 4FF01809 		mov	r9, #24
 6477              	.LVL650:
 6478              	.LBE483:
 6479              	.LBB484:
ARM GAS  /tmp/ccGYckNR.s 			page 177


2096:dm/dm42_fns.cc ****     for(int x=0; x<bpl; x++)
 6480              		.loc 1 2096 0
 6481 00a6 C5DC     		bgt	.L759
 6482              	.LVL651:
 6483              	.L754:
 6484 00a8 0026     		movs	r6, #0
 6485              	.LVL652:
 6486 00aa E4E7     		b	.L746
 6487              	.L761:
 6488              		.align	2
 6489              	.L760:
 6490 00ac 00000000 		.word	.LANCHOR26
 6491 00b0 61040008 		.word	134218849
 6492              	.LBE484:
 6493              		.cfi_endproc
 6494              	.LFE296:
 6496              		.section	.text.prtof_buf_init_fname,"ax",%progbits
 6497              		.align	1
 6498              		.p2align 2,,3
 6499              		.global	prtof_buf_init_fname
 6500              		.syntax unified
 6501              		.thumb
 6502              		.thumb_func
 6503              		.fpu fpv4-sp-d16
 6505              	prtof_buf_init_fname:
 6506              	.LFB297:
2115:dm/dm42_fns.cc ****   const char * ext;
 6507              		.loc 1 2115 0
 6508              		.cfi_startproc
 6509              		@ args = 0, pretend = 0, frame = 0
 6510              		@ frame_needed = 0, uses_anonymous_args = 0
 6511              	.LVL653:
 6512 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 6513              		.cfi_def_cfa_offset 24
 6514              		.cfi_offset 3, -24
 6515              		.cfi_offset 4, -20
 6516              		.cfi_offset 5, -16
 6517              		.cfi_offset 6, -12
 6518              		.cfi_offset 7, -8
 6519              		.cfi_offset 14, -4
2117:dm/dm42_fns.cc **** 
 6520              		.loc 1 2117 0
 6521 0002 0B4A     		ldr	r2, .L768
2119:dm/dm42_fns.cc ****     return 1;
 6522              		.loc 1 2119 0
 6523 0004 0B4B     		ldr	r3, .L768+4
2115:dm/dm42_fns.cc ****   const char * ext;
 6524              		.loc 1 2115 0
 6525 0006 0546     		mov	r5, r0
2119:dm/dm42_fns.cc ****     return 1;
 6526              		.loc 1 2119 0
 6527 0008 0B48     		ldr	r0, .L768+8
 6528              	.LVL654:
2117:dm/dm42_fns.cc **** 
 6529              		.loc 1 2117 0
 6530 000a 52F82560 		ldr	r6, [r2, r5, lsl #2]
 6531              	.LVL655:
ARM GAS  /tmp/ccGYckNR.s 			page 178


2119:dm/dm42_fns.cc ****     return 1;
 6532              		.loc 1 2119 0
 6533 000e 9847     		blx	r3
 6534              	.LVL656:
 6535 0010 58B9     		cbnz	r0, .L765
2122:dm/dm42_fns.cc ****   make_date_filename(buf->fname, PRINT_DIR, ext);
 6536              		.loc 1 2122 0
 6537 0012 0A4F     		ldr	r7, .L768+12
 6538 0014 0A4A     		ldr	r2, .L768+16
 6539              	.LVL657:
2123:dm/dm42_fns.cc **** 
 6540              		.loc 1 2123 0
 6541 0016 0B4B     		ldr	r3, .L768+20
 6542 0018 0749     		ldr	r1, .L768+8
 6543 001a 0446     		mov	r4, r0
 6544 001c 012D     		cmp	r5, #1
 6545 001e 08BF     		it	eq
 6546 0020 3A46     		moveq	r2, r7
 6547              	.LVL658:
 6548 0022 3046     		mov	r0, r6
 6549 0024 9847     		blx	r3
 6550              	.LVL659:
2126:dm/dm42_fns.cc **** 
 6551              		.loc 1 2126 0
 6552 0026 2046     		mov	r0, r4
 6553 0028 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 6554              	.LVL660:
 6555              	.L765:
2120:dm/dm42_fns.cc **** 
 6556              		.loc 1 2120 0
 6557 002a 0124     		movs	r4, #1
2126:dm/dm42_fns.cc **** 
 6558              		.loc 1 2126 0
 6559 002c 2046     		mov	r0, r4
 6560 002e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 6561              	.LVL661:
 6562              	.L769:
 6563              		.align	2
 6564              	.L768:
 6565 0030 00000000 		.word	.LANCHOR26
 6566 0034 D1030008 		.word	134218705
 6567 0038 48000000 		.word	.LC87
 6568 003c 00000000 		.word	.LC83
 6569 0040 08000000 		.word	.LC84
 6570 0044 5D040008 		.word	134218845
 6571              		.cfi_endproc
 6572              	.LFE297:
 6574              		.section	.text.set_print_to_file,"ax",%progbits
 6575              		.align	1
 6576              		.p2align 2,,3
 6577              		.global	set_print_to_file
 6578              		.syntax unified
 6579              		.thumb
 6580              		.thumb_func
 6581              		.fpu fpv4-sp-d16
 6583              	set_print_to_file:
 6584              	.LFB298:
ARM GAS  /tmp/ccGYckNR.s 			page 179


2131:dm/dm42_fns.cc ****   const char * msg = NULL;
 6585              		.loc 1 2131 0
 6586              		.cfi_startproc
 6587              		@ args = 0, pretend = 0, frame = 0
 6588              		@ frame_needed = 0, uses_anonymous_args = 0
 6589              		@ link register save eliminated.
 6590              	.LVL662:
2135:dm/dm42_fns.cc ****     set_print_to_file_flag(what, val);
 6591              		.loc 1 2135 0
 6592 0000 0128     		cmp	r0, #1
 6593 0002 01DC     		bgt	.L773
2141:dm/dm42_fns.cc ****     return;
 6594              		.loc 1 2141 0
 6595 0004 02D9     		bls	.L774
 6596 0006 7047     		bx	lr
 6597              	.L773:
2136:dm/dm42_fns.cc ****     return;
 6598              		.loc 1 2136 0
 6599 0008 FFF7FEBF 		b	set_print_to_file_flag
 6600              	.LVL663:
 6601              	.L774:
 6602 000c FFF7FEBF 		b	set_print_to_file.part.8
 6603              	.LVL664:
 6604              		.cfi_endproc
 6605              	.LFE298:
 6607              		.section	.text.savestat_init_read,"ax",%progbits
 6608              		.align	1
 6609              		.p2align 2,,3
 6610              		.global	savestat_init_read
 6611              		.syntax unified
 6612              		.thumb
 6613              		.thumb_func
 6614              		.fpu fpv4-sp-d16
 6616              	savestat_init_read:
 6617              	.LFB299:
2203:dm/dm42_fns.cc ****   uint ver[2];
 6618              		.loc 1 2203 0
 6619              		.cfi_startproc
 6620              		@ args = 0, pretend = 0, frame = 16
 6621              		@ frame_needed = 0, uses_anonymous_args = 0
 6622 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 6623              		.cfi_def_cfa_offset 20
 6624              		.cfi_offset 4, -20
 6625              		.cfi_offset 5, -16
 6626              		.cfi_offset 6, -12
 6627              		.cfi_offset 7, -8
 6628              		.cfi_offset 14, -4
2206:dm/dm42_fns.cc ****   pgm_res = FR_DISK_ERR;
 6629              		.loc 1 2206 0
 6630 0002 1B4B     		ldr	r3, .L787
2207:dm/dm42_fns.cc ****   if ( !sys_disk_ok() || state_file_name == NULL ) return -1;
 6631              		.loc 1 2207 0
 6632 0004 1B4C     		ldr	r4, .L787+4
2203:dm/dm42_fns.cc ****   uint ver[2];
 6633              		.loc 1 2203 0
 6634 0006 85B0     		sub	sp, sp, #20
 6635              		.cfi_def_cfa_offset 40
ARM GAS  /tmp/ccGYckNR.s 			page 180


2206:dm/dm42_fns.cc ****   pgm_res = FR_DISK_ERR;
 6636              		.loc 1 2206 0
 6637 0008 9847     		blx	r3
 6638              	.LVL665:
2207:dm/dm42_fns.cc ****   if ( !sys_disk_ok() || state_file_name == NULL ) return -1;
 6639              		.loc 1 2207 0
 6640 000a 0126     		movs	r6, #1
 6641 000c 2670     		strb	r6, [r4]
2208:dm/dm42_fns.cc ****   pgm_res = f_open(ppgm_fp,  state_file_name , FA_READ);
 6642              		.loc 1 2208 0
 6643 000e 1A4B     		ldr	r3, .L787+8
2206:dm/dm42_fns.cc ****   pgm_res = FR_DISK_ERR;
 6644              		.loc 1 2206 0
 6645 0010 0746     		mov	r7, r0
 6646              	.LVL666:
2208:dm/dm42_fns.cc ****   pgm_res = f_open(ppgm_fp,  state_file_name , FA_READ);
 6647              		.loc 1 2208 0
 6648 0012 9847     		blx	r3
 6649              	.LVL667:
 6650 0014 38B3     		cbz	r0, .L778
2208:dm/dm42_fns.cc ****   pgm_res = f_open(ppgm_fp,  state_file_name , FA_READ);
 6651              		.loc 1 2208 0 is_stmt 0 discriminator 2
 6652 0016 37B3     		cbz	r7, .L778
2209:dm/dm42_fns.cc ****   if ( pgm_res != FR_OK ) return -1;
 6653              		.loc 1 2209 0 is_stmt 1
 6654 0018 184D     		ldr	r5, .L787+12
 6655 001a 194B     		ldr	r3, .L787+16
 6656 001c 6868     		ldr	r0, [r5, #4]
 6657 001e 3246     		mov	r2, r6
 6658 0020 3946     		mov	r1, r7
 6659 0022 9847     		blx	r3
 6660              	.LVL668:
 6661 0024 2070     		strb	r0, [r4]
2210:dm/dm42_fns.cc ****   pgm_res = f_lseek(ppgm_fp, f_size(ppgm_fp)-sizeof(savestat_data_t)-sizeof(uint) );
 6662              		.loc 1 2210 0
 6663 0026 F0B9     		cbnz	r0, .L778
2211:dm/dm42_fns.cc ****   if ( pgm_res != FR_OK ) return -1;
 6664              		.loc 1 2211 0
 6665 0028 6868     		ldr	r0, [r5, #4]
 6666 002a 164E     		ldr	r6, .L787+20
 6667 002c C168     		ldr	r1, [r0, #12]
 6668 002e 2439     		subs	r1, r1, #36
 6669 0030 B047     		blx	r6
 6670              	.LVL669:
 6671 0032 2070     		strb	r0, [r4]
2212:dm/dm42_fns.cc ****   pgm_res = f_read(ppgm_fp,ver,sizeof(ver),&rd);
 6672              		.loc 1 2212 0
 6673 0034 B8B9     		cbnz	r0, .L778
2213:dm/dm42_fns.cc ****   if ( pgm_res != FR_OK || rd != sizeof(ver) || ver[1] != SAVESTAT_MAGIC) return -1;
 6674              		.loc 1 2213 0
 6675 0036 0822     		movs	r2, #8
 6676 0038 134F     		ldr	r7, .L787+24
 6677              	.LVL670:
 6678 003a 6868     		ldr	r0, [r5, #4]
 6679 003c 01AB     		add	r3, sp, #4
 6680 003e 0DEB0201 		add	r1, sp, r2
 6681 0042 B847     		blx	r7
ARM GAS  /tmp/ccGYckNR.s 			page 181


 6682              	.LVL671:
 6683 0044 2070     		strb	r0, [r4]
2214:dm/dm42_fns.cc ****   pgm_res = f_lseek(ppgm_fp, 0);
 6684              		.loc 1 2214 0
 6685 0046 70B9     		cbnz	r0, .L778
2214:dm/dm42_fns.cc ****   pgm_res = f_lseek(ppgm_fp, 0);
 6686              		.loc 1 2214 0 is_stmt 0 discriminator 2
 6687 0048 019B     		ldr	r3, [sp, #4]
 6688 004a 082B     		cmp	r3, #8
 6689 004c 0BD1     		bne	.L778
2214:dm/dm42_fns.cc ****   pgm_res = f_lseek(ppgm_fp, 0);
 6690              		.loc 1 2214 0 discriminator 4
 6691 004e 0F4B     		ldr	r3, .L787+28
 6692 0050 039A     		ldr	r2, [sp, #12]
 6693 0052 9A42     		cmp	r2, r3
 6694 0054 07D1     		bne	.L778
2215:dm/dm42_fns.cc ****   if ( pgm_res != FR_OK ) return -1;
 6695              		.loc 1 2215 0 is_stmt 1
 6696 0056 0146     		mov	r1, r0
 6697 0058 6868     		ldr	r0, [r5, #4]
 6698 005a B047     		blx	r6
 6699              	.LVL672:
 6700 005c 2070     		strb	r0, [r4]
2216:dm/dm42_fns.cc ****   return ver[0];
 6701              		.loc 1 2216 0
 6702 005e 10B9     		cbnz	r0, .L778
2217:dm/dm42_fns.cc **** }
 6703              		.loc 1 2217 0
 6704 0060 0298     		ldr	r0, [sp, #8]
2218:dm/dm42_fns.cc **** 
 6705              		.loc 1 2218 0
 6706 0062 05B0     		add	sp, sp, #20
 6707              		.cfi_remember_state
 6708              		.cfi_def_cfa_offset 20
 6709              		@ sp needed
 6710 0064 F0BD     		pop	{r4, r5, r6, r7, pc}
 6711              	.L778:
 6712              		.cfi_restore_state
2208:dm/dm42_fns.cc ****   pgm_res = f_open(ppgm_fp,  state_file_name , FA_READ);
 6713              		.loc 1 2208 0
 6714 0066 4FF0FF30 		mov	r0, #-1
2218:dm/dm42_fns.cc **** 
 6715              		.loc 1 2218 0
 6716 006a 05B0     		add	sp, sp, #20
 6717              		.cfi_def_cfa_offset 20
 6718              		@ sp needed
 6719 006c F0BD     		pop	{r4, r5, r6, r7, pc}
 6720              	.L788:
 6721 006e 00BF     		.align	2
 6722              	.L787:
 6723 0070 19030008 		.word	134218521
 6724 0074 00000000 		.word	.LANCHOR14
 6725 0078 DD030008 		.word	134218717
 6726 007c 00200010 		.word	268443648
 6727 0080 35040008 		.word	134218805
 6728 0084 45040008 		.word	134218821
 6729 0088 3D040008 		.word	134218813
ARM GAS  /tmp/ccGYckNR.s 			page 182


 6730 008c 7ADA42D3 		.word	-750593414
 6731              		.cfi_endproc
 6732              	.LFE299:
 6734              		.section	.text.savestat_init_write,"ax",%progbits
 6735              		.align	1
 6736              		.p2align 2,,3
 6737              		.global	savestat_init_write
 6738              		.syntax unified
 6739              		.thumb
 6740              		.thumb_func
 6741              		.fpu fpv4-sp-d16
 6743              	savestat_init_write:
 6744              	.LFB300:
2221:dm/dm42_fns.cc ****   char * state_file_name = get_reset_state_file();
 6745              		.loc 1 2221 0
 6746              		.cfi_startproc
 6747              		@ args = 0, pretend = 0, frame = 0
 6748              		@ frame_needed = 0, uses_anonymous_args = 0
 6749 0000 38B5     		push	{r3, r4, r5, lr}
 6750              		.cfi_def_cfa_offset 16
 6751              		.cfi_offset 3, -16
 6752              		.cfi_offset 4, -12
 6753              		.cfi_offset 5, -8
 6754              		.cfi_offset 14, -4
2222:dm/dm42_fns.cc ****   pgm_res = FR_DISK_ERR;
 6755              		.loc 1 2222 0
 6756 0002 0D4B     		ldr	r3, .L803
2223:dm/dm42_fns.cc **** 
 6757              		.loc 1 2223 0
 6758 0004 0D4C     		ldr	r4, .L803+4
2222:dm/dm42_fns.cc ****   pgm_res = FR_DISK_ERR;
 6759              		.loc 1 2222 0
 6760 0006 9847     		blx	r3
 6761              	.LVL673:
2223:dm/dm42_fns.cc **** 
 6762              		.loc 1 2223 0
 6763 0008 0123     		movs	r3, #1
 6764 000a 2370     		strb	r3, [r4]
2225:dm/dm42_fns.cc ****   // Create /STATE directory if missing
 6765              		.loc 1 2225 0
 6766 000c 0C4B     		ldr	r3, .L803+8
2222:dm/dm42_fns.cc ****   pgm_res = FR_DISK_ERR;
 6767              		.loc 1 2222 0
 6768 000e 0546     		mov	r5, r0
 6769              	.LVL674:
2225:dm/dm42_fns.cc ****   // Create /STATE directory if missing
 6770              		.loc 1 2225 0
 6771 0010 9847     		blx	r3
 6772              	.LVL675:
 6773 0012 20B1     		cbz	r0, .L792
2225:dm/dm42_fns.cc ****   // Create /STATE directory if missing
 6774              		.loc 1 2225 0 is_stmt 0 discriminator 2
 6775 0014 1DB1     		cbz	r5, .L792
2227:dm/dm42_fns.cc ****     return 1;
 6776              		.loc 1 2227 0 is_stmt 1
 6777 0016 0B4B     		ldr	r3, .L803+12
 6778 0018 0B48     		ldr	r0, .L803+16
ARM GAS  /tmp/ccGYckNR.s 			page 183


 6779 001a 9847     		blx	r3
 6780              	.LVL676:
 6781 001c 08B1     		cbz	r0, .L802
 6782              	.L792:
2225:dm/dm42_fns.cc ****   // Create /STATE directory if missing
 6783              		.loc 1 2225 0
 6784 001e 0120     		movs	r0, #1
 6785 0020 38BD     		pop	{r3, r4, r5, pc}
 6786              	.LVL677:
 6787              	.L802:
2229:dm/dm42_fns.cc ****   return pgm_res != FR_OK;
 6788              		.loc 1 2229 0
 6789 0022 0A4A     		ldr	r2, .L803+20
 6790 0024 0A4B     		ldr	r3, .L803+24
 6791 0026 5068     		ldr	r0, [r2, #4]
 6792 0028 2946     		mov	r1, r5
 6793 002a 0A22     		movs	r2, #10
 6794 002c 9847     		blx	r3
 6795              	.LVL678:
 6796 002e 2070     		strb	r0, [r4]
2230:dm/dm42_fns.cc **** }
 6797              		.loc 1 2230 0
 6798 0030 0030     		adds	r0, r0, #0
 6799 0032 18BF     		it	ne
 6800 0034 0120     		movne	r0, #1
 6801 0036 38BD     		pop	{r3, r4, r5, pc}
 6802              	.LVL679:
 6803              	.L804:
 6804              		.align	2
 6805              	.L803:
 6806 0038 19030008 		.word	134218521
 6807 003c 00000000 		.word	.LANCHOR14
 6808 0040 DD030008 		.word	134218717
 6809 0044 D1030008 		.word	134218705
 6810 0048 00000000 		.word	.LC90
 6811 004c 00200010 		.word	268443648
 6812 0050 35040008 		.word	134218805
 6813              		.cfi_endproc
 6814              	.LFE300:
 6816              		.section	.text.copy_reset_state_filename,"ax",%progbits
 6817              		.align	1
 6818              		.p2align 2,,3
 6819              		.global	copy_reset_state_filename
 6820              		.syntax unified
 6821              		.thumb
 6822              		.thumb_func
 6823              		.fpu fpv4-sp-d16
 6825              	copy_reset_state_filename:
 6826              	.LFB301:
2234:dm/dm42_fns.cc ****   char * f = get_reset_state_file();
 6827              		.loc 1 2234 0
 6828              		.cfi_startproc
 6829              		@ args = 0, pretend = 0, frame = 0
 6830              		@ frame_needed = 0, uses_anonymous_args = 0
 6831              	.LVL680:
 6832 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 6833              		.cfi_def_cfa_offset 24
ARM GAS  /tmp/ccGYckNR.s 			page 184


 6834              		.cfi_offset 4, -24
 6835              		.cfi_offset 5, -20
 6836              		.cfi_offset 6, -16
 6837              		.cfi_offset 7, -12
 6838              		.cfi_offset 8, -8
 6839              		.cfi_offset 14, -4
2235:dm/dm42_fns.cc **** 
 6840              		.loc 1 2235 0
 6841 0004 224B     		ldr	r3, .L818
2234:dm/dm42_fns.cc ****   char * f = get_reset_state_file();
 6842              		.loc 1 2234 0
 6843 0006 0446     		mov	r4, r0
 6844 0008 0E46     		mov	r6, r1
2235:dm/dm42_fns.cc **** 
 6845              		.loc 1 2235 0
 6846 000a 9847     		blx	r3
 6847              	.LVL681:
 6848              	.LBB485:
2237:dm/dm42_fns.cc ****     int len = strlen(f);
 6849              		.loc 1 2237 0
 6850 000c A0B3     		cbz	r0, .L806
 6851 000e 0746     		mov	r7, r0
 6852              	.LBB486:
2238:dm/dm42_fns.cc ****     char * t = s + strlen(s);
 6853              		.loc 1 2238 0
 6854 0010 FFF7FEFF 		bl	strlen
 6855              	.LVL682:
 6856 0014 0546     		mov	r5, r0
 6857              	.LVL683:
2239:dm/dm42_fns.cc ****     int lendir = strlen(STATE_DIR);
 6858              		.loc 1 2239 0
 6859 0016 2046     		mov	r0, r4
 6860              	.LVL684:
 6861 0018 FFF7FEFF 		bl	strlen
 6862              	.LVL685:
2243:dm/dm42_fns.cc ****       f += lendir+1;
 6863              		.loc 1 2243 0
 6864 001c 062D     		cmp	r5, #6
2239:dm/dm42_fns.cc ****     int lendir = strlen(STATE_DIR);
 6865              		.loc 1 2239 0
 6866 001e 04EB0008 		add	r8, r4, r0
 6867              	.LVL686:
2243:dm/dm42_fns.cc ****       f += lendir+1;
 6868              		.loc 1 2243 0
 6869 0022 02DD     		ble	.L807
2243:dm/dm42_fns.cc ****       f += lendir+1;
 6870              		.loc 1 2243 0 is_stmt 0 discriminator 1
 6871 0024 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 6872 0026 2F2B     		cmp	r3, #47
 6873 0028 1DD0     		beq	.L815
 6874              	.L807:
2249:dm/dm42_fns.cc ****       strncpy(t, f, maxlen-1);
 6875              		.loc 1 2249 0 is_stmt 1
 6876 002a B542     		cmp	r5, r6
2250:dm/dm42_fns.cc ****       t[maxlen] = 0;
 6877              		.loc 1 2250 0
 6878 002c 3946     		mov	r1, r7
ARM GAS  /tmp/ccGYckNR.s 			page 185


2249:dm/dm42_fns.cc ****       strncpy(t, f, maxlen-1);
 6879              		.loc 1 2249 0
 6880 002e 0BDA     		bge	.L816
 6881              	.LVL687:
 6882              	.L808:
2253:dm/dm42_fns.cc ****     }
 6883              		.loc 1 2253 0
 6884 0030 4046     		mov	r0, r8
 6885 0032 FFF7FEFF 		bl	strcpy
 6886              	.LVL688:
2257:dm/dm42_fns.cc ****     if (t) t[0] = 0;
 6887              		.loc 1 2257 0
 6888 0036 2046     		mov	r0, r4
 6889 0038 2E21     		movs	r1, #46
 6890 003a FFF7FEFF 		bl	strrchr
 6891              	.LVL689:
2258:dm/dm42_fns.cc **** 
 6892              		.loc 1 2258 0
 6893 003e 80B1     		cbz	r0, .L805
 6894              	.L817:
2258:dm/dm42_fns.cc **** 
 6895              		.loc 1 2258 0 is_stmt 0 discriminator 1
 6896 0040 0023     		movs	r3, #0
 6897 0042 0370     		strb	r3, [r0]
 6898 0044 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 6899              	.LVL690:
 6900              	.L816:
2250:dm/dm42_fns.cc ****       t[maxlen] = 0;
 6901              		.loc 1 2250 0 is_stmt 1
 6902 0048 721E     		subs	r2, r6, #1
 6903 004a 4046     		mov	r0, r8
 6904 004c FFF7FEFF 		bl	strncpy
 6905              	.LVL691:
2251:dm/dm42_fns.cc ****     } else {
 6906              		.loc 1 2251 0
 6907 0050 0023     		movs	r3, #0
 6908 0052 08F80630 		strb	r3, [r8, r6]
2257:dm/dm42_fns.cc ****     if (t) t[0] = 0;
 6909              		.loc 1 2257 0
 6910 0056 2046     		mov	r0, r4
 6911 0058 2E21     		movs	r1, #46
 6912 005a FFF7FEFF 		bl	strrchr
 6913              	.LVL692:
2258:dm/dm42_fns.cc **** 
 6914              		.loc 1 2258 0
 6915 005e 0028     		cmp	r0, #0
 6916 0060 EED1     		bne	.L817
 6917              	.LVL693:
 6918              	.L805:
 6919 0062 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 6920              	.LVL694:
 6921              	.L815:
2244:dm/dm42_fns.cc ****       len = strlen(f);
 6922              		.loc 1 2244 0
 6923 0066 0737     		adds	r7, r7, #7
 6924              	.LVL695:
2245:dm/dm42_fns.cc ****     }
ARM GAS  /tmp/ccGYckNR.s 			page 186


 6925              		.loc 1 2245 0
 6926 0068 3846     		mov	r0, r7
 6927 006a FFF7FEFF 		bl	strlen
 6928              	.LVL696:
 6929 006e 0546     		mov	r5, r0
 6930              	.LVL697:
2249:dm/dm42_fns.cc ****       strncpy(t, f, maxlen-1);
 6931              		.loc 1 2249 0
 6932 0070 B542     		cmp	r5, r6
2250:dm/dm42_fns.cc ****       t[maxlen] = 0;
 6933              		.loc 1 2250 0
 6934 0072 3946     		mov	r1, r7
2249:dm/dm42_fns.cc ****       strncpy(t, f, maxlen-1);
 6935              		.loc 1 2249 0
 6936 0074 DCDB     		blt	.L808
 6937 0076 E7E7     		b	.L816
 6938              	.LVL698:
 6939              	.L806:
 6940              	.LBE486:
2261:dm/dm42_fns.cc ****   }
 6941              		.loc 1 2261 0
 6942 0078 2046     		mov	r0, r4
 6943              	.LVL699:
 6944 007a FFF7FEFF 		bl	strlen
 6945              	.LVL700:
 6946 007e 054A     		ldr	r2, .L818+4
 6947 0080 0346     		mov	r3, r0
 6948 0082 2118     		adds	r1, r4, r0
 6949 0084 1068     		ldr	r0, [r2]
 6950 0086 1279     		ldrb	r2, [r2, #4]	@ zero_extendqisi2
 6951 0088 E050     		str	r0, [r4, r3]	@ unaligned
 6952 008a 0A71     		strb	r2, [r1, #4]
 6953              	.LBE485:
2263:dm/dm42_fns.cc **** 
 6954              		.loc 1 2263 0
 6955 008c E9E7     		b	.L805
 6956              	.L819:
 6957 008e 00BF     		.align	2
 6958              	.L818:
 6959 0090 19030008 		.word	134218521
 6960 0094 00000000 		.word	.LC91
 6961              		.cfi_endproc
 6962              	.LFE301:
 6964              		.section	.text.disp_header.part.11,"ax",%progbits
 6965              		.align	1
 6966              		.p2align 2,,3
 6967              		.syntax unified
 6968              		.thumb
 6969              		.thumb_func
 6970              		.fpu fpv4-sp-d16
 6972              	disp_header.part.11:
 6973              	.LFB335:
2673:dm/dm42_fns.cc ****   // Refresh header each second
 6974              		.loc 1 2673 0
 6975              		.cfi_startproc
 6976              		@ args = 0, pretend = 0, frame = 96
 6977              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccGYckNR.s 			page 187


 6978 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 6979              		.cfi_def_cfa_offset 32
 6980              		.cfi_offset 4, -32
 6981              		.cfi_offset 5, -28
 6982              		.cfi_offset 6, -24
 6983              		.cfi_offset 7, -20
 6984              		.cfi_offset 8, -16
 6985              		.cfi_offset 9, -12
 6986              		.cfi_offset 10, -8
 6987              		.cfi_offset 14, -4
2684:dm/dm42_fns.cc ****   rtc_read(&tm, &dt);
 6988              		.loc 1 2684 0
 6989 0004 8C4B     		ldr	r3, .L859
2698:dm/dm42_fns.cc ****   t24->y = -2; // FIXME: calculate from font dimensions?
 6990              		.loc 1 2698 0
 6991 0006 8D4E     		ldr	r6, .L859+4
 6992              	.LBB487:
 6993              	.LBB488:
1739:dm/dm42_fns.cc **** 
 6994              		.loc 1 1739 0
 6995 0008 8D4D     		ldr	r5, .L859+8
 6996              	.LBE488:
 6997              	.LBE487:
2704:dm/dm42_fns.cc **** 
 6998              		.loc 1 2704 0
 6999 000a 8E4F     		ldr	r7, .L859+12
2673:dm/dm42_fns.cc ****   // Refresh header each second
 7000              		.loc 1 2673 0
 7001 000c 9AB0     		sub	sp, sp, #104
 7002              		.cfi_def_cfa_offset 136
2684:dm/dm42_fns.cc ****   rtc_read(&tm, &dt);
 7003              		.loc 1 2684 0
 7004 000e 9847     		blx	r3
 7005              	.LVL701:
2685:dm/dm42_fns.cc ****   int vdd = (int)read_power_voltage();
 7006              		.loc 1 2685 0
 7007 0010 03A9     		add	r1, sp, #12
 7008 0012 04A8     		add	r0, sp, #16
 7009 0014 8C4B     		ldr	r3, .L859+16
 7010 0016 9847     		blx	r3
 7011              	.LVL702:
2686:dm/dm42_fns.cc **** 
 7012              		.loc 1 2686 0
 7013 0018 8C4B     		ldr	r3, .L859+20
 7014 001a 9847     		blx	r3
 7015              	.LVL703:
 7016 001c 0446     		mov	r4, r0
 7017              	.LVL704:
2689:dm/dm42_fns.cc **** 
 7018              		.loc 1 2689 0
 7019 001e FFF7FEFF 		bl	_Z17shell_low_batteryv
 7020              	.LVL705:
2692:dm/dm42_fns.cc ****   last_header_dmy = is_dmy();
 7021              		.loc 1 2692 0
 7022 0022 FFF7FEFF 		bl	is_clk24
 7023              	.LVL706:
 7024 0026 8A4B     		ldr	r3, .L859+24
ARM GAS  /tmp/ccGYckNR.s 			page 188


 7025 0028 1870     		strb	r0, [r3]
2693:dm/dm42_fns.cc **** 
 7026              		.loc 1 2693 0
 7027 002a FFF7FEFF 		bl	is_dmy
 7028              	.LVL707:
 7029 002e 894A     		ldr	r2, .L859+28
2698:dm/dm42_fns.cc ****   t24->y = -2; // FIXME: calculate from font dimensions?
 7030              		.loc 1 2698 0
 7031 0030 894B     		ldr	r3, .L859+32
2693:dm/dm42_fns.cc **** 
 7032              		.loc 1 2693 0
 7033 0032 1070     		strb	r0, [r2]
2698:dm/dm42_fns.cc ****   t24->y = -2; // FIXME: calculate from font dimensions?
 7034              		.loc 1 2698 0
 7035 0034 706B     		ldr	r0, [r6, #52]
 7036 0036 9847     		blx	r3
 7037              	.LVL708:
2699:dm/dm42_fns.cc ****   t24->newln = 0;
 7038              		.loc 1 2699 0
 7039 0038 736B     		ldr	r3, [r6, #52]
 7040 003a 4FF6FE72 		movw	r2, #65534
2700:dm/dm42_fns.cc ****   t24->lnfill = 0;
 7041              		.loc 1 2700 0
 7042 003e 0026     		movs	r6, #0
2699:dm/dm42_fns.cc ****   t24->newln = 0;
 7043              		.loc 1 2699 0
 7044 0040 DA80     		strh	r2, [r3, #6]	@ movhi
2700:dm/dm42_fns.cc ****   t24->lnfill = 0;
 7045              		.loc 1 2700 0
 7046 0042 1E75     		strb	r6, [r3, #20]
2701:dm/dm42_fns.cc **** 
 7047              		.loc 1 2701 0
 7048 0044 DE74     		strb	r6, [r3, #19]
2704:dm/dm42_fns.cc **** 
 7049              		.loc 1 2704 0
 7050 0046 1622     		movs	r2, #22
 7051 0048 3146     		mov	r1, r6
 7052 004a 3046     		mov	r0, r6
 7053 004c B847     		blx	r7
 7054              	.LVL709:
 7055              	.LBB490:
 7056              	.LBB489:
1739:dm/dm42_fns.cc **** 
 7057              		.loc 1 1739 0
 7058 004e 2A68     		ldr	r2, [r5]
 7059              	.LVL710:
 7060              	.LBE489:
 7061              	.LBE490:
 7062              	.LBB491:
 7063              	.LBB492:
1735:dm/dm42_fns.cc ****     case DISP_DATE:     val = PS(DISP_DATE);     break;
 7064              		.loc 1 1735 0
 7065 0050 2B68     		ldr	r3, [r5]
 7066              	.LBE492:
 7067              	.LBE491:
2719:dm/dm42_fns.cc **** 
 7068              		.loc 1 2719 0
ARM GAS  /tmp/ccGYckNR.s 			page 189


 7069 0052 8DF81860 		strb	r6, [sp, #24]
2718:dm/dm42_fns.cc ****   s[0] = 0; t[0] = 0;
 7070              		.loc 1 2718 0
 7071 0056 12F0010F 		tst	r2, #1
 7072 005a 0CBF     		ite	eq
 7073 005c 4FF4B678 		moveq	r8, #364
 7074 0060 4FF49C78 		movne	r8, #312
 7075              	.LVL711:
2721:dm/dm42_fns.cc ****     strcat(s, get_wday_shortcut(tm.dow));
 7076              		.loc 1 2721 0
 7077 0064 5B07     		lsls	r3, r3, #29
2719:dm/dm42_fns.cc **** 
 7078              		.loc 1 2719 0
 7079 0066 8DF84060 		strb	r6, [sp, #64]
2721:dm/dm42_fns.cc ****     strcat(s, get_wday_shortcut(tm.dow));
 7080              		.loc 1 2721 0
 7081 006a 5BD4     		bmi	.L855
 7082              	.LVL712:
 7083              	.LBB493:
 7084              	.LBB494:
1736:dm/dm42_fns.cc ****     case DISP_SHORTMON: val = PS(DISP_SHORTMON); break;
 7085              		.loc 1 1736 0
 7086 006c 2B68     		ldr	r3, [r5]
 7087              	.LVL713:
 7088              	.LBE494:
 7089              	.LBE493:
2724:dm/dm42_fns.cc ****     if (s[0]) strcat(s," ");
 7090              		.loc 1 2724 0
 7091 006e 1B07     		lsls	r3, r3, #28
 7092 0070 06AE     		add	r6, sp, #24
 7093 0072 6DD4     		bmi	.L826
 7094              	.L824:
 7095              	.LVL714:
 7096              	.LBB496:
 7097              	.LBB497:
1738:dm/dm42_fns.cc ****     case DISP_VOLTAGE:  val = PS(DISP_VOLTAGE);  break;
 7098              		.loc 1 1738 0
 7099 0074 2B68     		ldr	r3, [r5]
 7100              	.LVL715:
 7101              	.LBE497:
 7102              	.LBE496:
2728:dm/dm42_fns.cc ****     if (s[0]) strcat(s," ");
 7103              		.loc 1 2728 0
 7104 0076 1806     		lsls	r0, r3, #24
 7105 0078 0ED5     		bpl	.L827
2729:dm/dm42_fns.cc ****     print_clk24_time(s+strlen(s),PRINT_DT_TM_SZ,&tm,0,0);
 7106              		.loc 1 2729 0
 7107 007a 9DF81830 		ldrb	r3, [sp, #24]	@ zero_extendqisi2
 7108 007e 002B     		cmp	r3, #0
 7109 0080 40F0D280 		bne	.L856
 7110              	.L828:
2730:dm/dm42_fns.cc ****   }
 7111              		.loc 1 2730 0
 7112 0084 3046     		mov	r0, r6
 7113 0086 FFF7FEFF 		bl	strlen
 7114              	.LVL716:
 7115 008a 0023     		movs	r3, #0
ARM GAS  /tmp/ccGYckNR.s 			page 190


 7116 008c 3044     		add	r0, r0, r6
 7117 008e 04AA     		add	r2, sp, #16
 7118 0090 0093     		str	r3, [sp]
 7119 0092 724F     		ldr	r7, .L859+36
 7120 0094 1421     		movs	r1, #20
 7121 0096 B847     		blx	r7
 7122              	.LVL717:
 7123              	.L827:
 7124              	.LBB498:
 7125              	.LBB499:
1734:dm/dm42_fns.cc ****     case DISP_DOW:      val = PS(DISP_DOW);      break;
 7126              		.loc 1 1734 0
 7127 0098 2B68     		ldr	r3, [r5]
 7128              	.LVL718:
 7129              	.LBE499:
 7130              	.LBE498:
2733:dm/dm42_fns.cc ****     copy_reset_state_filename(t, MAX_LCD_LINE_LEN-2); // minus final space and terminator
 7131              		.loc 1 2733 0
 7132 009a 9907     		lsls	r1, r3, #30
 7133 009c 00F18E80 		bmi	.L857
 7134              	.L829:
2748:dm/dm42_fns.cc **** 
 7135              		.loc 1 2748 0
 7136 00a0 664F     		ldr	r7, .L859+4
 7137 00a2 6F4B     		ldr	r3, .L859+40
 7138 00a4 786B     		ldr	r0, [r7, #52]
 7139 00a6 4FF00109 		mov	r9, #1
 7140 00aa 80F81190 		strb	r9, [r0, #17]
 7141 00ae 3146     		mov	r1, r6
 7142 00b0 9847     		blx	r3
 7143              	.LVL719:
 7144              	.LBB500:
 7145              	.LBB501:
1739:dm/dm42_fns.cc **** 
 7146              		.loc 1 1739 0
 7147 00b2 2B68     		ldr	r3, [r5]
 7148              	.LBE501:
 7149              	.LBE500:
2748:dm/dm42_fns.cc **** 
 7150              		.loc 1 2748 0
 7151 00b4 786B     		ldr	r0, [r7, #52]
 7152 00b6 0025     		movs	r5, #0
2751:dm/dm42_fns.cc ****     t24->x  = maxw;
 7153              		.loc 1 2751 0
 7154 00b8 DA07     		lsls	r2, r3, #31
2748:dm/dm42_fns.cc **** 
 7155              		.loc 1 2748 0
 7156 00ba 4574     		strb	r5, [r0, #17]
2751:dm/dm42_fns.cc ****     t24->x  = maxw;
 7157              		.loc 1 2751 0
 7158 00bc 5FD4     		bmi	.L858
 7159              	.L831:
 7160              	.LVL720:
2758:dm/dm42_fns.cc ****     icon_ix = (3090-vdd)/150;
 7161              		.loc 1 2758 0
 7162 00be 694B     		ldr	r3, .L859+44
 7163 00c0 9847     		blx	r3
ARM GAS  /tmp/ccGYckNR.s 			page 191


 7164              	.LVL721:
 7165 00c2 0028     		cmp	r0, #0
 7166 00c4 59D1     		bne	.L836
 7167              	.LVL722:
2759:dm/dm42_fns.cc ****     if (icon_ix < 1) icon_ix = 1;
 7168              		.loc 1 2759 0
 7169 00c6 C4F54160 		rsb	r0, r4, #3088
 7170 00ca 674B     		ldr	r3, .L859+48
 7171 00cc 0230     		adds	r0, r0, #2
 7172 00ce 83FB0023 		smull	r2, r3, r3, r0
 7173 00d2 C017     		asrs	r0, r0, #31
 7174 00d4 C0EB2310 		rsb	r0, r0, r3, asr #4
 7175 00d8 0728     		cmp	r0, #7
 7176 00da A8BF     		it	ge
 7177 00dc 0720     		movge	r0, #7
 7178 00de 0128     		cmp	r0, #1
 7179 00e0 B8BF     		it	lt
 7180 00e2 0120     		movlt	r0, #1
 7181              	.LVL723:
2762:dm/dm42_fns.cc ****   }
 7182              		.loc 1 2762 0
 7183 00e4 8000     		lsls	r0, r0, #2
 7184              	.LVL724:
 7185 00e6 C0F11C00 		rsb	r0, r0, #28
 7186              	.LVL725:
 7187              	.L832:
2766:dm/dm42_fns.cc ****            0,         2, ANN2_LCD_X, ANN_LCD_DY, 30); //8*4);
 7188              		.loc 1 2766 0
 7189 00ea 6049     		ldr	r1, .L859+52
2767:dm/dm42_fns.cc **** //        32, ANN_LCD_Y, ANN_LCD_X, ANN_LCD_DY, 8*2);
 7190              		.loc 1 2767 0
 7191 00ec 604C     		ldr	r4, .L859+56
 7192              	.LVL726:
 7193 00ee 1E22     		movs	r2, #30
 7194 00f0 1023     		movs	r3, #16
 7195 00f2 0844     		add	r0, r0, r1
 7196 00f4 0192     		str	r2, [sp, #4]
 7197 00f6 0093     		str	r3, [sp]
 7198 00f8 0222     		movs	r2, #2
 7199 00fa 4FF48073 		mov	r3, #256
 7200 00fe 0021     		movs	r1, #0
 7201 0100 A047     		blx	r4
 7202              	.LVL727:
2773:dm/dm42_fns.cc ****   clear_header_timeout();
 7203              		.loc 1 2773 0
 7204 0102 5C48     		ldr	r0, .L859+60
2770:dm/dm42_fns.cc ****   t24->lnfill = 1;
 7205              		.loc 1 2770 0
 7206 0104 4D4A     		ldr	r2, .L859+4
2773:dm/dm42_fns.cc ****   clear_header_timeout();
 7207              		.loc 1 2773 0
 7208 0106 0368     		ldr	r3, [r0]
2770:dm/dm42_fns.cc ****   t24->lnfill = 1;
 7209              		.loc 1 2770 0
 7210 0108 526B     		ldr	r2, [r2, #52]
 7211 010a 0121     		movs	r1, #1
2773:dm/dm42_fns.cc ****   clear_header_timeout();
ARM GAS  /tmp/ccGYckNR.s 			page 192


 7212              		.loc 1 2773 0
 7213 010c 43F00403 		orr	r3, r3, #4
 7214              	.LBB502:
 7215              	.LBB503:
2635:dm/dm42_fns.cc **** }
 7216              		.loc 1 2635 0
 7217 0110 9434     		adds	r4, r4, #148
 7218              	.LBE503:
 7219              	.LBE502:
2773:dm/dm42_fns.cc ****   clear_header_timeout();
 7220              		.loc 1 2773 0
 7221 0112 0360     		str	r3, [r0]
2770:dm/dm42_fns.cc ****   t24->lnfill = 1;
 7222              		.loc 1 2770 0
 7223 0114 1175     		strb	r1, [r2, #20]
2771:dm/dm42_fns.cc **** 
 7224              		.loc 1 2771 0
 7225 0116 D174     		strb	r1, [r2, #19]
 7226              	.LBB505:
 7227              	.LBB504:
2635:dm/dm42_fns.cc **** }
 7228              		.loc 1 2635 0
 7229 0118 A047     		blx	r4
 7230              	.LVL728:
 7231 011a 574B     		ldr	r3, .L859+64
 7232 011c 1860     		str	r0, [r3]
 7233              	.LBE504:
 7234              	.LBE505:
2775:dm/dm42_fns.cc **** 
 7235              		.loc 1 2775 0
 7236 011e 1AB0     		add	sp, sp, #104
 7237              		.cfi_remember_state
 7238              		.cfi_def_cfa_offset 32
 7239              		@ sp needed
 7240 0120 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 7241              	.LVL729:
 7242              	.L855:
 7243              		.cfi_restore_state
2722:dm/dm42_fns.cc ****   }
 7244              		.loc 1 2722 0
 7245 0124 554B     		ldr	r3, .L859+68
 7246 0126 9DF81400 		ldrb	r0, [sp, #20]	@ zero_extendqisi2
 7247 012a 9847     		blx	r3
 7248              	.LVL730:
 7249 012c 06AE     		add	r6, sp, #24
 7250 012e 0746     		mov	r7, r0
 7251 0130 3046     		mov	r0, r6
 7252 0132 FFF7FEFF 		bl	strlen
 7253              	.LVL731:
 7254 0136 3946     		mov	r1, r7
 7255 0138 3044     		add	r0, r0, r6
 7256 013a FFF7FEFF 		bl	stpcpy
 7257              	.LVL732:
 7258              	.LBB506:
 7259              	.LBB495:
1736:dm/dm42_fns.cc ****     case DISP_SHORTMON: val = PS(DISP_SHORTMON); break;
 7260              		.loc 1 1736 0
ARM GAS  /tmp/ccGYckNR.s 			page 193


 7261 013e 2B68     		ldr	r3, [r5]
 7262              	.LVL733:
 7263              	.LBE495:
 7264              	.LBE506:
2724:dm/dm42_fns.cc ****     if (s[0]) strcat(s," ");
 7265              		.loc 1 2724 0
 7266 0140 1F07     		lsls	r7, r3, #28
 7267 0142 97D5     		bpl	.L824
2725:dm/dm42_fns.cc ****     print_dmy_date(s+strlen(s),PRINT_DT_TM_SZ,&dt,NULL,is_disp(DISP_SHORTMON),get_disp_date_sep());
 7268              		.loc 1 2725 0
 7269 0144 9DF81830 		ldrb	r3, [sp, #24]	@ zero_extendqisi2
 7270 0148 13B1     		cbz	r3, .L826
 7271 014a 4D4B     		ldr	r3, .L859+72
 7272 014c 1B88     		ldrh	r3, [r3]	@ unaligned
 7273 014e 0380     		strh	r3, [r0]	@ unaligned
 7274              	.L826:
2726:dm/dm42_fns.cc ****   }
 7275              		.loc 1 2726 0
 7276 0150 3046     		mov	r0, r6
 7277 0152 FFF7FEFF 		bl	strlen
 7278              	.LVL734:
 7279              	.LBB507:
 7280              	.LBB508:
1737:dm/dm42_fns.cc ****     case DISP_TIME:     val = PS(DISP_TIME);     break;
 7281              		.loc 1 1737 0
 7282 0156 2968     		ldr	r1, [r5]
 7283              	.LBE508:
 7284              	.LBE507:
2726:dm/dm42_fns.cc ****   }
 7285              		.loc 1 2726 0
 7286 0158 4A4F     		ldr	r7, .L859+76
 7287 015a 8146     		mov	r9, r0
 7288              	.LVL735:
 7289              	.LBB510:
 7290              	.LBB511:
 7291              	.LBB512:
 7292              	.LBB513:
 7293 015c FFF7FEFF 		bl	is_disp.part.6
 7294              	.LVL736:
 7295              	.LBE513:
 7296              	.LBE512:
1684:dm/dm42_fns.cc **** }
 7297              		.loc 1 1684 0
 7298 0160 494B     		ldr	r3, .L859+80
 7299              	.LBE511:
 7300              	.LBE510:
 7301              	.LBB514:
 7302              	.LBB509:
1737:dm/dm42_fns.cc ****     case DISP_TIME:     val = PS(DISP_TIME);     break;
 7303              		.loc 1 1737 0
 7304 0162 01F04001 		and	r1, r1, #64
 7305              	.LBE509:
 7306              	.LBE514:
2726:dm/dm42_fns.cc ****   }
 7307              		.loc 1 2726 0
 7308 0166 1B5C     		ldrb	r3, [r3, r0]	@ zero_extendqisi2
 7309 0168 0193     		str	r3, [sp, #4]
ARM GAS  /tmp/ccGYckNR.s 			page 194


 7310 016a 0091     		str	r1, [sp]
 7311 016c 03AA     		add	r2, sp, #12
 7312 016e 06EB0900 		add	r0, r6, r9
 7313 0172 0023     		movs	r3, #0
 7314 0174 1421     		movs	r1, #20
 7315 0176 B847     		blx	r7
 7316              	.LVL737:
 7317 0178 7CE7     		b	.L824
 7318              	.LVL738:
 7319              	.L836:
2758:dm/dm42_fns.cc ****     icon_ix = (3090-vdd)/150;
 7320              		.loc 1 2758 0
 7321 017a 1C20     		movs	r0, #28
 7322 017c B5E7     		b	.L832
 7323              	.LVL739:
 7324              	.L858:
2753:dm/dm42_fns.cc ****   }
 7325              		.loc 1 2753 0
 7326 017e 4349     		ldr	r1, .L859+84
 7327 0180 434E     		ldr	r6, .L859+88
 7328 0182 444A     		ldr	r2, .L859+92
2752:dm/dm42_fns.cc ****     lcd_printR(t24, "%i.%02iV", vdd/1000, (vdd/10)%100);
 7329              		.loc 1 2752 0
 7330 0184 A0F80480 		strh	r8, [r0, #4]	@ movhi
2753:dm/dm42_fns.cc ****   }
 7331              		.loc 1 2753 0
 7332 0188 4FEAE47E 		asr	lr, r4, #31
 7333 018c 81FB0431 		smull	r3, r1, r1, r4
 7334 0190 CEEBA101 		rsb	r1, lr, r1, asr #2
 7335 0194 86FB0136 		smull	r3, r6, r6, r1
 7336 0198 CB17     		asrs	r3, r1, #31
 7337 019a C3EB6613 		rsb	r3, r3, r6, asr #5
 7338 019e 82FB04C2 		smull	ip, r2, r2, r4
 7339 01a2 6426     		movs	r6, #100
 7340 01a4 06FB1313 		mls	r3, r6, r3, r1
 7341 01a8 80F81190 		strb	r9, [r0, #17]
 7342 01ac CEEBA212 		rsb	r2, lr, r2, asr #6
 7343 01b0 394E     		ldr	r6, .L859+96
 7344 01b2 3A49     		ldr	r1, .L859+100
 7345 01b4 B047     		blx	r6
 7346              	.LVL740:
 7347 01b6 7B6B     		ldr	r3, [r7, #52]
 7348 01b8 5D74     		strb	r5, [r3, #17]
 7349 01ba 80E7     		b	.L831
 7350              	.L857:
2736:dm/dm42_fns.cc **** 
 7351              		.loc 1 2736 0
 7352 01bc 1F4F     		ldr	r7, .L859+4
2734:dm/dm42_fns.cc ****     
 7353              		.loc 1 2734 0
 7354 01be 10A8     		add	r0, sp, #64
 7355 01c0 2621     		movs	r1, #38
 7356 01c2 FFF7FEFF 		bl	copy_reset_state_filename
 7357              	.LVL741:
2736:dm/dm42_fns.cc **** 
 7358              		.loc 1 2736 0
 7359 01c6 3146     		mov	r1, r6
ARM GAS  /tmp/ccGYckNR.s 			page 195


 7360 01c8 354B     		ldr	r3, .L859+104
 7361 01ca 786B     		ldr	r0, [r7, #52]
 7362 01cc 9847     		blx	r3
 7363              	.LVL742:
 7364 01ce 354B     		ldr	r3, .L859+108
 7365 01d0 A8EB0009 		sub	r9, r8, r0
 7366 01d4 786B     		ldr	r0, [r7, #52]
 7367 01d6 9847     		blx	r3
 7368              	.LVL743:
2738:dm/dm42_fns.cc ****     if ( ix > 0 &&  t[ix] != 0 ) {
 7369              		.loc 1 2738 0
 7370 01d8 10A9     		add	r1, sp, #64
 7371 01da A9EB4002 		sub	r2, r9, r0, lsl #1
 7372              	.LVL744:
 7373 01de 0023     		movs	r3, #0
 7374 01e0 DFF8C490 		ldr	r9, .L859+112
 7375 01e4 786B     		ldr	r0, [r7, #52]
 7376 01e6 C847     		blx	r9
 7377              	.LVL745:
2739:dm/dm42_fns.cc ****       // Not all string fits - shorten the name and place ... at the end
 7378              		.loc 1 2739 0
 7379 01e8 0028     		cmp	r0, #0
 7380 01ea 0ADD     		ble	.L830
 7381 01ec 1AAB     		add	r3, sp, #104
 7382 01ee 1844     		add	r0, r0, r3
 7383              	.LVL746:
 7384 01f0 10F8283C 		ldrb	r3, [r0, #-40]	@ zero_extendqisi2
 7385 01f4 2BB1     		cbz	r3, .L830
2741:dm/dm42_fns.cc ****       t[ix-1] = '\x9a'; // ...
 7386              		.loc 1 2741 0
 7387 01f6 0022     		movs	r2, #0
2742:dm/dm42_fns.cc ****     }
 7388              		.loc 1 2742 0
 7389 01f8 9A23     		movs	r3, #154
2741:dm/dm42_fns.cc ****       t[ix-1] = '\x9a'; // ...
 7390              		.loc 1 2741 0
 7391 01fa 00F8282C 		strb	r2, [r0, #-40]
2742:dm/dm42_fns.cc ****     }
 7392              		.loc 1 2742 0
 7393 01fe 00F8293C 		strb	r3, [r0, #-41]
 7394              	.L830:
2744:dm/dm42_fns.cc ****     lcd_putsR(t24," ");
 7395              		.loc 1 2744 0
 7396 0202 0E4F     		ldr	r7, .L859+4
 7397 0204 DFF85890 		ldr	r9, .L859+40
 7398 0208 786B     		ldr	r0, [r7, #52]
 7399 020a 4FF0010A 		mov	r10, #1
 7400 020e 10A9     		add	r1, sp, #64
 7401 0210 80F811A0 		strb	r10, [r0, #17]
 7402 0214 C847     		blx	r9
 7403              	.LVL747:
 7404 0216 786B     		ldr	r0, [r7, #52]
2745:dm/dm42_fns.cc ****   }
 7405              		.loc 1 2745 0
 7406 0218 1949     		ldr	r1, .L859+72
 7407 021a 80F811A0 		strb	r10, [r0, #17]
 7408 021e C847     		blx	r9
ARM GAS  /tmp/ccGYckNR.s 			page 196


 7409              	.LVL748:
 7410 0220 7B6B     		ldr	r3, [r7, #52]
 7411 0222 0022     		movs	r2, #0
 7412 0224 5A74     		strb	r2, [r3, #17]
 7413 0226 3BE7     		b	.L829
 7414              	.L856:
2729:dm/dm42_fns.cc ****     print_clk24_time(s+strlen(s),PRINT_DT_TM_SZ,&tm,0,0);
 7415              		.loc 1 2729 0
 7416 0228 3046     		mov	r0, r6
 7417 022a FFF7FEFF 		bl	strlen
 7418              	.LVL749:
 7419 022e 144B     		ldr	r3, .L859+72
 7420 0230 1B88     		ldrh	r3, [r3]	@ unaligned
 7421 0232 3352     		strh	r3, [r6, r0]	@ unaligned
 7422 0234 26E7     		b	.L828
 7423              	.L860:
 7424 0236 00BF     		.align	2
 7425              	.L859:
 7426 0238 E5020008 		.word	134218469
 7427 023c 00200010 		.word	268443648
 7428 0240 00000000 		.word	.LANCHOR8
 7429 0244 51020008 		.word	134218321
 7430 0248 CD020008 		.word	134218445
 7431 024c E9020008 		.word	134218473
 7432 0250 00000000 		.word	.LANCHOR28
 7433 0254 00000000 		.word	.LANCHOR29
 7434 0258 65020008 		.word	134218341
 7435 025c CD030008 		.word	134218701
 7436 0260 7D020008 		.word	134218365
 7437 0264 21030008 		.word	134218529
 7438 0268 B5814E1B 		.word	458129845
 7439 026c 00000000 		.word	.LANCHOR30
 7440 0270 49020008 		.word	134218313
 7441 0274 00000000 		.word	.LANCHOR7
 7442 0278 00000000 		.word	.LANCHOR31
 7443 027c B9020008 		.word	134218425
 7444 0280 00000000 		.word	.LC92
 7445 0284 C9030008 		.word	134218697
 7446 0288 00000000 		.word	.LANCHOR23
 7447 028c 67666666 		.word	1717986919
 7448 0290 1F85EB51 		.word	1374389535
 7449 0294 D34D6210 		.word	274877907
 7450 0298 B1020008 		.word	134218417
 7451 029c 04000000 		.word	.LC93
 7452 02a0 81020008 		.word	134218369
 7453 02a4 79020008 		.word	134218361
 7454 02a8 89020008 		.word	134218377
 7455              		.cfi_endproc
 7456              	.LFE335:
 7458              		.section	.text.current_font_nr,"ax",%progbits
 7459              		.align	1
 7460              		.p2align 2,,3
 7461              		.global	current_font_nr
 7462              		.syntax unified
 7463              		.thumb
 7464              		.thumb_func
 7465              		.fpu fpv4-sp-d16
ARM GAS  /tmp/ccGYckNR.s 			page 197


 7467              	current_font_nr:
 7468              	.LFB302:
2269:dm/dm42_fns.cc ****   return is_pgm_mode() ? pgm_font_ix : reg_font_ix;
 7469              		.loc 1 2269 0
 7470              		.cfi_startproc
 7471              		@ args = 0, pretend = 0, frame = 0
 7472              		@ frame_needed = 0, uses_anonymous_args = 0
 7473 0000 08B5     		push	{r3, lr}
 7474              		.cfi_def_cfa_offset 8
 7475              		.cfi_offset 3, -8
 7476              		.cfi_offset 14, -4
2270:dm/dm42_fns.cc **** }
 7477              		.loc 1 2270 0
 7478 0002 FFF7FEFF 		bl	is_pgm_mode
 7479              	.LVL750:
 7480 0006 18B9     		cbnz	r0, .L865
2270:dm/dm42_fns.cc **** }
 7481              		.loc 1 2270 0 is_stmt 0 discriminator 2
 7482 0008 034B     		ldr	r3, .L866
 7483 000a 93F90000 		ldrsb	r0, [r3]
2271:dm/dm42_fns.cc **** 
 7484              		.loc 1 2271 0 is_stmt 1 discriminator 2
 7485 000e 08BD     		pop	{r3, pc}
 7486              	.L865:
2270:dm/dm42_fns.cc **** }
 7487              		.loc 1 2270 0 discriminator 1
 7488 0010 024B     		ldr	r3, .L866+4
 7489 0012 93F90000 		ldrsb	r0, [r3]
 7490 0016 08BD     		pop	{r3, pc}
 7491              	.L867:
 7492              		.align	2
 7493              	.L866:
 7494 0018 00000000 		.word	.LANCHOR33
 7495 001c 00000000 		.word	.LANCHOR32
 7496              		.cfi_endproc
 7497              	.LFE302:
 7499              		.section	.text.disp_aligned_line,"ax",%progbits
 7500              		.align	1
 7501              		.p2align 2,,3
 7502              		.global	disp_aligned_line
 7503              		.syntax unified
 7504              		.thumb
 7505              		.thumb_func
 7506              		.fpu fpv4-sp-d16
 7508              	disp_aligned_line:
 7509              	.LFB303:
2273:dm/dm42_fns.cc ****   char pr[EDIT_PROMPT_LEN+1];
 7510              		.loc 1 2273 0
 7511              		.cfi_startproc
 7512              		@ args = 0, pretend = 0, frame = 16
 7513              		@ frame_needed = 0, uses_anonymous_args = 0
 7514              	.LVL751:
 7515 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 7516              		.cfi_def_cfa_offset 24
 7517              		.cfi_offset 4, -24
 7518              		.cfi_offset 5, -20
 7519              		.cfi_offset 6, -16
ARM GAS  /tmp/ccGYckNR.s 			page 198


 7520              		.cfi_offset 7, -12
 7521              		.cfi_offset 8, -8
 7522              		.cfi_offset 14, -4
2277:dm/dm42_fns.cc ****   lcd_puts(fReg,""); // Fill the line
 7523              		.loc 1 2277 0
 7524 0004 4C4C     		ldr	r4, .L885
 7525 0006 4D4B     		ldr	r3, .L885+4
 7526              	.LBB515:
2280:dm/dm42_fns.cc ****     int yln = fReg->y+lcd_baseHeight(fReg)+2;
 7527              		.loc 1 2280 0
 7528 0008 4D4E     		ldr	r6, .L885+8
 7529              	.LBE515:
2273:dm/dm42_fns.cc ****   char pr[EDIT_PROMPT_LEN+1];
 7530              		.loc 1 2273 0
 7531 000a 84B0     		sub	sp, sp, #16
 7532              		.cfi_def_cfa_offset 40
2273:dm/dm42_fns.cc ****   char pr[EDIT_PROMPT_LEN+1];
 7533              		.loc 1 2273 0
 7534 000c 0546     		mov	r5, r0
2277:dm/dm42_fns.cc ****   lcd_puts(fReg,""); // Fill the line
 7535              		.loc 1 2277 0
 7536 000e A06B     		ldr	r0, [r4, #56]
 7537              	.LVL752:
2273:dm/dm42_fns.cc ****   char pr[EDIT_PROMPT_LEN+1];
 7538              		.loc 1 2273 0
 7539 0010 0F46     		mov	r7, r1
2277:dm/dm42_fns.cc ****   lcd_puts(fReg,""); // Fill the line
 7540              		.loc 1 2277 0
 7541 0012 9847     		blx	r3
 7542              	.LVL753:
2278:dm/dm42_fns.cc ****   fReg->lnfill = 0;
 7543              		.loc 1 2278 0
 7544 0014 A06B     		ldr	r0, [r4, #56]
 7545 0016 4B4B     		ldr	r3, .L885+12
 7546 0018 4B49     		ldr	r1, .L885+16
 7547 001a 9847     		blx	r3
 7548              	.LVL754:
2279:dm/dm42_fns.cc ****   if (is_REG_LINES) {
 7549              		.loc 1 2279 0
 7550 001c A06B     		ldr	r0, [r4, #56]
 7551              	.LBB517:
2280:dm/dm42_fns.cc ****     int yln = fReg->y+lcd_baseHeight(fReg)+2;
 7552              		.loc 1 2280 0
 7553 001e 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 7554              	.LBE517:
2279:dm/dm42_fns.cc ****   if (is_REG_LINES) {
 7555              		.loc 1 2279 0
 7556 0020 0022     		movs	r2, #0
 7557 0022 C274     		strb	r2, [r0, #19]
 7558              	.LBB518:
2280:dm/dm42_fns.cc ****     int yln = fReg->y+lcd_baseHeight(fReg)+2;
 7559              		.loc 1 2280 0
 7560 0024 DA07     		lsls	r2, r3, #31
 7561 0026 32D4     		bmi	.L881
 7562              	.L870:
 7563              	.LBE518:
2286:dm/dm42_fns.cc ****   if ( prompt[plen-1] == ':' ) {
ARM GAS  /tmp/ccGYckNR.s 			page 199


 7564              		.loc 1 2286 0
 7565 0028 2846     		mov	r0, r5
 7566 002a FFF7FEFF 		bl	strlen
 7567              	.LVL755:
 7568              	.LBB519:
2287:dm/dm42_fns.cc ****     strcpy(pr,prompt);
 7569              		.loc 1 2287 0
 7570 002e 2B18     		adds	r3, r5, r0
 7571              	.LBE519:
2286:dm/dm42_fns.cc ****   if ( prompt[plen-1] == ':' ) {
 7572              		.loc 1 2286 0
 7573 0030 0446     		mov	r4, r0
 7574              	.LVL756:
 7575              	.LBB526:
2287:dm/dm42_fns.cc ****     strcpy(pr,prompt);
 7576              		.loc 1 2287 0
 7577 0032 13F8013C 		ldrb	r3, [r3, #-1]	@ zero_extendqisi2
 7578 0036 3A2B     		cmp	r3, #58
 7579 0038 39D0     		beq	.L882
2301:dm/dm42_fns.cc ****   
 7580              		.loc 1 2301 0
 7581 003a 3F4A     		ldr	r2, .L885
 7582 003c 414B     		ldr	r3, .L885+12
 7583 003e 906B     		ldr	r0, [r2, #56]
 7584              	.LVL757:
 7585 0040 2946     		mov	r1, r5
 7586 0042 9847     		blx	r3
 7587              	.LVL758:
 7588              	.L876:
 7589              	.LBE526:
 7590              	.LBB527:
2303:dm/dm42_fns.cc ****     // Align to the right
 7591              		.loc 1 2303 0
 7592 0044 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 7593 0046 9B07     		lsls	r3, r3, #30
 7594 0048 0CD5     		bpl	.L877
 7595 004a 3B4B     		ldr	r3, .L885
 7596 004c 9B6B     		ldr	r3, [r3, #56]
 7597              	.L878:
 7598              	.LBE527:
2308:dm/dm42_fns.cc ****   fReg->lnfill = 1;
 7599              		.loc 1 2308 0
 7600 004e 1846     		mov	r0, r3
 7601 0050 3946     		mov	r1, r7
 7602 0052 3C4B     		ldr	r3, .L885+12
 7603 0054 9847     		blx	r3
 7604              	.LVL759:
2309:dm/dm42_fns.cc **** }
 7605              		.loc 1 2309 0
 7606 0056 384B     		ldr	r3, .L885
 7607 0058 9B6B     		ldr	r3, [r3, #56]
 7608 005a 0122     		movs	r2, #1
 7609 005c DA74     		strb	r2, [r3, #19]
2310:dm/dm42_fns.cc **** 
 7610              		.loc 1 2310 0
 7611 005e 04B0     		add	sp, sp, #16
 7612              		.cfi_remember_state
ARM GAS  /tmp/ccGYckNR.s 			page 200


 7613              		.cfi_def_cfa_offset 24
 7614              		@ sp needed
 7615 0060 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 7616              	.LVL760:
 7617              	.L877:
 7618              		.cfi_restore_state
 7619              	.LBB529:
 7620              	.LBB528:
2305:dm/dm42_fns.cc ****     if ( newx > fReg->x ) fReg->x = newx;
 7621              		.loc 1 2305 0
 7622 0064 3846     		mov	r0, r7
 7623 0066 FFF7FEFF 		bl	strlen
 7624              	.LVL761:
 7625 006a 334D     		ldr	r5, .L885
 7626 006c 374B     		ldr	r3, .L885+20
 7627 006e 0446     		mov	r4, r0
 7628 0070 A86B     		ldr	r0, [r5, #56]
 7629 0072 9847     		blx	r3
 7630              	.LVL762:
 7631 0074 AB6B     		ldr	r3, [r5, #56]
 7632 0076 93F90F20 		ldrsb	r2, [r3, #15]
2306:dm/dm42_fns.cc ****   }
 7633              		.loc 1 2306 0
 7634 007a B3F90410 		ldrsh	r1, [r3, #4]
2305:dm/dm42_fns.cc ****     if ( newx > fReg->x ) fReg->x = newx;
 7635              		.loc 1 2305 0
 7636 007e C2F5C872 		rsb	r2, r2, #400
 7637 0082 04FB1020 		mls	r0, r4, r0, r2
 7638              	.LVL763:
2306:dm/dm42_fns.cc ****   }
 7639              		.loc 1 2306 0
 7640 0086 8842     		cmp	r0, r1
 7641 0088 C8BF     		it	gt
 7642 008a 9880     		strhgt	r0, [r3, #4]	@ movhi
 7643 008c DFE7     		b	.L878
 7644              	.LVL764:
 7645              	.L881:
 7646              	.LBE528:
 7647              	.LBE529:
 7648              	.LBB530:
 7649              	.LBB516:
2281:dm/dm42_fns.cc ****     if ( yln > fReg->y_top_grd)
 7650              		.loc 1 2281 0
 7651 008e 304B     		ldr	r3, .L885+24
 7652 0090 B0F90680 		ldrsh	r8, [r0, #6]
 7653 0094 9847     		blx	r3
 7654              	.LVL765:
2282:dm/dm42_fns.cc ****       lcd_fillLines(yln, 0xAA, 1);
 7655              		.loc 1 2282 0
 7656 0096 A36B     		ldr	r3, [r4, #56]
2281:dm/dm42_fns.cc ****     if ( yln > fReg->y_top_grd)
 7657              		.loc 1 2281 0
 7658 0098 4044     		add	r0, r0, r8
2282:dm/dm42_fns.cc ****       lcd_fillLines(yln, 0xAA, 1);
 7659              		.loc 1 2282 0
 7660 009a B3F90A30 		ldrsh	r3, [r3, #10]
2281:dm/dm42_fns.cc ****     if ( yln > fReg->y_top_grd)
ARM GAS  /tmp/ccGYckNR.s 			page 201


 7661              		.loc 1 2281 0
 7662 009e 0230     		adds	r0, r0, #2
 7663              	.LVL766:
2282:dm/dm42_fns.cc ****       lcd_fillLines(yln, 0xAA, 1);
 7664              		.loc 1 2282 0
 7665 00a0 9842     		cmp	r0, r3
 7666 00a2 C1DD     		ble	.L870
2283:dm/dm42_fns.cc ****   }
 7667              		.loc 1 2283 0
 7668 00a4 2B4B     		ldr	r3, .L885+28
 7669 00a6 0122     		movs	r2, #1
 7670 00a8 AA21     		movs	r1, #170
 7671 00aa 9847     		blx	r3
 7672              	.LVL767:
 7673 00ac BCE7     		b	.L870
 7674              	.LVL768:
 7675              	.L882:
 7676              	.LBE516:
 7677              	.LBE530:
 7678              	.LBB531:
 7679              	.LBB520:
2288:dm/dm42_fns.cc ****     pr[plen-1] = 0;
 7680              		.loc 1 2288 0
 7681 00ae 2946     		mov	r1, r5
 7682 00b0 621C     		adds	r2, r4, #1
 7683 00b2 6846     		mov	r0, sp
 7684              	.LVL769:
 7685 00b4 FFF7FEFF 		bl	memcpy
 7686              	.LVL770:
2289:dm/dm42_fns.cc ****     lcd_puts(fReg,pr);
 7687              		.loc 1 2289 0
 7688 00b8 04AB     		add	r3, sp, #16
 7689 00ba 1C44     		add	r4, r4, r3
 7690              	.LVL771:
2290:dm/dm42_fns.cc ****     int x = fReg->x;
 7691              		.loc 1 2290 0
 7692 00bc 1E4D     		ldr	r5, .L885
 7693              	.LVL772:
2289:dm/dm42_fns.cc ****     lcd_puts(fReg,pr);
 7694              		.loc 1 2289 0
 7695 00be 0023     		movs	r3, #0
 7696 00c0 04F8113C 		strb	r3, [r4, #-17]
2290:dm/dm42_fns.cc ****     int x = fReg->x;
 7697              		.loc 1 2290 0
 7698 00c4 6946     		mov	r1, sp
 7699 00c6 1F4B     		ldr	r3, .L885+12
 7700 00c8 A86B     		ldr	r0, [r5, #56]
 7701 00ca 9847     		blx	r3
 7702              	.LVL773:
2291:dm/dm42_fns.cc ****     int dy = current_font_nr() < 0 ? 0 : lcd_lineHeight(fReg)/12;
 7703              		.loc 1 2291 0
 7704 00cc AB6B     		ldr	r3, [r5, #56]
 7705 00ce B3F90480 		ldrsh	r8, [r3, #4]
 7706              	.LVL774:
 7707              	.LBB521:
 7708              	.LBB522:
2270:dm/dm42_fns.cc **** }
ARM GAS  /tmp/ccGYckNR.s 			page 202


 7709              		.loc 1 2270 0
 7710 00d2 FFF7FEFF 		bl	is_pgm_mode
 7711              	.LVL775:
 7712 00d6 40BB     		cbnz	r0, .L883
 7713 00d8 1F4B     		ldr	r3, .L885+32
 7714 00da 93F90030 		ldrsb	r3, [r3]
 7715              	.LBE522:
 7716              	.LBE521:
2292:dm/dm42_fns.cc ****     fReg->fixed = 0;
 7717              		.loc 1 2292 0
 7718 00de 002B     		cmp	r3, #0
 7719 00e0 28DB     		blt	.L879
 7720              	.L884:
2292:dm/dm42_fns.cc ****     fReg->fixed = 0;
 7721              		.loc 1 2292 0 is_stmt 0 discriminator 1
 7722 00e2 154A     		ldr	r2, .L885
 7723 00e4 1D4B     		ldr	r3, .L885+36
 7724 00e6 906B     		ldr	r0, [r2, #56]
 7725 00e8 9847     		blx	r3
 7726              	.LVL776:
 7727 00ea 1D4B     		ldr	r3, .L885+40
 7728 00ec C417     		asrs	r4, r0, #31
 7729 00ee 83FB0030 		smull	r3, r0, r3, r0
 7730 00f2 C4EB6000 		rsb	r0, r4, r0, asr #1
 7731 00f6 84B2     		uxth	r4, r0
 7732              	.L875:
2293:dm/dm42_fns.cc ****     fReg->y -= dy;
 7733              		.loc 1 2293 0 is_stmt 1 discriminator 4
 7734 00f8 0F4D     		ldr	r5, .L885
2295:dm/dm42_fns.cc ****     fReg->y += dy;
 7735              		.loc 1 2295 0 discriminator 4
 7736 00fa 124A     		ldr	r2, .L885+12
2293:dm/dm42_fns.cc ****     fReg->y -= dy;
 7737              		.loc 1 2293 0 discriminator 4
 7738 00fc A86B     		ldr	r0, [r5, #56]
2295:dm/dm42_fns.cc ****     fReg->y += dy;
 7739              		.loc 1 2295 0 discriminator 4
 7740 00fe 1949     		ldr	r1, .L885+44
2294:dm/dm42_fns.cc ****     lcd_puts(fReg, ":");
 7741              		.loc 1 2294 0 discriminator 4
 7742 0100 C388     		ldrh	r3, [r0, #6]
2293:dm/dm42_fns.cc ****     fReg->y -= dy;
 7743              		.loc 1 2293 0 discriminator 4
 7744 0102 4FF0000E 		mov	lr, #0
2294:dm/dm42_fns.cc ****     lcd_puts(fReg, ":");
 7745              		.loc 1 2294 0 discriminator 4
 7746 0106 1B1B     		subs	r3, r3, r4
2293:dm/dm42_fns.cc ****     fReg->y -= dy;
 7747              		.loc 1 2293 0 discriminator 4
 7748 0108 80F810E0 		strb	lr, [r0, #16]
2294:dm/dm42_fns.cc ****     lcd_puts(fReg, ":");
 7749              		.loc 1 2294 0 discriminator 4
 7750 010c C380     		strh	r3, [r0, #6]	@ movhi
2295:dm/dm42_fns.cc ****     fReg->y += dy;
 7751              		.loc 1 2295 0 discriminator 4
 7752 010e 9047     		blx	r2
 7753              	.LVL777:
ARM GAS  /tmp/ccGYckNR.s 			page 203


2296:dm/dm42_fns.cc **** 
 7754              		.loc 1 2296 0 discriminator 4
 7755 0110 AD6B     		ldr	r5, [r5, #56]
2299:dm/dm42_fns.cc ****   } else
 7756              		.loc 1 2299 0 discriminator 4
 7757 0112 154B     		ldr	r3, .L885+48
2296:dm/dm42_fns.cc **** 
 7758              		.loc 1 2296 0 discriminator 4
 7759 0114 E988     		ldrh	r1, [r5, #6]
2298:dm/dm42_fns.cc ****     fReg->x = x+lcd_charWidth(fReg, ':');
 7760              		.loc 1 2298 0 discriminator 4
 7761 0116 0122     		movs	r2, #1
2296:dm/dm42_fns.cc **** 
 7762              		.loc 1 2296 0 discriminator 4
 7763 0118 0C44     		add	r4, r4, r1
 7764 011a EC80     		strh	r4, [r5, #6]	@ movhi
2298:dm/dm42_fns.cc ****     fReg->x = x+lcd_charWidth(fReg, ':');
 7765              		.loc 1 2298 0 discriminator 4
 7766 011c 2A74     		strb	r2, [r5, #16]
2299:dm/dm42_fns.cc ****   } else
 7767              		.loc 1 2299 0 discriminator 4
 7768 011e 2846     		mov	r0, r5
 7769 0120 3A21     		movs	r1, #58
 7770 0122 9847     		blx	r3
 7771              	.LVL778:
 7772 0124 4044     		add	r0, r0, r8
 7773 0126 A880     		strh	r0, [r5, #4]	@ movhi
 7774              	.LBE520:
 7775 0128 8CE7     		b	.L876
 7776              	.L883:
 7777              	.LBB525:
 7778              	.LBB524:
 7779              	.LBB523:
2270:dm/dm42_fns.cc **** }
 7780              		.loc 1 2270 0
 7781 012a 104B     		ldr	r3, .L885+52
 7782 012c 93F90030 		ldrsb	r3, [r3]
 7783              	.LBE523:
 7784              	.LBE524:
2292:dm/dm42_fns.cc ****     fReg->fixed = 0;
 7785              		.loc 1 2292 0
 7786 0130 002B     		cmp	r3, #0
 7787 0132 D6DA     		bge	.L884
 7788              	.L879:
 7789 0134 0024     		movs	r4, #0
 7790 0136 DFE7     		b	.L875
 7791              	.L886:
 7792              		.align	2
 7793              	.L885:
 7794 0138 00200010 		.word	268443648
 7795 013c 61020008 		.word	134218337
 7796 0140 00000000 		.word	.LANCHOR34
 7797 0144 7D020008 		.word	134218365
 7798 0148 00000000 		.word	.LC3
 7799 014c 79020008 		.word	134218361
 7800 0150 75020008 		.word	134218357
 7801 0154 51020008 		.word	134218321
ARM GAS  /tmp/ccGYckNR.s 			page 204


 7802 0158 00000000 		.word	.LANCHOR33
 7803 015c 71020008 		.word	134218353
 7804 0160 ABAAAA2A 		.word	715827883
 7805 0164 0C000000 		.word	.LC11
 7806 0168 85020008 		.word	134218373
 7807 016c 00000000 		.word	.LANCHOR32
 7808              	.LBE525:
 7809              	.LBE531:
 7810              		.cfi_endproc
 7811              	.LFE303:
 7813              		.section	.text.set_reg_font,"ax",%progbits
 7814              		.align	1
 7815              		.p2align 2,,3
 7816              		.global	set_reg_font
 7817              		.syntax unified
 7818              		.thumb
 7819              		.thumb_func
 7820              		.fpu fpv4-sp-d16
 7822              	set_reg_font:
 7823              	.LFB304:
2313:dm/dm42_fns.cc ****   int fnr = current_font_nr();
 7824              		.loc 1 2313 0
 7825              		.cfi_startproc
 7826              		@ args = 0, pretend = 0, frame = 0
 7827              		@ frame_needed = 0, uses_anonymous_args = 0
 7828              	.LVL779:
 7829 0000 70B5     		push	{r4, r5, r6, lr}
 7830              		.cfi_def_cfa_offset 16
 7831              		.cfi_offset 4, -16
 7832              		.cfi_offset 5, -12
 7833              		.cfi_offset 6, -8
 7834              		.cfi_offset 14, -4
2313:dm/dm42_fns.cc ****   int fnr = current_font_nr();
 7835              		.loc 1 2313 0
 7836 0002 0446     		mov	r4, r0
 7837              	.LBB532:
 7838              	.LBB533:
2270:dm/dm42_fns.cc **** }
 7839              		.loc 1 2270 0
 7840 0004 FFF7FEFF 		bl	is_pgm_mode
 7841              	.LVL780:
 7842 0008 28B3     		cbz	r0, .L888
 7843 000a 1E4B     		ldr	r3, .L913
 7844 000c 93F90050 		ldrsb	r5, [r3]
 7845              	.L891:
 7846              	.LVL781:
 7847              	.LBE533:
 7848              	.LBE532:
2316:dm/dm42_fns.cc ****   for(;offset < 0; offset++) fnr = lcd_prevFontNr(fnr);
 7849              		.loc 1 2316 0 discriminator 2
 7850 0010 002C     		cmp	r4, #0
 7851 0012 2FDD     		ble	.L910
2316:dm/dm42_fns.cc ****   for(;offset < 0; offset++) fnr = lcd_prevFontNr(fnr);
 7852              		.loc 1 2316 0 is_stmt 0 discriminator 1
 7853 0014 1C4E     		ldr	r6, .L913+4
 7854              	.LVL782:
 7855              	.L894:
ARM GAS  /tmp/ccGYckNR.s 			page 205


 7856 0016 2846     		mov	r0, r5
 7857 0018 B047     		blx	r6
 7858              	.LVL783:
 7859 001a 013C     		subs	r4, r4, #1
 7860              	.LVL784:
 7861 001c 0546     		mov	r5, r0
 7862              	.LVL785:
 7863 001e FAD1     		bne	.L894
 7864              	.LVL786:
 7865              	.L892:
2319:dm/dm42_fns.cc ****   if (fnr < 0 && !is_pgm_mode() && NR2T(fnr) < 5)
 7866              		.loc 1 2319 0 is_stmt 1
 7867 0020 1A4C     		ldr	r4, .L913+8
 7868 0022 1B4B     		ldr	r3, .L913+12
 7869 0024 A06B     		ldr	r0, [r4, #56]
 7870 0026 2946     		mov	r1, r5
 7871 0028 9847     		blx	r3
 7872              	.LVL787:
2320:dm/dm42_fns.cc ****     fReg->ya++;
 7873              		.loc 1 2320 0
 7874 002a 002D     		cmp	r5, #0
 7875 002c 17DB     		blt	.L911
2322:dm/dm42_fns.cc ****     fReg->yb = -1;
 7876              		.loc 1 2322 0
 7877 002e FFF7FEFF 		bl	is_pgm_mode
 7878              	.LVL788:
 7879 0032 10B9     		cbnz	r0, .L901
 7880              	.L900:
2324:dm/dm42_fns.cc **** }
 7881              		.loc 1 2324 0
 7882 0034 052D     		cmp	r5, #5
 7883 0036 05D0     		beq	.L912
 7884              	.L887:
 7885 0038 70BD     		pop	{r4, r5, r6, pc}
 7886              	.LVL789:
 7887              	.L901:
2323:dm/dm42_fns.cc ****   if (fnr == 5) { fReg->yb-=1; fReg->ya-=1; }
 7888              		.loc 1 2323 0
 7889 003a A36B     		ldr	r3, [r4, #56]
 7890 003c FF22     		movs	r2, #255
2324:dm/dm42_fns.cc **** }
 7891              		.loc 1 2324 0
 7892 003e 052D     		cmp	r5, #5
2323:dm/dm42_fns.cc ****   if (fnr == 5) { fReg->yb-=1; fReg->ya-=1; }
 7893              		.loc 1 2323 0
 7894 0040 5A73     		strb	r2, [r3, #13]
2324:dm/dm42_fns.cc **** }
 7895              		.loc 1 2324 0
 7896 0042 F9D1     		bne	.L887
 7897              	.L912:
2324:dm/dm42_fns.cc **** }
 7898              		.loc 1 2324 0 is_stmt 0 discriminator 1
 7899 0044 114B     		ldr	r3, .L913+8
 7900 0046 9B6B     		ldr	r3, [r3, #56]
 7901 0048 597B     		ldrb	r1, [r3, #13]	@ zero_extendqisi2
 7902 004a 1A7B     		ldrb	r2, [r3, #12]	@ zero_extendqisi2
 7903 004c 0139     		subs	r1, r1, #1
ARM GAS  /tmp/ccGYckNR.s 			page 206


 7904 004e 013A     		subs	r2, r2, #1
 7905 0050 5973     		strb	r1, [r3, #13]
 7906 0052 1A73     		strb	r2, [r3, #12]
 7907              	.LVL790:
2325:dm/dm42_fns.cc **** 
 7908              		.loc 1 2325 0 is_stmt 1 discriminator 1
 7909 0054 70BD     		pop	{r4, r5, r6, pc}
 7910              	.LVL791:
 7911              	.L888:
 7912              	.LBB535:
 7913              	.LBB534:
2270:dm/dm42_fns.cc **** }
 7914              		.loc 1 2270 0
 7915 0056 0F4B     		ldr	r3, .L913+16
 7916 0058 93F90050 		ldrsb	r5, [r3]
 7917 005c D8E7     		b	.L891
 7918              	.LVL792:
 7919              	.L911:
 7920              	.LBE534:
 7921              	.LBE535:
2320:dm/dm42_fns.cc ****     fReg->ya++;
 7922              		.loc 1 2320 0 discriminator 1
 7923 005e FFF7FEFF 		bl	is_pgm_mode
 7924              	.LVL793:
 7925 0062 0028     		cmp	r0, #0
 7926 0064 E6D1     		bne	.L900
2320:dm/dm42_fns.cc ****     fReg->ya++;
 7927              		.loc 1 2320 0 is_stmt 0 discriminator 3
 7928 0066 6B1D     		adds	r3, r5, #5
 7929 0068 E4DB     		blt	.L900
2321:dm/dm42_fns.cc ****   if (fnr >= 0 && is_pgm_mode() )
 7930              		.loc 1 2321 0 is_stmt 1
 7931 006a A26B     		ldr	r2, [r4, #56]
 7932 006c 137B     		ldrb	r3, [r2, #12]	@ zero_extendqisi2
 7933 006e 0133     		adds	r3, r3, #1
 7934 0070 1373     		strb	r3, [r2, #12]
 7935 0072 DFE7     		b	.L900
 7936              	.LVL794:
 7937              	.L910:
2317:dm/dm42_fns.cc **** 
 7938              		.loc 1 2317 0 discriminator 2
 7939 0074 D4D0     		beq	.L892
2317:dm/dm42_fns.cc **** 
 7940              		.loc 1 2317 0 is_stmt 0 discriminator 1
 7941 0076 084E     		ldr	r6, .L913+20
 7942              	.LVL795:
 7943              	.L895:
 7944 0078 2846     		mov	r0, r5
 7945 007a B047     		blx	r6
 7946              	.LVL796:
 7947 007c 0134     		adds	r4, r4, #1
 7948              	.LVL797:
 7949 007e 0546     		mov	r5, r0
 7950              	.LVL798:
 7951 0080 FAD1     		bne	.L895
 7952 0082 CDE7     		b	.L892
 7953              	.L914:
ARM GAS  /tmp/ccGYckNR.s 			page 207


 7954              		.align	2
 7955              	.L913:
 7956 0084 00000000 		.word	.LANCHOR32
 7957 0088 95020008 		.word	134218389
 7958 008c 00200010 		.word	268443648
 7959 0090 9D020008 		.word	134218397
 7960 0094 00000000 		.word	.LANCHOR33
 7961 0098 99020008 		.word	134218393
 7962              		.cfi_endproc
 7963              	.LFE304:
 7965              		.section	.text.disp_reg,"ax",%progbits
 7966              		.align	1
 7967              		.p2align 2,,3
 7968              		.global	disp_reg
 7969              		.syntax unified
 7970              		.thumb
 7971              		.thumb_func
 7972              		.fpu fpv4-sp-d16
 7974              	disp_reg:
 7975              	.LFB305:
2328:dm/dm42_fns.cc **** 
 7976              		.loc 1 2328 0 is_stmt 1
 7977              		.cfi_startproc
 7978              		@ args = 0, pretend = 0, frame = 0
 7979              		@ frame_needed = 1, uses_anonymous_args = 0
 7980              	.LVL799:
 7981 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 7982              		.cfi_def_cfa_offset 24
 7983              		.cfi_offset 3, -24
 7984              		.cfi_offset 4, -20
 7985              		.cfi_offset 5, -16
 7986              		.cfi_offset 6, -12
 7987              		.cfi_offset 7, -8
 7988              		.cfi_offset 14, -4
 7989              	.LBB536:
 7990              	.LBB537:
1762:dm/dm42_fns.cc ****   return (offs < REG_OFFS_HALF) ? offs : offs-REG_OFFS_RANGE;
 7991              		.loc 1 1762 0
 7992 0002 1A4B     		ldr	r3, .L918
 7993 0004 1B68     		ldr	r3, [r3]
 7994 0006 9200     		lsls	r2, r2, #2
 7995              	.LVL800:
 7996 0008 D340     		lsrs	r3, r3, r2
 7997 000a 03F00F03 		and	r3, r3, #15
 7998              	.LVL801:
1763:dm/dm42_fns.cc **** }
 7999              		.loc 1 1763 0
 8000 000e 072B     		cmp	r3, #7
 8001 0010 C8BF     		it	gt
 8002 0012 103B     		subgt	r3, r3, #16
 8003              	.LBE537:
 8004              	.LBE536:
2328:dm/dm42_fns.cc **** 
 8005              		.loc 1 2328 0
 8006 0014 00AF     		add	r7, sp, #0
 8007              		.cfi_def_cfa_register 7
2328:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 208


 8008              		.loc 1 2328 0
 8009 0016 0546     		mov	r5, r0
2330:dm/dm42_fns.cc **** 
 8010              		.loc 1 2330 0
 8011 0018 1846     		mov	r0, r3
 8012              	.LVL802:
2328:dm/dm42_fns.cc **** 
 8013              		.loc 1 2328 0
 8014 001a 0E46     		mov	r6, r1
2330:dm/dm42_fns.cc **** 
 8015              		.loc 1 2330 0
 8016 001c FFF7FEFF 		bl	set_reg_font
 8017              	.LVL803:
2332:dm/dm42_fns.cc ****   const int buflen = linelen; //64; //32;
 8018              		.loc 1 2332 0
 8019 0020 134A     		ldr	r2, .L918+4
 8020 0022 144B     		ldr	r3, .L918+8
 8021 0024 906B     		ldr	r0, [r2, #56]
 8022 0026 90F90F40 		ldrsb	r4, [r0, #15]
 8023 002a 9847     		blx	r3
 8024              	.LVL804:
 8025 002c 04F5C874 		add	r4, r4, #400
 8026              	.LVL805:
 8027 0030 94FBF0F4 		sdiv	r4, r4, r0
 8028              	.LVL806:
2334:dm/dm42_fns.cc ****   int len;
 8029              		.loc 1 2334 0
 8030 0034 E31D     		adds	r3, r4, #7
 8031 0036 23F00703 		bic	r3, r3, #7
 8032 003a ADEB030D 		sub	sp, sp, r3
 8033              	.LVL807:
2337:dm/dm42_fns.cc ****   len = hp2font(buf, buf,len); buf[len] = 0;
 8034              		.loc 1 2337 0
 8035 003e 2846     		mov	r0, r5
 8036 0040 FFF7FEFF 		bl	strlen
 8037              	.LVL808:
 8038 0044 3246     		mov	r2, r6
 8039 0046 211A     		subs	r1, r4, r0
 8040 0048 6846     		mov	r0, sp
 8041 004a FFF7FEFF 		bl	reg2str
 8042              	.LVL809:
2338:dm/dm42_fns.cc ****   disp_aligned_line(prompt, buf);
 8043              		.loc 1 2338 0
 8044 004e 6946     		mov	r1, sp
 8045 0050 0246     		mov	r2, r0
 8046 0052 6846     		mov	r0, sp
 8047              	.LVL810:
 8048 0054 FFF7FEFF 		bl	_Z7hp2fontPcPKci
 8049              	.LVL811:
 8050 0058 0346     		mov	r3, r0
 8051              	.LVL812:
 8052 005a 0022     		movs	r2, #0
2339:dm/dm42_fns.cc **** }
 8053              		.loc 1 2339 0
 8054 005c 2846     		mov	r0, r5
 8055              	.LVL813:
 8056 005e 6946     		mov	r1, sp
ARM GAS  /tmp/ccGYckNR.s 			page 209


2338:dm/dm42_fns.cc ****   disp_aligned_line(prompt, buf);
 8057              		.loc 1 2338 0
 8058 0060 0DF80320 		strb	r2, [sp, r3]
2339:dm/dm42_fns.cc **** }
 8059              		.loc 1 2339 0
 8060 0064 FFF7FEFF 		bl	disp_aligned_line
 8061              	.LVL814:
2340:dm/dm42_fns.cc **** 
 8062              		.loc 1 2340 0
 8063 0068 BD46     		mov	sp, r7
 8064              		.cfi_def_cfa_register 13
 8065              	.LVL815:
 8066              		@ sp needed
 8067 006a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 8068              	.LVL816:
 8069              	.L919:
 8070              		.align	2
 8071              	.L918:
 8072 006c 00000000 		.word	.LANCHOR24
 8073 0070 00200010 		.word	268443648
 8074 0074 79020008 		.word	134218361
 8075              		.cfi_endproc
 8076              	.LFE305:
 8078              		.section	.text.disp_regs,"ax",%progbits
 8079              		.align	1
 8080              		.p2align 2,,3
 8081              		.global	disp_regs
 8082              		.syntax unified
 8083              		.thumb
 8084              		.thumb_func
 8085              		.fpu fpv4-sp-d16
 8087              	disp_regs:
 8088              	.LFB306:
2343:dm/dm42_fns.cc ****   static int last_pgm_top_line = 0;
 8089              		.loc 1 2343 0
 8090              		.cfi_startproc
 8091              		@ args = 0, pretend = 0, frame = 168
 8092              		@ frame_needed = 1, uses_anonymous_args = 0
 8093              	.LVL817:
 8094 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 8095              		.cfi_def_cfa_offset 36
 8096              		.cfi_offset 4, -36
 8097              		.cfi_offset 5, -32
 8098              		.cfi_offset 6, -28
 8099              		.cfi_offset 7, -24
 8100              		.cfi_offset 8, -20
 8101              		.cfi_offset 9, -16
 8102              		.cfi_offset 10, -12
 8103              		.cfi_offset 11, -8
 8104              		.cfi_offset 14, -4
2352:dm/dm42_fns.cc ****   int refresh_mask = is_running ? what : LCD_UPD_ALL;
 8105              		.loc 1 2352 0
 8106 0004 B24B     		ldr	r3, .L1061
2343:dm/dm42_fns.cc ****   static int last_pgm_top_line = 0;
 8107              		.loc 1 2343 0
 8108 0006 ADB0     		sub	sp, sp, #180
 8109              		.cfi_def_cfa_offset 216
ARM GAS  /tmp/ccGYckNR.s 			page 210


2352:dm/dm42_fns.cc ****   int refresh_mask = is_running ? what : LCD_UPD_ALL;
 8110              		.loc 1 2352 0
 8111 0008 1B68     		ldr	r3, [r3]
 8112              	.LVL818:
2353:dm/dm42_fns.cc **** 
 8113              		.loc 1 2353 0
 8114 000a 13F00803 		ands	r3, r3, #8
 8115              	.LVL819:
2343:dm/dm42_fns.cc ****   static int last_pgm_top_line = 0;
 8116              		.loc 1 2343 0
 8117 000e 02AF     		add	r7, sp, #8
 8118              		.cfi_def_cfa 7, 208
2353:dm/dm42_fns.cc **** 
 8119              		.loc 1 2353 0
 8120 0010 11D0     		beq	.L921
2355:dm/dm42_fns.cc ****     refresh_mask = get_reflcd_mask();
 8121              		.loc 1 2355 0 discriminator 4
 8122 0012 0028     		cmp	r0, #0
 8123 0014 0446     		mov	r4, r0
 8124              	.LVL820:
 8125 0016 1ADB     		blt	.L1046
2360:dm/dm42_fns.cc ****     clear_lcd_update_timeout();
 8126              		.loc 1 2360 0
 8127 0018 AE4D     		ldr	r5, .L1061+4
 8128 001a 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 8129              	.LVL821:
 8130 001c 012B     		cmp	r3, #1
 8131 001e 66DD     		ble	.L923
 8132              	.LVL822:
 8133              	.L1048:
 8134              	.LBB538:
 8135              	.LBB539:
2650:dm/dm42_fns.cc **** }
 8136              		.loc 1 2650 0
 8137 0020 AD4B     		ldr	r3, .L1061+8
 8138 0022 0022     		movs	r2, #0
 8139              	.LBE539:
 8140              	.LBE538:
2362:dm/dm42_fns.cc ****       lcd_refresh();
 8141              		.loc 1 2362 0
 8142 0024 E407     		lsls	r4, r4, #31
 8143              	.LBB542:
 8144              	.LBB540:
2650:dm/dm42_fns.cc **** }
 8145              		.loc 1 2650 0
 8146 0026 1A60     		str	r2, [r3]
 8147              	.LBE540:
 8148              	.LBE542:
2362:dm/dm42_fns.cc ****       lcd_refresh();
 8149              		.loc 1 2362 0
 8150 0028 0BD4     		bmi	.L979
 8151              	.LBB543:
 8152              	.LBB544:
 8153 002a FFF7FEFF 		bl	set_lcd_update_timeout.part.10
 8154              	.LVL823:
 8155              	.LBE544:
 8156              	.LBE543:
ARM GAS  /tmp/ccGYckNR.s 			page 211


2577:dm/dm42_fns.cc **** 
 8157              		.loc 1 2577 0
 8158 002e AC37     		adds	r7, r7, #172
 8159              		.cfi_remember_state
 8160              		.cfi_def_cfa_offset 36
 8161 0030 BD46     		mov	sp, r7
 8162              		.cfi_def_cfa_register 13
 8163              		@ sp needed
 8164 0032 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 8165              	.LVL824:
 8166              	.L921:
 8167              		.cfi_restore_state
2360:dm/dm42_fns.cc ****     clear_lcd_update_timeout();
 8168              		.loc 1 2360 0
 8169 0036 A74D     		ldr	r5, .L1061+4
 8170 0038 2A78     		ldrb	r2, [r5]	@ zero_extendqisi2
 8171 003a 012A     		cmp	r2, #1
 8172 003c 0FDD     		ble	.L1047
 8173              	.LBB545:
 8174              	.LBB541:
2650:dm/dm42_fns.cc **** }
 8175              		.loc 1 2650 0
 8176 003e A64A     		ldr	r2, .L1061+8
 8177 0040 1360     		str	r3, [r2]
 8178              	.LVL825:
 8179              	.L979:
 8180              	.LBE541:
 8181              	.LBE545:
2363:dm/dm42_fns.cc ****     else
 8182              		.loc 1 2363 0
 8183 0042 A64B     		ldr	r3, .L1061+12
 8184 0044 9847     		blx	r3
 8185              	.LVL826:
 8186              	.L920:
2577:dm/dm42_fns.cc **** 
 8187              		.loc 1 2577 0
 8188 0046 AC37     		adds	r7, r7, #172
 8189              		.cfi_remember_state
 8190              		.cfi_def_cfa_offset 36
 8191 0048 BD46     		mov	sp, r7
 8192              		.cfi_def_cfa_register 13
 8193              		@ sp needed
 8194 004a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 8195              	.LVL827:
 8196              	.L1046:
 8197              		.cfi_restore_state
2360:dm/dm42_fns.cc ****     clear_lcd_update_timeout();
 8198              		.loc 1 2360 0
 8199 004e A14D     		ldr	r5, .L1061+4
2356:dm/dm42_fns.cc **** 
 8200              		.loc 1 2356 0
 8201 0050 FFF7FEFF 		bl	get_reflcd_mask
 8202              	.LVL828:
2360:dm/dm42_fns.cc ****     clear_lcd_update_timeout();
 8203              		.loc 1 2360 0
 8204 0054 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 8205 0056 012B     		cmp	r3, #1
ARM GAS  /tmp/ccGYckNR.s 			page 212


2356:dm/dm42_fns.cc **** 
 8206              		.loc 1 2356 0
 8207 0058 0446     		mov	r4, r0
 8208              	.LVL829:
2360:dm/dm42_fns.cc ****     clear_lcd_update_timeout();
 8209              		.loc 1 2360 0
 8210 005a E1DC     		bgt	.L1048
 8211 005c 47E0     		b	.L923
 8212              	.LVL830:
 8213              	.L1047:
 8214 005e 0423     		movs	r3, #4
 8215              	.LVL831:
 8216 0060 FB60     		str	r3, [r7, #12]
2353:dm/dm42_fns.cc **** 
 8217              		.loc 1 2353 0
 8218 0062 0724     		movs	r4, #7
 8219              	.LVL832:
 8220              	.L981:
2370:dm/dm42_fns.cc **** 
 8221              		.loc 1 2370 0
 8222 0064 FFF7FEFF 		bl	_Z9core_menuv
 8223              	.LVL833:
 8224 0068 0028     		cmp	r0, #0
 8225 006a 44D0     		beq	.L926
2370:dm/dm42_fns.cc **** 
 8226              		.loc 1 2370 0 is_stmt 0 discriminator 1
 8227 006c 9C4B     		ldr	r3, .L1061+16
 8228 006e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8229 0070 002B     		cmp	r3, #0
 8230 0072 40D0     		beq	.L926
 8231              	.LVL834:
2372:dm/dm42_fns.cc **** 
 8232              		.loc 1 2372 0 is_stmt 1
 8233 0074 0020     		movs	r0, #0
 8234 0076 FFF7FEFF 		bl	set_reg_font
 8235              	.LVL835:
2375:dm/dm42_fns.cc **** 
 8236              		.loc 1 2375 0
 8237 007a 9A4B     		ldr	r3, .L1061+20
 8238              	.LBB546:
 8239              	.LBB547:
 8240              	.LBB548:
1669:dm/dm42_fns.cc **** }
 8241              		.loc 1 1669 0
 8242 007c DFF88C82 		ldr	r8, .L1061+60
 8243              	.LBE548:
 8244              	.LBE547:
 8245              	.LBE546:
2375:dm/dm42_fns.cc **** 
 8246              		.loc 1 2375 0
 8247 0080 9B6B     		ldr	r3, [r3, #56]
 8248              	.LBB556:
 8249              	.LBB552:
 8250              	.LBB549:
1669:dm/dm42_fns.cc **** }
 8251              		.loc 1 1669 0
 8252 0082 D8F80020 		ldr	r2, [r8]
ARM GAS  /tmp/ccGYckNR.s 			page 213


 8253              	.LBE549:
 8254              	.LBE552:
 8255              	.LBE556:
2375:dm/dm42_fns.cc **** 
 8256              		.loc 1 2375 0
 8257 0086 2822     		movs	r2, #40
 8258 0088 5A81     		strh	r2, [r3, #10]	@ movhi
2370:dm/dm42_fns.cc **** 
 8259              		.loc 1 2370 0
 8260 008a 0126     		movs	r6, #1
 8261              	.LVL836:
 8262              	.L974:
 8263              	.LBB557:
2387:dm/dm42_fns.cc ****     int y_lines = LCD_Y - top_y_lines;
 8264              		.loc 1 2387 0
 8265 008c FFF7FEFF 		bl	is_pgm_mode
 8266              	.LVL837:
 8267 0090 0028     		cmp	r0, #0
 8268 0092 50D1     		bne	.L1049
 8269              	.LBB558:
2446:dm/dm42_fns.cc **** 
 8270              		.loc 1 2446 0
 8271 0094 934B     		ldr	r3, .L1061+20
 8272              	.LBB559:
 8273              	.LBB560:
1669:dm/dm42_fns.cc **** }
 8274              		.loc 1 1669 0
 8275 0096 D8F80020 		ldr	r2, [r8]
 8276              	.LBE560:
 8277              	.LBE559:
2446:dm/dm42_fns.cc **** 
 8278              		.loc 1 2446 0
 8279 009a 9B6B     		ldr	r3, [r3, #56]
 8280 009c F021     		movs	r1, #240
 8281 009e D980     		strh	r1, [r3, #6]	@ movhi
2452:dm/dm42_fns.cc ****       //fReg->ln_offs -= LCD_MENU_LINES;
 8282              		.loc 1 2452 0
 8283 00a0 D105     		lsls	r1, r2, #23
 8284 00a2 00D4     		bmi	.L943
2452:dm/dm42_fns.cc ****       //fReg->ln_offs -= LCD_MENU_LINES;
 8285              		.loc 1 2452 0 is_stmt 0 discriminator 2
 8286 00a4 0EB1     		cbz	r6, .L976
 8287              	.L943:
2455:dm/dm42_fns.cc ****     }
 8288              		.loc 1 2455 0 is_stmt 1
 8289 00a6 D022     		movs	r2, #208
 8290 00a8 DA80     		strh	r2, [r3, #6]	@ movhi
 8291              	.L976:
 8292              	.LBB561:
2458:dm/dm42_fns.cc ****       // == Clear main area ==
 8293              		.loc 1 2458 0
 8294 00aa E207     		lsls	r2, r4, #31
 8295 00ac 00F1A381 		bmi	.L1050
 8296              	.L934:
 8297              	.LBE561:
 8298              	.LBE558:
 8299              	.LBE557:
ARM GAS  /tmp/ccGYckNR.s 			page 214


2518:dm/dm42_fns.cc **** 
 8300              		.loc 1 2518 0
 8301 00b0 0020     		movs	r0, #0
 8302 00b2 FFF7FEFF 		bl	set_reg_font
 8303              	.LVL838:
 8304              	.LBB585:
2521:dm/dm42_fns.cc ****     int wasy = 0; // Anything was drawn
 8305              		.loc 1 2521 0
 8306 00b6 FFF7FEFF 		bl	is_pgm_mode
 8307              	.LVL839:
 8308 00ba 8046     		mov	r8, r0
 8309 00bc 0028     		cmp	r0, #0
 8310 00be 00F02F81 		beq	.L1051
 8311              	.L958:
 8312              	.LBE585:
 8313              	.LBB593:
2551:dm/dm42_fns.cc ****     int a;
 8314              		.loc 1 2551 0
 8315 00c2 FB68     		ldr	r3, [r7, #12]
 8316 00c4 002B     		cmp	r3, #0
 8317 00c6 40F0E080 		bne	.L966
 8318              	.L970:
 8319              	.LBE593:
2569:dm/dm42_fns.cc ****     draw_hp42_lcd(core_display_buffer(), 17, 0,0, 131,16);
 8320              		.loc 1 2569 0
 8321 00ca 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 8322              	.LBB595:
 8323              	.LBB596:
2650:dm/dm42_fns.cc **** }
 8324              		.loc 1 2650 0
 8325 00cc 824A     		ldr	r2, .L1061+8
 8326 00ce 0025     		movs	r5, #0
 8327              	.LBE596:
 8328              	.LBE595:
2569:dm/dm42_fns.cc ****     draw_hp42_lcd(core_display_buffer(), 17, 0,0, 131,16);
 8329              		.loc 1 2569 0
 8330 00d0 012B     		cmp	r3, #1
 8331              	.LBB598:
 8332              	.LBB597:
2650:dm/dm42_fns.cc **** }
 8333              		.loc 1 2650 0
 8334 00d2 1560     		str	r5, [r2]
 8335              	.LBE597:
 8336              	.LBE598:
2569:dm/dm42_fns.cc ****     draw_hp42_lcd(core_display_buffer(), 17, 0,0, 131,16);
 8337              		.loc 1 2569 0
 8338 00d4 02D1     		bne	.L968
2569:dm/dm42_fns.cc ****     draw_hp42_lcd(core_display_buffer(), 17, 0,0, 131,16);
 8339              		.loc 1 2569 0 is_stmt 0 discriminator 1
 8340 00d6 E307     		lsls	r3, r4, #31
 8341 00d8 00F1B681 		bmi	.L1052
 8342              	.L968:
 8343              	.LBB599:
 8344              	.LBB600:
 8345 00dc FFF7FEFF 		bl	set_lcd_update_timeout.part.10
 8346              	.LVL840:
 8347              	.L972:
ARM GAS  /tmp/ccGYckNR.s 			page 215


 8348              	.LBE600:
 8349              	.LBE599:
2574:dm/dm42_fns.cc ****     disp_was_menu_drawn = 0;
 8350              		.loc 1 2574 0 is_stmt 1
 8351 00e0 FFF7FEFF 		bl	_Z9core_menuv
 8352              	.LVL841:
 8353 00e4 0028     		cmp	r0, #0
 8354 00e6 AED1     		bne	.L920
2575:dm/dm42_fns.cc **** 
 8355              		.loc 1 2575 0
 8356 00e8 7D4B     		ldr	r3, .L1061+16
 8357 00ea 1870     		strb	r0, [r3]
 8358 00ec ABE7     		b	.L920
 8359              	.LVL842:
 8360              	.L923:
 8361 00ee 04F00403 		and	r3, r4, #4
 8362 00f2 FB60     		str	r3, [r7, #12]
 8363 00f4 B6E7     		b	.L981
 8364              	.LVL843:
 8365              	.L926:
2372:dm/dm42_fns.cc **** 
 8366              		.loc 1 2372 0
 8367 00f6 0020     		movs	r0, #0
 8368              	.LBB601:
 8369              	.LBB553:
 8370              	.LBB550:
1669:dm/dm42_fns.cc **** }
 8371              		.loc 1 1669 0
 8372 00f8 DFF81082 		ldr	r8, .L1061+60
 8373              	.LBE550:
 8374              	.LBE553:
 8375              	.LBE601:
2372:dm/dm42_fns.cc **** 
 8376              		.loc 1 2372 0
 8377 00fc FFF7FEFF 		bl	set_reg_font
 8378              	.LVL844:
2375:dm/dm42_fns.cc **** 
 8379              		.loc 1 2375 0
 8380 0100 784A     		ldr	r2, .L1061+20
 8381              	.LBB602:
 8382              	.LBB554:
 8383              	.LBB551:
1669:dm/dm42_fns.cc **** }
 8384              		.loc 1 1669 0
 8385 0102 D8F80060 		ldr	r6, [r8]
 8386              	.LBE551:
 8387              	.LBE554:
 8388              	.LBE602:
2375:dm/dm42_fns.cc **** 
 8389              		.loc 1 2375 0
 8390 0106 926B     		ldr	r2, [r2, #56]
 8391 0108 2821     		movs	r1, #40
 8392              	.LBB603:
2378:dm/dm42_fns.cc ****     const char * menu[] = 
 8393              		.loc 1 2378 0
 8394 010a 16F48076 		ands	r6, r6, #256
 8395              	.LBE603:
ARM GAS  /tmp/ccGYckNR.s 			page 216


2375:dm/dm42_fns.cc **** 
 8396              		.loc 1 2375 0
 8397 010e 5181     		strh	r1, [r2, #10]	@ movhi
 8398              	.LBB604:
2378:dm/dm42_fns.cc ****     const char * menu[] = 
 8399              		.loc 1 2378 0
 8400 0110 BCD0     		beq	.L974
 8401              	.LBB555:
2381:dm/dm42_fns.cc ****     lcd_draw_menu_keys(menu);
 8402              		.loc 1 2381 0
 8403 0112 DFF8FCE1 		ldr	lr, .L1061+64
2382:dm/dm42_fns.cc ****   }
 8404              		.loc 1 2382 0
 8405 0116 DFF8FC91 		ldr	r9, .L1061+68
2381:dm/dm42_fns.cc ****     lcd_draw_menu_keys(menu);
 8406              		.loc 1 2381 0
 8407 011a BEE80F00 		ldmia	lr!, {r0, r1, r2, r3}
 8408 011e 07F14406 		add	r6, r7, #68
 8409 0122 0FC6     		stmia	r6!, {r0, r1, r2, r3}
 8410 0124 9EE80300 		ldm	lr, {r0, r1}
 8411 0128 86E80300 		stm	r6, {r0, r1}
2382:dm/dm42_fns.cc ****   }
 8412              		.loc 1 2382 0
 8413 012c 07F14400 		add	r0, r7, #68
 8414 0130 C847     		blx	r9
 8415              	.LVL845:
 8416              	.LBE555:
 8417 0132 0026     		movs	r6, #0
 8418 0134 AAE7     		b	.L974
 8419              	.LVL846:
 8420              	.L1049:
 8421              	.LBE604:
 8422              	.LBB605:
 8423              	.LBB579:
2389:dm/dm42_fns.cc ****     int last_line = 0;
 8424              		.loc 1 2389 0
 8425 0136 DFF8AC91 		ldr	r9, .L1061+20
 8426 013a 6B4B     		ldr	r3, .L1061+24
 8427 013c D9F83800 		ldr	r0, [r9, #56]
 8428 0140 9847     		blx	r3
 8429              	.LVL847:
 8430 0142 8246     		mov	r10, r0
 8431              	.LVL848:
2391:dm/dm42_fns.cc **** 
 8432              		.loc 1 2391 0
 8433 0144 D9F83800 		ldr	r0, [r9, #56]
 8434              	.LVL849:
 8435 0148 684B     		ldr	r3, .L1061+28
 8436 014a 90F90F90 		ldrsb	r9, [r0, #15]
 8437 014e 9847     		blx	r3
 8438              	.LVL850:
 8439 0150 09F5C879 		add	r9, r9, #400
 8440 0154 99FBF0F9 		sdiv	r9, r9, r0
 8441              	.LVL851:
2394:dm/dm42_fns.cc **** 
 8442              		.loc 1 2394 0
 8443 0158 07F11000 		add	r0, r7, #16
ARM GAS  /tmp/ccGYckNR.s 			page 217


 8444 015c FFF7FEFF 		bl	get_pgm_info
 8445              	.LVL852:
 8446              	.LBB580:
 8447              	.LBB581:
1669:dm/dm42_fns.cc **** }
 8448              		.loc 1 1669 0
 8449 0160 D8F80030 		ldr	r3, [r8]
 8450              	.LBE581:
 8451              	.LBE580:
2397:dm/dm42_fns.cc ****       y_lines -= LCD_MENU_LINES;
 8452              		.loc 1 2397 0
 8453 0164 D805     		lsls	r0, r3, #23
 8454 0166 00F13C81 		bmi	.L929
2397:dm/dm42_fns.cc ****       y_lines -= LCD_MENU_LINES;
 8455              		.loc 1 2397 0 is_stmt 0 discriminator 2
 8456 016a 002E     		cmp	r6, #0
 8457 016c 40F03981 		bne	.L929
2389:dm/dm42_fns.cc ****     int last_line = 0;
 8458              		.loc 1 2389 0 is_stmt 1
 8459 0170 C823     		movs	r3, #200
2388:dm/dm42_fns.cc ****     int font_lines = y_lines/lcd_lineHeight(fReg);
 8460              		.loc 1 2388 0
 8461 0172 1A46     		mov	r2, r3
2389:dm/dm42_fns.cc ****     int last_line = 0;
 8462              		.loc 1 2389 0
 8463 0174 93FBFAFA 		sdiv	r10, r3, r10
 8464              	.LVL853:
 8465              	.L975:
2403:dm/dm42_fns.cc **** 
 8466              		.loc 1 2403 0
 8467 0178 5A49     		ldr	r1, .L1061+20
2406:dm/dm42_fns.cc **** 
 8468              		.loc 1 2406 0
 8469 017a 5D4B     		ldr	r3, .L1061+32
2403:dm/dm42_fns.cc **** 
 8470              		.loc 1 2403 0
 8471 017c 896B     		ldr	r1, [r1, #56]
 8472 017e 2820     		movs	r0, #40
 8473 0180 0881     		strh	r0, [r1, #8]	@ movhi
2406:dm/dm42_fns.cc **** 
 8474              		.loc 1 2406 0
 8475 0182 FF21     		movs	r1, #255
 8476 0184 9847     		blx	r3
 8477              	.LVL854:
2409:dm/dm42_fns.cc **** 
 8478              		.loc 1 2409 0
 8479 0186 5B4B     		ldr	r3, .L1061+36
 8480 0188 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8481 018a 0BB1     		cbz	r3, .L930
2409:dm/dm42_fns.cc **** 
 8482              		.loc 1 2409 0 is_stmt 0 discriminator 1
 8483 018c 0AF1FF3A 		add	r10, r10, #-1
 8484              	.LVL855:
 8485              	.L930:
2411:dm/dm42_fns.cc ****       last_pgm_top_line = pi.pgm_line;
 8486              		.loc 1 2411 0 is_stmt 1
 8487 0190 594E     		ldr	r6, .L1061+40
ARM GAS  /tmp/ccGYckNR.s 			page 218


 8488 0192 3B69     		ldr	r3, [r7, #16]
 8489 0194 3268     		ldr	r2, [r6]
 8490 0196 9342     		cmp	r3, r2
2412:dm/dm42_fns.cc ****     if ( last_pgm_top_line <= (pi.pgm_line - font_lines) )
 8491              		.loc 1 2412 0
 8492 0198 BCBF     		itt	lt
 8493 019a 3360     		strlt	r3, [r6]
 8494 019c 1A46     		movlt	r2, r3
2413:dm/dm42_fns.cc ****       last_pgm_top_line = pi.pgm_line - font_lines + 1;
 8495              		.loc 1 2413 0
 8496 019e A3EB0A03 		sub	r3, r3, r10
 8497 01a2 9342     		cmp	r3, r2
2414:dm/dm42_fns.cc **** 
 8498              		.loc 1 2414 0
 8499 01a4 A8BF     		it	ge
 8500 01a6 0133     		addge	r3, r3, #1
2420:dm/dm42_fns.cc **** 
 8501              		.loc 1 2420 0
 8502 01a8 4A46     		mov	r2, r9
 8503 01aa 07F14401 		add	r1, r7, #68
 8504 01ae 07F11800 		add	r0, r7, #24
2414:dm/dm42_fns.cc **** 
 8505              		.loc 1 2414 0
 8506 01b2 A8BF     		it	ge
 8507 01b4 3360     		strge	r3, [r6]
2420:dm/dm42_fns.cc **** 
 8508              		.loc 1 2420 0
 8509 01b6 FFF7FEFF 		bl	pgm_line_init
 8510              	.LVL856:
2422:dm/dm42_fns.cc ****     int pgm_line_end = last_pgm_top_line + font_lines;
 8511              		.loc 1 2422 0
 8512 01ba D6F80080 		ldr	r8, [r6]
 8513              	.LVL857:
2424:dm/dm42_fns.cc ****       len = get_pgm_line(&pln, pgm_line);
 8514              		.loc 1 2424 0
 8515 01be 97F92060 		ldrsb	r6, [r7, #32]
2423:dm/dm42_fns.cc ****     for( ; !pln.is_end && pgm_line < pgm_line_end; pgm_line++ ) {
 8516              		.loc 1 2423 0
 8517 01c2 0AEB0803 		add	r3, r10, r8
 8518              	.LVL858:
2424:dm/dm42_fns.cc ****       len = get_pgm_line(&pln, pgm_line);
 8519              		.loc 1 2424 0
 8520 01c6 002E     		cmp	r6, #0
 8521 01c8 7FF472AF 		bne	.L934
 8522 01cc 9845     		cmp	r8, r3
 8523 01ce BFF66FAF 		bge	.L934
 8524 01d2 BC60     		str	r4, [r7, #8]
2437:dm/dm42_fns.cc ****       }
 8525              		.loc 1 2437 0
 8526 01d4 DFF80C91 		ldr	r9, .L1061+20
 8527              	.LVL859:
 8528 01d8 DFF83CA1 		ldr	r10, .L1061+72
 8529              	.LVL860:
 8530 01dc 1C46     		mov	r4, r3
 8531 01de 25E0     		b	.L937
 8532              	.LVL861:
 8533              	.L1053:
ARM GAS  /tmp/ccGYckNR.s 			page 219


2427:dm/dm42_fns.cc ****           // Display both lines
 8534              		.loc 1 2427 0
 8535 01e0 444B     		ldr	r3, .L1061+36
 8536 01e2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8537 01e4 002B     		cmp	r3, #0
 8538 01e6 3BD1     		bne	.L939
 8539 01e8 97F91410 		ldrsb	r1, [r7, #20]
 8540 01ec 01EB4103 		add	r3, r1, r1, lsl #1
 8541 01f0 C1EBC301 		rsb	r1, r1, r3, lsl #3
 8542 01f4 07F12C0B 		add	fp, r7, #44
 8543              	.LVL862:
 8544              	.L940:
2433:dm/dm42_fns.cc ****         lcd_putsAt(fReg, last_line++, bb);
 8545              		.loc 1 2433 0
 8546 01f8 404B     		ldr	r3, .L1061+44
 8547 01fa 1622     		movs	r2, #22
 8548 01fc 1944     		add	r1, r1, r3
 8549 01fe 5846     		mov	r0, fp
 8550 0200 FFF7FEFF 		bl	_Z7hp2fontPcPKci
 8551              	.LVL863:
2434:dm/dm42_fns.cc ****       } else {
 8552              		.loc 1 2434 0
 8553 0204 3146     		mov	r1, r6
 8554 0206 D9F83800 		ldr	r0, [r9, #56]
 8555 020a D047     		blx	r10
 8556              	.LVL864:
 8557 020c 5946     		mov	r1, fp
 8558 020e D9F83800 		ldr	r0, [r9, #56]
 8559 0212 3B4B     		ldr	r3, .L1061+48
 8560 0214 0136     		adds	r6, r6, #1
 8561              	.LVL865:
 8562 0216 9847     		blx	r3
 8563              	.LVL866:
 8564              	.L941:
2424:dm/dm42_fns.cc ****       len = get_pgm_line(&pln, pgm_line);
 8565              		.loc 1 2424 0
 8566 0218 97F92030 		ldrsb	r3, [r7, #32]
 8567 021c 08F10108 		add	r8, r8, #1
 8568              	.LVL867:
 8569 0220 002B     		cmp	r3, #0
 8570 0222 40F0DC80 		bne	.L1043
2424:dm/dm42_fns.cc ****       len = get_pgm_line(&pln, pgm_line);
 8571              		.loc 1 2424 0 is_stmt 0 discriminator 1
 8572 0226 4445     		cmp	r4, r8
 8573 0228 00F0D980 		beq	.L1043
 8574              	.LVL868:
 8575              	.L937:
2425:dm/dm42_fns.cc ****       if ( pgm_line == pi.pgm_line ) {
 8576              		.loc 1 2425 0 is_stmt 1
 8577 022c 4146     		mov	r1, r8
 8578 022e 07F11800 		add	r0, r7, #24
 8579 0232 FFF7FEFF 		bl	get_pgm_line
 8580              	.LVL869:
2426:dm/dm42_fns.cc ****         if (is_show) {
 8581              		.loc 1 2426 0
 8582 0236 3B69     		ldr	r3, [r7, #16]
2436:dm/dm42_fns.cc ****         lcd_putsAt(fReg, last_line++, pb);
ARM GAS  /tmp/ccGYckNR.s 			page 220


 8583              		.loc 1 2436 0
 8584 0238 07F14401 		add	r1, r7, #68
2426:dm/dm42_fns.cc ****         if (is_show) {
 8585              		.loc 1 2426 0
 8586 023c 4345     		cmp	r3, r8
2425:dm/dm42_fns.cc ****       if ( pgm_line == pi.pgm_line ) {
 8587              		.loc 1 2425 0
 8588 023e 0246     		mov	r2, r0
 8589              	.LVL870:
2436:dm/dm42_fns.cc ****         lcd_putsAt(fReg, last_line++, pb);
 8590              		.loc 1 2436 0
 8591 0240 0846     		mov	r0, r1
 8592              	.LVL871:
2426:dm/dm42_fns.cc ****         if (is_show) {
 8593              		.loc 1 2426 0
 8594 0242 CDD0     		beq	.L1053
2436:dm/dm42_fns.cc ****         lcd_putsAt(fReg, last_line++, pb);
 8595              		.loc 1 2436 0
 8596 0244 FFF7FEFF 		bl	_Z7hp2fontPcPKci
 8597              	.LVL872:
2437:dm/dm42_fns.cc ****       }
 8598              		.loc 1 2437 0
 8599 0248 3146     		mov	r1, r6
 8600 024a D9F83800 		ldr	r0, [r9, #56]
 8601 024e D047     		blx	r10
 8602              	.LVL873:
 8603 0250 07F14401 		add	r1, r7, #68
 8604 0254 D9F83800 		ldr	r0, [r9, #56]
 8605 0258 294B     		ldr	r3, .L1061+48
 8606 025a 9847     		blx	r3
 8607              	.LVL874:
 8608 025c 0136     		adds	r6, r6, #1
 8609              	.LVL875:
 8610 025e DBE7     		b	.L941
 8611              	.LVL876:
 8612              	.L939:
2429:dm/dm42_fns.cc ****           lcd_putsAt(fReg, last_line++, bb);
 8613              		.loc 1 2429 0
 8614 0260 07F12C0B 		add	fp, r7, #44
 8615 0264 1622     		movs	r2, #22
 8616              	.LVL877:
 8617 0266 2549     		ldr	r1, .L1061+44
 8618 0268 5846     		mov	r0, fp
 8619 026a FFF7FEFF 		bl	_Z7hp2fontPcPKci
 8620              	.LVL878:
2430:dm/dm42_fns.cc ****           pi.y_row=1;
 8621              		.loc 1 2430 0
 8622 026e 3146     		mov	r1, r6
 8623 0270 D9F83800 		ldr	r0, [r9, #56]
 8624 0274 D047     		blx	r10
 8625              	.LVL879:
 8626 0276 5946     		mov	r1, fp
 8627 0278 214B     		ldr	r3, .L1061+48
 8628 027a D9F83800 		ldr	r0, [r9, #56]
 8629 027e 9847     		blx	r3
 8630              	.LVL880:
2431:dm/dm42_fns.cc ****         }
ARM GAS  /tmp/ccGYckNR.s 			page 221


 8631              		.loc 1 2431 0
 8632 0280 0123     		movs	r3, #1
2430:dm/dm42_fns.cc ****           pi.y_row=1;
 8633              		.loc 1 2430 0
 8634 0282 1E44     		add	r6, r6, r3
 8635              	.LVL881:
2431:dm/dm42_fns.cc ****         }
 8636              		.loc 1 2431 0
 8637 0284 3B75     		strb	r3, [r7, #20]
 8638 0286 1721     		movs	r1, #23
 8639 0288 B6E7     		b	.L940
 8640              	.LVL882:
 8641              	.L966:
 8642              	.LBE579:
 8643              	.LBE605:
 8644              	.LBB606:
 8645              	.LBB594:
2555:dm/dm42_fns.cc **** 
 8646              		.loc 1 2555 0
 8647 028a 1022     		movs	r2, #16
 8648 028c C023     		movs	r3, #192
 8649 028e 8DE80C00 		stm	sp, {r2, r3}
 8650 0292 1C4E     		ldr	r6, .L1061+52
 8651 0294 1C48     		ldr	r0, .L1061+56
2560:dm/dm42_fns.cc ****       }
 8652              		.loc 1 2560 0
 8653 0296 DFF88490 		ldr	r9, .L1061+76
2555:dm/dm42_fns.cc **** 
 8654              		.loc 1 2555 0
 8655 029a 4FF48073 		mov	r3, #256
 8656 029e 1822     		movs	r2, #24
 8657 02a0 0021     		movs	r1, #0
 8658 02a2 B047     		blx	r6
 8659              	.LVL883:
 8660 02a4 4FF0D208 		mov	r8, #210
2557:dm/dm42_fns.cc ****       if ( !get_calc_flag(a) && !TEST_ANNUNCIATORS) {
 8661              		.loc 1 2557 0
 8662 02a8 0026     		movs	r6, #0
 8663 02aa 04E0     		b	.L971
 8664              	.LVL884:
 8665              	.L969:
2557:dm/dm42_fns.cc ****       if ( !get_calc_flag(a) && !TEST_ANNUNCIATORS) {
 8666              		.loc 1 2557 0 is_stmt 0 discriminator 2
 8667 02ac 0B2E     		cmp	r6, #11
 8668 02ae 08F11108 		add	r8, r8, #17
 8669 02b2 3FF40AAF 		beq	.L970
 8670              	.LVL885:
 8671              	.L971:
2558:dm/dm42_fns.cc ****         // Empty particular space
 8672              		.loc 1 2558 0 is_stmt 1
 8673 02b6 3046     		mov	r0, r6
 8674 02b8 FFF7FEFF 		bl	get_calc_flag
 8675              	.LVL886:
2557:dm/dm42_fns.cc ****       if ( !get_calc_flag(a) && !TEST_ANNUNCIATORS) {
 8676              		.loc 1 2557 0
 8677 02bc 0136     		adds	r6, r6, #1
 8678              	.LVL887:
ARM GAS  /tmp/ccGYckNR.s 			page 222


2558:dm/dm42_fns.cc ****         // Empty particular space
 8679              		.loc 1 2558 0
 8680 02be 0028     		cmp	r0, #0
 8681 02c0 F4D1     		bne	.L969
2560:dm/dm42_fns.cc ****       }
 8682              		.loc 1 2560 0
 8683 02c2 1023     		movs	r3, #16
 8684 02c4 0090     		str	r0, [sp]
 8685 02c6 1A46     		mov	r2, r3
 8686 02c8 1821     		movs	r1, #24
 8687 02ca 4046     		mov	r0, r8
 8688 02cc C847     		blx	r9
 8689              	.LVL888:
 8690 02ce EDE7     		b	.L969
 8691              	.L1062:
 8692              		.align	2
 8693              	.L1061:
 8694 02d0 00000000 		.word	.LANCHOR0
 8695 02d4 00000000 		.word	.LANCHOR10
 8696 02d8 00000000 		.word	.LANCHOR9
 8697 02dc 31020008 		.word	134218289
 8698 02e0 00000000 		.word	.LANCHOR19
 8699 02e4 00200010 		.word	268443648
 8700 02e8 71020008 		.word	134218353
 8701 02ec 79020008 		.word	134218361
 8702 02f0 51020008 		.word	134218321
 8703 02f4 00000000 		.word	.LANCHOR16
 8704 02f8 00000000 		.word	.LANCHOR35
 8705 02fc 00000000 		.word	.LANCHOR15
 8706 0300 7D020008 		.word	134218365
 8707 0304 49020008 		.word	134218313
 8708 0308 08000000 		.word	.LANCHOR36+8
 8709 030c 00000000 		.word	.LANCHOR8
 8710 0310 10000000 		.word	.LANCHOR22+16
 8711 0314 AD020008 		.word	134218413
 8712 0318 69020008 		.word	134218345
 8713 031c 3D020008 		.word	134218301
 8714              	.LVL889:
 8715              	.L1051:
 8716              	.LBE594:
 8717              	.LBE606:
 8718              	.LBB607:
2521:dm/dm42_fns.cc ****     int wasy = 0; // Anything was drawn
 8719              		.loc 1 2521 0 discriminator 1
 8720 0320 FFF7FEFF 		bl	is_goose
 8721              	.LVL890:
 8722 0324 0028     		cmp	r0, #0
 8723 0326 40F09B80 		bne	.L1054
 8724              	.L959:
 8725              	.LVL891:
 8726              	.LBB586:
2525:dm/dm42_fns.cc ****     for(int j=0; j<2; j++) {
 8727              		.loc 1 2525 0
 8728 032a 874A     		ldr	r2, .L1063
 8729 032c DFF860B2 		ldr	fp, .L1063+72
 8730 0330 906B     		ldr	r0, [r2, #56]
 8731              	.LBB587:
ARM GAS  /tmp/ccGYckNR.s 			page 223


2534:dm/dm42_fns.cc ****         continue;
 8732              		.loc 1 2534 0
 8733 0332 DFF86092 		ldr	r9, .L1063+76
2540:dm/dm42_fns.cc ****       wasy = fReg->y;
 8734              		.loc 1 2540 0
 8735 0336 BA60     		str	r2, [r7, #8]
 8736              	.LBE587:
2525:dm/dm42_fns.cc ****     for(int j=0; j<2; j++) {
 8737              		.loc 1 2525 0
 8738 0338 4FF0280E 		mov	lr, #40
 8739              	.LBB590:
2526:dm/dm42_fns.cc ****       // Ignore if second char is 0x80 -> register display
 8740              		.loc 1 2526 0
 8741 033c 0026     		movs	r6, #0
 8742              	.LBE590:
2525:dm/dm42_fns.cc ****     for(int j=0; j<2; j++) {
 8743              		.loc 1 2525 0
 8744 033e A0F808E0 		strh	lr, [r0, #8]	@ movhi
 8745              	.LVL892:
2523:dm/dm42_fns.cc ****     // Print from text buffer all what isn't especially handled
 8746              		.loc 1 2523 0
 8747 0342 B246     		mov	r10, r6
 8748              	.LVL893:
 8749              	.L965:
 8750              	.LBB591:
2528:dm/dm42_fns.cc **** 
 8751              		.loc 1 2528 0
 8752 0344 9BF80130 		ldrb	r3, [fp, #1]	@ zero_extendqisi2
 8753 0348 802B     		cmp	r3, #128
 8754 034a 35D0     		beq	.L961
2531:dm/dm42_fns.cc ****       
 8755              		.loc 1 2531 0
 8756 034c FFF7FEFF 		bl	is_pgm_mode
 8757              	.LVL894:
 8758 0350 30B9     		cbnz	r0, .L962
2531:dm/dm42_fns.cc ****       
 8759              		.loc 1 2531 0 is_stmt 0 discriminator 1
 8760 0352 7E4B     		ldr	r3, .L1063+4
 8761 0354 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8762 0356 1BB1     		cbz	r3, .L962
2531:dm/dm42_fns.cc ****       
 8763              		.loc 1 2531 0 discriminator 3
 8764 0358 9BF80030 		ldrb	r3, [fp]	@ zero_extendqisi2
 8765 035c 1A2B     		cmp	r3, #26
 8766 035e 2BD0     		beq	.L961
 8767              	.L962:
2534:dm/dm42_fns.cc ****         continue;
 8768              		.loc 1 2534 0 is_stmt 1
 8769 0360 99F80030 		ldrb	r3, [r9]	@ zero_extendqisi2
 8770 0364 0F2B     		cmp	r3, #15
 8771 0366 00D0     		beq	.L977
2534:dm/dm42_fns.cc ****         continue;
 8772              		.loc 1 2534 0 is_stmt 0 discriminator 2
 8773 0368 4EB1     		cbz	r6, .L963
 8774              	.L977:
 8775 036a 0BF11601 		add	r1, fp, #22
 8776              	.LBE591:
ARM GAS  /tmp/ccGYckNR.s 			page 224


2523:dm/dm42_fns.cc ****     // Print from text buffer all what isn't especially handled
 8777              		.loc 1 2523 0 is_stmt 1
 8778 036e 5B46     		mov	r3, fp
 8779 0370 01E0     		b	.L964
 8780              	.L1055:
 8781              	.LBB592:
 8782              	.LBB588:
 8783              	.LBB589:
1423:dm/dm42_fns.cc ****   }
 8784              		.loc 1 1423 0
 8785 0372 9942     		cmp	r1, r3
 8786 0374 20D0     		beq	.L961
 8787              	.L964:
1422:dm/dm42_fns.cc ****     if (x == LCD_HP_CHARS) return 1;
 8788              		.loc 1 1422 0
 8789 0376 13F8012B 		ldrb	r2, [r3], #1	@ zero_extendqisi2
 8790 037a 202A     		cmp	r2, #32
 8791 037c F9D0     		beq	.L1055
 8792              	.L963:
 8793              	.LBE589:
 8794              	.LBE588:
2537:dm/dm42_fns.cc **** 
 8795              		.loc 1 2537 0
 8796 037e 1622     		movs	r2, #22
 8797 0380 5946     		mov	r1, fp
 8798 0382 07F12C00 		add	r0, r7, #44
 8799 0386 FFF7FEFF 		bl	_Z7hp2fontPcPKci
 8800              	.LVL895:
 8801 038a 07F1A803 		add	r3, r7, #168
 8802 038e 1844     		add	r0, r0, r3
 8803              	.LVL896:
 8804 0390 0023     		movs	r3, #0
 8805 0392 00F87C3C 		strb	r3, [r0, #-124]
2540:dm/dm42_fns.cc ****       wasy = fReg->y;
 8806              		.loc 1 2540 0
 8807 0396 BB68     		ldr	r3, [r7, #8]
 8808 0398 5146     		mov	r1, r10
 8809 039a 986B     		ldr	r0, [r3, #56]
 8810 039c 6C4B     		ldr	r3, .L1063+8
 8811 039e 9847     		blx	r3
 8812              	.LVL897:
 8813 03a0 BA68     		ldr	r2, [r7, #8]
 8814 03a2 6C4B     		ldr	r3, .L1063+12
 8815 03a4 906B     		ldr	r0, [r2, #56]
 8816 03a6 07F12C01 		add	r1, r7, #44
 8817 03aa 9847     		blx	r3
 8818              	.LVL898:
2541:dm/dm42_fns.cc ****     }
 8819              		.loc 1 2541 0
 8820 03ac BA68     		ldr	r2, [r7, #8]
 8821 03ae 936B     		ldr	r3, [r2, #56]
 8822 03b0 B3F90680 		ldrsh	r8, [r3, #6]
2540:dm/dm42_fns.cc ****       wasy = fReg->y;
 8823              		.loc 1 2540 0
 8824 03b4 0AF1010A 		add	r10, r10, #1
 8825              	.LVL899:
 8826              	.L961:
ARM GAS  /tmp/ccGYckNR.s 			page 225


2526:dm/dm42_fns.cc ****       // Ignore if second char is 0x80 -> register display
 8827              		.loc 1 2526 0 discriminator 2
 8828 03b8 0136     		adds	r6, r6, #1
 8829              	.LVL900:
 8830 03ba 022E     		cmp	r6, #2
 8831 03bc 0BF1170B 		add	fp, fp, #23
 8832 03c0 C0D1     		bne	.L965
 8833              	.LBE592:
2545:dm/dm42_fns.cc ****       lcd_fillLines(wasy+lcd_lineHeight(fReg), LCD_SET_VALUE, 2);
 8834              		.loc 1 2545 0
 8835 03c2 B8F1000F 		cmp	r8, #0
 8836 03c6 3FF47CAE 		beq	.L958
2546:dm/dm42_fns.cc ****   }
 8837              		.loc 1 2546 0
 8838 03ca 5F4A     		ldr	r2, .L1063
 8839 03cc 624B     		ldr	r3, .L1063+16
 8840 03ce 906B     		ldr	r0, [r2, #56]
 8841 03d0 9847     		blx	r3
 8842              	.LVL901:
 8843 03d2 3246     		mov	r2, r6
 8844 03d4 4044     		add	r0, r0, r8
 8845 03d6 614B     		ldr	r3, .L1063+20
 8846 03d8 0021     		movs	r1, #0
 8847 03da 9847     		blx	r3
 8848              	.LVL902:
 8849 03dc 71E6     		b	.L958
 8850              	.LVL903:
 8851              	.L1043:
 8852 03de BC68     		ldr	r4, [r7, #8]
 8853              	.LVL904:
 8854 03e0 66E6     		b	.L934
 8855              	.LVL905:
 8856              	.L929:
 8857              	.LBE586:
 8858              	.LBE607:
 8859              	.LBB608:
 8860              	.LBB582:
2399:dm/dm42_fns.cc ****     }
 8861              		.loc 1 2399 0
 8862 03e2 594A     		ldr	r2, .L1063
 8863 03e4 5C4B     		ldr	r3, .L1063+16
 8864 03e6 906B     		ldr	r0, [r2, #56]
 8865 03e8 9847     		blx	r3
 8866              	.LVL906:
 8867 03ea 4FF0A80A 		mov	r10, #168
 8868              	.LVL907:
2398:dm/dm42_fns.cc ****       font_lines = y_lines/lcd_lineHeight(fReg);
 8869              		.loc 1 2398 0
 8870 03ee 5246     		mov	r2, r10
2399:dm/dm42_fns.cc ****     }
 8871              		.loc 1 2399 0
 8872 03f0 9AFBF0FA 		sdiv	r10, r10, r0
 8873              	.LVL908:
 8874 03f4 C0E6     		b	.L975
 8875              	.LVL909:
 8876              	.L1050:
 8877              	.LBE582:
ARM GAS  /tmp/ccGYckNR.s 			page 226


 8878              	.LBB583:
 8879              	.LBB577:
 8880              	.LBB562:
2460:dm/dm42_fns.cc **** 
 8881              		.loc 1 2460 0
 8882 03f6 B3F90620 		ldrsh	r2, [r3, #6]
2473:dm/dm42_fns.cc ****         disp_reg("L:",REG_LX, LINE_REG_L);
 8883              		.loc 1 2473 0
 8884 03fa 594E     		ldr	r6, .L1063+24
2460:dm/dm42_fns.cc **** 
 8885              		.loc 1 2460 0
 8886 03fc 574B     		ldr	r3, .L1063+20
 8887 03fe 283A     		subs	r2, r2, #40
 8888 0400 FF21     		movs	r1, #255
 8889 0402 2820     		movs	r0, #40
 8890 0404 9847     		blx	r3
 8891              	.LVL910:
2473:dm/dm42_fns.cc ****         disp_reg("L:",REG_LX, LINE_REG_L);
 8892              		.loc 1 2473 0
 8893 0406 3368     		ldr	r3, [r6]
 8894 0408 DB07     		lsls	r3, r3, #31
 8895 040a 00F18A80 		bmi	.L1056
 8896              	.L945:
 8897              	.LBB563:
2477:dm/dm42_fns.cc ****         // Print edit line if available
 8898              		.loc 1 2477 0
 8899 040e DFF88881 		ldr	r8, .L1063+80
 8900 0412 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
 8901 0416 002B     		cmp	r3, #0
 8902 0418 47D1     		bne	.L946
 8903              	.L951:
 8904              	.LBE563:
2494:dm/dm42_fns.cc **** 
 8905              		.loc 1 2494 0
 8906 041a 0022     		movs	r2, #0
 8907 041c 0121     		movs	r1, #1
 8908 041e 5148     		ldr	r0, .L1063+28
 8909 0420 FFF7FEFF 		bl	disp_reg
 8910              	.LVL911:
 8911              	.L947:
2499:dm/dm42_fns.cc ****         disp_reg("Y:",REG_Y, LINE_REG_Y);
 8912              		.loc 1 2499 0
 8913 0424 3368     		ldr	r3, [r6]
 8914 0426 9807     		lsls	r0, r3, #30
 8915 0428 38D4     		bmi	.L1057
 8916              	.L952:
2502:dm/dm42_fns.cc ****         disp_reg("Z:",REG_Z, LINE_REG_Z);
 8917              		.loc 1 2502 0
 8918 042a 5907     		lsls	r1, r3, #29
 8919 042c 2FD4     		bmi	.L1058
 8920              	.L953:
2505:dm/dm42_fns.cc ****         disp_reg("T:",REG_T, LINE_REG_T);
 8921              		.loc 1 2505 0
 8922 042e 1A07     		lsls	r2, r3, #28
 8923 0430 26D4     		bmi	.L1059
 8924              	.L954:
2508:dm/dm42_fns.cc ****         disp_reg("L:",REG_LX, LINE_REG_L);
ARM GAS  /tmp/ccGYckNR.s 			page 227


 8925              		.loc 1 2508 0
 8926 0432 D806     		lsls	r0, r3, #27
 8927 0434 1DD4     		bmi	.L1060
 8928              	.L955:
2511:dm/dm42_fns.cc ****         disp_reg("A:",REG_A, LINE_REG_A);
 8929              		.loc 1 2511 0
 8930 0436 9906     		lsls	r1, r3, #26
 8931 0438 7FF53AAE 		bpl	.L934
2512:dm/dm42_fns.cc ****     }
 8932              		.loc 1 2512 0
 8933 043c 0522     		movs	r2, #5
 8934 043e 0621     		movs	r1, #6
 8935 0440 4948     		ldr	r0, .L1063+32
 8936 0442 FFF7FEFF 		bl	disp_reg
 8937              	.LVL912:
 8938 0446 33E6     		b	.L934
 8939              	.L1052:
 8940              	.LBE562:
 8941              	.LBE577:
 8942              	.LBE583:
 8943              	.LBE608:
2570:dm/dm42_fns.cc ****   else
 8944              		.loc 1 2570 0
 8945 0448 FFF7FEFF 		bl	_Z19core_display_bufferv
 8946              	.LVL913:
 8947 044c 8322     		movs	r2, #131
 8948 044e 1023     		movs	r3, #16
 8949 0450 8DE80C00 		stm	sp, {r2, r3}
 8950 0454 1121     		movs	r1, #17
 8951 0456 2B46     		mov	r3, r5
 8952 0458 2A46     		mov	r2, r5
 8953 045a FFF7FEFF 		bl	draw_hp42_lcd
 8954              	.LVL914:
 8955 045e 3FE6     		b	.L972
 8956              	.L1054:
 8957              	.LBB609:
2521:dm/dm42_fns.cc ****     int wasy = 0; // Anything was drawn
 8958              		.loc 1 2521 0 discriminator 4
 8959 0460 FFF7FEFF 		bl	is_goose
 8960              	.LVL915:
 8961 0464 0028     		cmp	r0, #0
 8962 0466 3FF42CAE 		beq	.L958
2521:dm/dm42_fns.cc ****     int wasy = 0; // Anything was drawn
 8963              		.loc 1 2521 0 is_stmt 0 discriminator 5
 8964 046a A207     		lsls	r2, r4, #30
 8965 046c 3FF55DAF 		bmi	.L959
 8966 0470 27E6     		b	.L958
 8967              	.L1060:
 8968              	.LBE609:
 8969              	.LBB610:
 8970              	.LBB584:
 8971              	.LBB578:
 8972              	.LBB576:
2509:dm/dm42_fns.cc **** 
 8973              		.loc 1 2509 0 is_stmt 1
 8974 0472 0422     		movs	r2, #4
 8975 0474 0521     		movs	r1, #5
ARM GAS  /tmp/ccGYckNR.s 			page 228


 8976 0476 3D48     		ldr	r0, .L1063+36
 8977 0478 FFF7FEFF 		bl	disp_reg
 8978              	.LVL916:
 8979 047c 3368     		ldr	r3, [r6]
 8980 047e DAE7     		b	.L955
 8981              	.L1059:
2506:dm/dm42_fns.cc ****       
 8982              		.loc 1 2506 0
 8983 0480 0322     		movs	r2, #3
 8984 0482 0421     		movs	r1, #4
 8985 0484 3A48     		ldr	r0, .L1063+40
 8986 0486 FFF7FEFF 		bl	disp_reg
 8987              	.LVL917:
 8988 048a 3368     		ldr	r3, [r6]
 8989 048c D1E7     		b	.L954
 8990              	.L1058:
2503:dm/dm42_fns.cc ****       
 8991              		.loc 1 2503 0
 8992 048e 0222     		movs	r2, #2
 8993 0490 0321     		movs	r1, #3
 8994 0492 3848     		ldr	r0, .L1063+44
 8995 0494 FFF7FEFF 		bl	disp_reg
 8996              	.LVL918:
 8997 0498 3368     		ldr	r3, [r6]
 8998 049a C8E7     		b	.L953
 8999              	.L1057:
2500:dm/dm42_fns.cc ****       
 9000              		.loc 1 2500 0
 9001 049c 0122     		movs	r2, #1
 9002 049e 0221     		movs	r1, #2
 9003 04a0 3548     		ldr	r0, .L1063+48
 9004 04a2 FFF7FEFF 		bl	disp_reg
 9005              	.LVL919:
 9006 04a6 3368     		ldr	r3, [r6]
 9007 04a8 BFE7     		b	.L952
 9008              	.L946:
 9009              	.LBB573:
 9010              	.LBB564:
 9011              	.LBB565:
 9012              	.LBB566:
1762:dm/dm42_fns.cc ****   return (offs < REG_OFFS_HALF) ? offs : offs-REG_OFFS_RANGE;
 9013              		.loc 1 1762 0
 9014 04aa 344B     		ldr	r3, .L1063+52
 9015              	.LBE566:
 9016              	.LBE565:
2490:dm/dm42_fns.cc ****       }
 9017              		.loc 1 2490 0
 9018 04ac C7F808D0 		str	sp, [r7, #8]
 9019              	.LVL920:
 9020              	.LBB569:
 9021              	.LBB567:
1762:dm/dm42_fns.cc ****   return (offs < REG_OFFS_HALF) ? offs : offs-REG_OFFS_RANGE;
 9022              		.loc 1 1762 0
 9023 04b0 1868     		ldr	r0, [r3]
 9024              	.LBE567:
 9025              	.LBE569:
2481:dm/dm42_fns.cc ****         int const linelen = (LCD_X + fReg->xoffs)/lcd_fontWidth(fReg); //(LCD_X - fReg->xoffs)/fReg
ARM GAS  /tmp/ccGYckNR.s 			page 229


 9026              		.loc 1 2481 0
 9027 04b2 DFF8E8A0 		ldr	r10, .L1063+84
 9028              	.LBB570:
 9029              	.LBB568:
1762:dm/dm42_fns.cc ****   return (offs < REG_OFFS_HALF) ? offs : offs-REG_OFFS_RANGE;
 9030              		.loc 1 1762 0
 9031 04b6 00F00F00 		and	r0, r0, #15
 9032              	.LVL921:
1763:dm/dm42_fns.cc **** }
 9033              		.loc 1 1763 0
 9034 04ba 0728     		cmp	r0, #7
 9035 04bc C8BF     		it	gt
 9036 04be 1038     		subgt	r0, r0, #16
 9037              	.LBE568:
 9038              	.LBE570:
2479:dm/dm42_fns.cc ****   
 9039              		.loc 1 2479 0
 9040 04c0 FFF7FEFF 		bl	set_reg_font
 9041              	.LVL922:
2481:dm/dm42_fns.cc ****         int const linelen = (LCD_X + fReg->xoffs)/lcd_fontWidth(fReg); //(LCD_X - fReg->xoffs)/fReg
 9042              		.loc 1 2481 0
 9043 04c4 2E48     		ldr	r0, .L1063+56
 9044 04c6 FFF7FEFF 		bl	strlen
 9045              	.LVL923:
 9046 04ca 7860     		str	r0, [r7, #4]
 9047              	.LVL924:
 9048 04cc 5046     		mov	r0, r10
 9049              	.LVL925:
 9050 04ce FFF7FEFF 		bl	strlen
 9051              	.LVL926:
2482:dm/dm42_fns.cc **** 
 9052              		.loc 1 2482 0
 9053 04d2 1D49     		ldr	r1, .L1063
 9054 04d4 2B4A     		ldr	r2, .L1063+60
2481:dm/dm42_fns.cc ****         int const linelen = (LCD_X + fReg->xoffs)/lcd_fontWidth(fReg); //(LCD_X - fReg->xoffs)/fReg
 9055              		.loc 1 2481 0
 9056 04d6 8346     		mov	fp, r0
 9057              	.LVL927:
2482:dm/dm42_fns.cc **** 
 9058              		.loc 1 2482 0
 9059 04d8 886B     		ldr	r0, [r1, #56]
 9060              	.LVL928:
 9061 04da 90F90F90 		ldrsb	r9, [r0, #15]
 9062 04de 9047     		blx	r2
 9063              	.LVL929:
 9064 04e0 09F5C879 		add	r9, r9, #400
2485:dm/dm42_fns.cc ****           sprintf(s, "%s_", edit_line);
 9065              		.loc 1 2485 0
 9066 04e4 7B68     		ldr	r3, [r7, #4]
2482:dm/dm42_fns.cc **** 
 9067              		.loc 1 2482 0
 9068 04e6 99FBF0F0 		sdiv	r0, r9, r0
 9069              	.LVL930:
2484:dm/dm42_fns.cc ****         if ( plen+llen < linelen )
 9070              		.loc 1 2484 0
 9071 04ea 00F10902 		add	r2, r0, #9
 9072 04ee 22F00702 		bic	r2, r2, #7
ARM GAS  /tmp/ccGYckNR.s 			page 230


 9073 04f2 ADEB020D 		sub	sp, sp, r2
 9074              	.LVL931:
2485:dm/dm42_fns.cc ****           sprintf(s, "%s_", edit_line);
 9075              		.loc 1 2485 0
 9076 04f6 0BEB0302 		add	r2, fp, r3
 9077 04fa 9042     		cmp	r0, r2
2484:dm/dm42_fns.cc ****         if ( plen+llen < linelen )
 9078              		.loc 1 2484 0
 9079 04fc 0DF10809 		add	r9, sp, #8
 9080              	.LVL932:
2485:dm/dm42_fns.cc ****           sprintf(s, "%s_", edit_line);
 9081              		.loc 1 2485 0
 9082 0500 15DD     		ble	.L949
2486:dm/dm42_fns.cc ****         else {
 9083              		.loc 1 2486 0
 9084 0502 5246     		mov	r2, r10
 9085 0504 2049     		ldr	r1, .L1063+64
 9086 0506 4846     		mov	r0, r9
 9087              	.LVL933:
 9088 0508 FFF7FEFF 		bl	sprintf
 9089              	.LVL934:
 9090              	.L950:
2490:dm/dm42_fns.cc ****       }
 9091              		.loc 1 2490 0
 9092 050c 4946     		mov	r1, r9
 9093 050e 1C48     		ldr	r0, .L1063+56
 9094 0510 FFF7FEFF 		bl	disp_aligned_line
 9095              	.LVL935:
 9096              	.LBE564:
 9097              	.LBE573:
2493:dm/dm42_fns.cc ****         disp_reg("X:",REG_X, LINE_REG_X);
 9098              		.loc 1 2493 0
 9099 0514 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
 9100              	.LBB574:
 9101              	.LBB571:
 9102 0518 D7F808D0 		ldr	sp, [r7, #8]
 9103              	.LBE571:
 9104              	.LBE574:
 9105 051c 002B     		cmp	r3, #0
 9106 051e 81D1     		bne	.L947
 9107 0520 7BE7     		b	.L951
 9108              	.LVL936:
 9109              	.L1056:
2474:dm/dm42_fns.cc **** 
 9110              		.loc 1 2474 0
 9111 0522 0422     		movs	r2, #4
 9112 0524 0521     		movs	r1, #5
 9113 0526 1148     		ldr	r0, .L1063+36
 9114 0528 FFF7FEFF 		bl	disp_reg
 9115              	.LVL937:
 9116 052c 6FE7     		b	.L945
 9117              	.LVL938:
 9118              	.L949:
 9119              	.LBB575:
 9120              	.LBB572:
2488:dm/dm42_fns.cc ****         }
 9121              		.loc 1 2488 0
ARM GAS  /tmp/ccGYckNR.s 			page 231


 9122 052e 0BF1020B 		add	fp, fp, #2
 9123              	.LVL939:
 9124 0532 C31A     		subs	r3, r0, r3
 9125 0534 ABEB0303 		sub	r3, fp, r3
 9126 0538 0AEB0302 		add	r2, r10, r3
 9127 053c 1349     		ldr	r1, .L1063+68
 9128 053e 4846     		mov	r0, r9
 9129              	.LVL940:
 9130 0540 FFF7FEFF 		bl	sprintf
 9131              	.LVL941:
 9132 0544 E2E7     		b	.L950
 9133              	.L1064:
 9134 0546 00BF     		.align	2
 9135              	.L1063:
 9136 0548 00200010 		.word	268443648
 9137 054c 00000000 		.word	.LANCHOR18
 9138 0550 69020008 		.word	134218345
 9139 0554 7D020008 		.word	134218365
 9140 0558 71020008 		.word	134218353
 9141 055c 51020008 		.word	134218321
 9142 0560 00000000 		.word	.LANCHOR25
 9143 0564 04000000 		.word	.LC95
 9144 0568 20000000 		.word	.LC101
 9145 056c 00000000 		.word	.LC94
 9146 0570 1C000000 		.word	.LC100
 9147 0574 18000000 		.word	.LC99
 9148 0578 14000000 		.word	.LC98
 9149 057c 00000000 		.word	.LANCHOR24
 9150 0580 00000000 		.word	.LANCHOR20
 9151 0584 79020008 		.word	134218361
 9152 0588 08000000 		.word	.LC96
 9153 058c 0C000000 		.word	.LC97
 9154 0590 00000000 		.word	.LANCHOR15
 9155 0594 00000000 		.word	.LANCHOR5
 9156 0598 00000000 		.word	.LANCHOR17
 9157 059c 00000000 		.word	.LANCHOR21
 9158              	.LBE572:
 9159              	.LBE575:
 9160              	.LBE576:
 9161              	.LBE578:
 9162              	.LBE584:
 9163              	.LBE610:
 9164              		.cfi_endproc
 9165              	.LFE306:
 9167              		.section	.text.check_for_repaint,"ax",%progbits
 9168              		.align	1
 9169              		.p2align 2,,3
 9170              		.global	check_for_repaint
 9171              		.syntax unified
 9172              		.thumb
 9173              		.thumb_func
 9174              		.fpu fpv4-sp-d16
 9176              	check_for_repaint:
 9177              	.LFB233:
 816:dm/dm42_fns.cc ****   // No repaints in main menu
 9178              		.loc 1 816 0
 9179              		.cfi_startproc
ARM GAS  /tmp/ccGYckNR.s 			page 232


 9180              		@ args = 0, pretend = 0, frame = 0
 9181              		@ frame_needed = 0, uses_anonymous_args = 0
 9182              	.LVL942:
 9183 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 9184              		.cfi_def_cfa_offset 24
 9185              		.cfi_offset 3, -24
 9186              		.cfi_offset 4, -20
 9187              		.cfi_offset 5, -16
 9188              		.cfi_offset 6, -12
 9189              		.cfi_offset 7, -8
 9190              		.cfi_offset 14, -4
 818:dm/dm42_fns.cc **** 
 9191              		.loc 1 818 0
 9192 0002 284B     		ldr	r3, .L1104
 9193 0004 1B68     		ldr	r3, [r3]
 9194 0006 5A06     		lsls	r2, r3, #25
 9195 0008 24D4     		bmi	.L1065
 821:dm/dm42_fns.cc ****     if ( header_timeout() )
 9196              		.loc 1 821 0
 9197 000a 0028     		cmp	r0, #0
 9198 000c 0446     		mov	r4, r0
 9199 000e 14DB     		blt	.L1099
 9200              	.LVL943:
 9201              	.LBB627:
 9202              	.LBB628:
 9203              	.LBB629:
 9204              	.LBB630:
2631:dm/dm42_fns.cc **** }
 9205              		.loc 1 2631 0
 9206 0010 254B     		ldr	r3, .L1104+4
 9207 0012 9847     		blx	r3
 9208              	.LVL944:
 9209 0014 254B     		ldr	r3, .L1104+8
 9210 0016 1B68     		ldr	r3, [r3]
 9211 0018 8342     		cmp	r3, r0
 9212 001a 20D0     		beq	.L1080
 9213              	.L1093:
 9214 001c 244D     		ldr	r5, .L1104+12
 9215              	.L1083:
 9216 001e 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 9217 0020 012B     		cmp	r3, #1
 9218 0022 24DD     		ble	.L1100
 9219              	.L1075:
 9220              	.LBE630:
 9221              	.LBE629:
 824:dm/dm42_fns.cc ****       disp_regs(what);
 9222              		.loc 1 824 0
 9223 0024 002C     		cmp	r4, #0
 9224 0026 1ADA     		bge	.L1080
 9225              	.L1094:
 9226 0028 224D     		ldr	r5, .L1104+16
 9227              	.L1073:
 9228              	.LBB632:
 9229              	.LBB633:
2645:dm/dm42_fns.cc ****     :  0;
 9230              		.loc 1 2645 0
 9231 002a 2B68     		ldr	r3, [r5]
ARM GAS  /tmp/ccGYckNR.s 			page 233


 9232 002c 9BB9     		cbnz	r3, .L1101
 9233              	.L1079:
 9234              	.LBE633:
 9235              	.LBE632:
 826:dm/dm42_fns.cc ****     lcd_changed = 0;
 9236              		.loc 1 826 0
 9237 002e 224B     		ldr	r3, .L1104+20
 9238 0030 9847     		blx	r3
 9239              	.LVL945:
 827:dm/dm42_fns.cc ****   }
 9240              		.loc 1 827 0
 9241 0032 224B     		ldr	r3, .L1104+24
 9242 0034 0022     		movs	r2, #0
 9243 0036 1A60     		str	r2, [r3]
 9244 0038 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 9245              	.LVL946:
 9246              	.L1099:
 9247              	.LBE628:
 9248              	.LBE627:
 9249              	.LBB641:
 9250              	.LBB642:
2631:dm/dm42_fns.cc **** }
 9251              		.loc 1 2631 0
 9252 003a 1B4F     		ldr	r7, .L1104+4
 9253 003c 1B4E     		ldr	r6, .L1104+8
 9254 003e B847     		blx	r7
 9255              	.LVL947:
 9256 0040 3368     		ldr	r3, [r6]
 9257 0042 9842     		cmp	r0, r3
 9258 0044 03D0     		beq	.L1069
 9259 0046 1A4D     		ldr	r5, .L1104+12
 9260 0048 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 9261 004a 012B     		cmp	r3, #1
 9262 004c 1EDD     		ble	.L1102
 9263              	.L1069:
 9264              	.LBE642:
 9265              	.LBE641:
 9266              	.LBB643:
 9267              	.LBB644:
2646:dm/dm42_fns.cc **** }
 9268              		.loc 1 2646 0
 9269 004e 194D     		ldr	r5, .L1104+16
2645:dm/dm42_fns.cc ****     :  0;
 9270              		.loc 1 2645 0
 9271 0050 2B68     		ldr	r3, [r5]
 9272 0052 9BB9     		cbnz	r3, .L1103
 9273              	.LVL948:
 9274              	.L1065:
 9275 0054 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 9276              	.LVL949:
 9277              	.L1101:
 9278              	.LBE644:
 9279              	.LBE643:
 9280              	.LBB646:
 9281              	.LBB639:
 9282              	.LBB635:
 9283              	.LBB634:
ARM GAS  /tmp/ccGYckNR.s 			page 234


 9284 0056 FFF7FEFF 		bl	lcd_update_timeout.part.9
 9285              	.LVL950:
 9286              	.LBE634:
 9287              	.LBE635:
 824:dm/dm42_fns.cc ****       disp_regs(what);
 9288              		.loc 1 824 0
 9289 005a 0028     		cmp	r0, #0
 9290 005c E7D0     		beq	.L1079
 9291              	.L1080:
 9292 005e FFF7FEFF 		bl	is_pgm_mode
 9293              	.LVL951:
 9294 0062 0028     		cmp	r0, #0
 9295 0064 E3D1     		bne	.L1079
 825:dm/dm42_fns.cc ****     lcd_refresh();
 9296              		.loc 1 825 0
 9297 0066 2046     		mov	r0, r4
 9298 0068 FFF7FEFF 		bl	disp_regs
 9299              	.LVL952:
 9300 006c DFE7     		b	.L1079
 9301              	.L1100:
 9302              	.LBB636:
 9303              	.LBB637:
2679:dm/dm42_fns.cc **** 
 9304              		.loc 1 2679 0
 9305 006e 0D4B     		ldr	r3, .L1104
 9306 0070 1B68     		ldr	r3, [r3]
 9307 0072 5B06     		lsls	r3, r3, #25
 9308 0074 D6D4     		bmi	.L1075
 9309 0076 FFF7FEFF 		bl	disp_header.part.11
 9310              	.LVL953:
 9311 007a D3E7     		b	.L1075
 9312              	.LVL954:
 9313              	.L1103:
 9314              	.LBE637:
 9315              	.LBE636:
 9316              	.LBE639:
 9317              	.LBE646:
 9318              	.LBB647:
 9319              	.LBB645:
 9320 007c FFF7FEFF 		bl	lcd_update_timeout.part.9
 9321              	.LVL955:
 9322              	.LBE645:
 9323              	.LBE647:
 821:dm/dm42_fns.cc ****     if ( header_timeout() )
 9324              		.loc 1 821 0
 9325 0080 0028     		cmp	r0, #0
 9326 0082 E7D0     		beq	.L1065
 821:dm/dm42_fns.cc ****     if ( header_timeout() )
 9327              		.loc 1 821 0 is_stmt 0 discriminator 5
 9328 0084 FFF7FEFF 		bl	is_pgm_mode
 9329              	.LVL956:
 9330 0088 28B1     		cbz	r0, .L1072
 9331 008a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 9332              	.LVL957:
 9333              	.L1102:
 9334              	.LBB648:
 9335              	.LBB640:
ARM GAS  /tmp/ccGYckNR.s 			page 235


 9336              	.LBB638:
 9337              	.LBB631:
2631:dm/dm42_fns.cc **** }
 9338              		.loc 1 2631 0 is_stmt 1
 9339 008c B847     		blx	r7
 9340              	.LVL958:
 9341 008e 3368     		ldr	r3, [r6]
 9342 0090 9842     		cmp	r0, r3
 9343 0092 C4D1     		bne	.L1083
 9344 0094 C8E7     		b	.L1094
 9345              	.LVL959:
 9346              	.L1072:
 9347 0096 044B     		ldr	r3, .L1104+4
 9348 0098 9847     		blx	r3
 9349              	.LVL960:
 9350 009a 3368     		ldr	r3, [r6]
 9351 009c 8342     		cmp	r3, r0
 9352 009e BDD1     		bne	.L1093
 9353 00a0 C3E7     		b	.L1073
 9354              	.L1105:
 9355 00a2 00BF     		.align	2
 9356              	.L1104:
 9357 00a4 00200010 		.word	268443648
 9358 00a8 DD020008 		.word	134218461
 9359 00ac 00000000 		.word	.LANCHOR31
 9360 00b0 00000000 		.word	.LANCHOR10
 9361 00b4 00000000 		.word	.LANCHOR9
 9362 00b8 31020008 		.word	134218289
 9363 00bc 00000000 		.word	.LANCHOR7
 9364              	.LBE631:
 9365              	.LBE638:
 9366              	.LBE640:
 9367              	.LBE648:
 9368              		.cfi_endproc
 9369              	.LFE233:
 9371              		.section	.text.print_wait_for,"ax",%progbits
 9372              		.align	1
 9373              		.p2align 2,,3
 9374              		.global	print_wait_for
 9375              		.syntax unified
 9376              		.thumb
 9377              		.thumb_func
 9378              		.fpu fpv4-sp-d16
 9380              	print_wait_for:
 9381              	.LFB234:
 842:dm/dm42_fns.cc ****   while ( printer_busy_for(what) ) {
 9382              		.loc 1 842 0
 9383              		.cfi_startproc
 9384              		@ args = 0, pretend = 0, frame = 0
 9385              		@ frame_needed = 0, uses_anonymous_args = 0
 9386              	.LVL961:
 9387 0000 38B5     		push	{r3, r4, r5, lr}
 9388              		.cfi_def_cfa_offset 16
 9389              		.cfi_offset 3, -16
 9390              		.cfi_offset 4, -12
 9391              		.cfi_offset 5, -8
 9392              		.cfi_offset 14, -4
ARM GAS  /tmp/ccGYckNR.s 			page 236


 843:dm/dm42_fns.cc ****     check_for_repaint(LCD_UPD_DFLT);
 9393              		.loc 1 843 0
 9394 0002 064D     		ldr	r5, .L1111
 842:dm/dm42_fns.cc ****   while ( printer_busy_for(what) ) {
 9395              		.loc 1 842 0
 9396 0004 0446     		mov	r4, r0
 9397 0006 03E0     		b	.L1108
 9398              	.LVL962:
 9399              	.L1110:
 844:dm/dm42_fns.cc ****   }
 9400              		.loc 1 844 0
 9401 0008 4FF0FF30 		mov	r0, #-1
 9402 000c FFF7FEFF 		bl	check_for_repaint
 9403              	.LVL963:
 9404              	.L1108:
 843:dm/dm42_fns.cc ****     check_for_repaint(LCD_UPD_DFLT);
 9405              		.loc 1 843 0
 9406 0010 2046     		mov	r0, r4
 9407 0012 A847     		blx	r5
 9408              	.LVL964:
 9409 0014 0028     		cmp	r0, #0
 9410 0016 F7D1     		bne	.L1110
 9411 0018 38BD     		pop	{r3, r4, r5, pc}
 9412              	.LVL965:
 9413              	.L1112:
 9414 001a 00BF     		.align	2
 9415              	.L1111:
 9416 001c 3D030008 		.word	134218557
 9417              		.cfi_endproc
 9418              	.LFE234:
 9420              		.section	.text._Z11shell_printPKciS0_iiiii,"ax",%progbits
 9421              		.align	1
 9422              		.p2align 2,,3
 9423              		.global	_Z11shell_printPKciS0_iiiii
 9424              		.syntax unified
 9425              		.thumb
 9426              		.thumb_func
 9427              		.fpu fpv4-sp-d16
 9429              	_Z11shell_printPKciS0_iiiii:
 9430              	.LFB241:
 982:dm/dm42_fns.cc ****   const int sz = 24; // Printer has 24 chars per line
 9431              		.loc 1 982 0
 9432              		.cfi_startproc
 9433              		@ args = 16, pretend = 0, frame = 48
 9434              		@ frame_needed = 0, uses_anonymous_args = 0
 9435              	.LVL966:
 9436 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 9437              		.cfi_def_cfa_offset 36
 9438              		.cfi_offset 4, -36
 9439              		.cfi_offset 5, -32
 9440              		.cfi_offset 6, -28
 9441              		.cfi_offset 7, -24
 9442              		.cfi_offset 8, -20
 9443              		.cfi_offset 9, -16
 9444              		.cfi_offset 10, -12
 9445              		.cfi_offset 11, -8
 9446              		.cfi_offset 14, -4
ARM GAS  /tmp/ccGYckNR.s 			page 237


 9447 0004 1829     		cmp	r1, #24
 9448 0006 8C46     		mov	ip, r1
 9449 0008 A8BF     		it	ge
 9450 000a 4FF0180C 		movge	ip, #24
 9451              	.LVL967:
 9452              	.LBB649:
 9453              	.LBB650:
 9454              	.LBB651:
 141:dm/dm42_fns.cc ****     c = src[s];
 9455              		.loc 1 141 0
 9456 000e BCF1000F 		cmp	ip, #0
 9457              	.LBE651:
 9458              	.LBE650:
 9459              	.LBE649:
 982:dm/dm42_fns.cc ****   const int sz = 24; // Printer has 24 chars per line
 9460              		.loc 1 982 0
 9461 0012 8DB0     		sub	sp, sp, #52
 9462              		.cfi_def_cfa_offset 88
 982:dm/dm42_fns.cc ****   const int sz = 24; // Printer has 24 chars per line
 9463              		.loc 1 982 0
 9464 0014 0F46     		mov	r7, r1
 9465 0016 0646     		mov	r6, r0
 9466              	.LVL968:
 9467 0018 1546     		mov	r5, r2
 9468 001a 1C46     		mov	r4, r3
 9469              	.LBB656:
 9470              	.LBB654:
 9471              	.LBB652:
 141:dm/dm42_fns.cc ****     c = src[s];
 9472              		.loc 1 141 0
 9473 001c 18DD     		ble	.L1118
 9474 001e 0246     		mov	r2, r0
 9475              	.LVL969:
 158:dm/dm42_fns.cc **** 
 9476              		.loc 1 158 0
 9477 0020 DFF800E3 		ldr	lr, .L1215+32
 9478 0024 6044     		add	r0, r0, ip
 9479              	.LVL970:
 141:dm/dm42_fns.cc ****     c = src[s];
 9480              		.loc 1 141 0
 9481 0026 05A9     		add	r1, sp, #20
 9482              	.LVL971:
 9483 0028 09E0     		b	.L1119
 9484              	.LVL972:
 9485              	.L1200:
 155:dm/dm42_fns.cc ****     // Special characters are 00-1F
 9486              		.loc 1 155 0
 9487 002a 8A2B     		cmp	r3, #138
 9488 002c 44D0     		beq	.L1158
 157:dm/dm42_fns.cc ****       c = hp2printer_table[c]; // Translate to printer chars
 9489              		.loc 1 157 0
 9490 002e 1F2B     		cmp	r3, #31
 9491 0030 01DC     		bgt	.L1117
 158:dm/dm42_fns.cc **** 
 9492              		.loc 1 158 0
 9493 0032 1EF80330 		ldrb	r3, [lr, r3]	@ zero_extendqisi2
 9494              	.LVL973:
ARM GAS  /tmp/ccGYckNR.s 			page 238


 9495              	.L1117:
 162:dm/dm42_fns.cc ****   }
 9496              		.loc 1 162 0
 9497 0036 01F8013B 		strb	r3, [r1], #1
 9498              	.LVL974:
 141:dm/dm42_fns.cc ****     c = src[s];
 9499              		.loc 1 141 0
 9500 003a 9042     		cmp	r0, r2
 9501 003c 08D0     		beq	.L1118
 9502              	.LVL975:
 9503              	.L1119:
 142:dm/dm42_fns.cc **** #ifdef OLD_PRINTER_CHAR_MASKING
 9504              		.loc 1 142 0
 9505 003e 12F8013B 		ldrb	r3, [r2], #1	@ zero_extendqisi2
 9506              	.LVL976:
 154:dm/dm42_fns.cc ****     if (c == 0x8a) c = 144; // 8a to LF
 9507              		.loc 1 154 0
 9508 0042 7F2B     		cmp	r3, #127
 9509 0044 F1D1     		bne	.L1200
 9510 0046 9423     		movs	r3, #148
 9511              	.LVL977:
 141:dm/dm42_fns.cc ****     c = src[s];
 9512              		.loc 1 141 0
 9513 0048 9042     		cmp	r0, r2
 162:dm/dm42_fns.cc ****   }
 9514              		.loc 1 162 0
 9515 004a 01F8013B 		strb	r3, [r1], #1
 9516              	.LVL978:
 141:dm/dm42_fns.cc ****     c = src[s];
 9517              		.loc 1 141 0
 9518 004e F6D1     		bne	.L1119
 9519              	.LVL979:
 9520              	.L1118:
 9521              	.LBE652:
 9522              	.LBE654:
 9523              	.LBE656:
 987:dm/dm42_fns.cc **** 
 9524              		.loc 1 987 0
 9525 0050 0CAB     		add	r3, sp, #48
 9526 0052 9C44     		add	ip, ip, r3
 9527              	.LVL980:
 9528 0054 0023     		movs	r3, #0
 9529 0056 0CF81C3C 		strb	r3, [ip, #-28]
 9530              	.LBB657:
 9531              	.LBB658:
 853:dm/dm42_fns.cc **** }
 9532              		.loc 1 853 0
 9533 005a FFF7FEFF 		bl	core_printer_delay
 9534              	.LVL981:
 9535              	.LBE658:
 9536              	.LBE657:
 989:dm/dm42_fns.cc **** 
 9537              		.loc 1 989 0
 9538 005e A94B     		ldr	r3, .L1215
 9539 0060 9847     		blx	r3
 9540              	.LVL982:
 9541              	.LBB659:
ARM GAS  /tmp/ccGYckNR.s 			page 239


 997:dm/dm42_fns.cc ****     if ( width > MAX_82240_WIDTH )
 9542              		.loc 1 997 0
 9543 0062 0522     		movs	r2, #5
 9544 0064 A849     		ldr	r1, .L1215+4
 9545 0066 3046     		mov	r0, r6
 9546 0068 FFF7FEFF 		bl	strncmp
 9547              	.LVL983:
 9548 006c 30BB     		cbnz	r0, .L1201
 9549              	.LBB660:
1001:dm/dm42_fns.cc **** 
 9550              		.loc 1 1001 0
 9551 006e A74B     		ldr	r3, .L1215+8
 9552              	.LBB661:
 9553              	.LBB662:
1836:dm/dm42_fns.cc ****     case PRTOF_GR_IN_TXT: res = PS(PRTOF_GR_IN_TXT); break;
 9554              		.loc 1 1836 0
 9555 0070 DFF8B482 		ldr	r8, .L1215+36
 9556              	.LBE662:
 9557              	.LBE661:
1001:dm/dm42_fns.cc **** 
 9558              		.loc 1 1001 0
 9559 0074 9847     		blx	r3
 9560              	.LVL984:
 9561 0076 189A     		ldr	r2, [sp, #96]
 9562              	.LBB664:
 9563              	.LBB663:
1836:dm/dm42_fns.cc ****     case PRTOF_GR_IN_TXT: res = PS(PRTOF_GR_IN_TXT); break;
 9564              		.loc 1 1836 0
 9565 0078 D8F80030 		ldr	r3, [r8]
 9566 007c A62A     		cmp	r2, #166
 9567 007e A8BF     		it	ge
 9568 0080 A622     		movge	r2, #166
 9569              	.LBE663:
 9570              	.LBE664:
1003:dm/dm42_fns.cc ****       prtof_add_graphics_lines(bits, bytesperline, width, height);
 9571              		.loc 1 1003 0
 9572 0082 5B05     		lsls	r3, r3, #21
 9573 0084 0092     		str	r2, [sp]
 9574              	.LVL985:
 9575 0086 00F1D080 		bmi	.L1202
 9576              	.LVL986:
 9577              	.LBB665:
 9578              	.LBB666:
1835:dm/dm42_fns.cc ****     case PRTOF_GRAPHICS:  res = PS(PRTOF_GRAPHICS);  break;
 9579              		.loc 1 1835 0
 9580 008a D8F80030 		ldr	r3, [r8]
 9581              	.LVL987:
 9582              	.LBE666:
 9583              	.LBE665:
1007:dm/dm42_fns.cc ****       if (is_print_to_file(PRTOF_GR_IN_TXT))
 9584              		.loc 1 1007 0
 9585 008e 9F05     		lsls	r7, r3, #22
 9586              	.LVL988:
 9587 0090 0BD5     		bpl	.L1121
 9588              	.LVL989:
 9589              	.L1213:
 9590              	.LBB668:
ARM GAS  /tmp/ccGYckNR.s 			page 240


 9591              	.LBB669:
1837:dm/dm42_fns.cc ****     case PRTOF_NOIR:      res = PS(PRTOF_NOIR);      break;
 9592              		.loc 1 1837 0
 9593 0092 D8F80020 		ldr	r2, [r8]
 9594              	.LVL990:
 9595              	.LBE669:
 9596              	.LBE668:
1008:dm/dm42_fns.cc ****         prtof_add_gr_text(bits, bytesperline, width, height);
 9597              		.loc 1 1008 0
 9598 0096 12F48052 		ands	r2, r2, #4096
 9599 009a 00F0E980 		beq	.L1122
1009:dm/dm42_fns.cc ****       else
 9600              		.loc 1 1009 0
 9601 009e 199B     		ldr	r3, [sp, #100]
 9602 00a0 009A     		ldr	r2, [sp]
 9603 00a2 2146     		mov	r1, r4
 9604 00a4 2846     		mov	r0, r5
 9605 00a6 FFF7FEFF 		bl	prtof_add_gr_text
 9606              	.LVL991:
 9607              	.L1121:
 9608              	.LBB670:
 9609              	.LBB671:
1838:dm/dm42_fns.cc ****   }
 9610              		.loc 1 1838 0
 9611 00aa D8F80030 		ldr	r3, [r8]
 9612              	.LVL992:
 9613              	.LBE671:
 9614              	.LBE670:
1014:dm/dm42_fns.cc ****       return;
 9615              		.loc 1 1014 0
 9616 00ae 1805     		lsls	r0, r3, #20
 9617 00b0 54D5     		bpl	.L1203
 9618              	.LVL993:
 9619              	.L1113:
 9620              	.LBE660:
 9621              	.LBE659:
1094:dm/dm42_fns.cc **** 
 9622              		.loc 1 1094 0
 9623 00b2 0DB0     		add	sp, sp, #52
 9624              		.cfi_remember_state
 9625              		.cfi_def_cfa_offset 36
 9626              		@ sp needed
 9627 00b4 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 9628              	.LVL994:
 9629              	.L1158:
 9630              		.cfi_restore_state
 9631              	.LBB695:
 9632              	.LBB655:
 9633              	.LBB653:
 155:dm/dm42_fns.cc ****     // Special characters are 00-1F
 9634              		.loc 1 155 0
 9635 00b8 9023     		movs	r3, #144
 9636              	.LVL995:
 9637 00ba BCE7     		b	.L1117
 9638              	.LVL996:
 9639              	.L1201:
 9640              	.LBE653:
ARM GAS  /tmp/ccGYckNR.s 			page 241


 9641              	.LBE655:
 9642              	.LBE695:
 9643              	.LBB696:
 9644              	.LBB697:
1836:dm/dm42_fns.cc ****     case PRTOF_GR_IN_TXT: res = PS(PRTOF_GR_IN_TXT); break;
 9645              		.loc 1 1836 0
 9646 00bc DFF86882 		ldr	r8, .L1215+36
 9647 00c0 D8F80030 		ldr	r3, [r8]
 9648              	.LVL997:
 9649              	.LBE697:
 9650              	.LBE696:
1051:dm/dm42_fns.cc ****     prtof_add_graphics_lines(bits, bytesperline, width, height);
 9651              		.loc 1 1051 0
 9652 00c4 5905     		lsls	r1, r3, #21
 9653 00c6 00F1BB80 		bmi	.L1204
 9654              	.LVL998:
 9655              	.LBB698:
 9656              	.LBB699:
1835:dm/dm42_fns.cc ****     case PRTOF_GRAPHICS:  res = PS(PRTOF_GRAPHICS);  break;
 9657              		.loc 1 1835 0
 9658 00ca D8F80030 		ldr	r3, [r8]
 9659              	.LVL999:
 9660              	.LBE699:
 9661              	.LBE698:
1055:dm/dm42_fns.cc ****     prtof_add_text(text, length, is_wide_print());
 9662              		.loc 1 1055 0
 9663 00ce 9A05     		lsls	r2, r3, #22
 9664 00d0 00F1C180 		bmi	.L1205
 9665              	.L1134:
 9666              	.LVL1000:
 9667              	.LBB701:
 9668              	.LBB702:
1838:dm/dm42_fns.cc ****   }
 9669              		.loc 1 1838 0
 9670 00d4 D8F80030 		ldr	r3, [r8]
 9671              	.LVL1001:
 9672              	.LBE702:
 9673              	.LBE701:
1059:dm/dm42_fns.cc ****     return;
 9674              		.loc 1 1059 0
 9675 00d8 1B05     		lsls	r3, r3, #20
 9676 00da EAD4     		bmi	.L1113
 9677              	.L1214:
1062:dm/dm42_fns.cc ****   print_wait_for(PRINT_TXT_LN);
 9678              		.loc 1 1062 0
 9679 00dc 8B4B     		ldr	r3, .L1215+8
 9680              	.LBB704:
 9681              	.LBB705:
 843:dm/dm42_fns.cc ****     check_for_repaint(LCD_UPD_DFLT);
 9682              		.loc 1 843 0
 9683 00de 8C4C     		ldr	r4, .L1215+12
 9684              	.LVL1002:
 9685              	.LBE705:
 9686              	.LBE704:
1062:dm/dm42_fns.cc ****   print_wait_for(PRINT_TXT_LN);
 9687              		.loc 1 1062 0
 9688 00e0 9847     		blx	r3
ARM GAS  /tmp/ccGYckNR.s 			page 242


 9689              	.LVL1003:
 9690 00e2 03E0     		b	.L1136
 9691              	.L1206:
 9692              	.LBB707:
 9693              	.LBB706:
 844:dm/dm42_fns.cc ****   }
 9694              		.loc 1 844 0
 9695 00e4 4FF0FF30 		mov	r0, #-1
 9696 00e8 FFF7FEFF 		bl	check_for_repaint
 9697              	.LVL1004:
 9698              	.L1136:
 843:dm/dm42_fns.cc ****     check_for_repaint(LCD_UPD_DFLT);
 9699              		.loc 1 843 0
 9700 00ec 0020     		movs	r0, #0
 9701 00ee A047     		blx	r4
 9702              	.LVL1005:
 9703 00f0 0028     		cmp	r0, #0
 9704 00f2 F7D1     		bne	.L1206
 9705              	.LVL1006:
 9706              	.LBE706:
 9707              	.LBE707:
1065:dm/dm42_fns.cc ****     print_byte(27); // ESC
 9708              		.loc 1 1065 0
 9709 00f4 874C     		ldr	r4, .L1215+16
 9710 00f6 2368     		ldr	r3, [r4]
 9711 00f8 002B     		cmp	r3, #0
 9712 00fa 00F0C980 		beq	.L1207
 9713              	.LVL1007:
 9714              	.LBB708:
1070:dm/dm42_fns.cc ****     char b = is_gr_print ? text[i] : bb[i];
 9715              		.loc 1 1070 0
 9716 00fe 002F     		cmp	r7, #0
 9717 0100 D7DD     		ble	.L1113
 9718              	.LVL1008:
 9719              	.L1155:
 9720              	.LBB709:
1082:dm/dm42_fns.cc ****     }
 9721              		.loc 1 1082 0
 9722 0102 DFF81CA2 		ldr	r10, .L1215+28
1078:dm/dm42_fns.cc ****     if (is_gr_print > 0) {
 9723              		.loc 1 1078 0
 9724 0106 DFF81482 		ldr	r8, .L1215+24
 9725              	.LBB710:
 9726              	.LBB711:
 843:dm/dm42_fns.cc ****     check_for_repaint(LCD_UPD_DFLT);
 9727              		.loc 1 843 0
 9728 010a DFF80492 		ldr	r9, .L1215+12
 9729              	.LBE711:
 9730              	.LBE710:
 9731              	.LBE709:
 9732              	.LBE708:
 9733              	.LBB717:
 9734              	.LBB691:
 9735              	.LBB673:
 9736              	.LBB674:
 9737              	.LBB675:
 9738              	.LBB676:
ARM GAS  /tmp/ccGYckNR.s 			page 243


1036:dm/dm42_fns.cc ****         uint8_t amsk = 1;
 9739              		.loc 1 1036 0
 9740 010e 0125     		movs	r5, #1
 9741              	.LVL1009:
 9742              	.LBE676:
 9743              	.LBE675:
 9744              	.LBE674:
 9745              	.LBE673:
 9746              	.LBE691:
 9747              	.LBE717:
 9748              	.LBB718:
 9749              	.LBB714:
1071:dm/dm42_fns.cc ****     if ( !is_gr_print && (b == 0x1b) && (i+1<length) && text[i+1]<=166 ) {
 9750              		.loc 1 1071 0
 9751 0110 73B1     		cbz	r3, .L1141
 9752              	.LVL1010:
 9753              	.L1208:
1071:dm/dm42_fns.cc ****     if ( !is_gr_print && (b == 0x1b) && (i+1<length) && text[i+1]<=166 ) {
 9754              		.loc 1 1071 0 is_stmt 0 discriminator 1
 9755 0112 3078     		ldrb	r0, [r6]	@ zero_extendqisi2
 9756              	.LVL1011:
 9757              	.L1142:
1078:dm/dm42_fns.cc ****     if (is_gr_print > 0) {
 9758              		.loc 1 1078 0 is_stmt 1
 9759 0114 C047     		blx	r8
 9760              	.LVL1012:
1079:dm/dm42_fns.cc ****       is_gr_print--;
 9761              		.loc 1 1079 0
 9762 0116 2368     		ldr	r3, [r4]
 9763 0118 002B     		cmp	r3, #0
 9764 011a 02DD     		ble	.L1147
1080:dm/dm42_fns.cc ****       if (!is_gr_print)
 9765              		.loc 1 1080 0
 9766 011c 013B     		subs	r3, r3, #1
 9767 011e 2360     		str	r3, [r4]
1081:dm/dm42_fns.cc ****         printer_advance_buf(PRINT_TXT_LN);
 9768              		.loc 1 1081 0
 9769 0120 C3B1     		cbz	r3, .L1156
 9770              	.L1147:
 9771              	.LBE714:
1070:dm/dm42_fns.cc ****     char b = is_gr_print ? text[i] : bb[i];
 9772              		.loc 1 1070 0 discriminator 2
 9773 0122 AF42     		cmp	r7, r5
 9774 0124 40F3C080 		ble	.L1152
 9775              	.L1148:
 9776 0128 0135     		adds	r5, r5, #1
 9777 012a 0136     		adds	r6, r6, #1
 9778              	.LVL1013:
 9779              	.LBB715:
1071:dm/dm42_fns.cc ****     if ( !is_gr_print && (b == 0x1b) && (i+1<length) && text[i+1]<=166 ) {
 9780              		.loc 1 1071 0
 9781 012c 002B     		cmp	r3, #0
 9782 012e F0D1     		bne	.L1208
 9783              	.LVL1014:
 9784              	.L1141:
1071:dm/dm42_fns.cc ****     if ( !is_gr_print && (b == 0x1b) && (i+1<length) && text[i+1]<=166 ) {
 9785              		.loc 1 1071 0 is_stmt 0 discriminator 2
ARM GAS  /tmp/ccGYckNR.s 			page 244


 9786 0130 0CAB     		add	r3, sp, #48
 9787 0132 2B44     		add	r3, r3, r5
 9788 0134 13F81D0C 		ldrb	r0, [r3, #-29]	@ zero_extendqisi2
 9789              	.LVL1015:
1072:dm/dm42_fns.cc ****       is_gr_print = text[i+1]+2;
 9790              		.loc 1 1072 0 is_stmt 1 discriminator 2
 9791 0138 1B28     		cmp	r0, #27
 9792 013a EBD1     		bne	.L1142
 9793 013c BD42     		cmp	r5, r7
 9794 013e C0F2C780 		blt	.L1209
1078:dm/dm42_fns.cc ****     if (is_gr_print > 0) {
 9795              		.loc 1 1078 0
 9796 0142 C047     		blx	r8
 9797              	.LVL1016:
1079:dm/dm42_fns.cc ****       is_gr_print--;
 9798              		.loc 1 1079 0
 9799 0144 2368     		ldr	r3, [r4]
 9800 0146 002B     		cmp	r3, #0
 9801 0148 40F3AE80 		ble	.L1152
1080:dm/dm42_fns.cc ****       if (!is_gr_print)
 9802              		.loc 1 1080 0
 9803 014c 013B     		subs	r3, r3, #1
 9804 014e 2360     		str	r3, [r4]
1081:dm/dm42_fns.cc ****         printer_advance_buf(PRINT_TXT_LN);
 9805              		.loc 1 1081 0
 9806 0150 002B     		cmp	r3, #0
 9807 0152 AED1     		bne	.L1113
 9808              	.L1156:
1082:dm/dm42_fns.cc ****     }
 9809              		.loc 1 1082 0
 9810 0154 0020     		movs	r0, #0
 9811 0156 D047     		blx	r10
 9812              	.LVL1017:
 9813 0158 2368     		ldr	r3, [r4]
 9814 015a E2E7     		b	.L1147
 9815              	.LVL1018:
 9816              	.L1203:
 9817              	.LBE715:
 9818              	.LBE718:
 9819              	.LBB719:
 9820              	.LBB692:
1018:dm/dm42_fns.cc ****       print_byte(4); // Print line and leave print head at right; use before each line of graphics 
 9821              		.loc 1 1018 0
 9822 015c 6E4E     		ldr	r6, .L1215+20
 9823              	.LVL1019:
 9824 015e 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 9825 0160 002B     		cmp	r3, #0
 9826 0162 00F08F80 		beq	.L1210
 9827              	.L1124:
 9828              	.LVL1020:
 9829              	.LBB687:
1023:dm/dm42_fns.cc ****       uint ix = iy*bytesperline;
 9830              		.loc 1 1023 0 discriminator 1
 9831 0166 199B     		ldr	r3, [sp, #100]
 9832 0168 002B     		cmp	r3, #0
 9833 016a A2D0     		beq	.L1113
 9834 016c 9DF80030 		ldrb	r3, [sp]	@ zero_extendqisi2
ARM GAS  /tmp/ccGYckNR.s 			page 245


 9835 0170 0393     		str	r3, [sp, #12]
 9836              	.LBB684:
1028:dm/dm42_fns.cc ****       print_byte(width); // number of columns
 9837              		.loc 1 1028 0
 9838 0172 6A4E     		ldr	r6, .L1215+24
 9839 0174 E300     		lsls	r3, r4, #3
 9840 0176 0293     		str	r3, [sp, #8]
 9841              	.LBE684:
1023:dm/dm42_fns.cc ****       uint ix = iy*bytesperline;
 9842              		.loc 1 1023 0
 9843 0178 0027     		movs	r7, #0
 9844 017a 0823     		movs	r3, #8
 9845              	.LVL1021:
 9846              	.L1198:
 9847 017c 0193     		str	r3, [sp, #4]
 9848 017e 03E0     		b	.L1126
 9849              	.L1211:
 9850              	.LBB685:
 9851              	.LBB680:
 9852              	.LBB681:
 844:dm/dm42_fns.cc ****   }
 9853              		.loc 1 844 0
 9854 0180 4FF0FF30 		mov	r0, #-1
 9855 0184 FFF7FEFF 		bl	check_for_repaint
 9856              	.LVL1022:
 9857              	.L1126:
 843:dm/dm42_fns.cc ****     check_for_repaint(LCD_UPD_DFLT);
 9858              		.loc 1 843 0
 9859 0188 0120     		movs	r0, #1
 9860 018a 614B     		ldr	r3, .L1215+12
 9861 018c 9847     		blx	r3
 9862              	.LVL1023:
 9863 018e 8246     		mov	r10, r0
 9864 0190 0028     		cmp	r0, #0
 9865 0192 F5D1     		bne	.L1211
 9866              	.LBE681:
 9867              	.LBE680:
1028:dm/dm42_fns.cc ****       print_byte(width); // number of columns
 9868              		.loc 1 1028 0
 9869 0194 1B20     		movs	r0, #27
 9870 0196 B047     		blx	r6
 9871              	.LVL1024:
1029:dm/dm42_fns.cc ****       
 9872              		.loc 1 1029 0
 9873 0198 0398     		ldr	r0, [sp, #12]
 9874 019a B047     		blx	r6
 9875              	.LVL1025:
 9876              	.LBB682:
1031:dm/dm42_fns.cc **** 
 9877              		.loc 1 1031 0
 9878 019c 009B     		ldr	r3, [sp]
 9879 019e 5BB3     		cbz	r3, .L1127
 9880 01a0 019B     		ldr	r3, [sp, #4]
 9881 01a2 199A     		ldr	r2, [sp, #100]
 9882 01a4 9342     		cmp	r3, r2
 9883 01a6 28BF     		it	cs
 9884 01a8 1346     		movcs	r3, r2
ARM GAS  /tmp/ccGYckNR.s 			page 246


 9885 01aa 9846     		mov	r8, r3
 9886              	.LBB678:
1033:dm/dm42_fns.cc ****         uint k = ix + (xx>>3);
 9887              		.loc 1 1033 0
 9888 01ac 2346     		mov	r3, r4
 9889 01ae 4FF00109 		mov	r9, #1
 9890 01b2 4446     		mov	r4, r8
 9891              	.LVL1026:
 9892 01b4 9846     		mov	r8, r3
 9893              	.LVL1027:
 9894              	.L1131:
 9895 01b6 0AF0070B 		and	fp, r10, #7
 9896 01ba 09FA0BFB 		lsl	fp, r9, fp
 9897 01be 5FFA8BFB 		uxtb	fp, fp
 9898              	.LVL1028:
1034:dm/dm42_fns.cc **** 
 9899              		.loc 1 1034 0
 9900 01c2 07EBDA02 		add	r2, r7, r10, lsr #3
 9901              	.LVL1029:
 9902              	.LBB677:
1039:dm/dm42_fns.cc ****           if ( bits[k] & msk ) a |= amsk;
 9903              		.loc 1 1039 0
 9904 01c6 44B3     		cbz	r4, .L1159
 9905 01c8 0023     		movs	r3, #0
 9906 01ca 1846     		mov	r0, r3
 9907 01cc 0121     		movs	r1, #1
 9908              	.LVL1030:
 9909              	.L1130:
1040:dm/dm42_fns.cc ****         print_byte(a);
 9910              		.loc 1 1040 0
 9911 01ce 15F802C0 		ldrb	ip, [r5, r2]	@ zero_extendqisi2
1039:dm/dm42_fns.cc ****           if ( bits[k] & msk ) a |= amsk;
 9912              		.loc 1 1039 0
 9913 01d2 0133     		adds	r3, r3, #1
 9914              	.LVL1031:
1040:dm/dm42_fns.cc ****         print_byte(a);
 9915              		.loc 1 1040 0
 9916 01d4 1BEA0C0F 		tst	fp, ip
 9917 01d8 18BF     		it	ne
 9918 01da 0843     		orrne	r0, r0, r1
 9919              	.LVL1032:
1039:dm/dm42_fns.cc ****           if ( bits[k] & msk ) a |= amsk;
 9920              		.loc 1 1039 0
 9921 01dc 4FEA410E 		lsl	lr, r1, #1
 9922 01e0 A342     		cmp	r3, r4
 9923 01e2 4244     		add	r2, r2, r8
 9924              	.LVL1033:
 9925 01e4 5FFA8EF1 		uxtb	r1, lr
 9926              	.LVL1034:
 9927 01e8 F1D1     		bne	.L1130
 9928              	.LBE677:
1041:dm/dm42_fns.cc ****       }
 9929              		.loc 1 1041 0 discriminator 2
 9930 01ea B047     		blx	r6
 9931              	.LVL1035:
 9932              	.LBE678:
1031:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 247


 9933              		.loc 1 1031 0 discriminator 2
 9934 01ec 009B     		ldr	r3, [sp]
 9935 01ee 0AF1010A 		add	r10, r10, #1
 9936              	.LVL1036:
 9937 01f2 9A45     		cmp	r10, r3
 9938 01f4 DFD1     		bne	.L1131
 9939              	.L1212:
 9940 01f6 4446     		mov	r4, r8
 9941              	.LVL1037:
 9942              	.L1127:
 9943              	.LBE682:
1044:dm/dm42_fns.cc ****       printer_advance_buf(PRINT_GRA_LN);
 9944              		.loc 1 1044 0 discriminator 2
 9945 01f8 0420     		movs	r0, #4
 9946 01fa B047     		blx	r6
 9947              	.LVL1038:
 9948 01fc 029B     		ldr	r3, [sp, #8]
1045:dm/dm42_fns.cc ****     }
 9949              		.loc 1 1045 0 discriminator 2
 9950 01fe 0120     		movs	r0, #1
 9951 0200 1F44     		add	r7, r7, r3
 9952 0202 474B     		ldr	r3, .L1215+28
 9953 0204 9847     		blx	r3
 9954              	.LVL1039:
 9955 0206 019A     		ldr	r2, [sp, #4]
 9956              	.LBE685:
1023:dm/dm42_fns.cc ****       uint ix = iy*bytesperline;
 9957              		.loc 1 1023 0 discriminator 2
 9958 0208 1999     		ldr	r1, [sp, #100]
 9959 020a 1346     		mov	r3, r2
 9960 020c 8A42     		cmp	r2, r1
 9961 020e 03F10803 		add	r3, r3, #8
 9962 0212 B3D3     		bcc	.L1198
 9963              	.LBE687:
 9964              	.LBE692:
 9965              	.LBE719:
1094:dm/dm42_fns.cc **** 
 9966              		.loc 1 1094 0
 9967 0214 0DB0     		add	sp, sp, #52
 9968              		.cfi_remember_state
 9969              		.cfi_def_cfa_offset 36
 9970              	.LVL1040:
 9971              		@ sp needed
 9972 0216 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 9973              	.LVL1041:
 9974              	.L1159:
 9975              		.cfi_restore_state
 9976              	.LBB720:
 9977              	.LBB693:
 9978              	.LBB688:
 9979              	.LBB686:
 9980              	.LBB683:
 9981              	.LBB679:
1036:dm/dm42_fns.cc ****         uint8_t amsk = 1;
 9982              		.loc 1 1036 0
 9983 021a 2046     		mov	r0, r4
1041:dm/dm42_fns.cc ****       }
ARM GAS  /tmp/ccGYckNR.s 			page 248


 9984              		.loc 1 1041 0
 9985 021c B047     		blx	r6
 9986              	.LVL1042:
 9987              	.LBE679:
1031:dm/dm42_fns.cc **** 
 9988              		.loc 1 1031 0
 9989 021e 009B     		ldr	r3, [sp]
 9990 0220 0AF1010A 		add	r10, r10, #1
 9991              	.LVL1043:
 9992 0224 9A45     		cmp	r10, r3
 9993 0226 C6D1     		bne	.L1131
 9994 0228 E5E7     		b	.L1212
 9995              	.LVL1044:
 9996              	.L1202:
 9997              	.LBE683:
 9998              	.LBE686:
 9999              	.LBE688:
1004:dm/dm42_fns.cc ****     }
 10000              		.loc 1 1004 0
 10001 022a 199B     		ldr	r3, [sp, #100]
 10002 022c 2146     		mov	r1, r4
 10003 022e 2846     		mov	r0, r5
 10004 0230 FFF7FEFF 		bl	prtof_add_graphics_lines
 10005              	.LVL1045:
 10006              	.LBB689:
 10007              	.LBB667:
1835:dm/dm42_fns.cc ****     case PRTOF_GRAPHICS:  res = PS(PRTOF_GRAPHICS);  break;
 10008              		.loc 1 1835 0
 10009 0234 D8F80030 		ldr	r3, [r8]
 10010              	.LVL1046:
 10011              	.LBE667:
 10012              	.LBE689:
1007:dm/dm42_fns.cc ****       if (is_print_to_file(PRTOF_GR_IN_TXT))
 10013              		.loc 1 1007 0
 10014 0238 9F05     		lsls	r7, r3, #22
 10015              	.LVL1047:
 10016 023a 7FF536AF 		bpl	.L1121
 10017 023e 28E7     		b	.L1213
 10018              	.LVL1048:
 10019              	.L1204:
 10020              	.LBE693:
 10021              	.LBE720:
1052:dm/dm42_fns.cc ****   }
 10022              		.loc 1 1052 0
 10023 0240 199B     		ldr	r3, [sp, #100]
 10024 0242 189A     		ldr	r2, [sp, #96]
 10025 0244 2146     		mov	r1, r4
 10026 0246 2846     		mov	r0, r5
 10027 0248 FFF7FEFF 		bl	prtof_add_graphics_lines
 10028              	.LVL1049:
 10029              	.LBB721:
 10030              	.LBB700:
1835:dm/dm42_fns.cc ****     case PRTOF_GRAPHICS:  res = PS(PRTOF_GRAPHICS);  break;
 10031              		.loc 1 1835 0
 10032 024c D8F80030 		ldr	r3, [r8]
 10033              	.LVL1050:
 10034              	.LBE700:
ARM GAS  /tmp/ccGYckNR.s 			page 249


 10035              	.LBE721:
1055:dm/dm42_fns.cc ****     prtof_add_text(text, length, is_wide_print());
 10036              		.loc 1 1055 0
 10037 0250 9A05     		lsls	r2, r3, #22
 10038 0252 7FF53FAF 		bpl	.L1134
 10039              	.L1205:
1056:dm/dm42_fns.cc ****   }
 10040              		.loc 1 1056 0
 10041 0256 FFF7FEFF 		bl	is_wide_print
 10042              	.LVL1051:
 10043 025a 3946     		mov	r1, r7
 10044 025c 0246     		mov	r2, r0
 10045 025e 3046     		mov	r0, r6
 10046 0260 FFF7FEFF 		bl	prtof_add_text
 10047              	.LVL1052:
 10048              	.LBB722:
 10049              	.LBB703:
1838:dm/dm42_fns.cc ****   }
 10050              		.loc 1 1838 0
 10051 0264 D8F80030 		ldr	r3, [r8]
 10052              	.LVL1053:
 10053              	.LBE703:
 10054              	.LBE722:
1059:dm/dm42_fns.cc ****     return;
 10055              		.loc 1 1059 0
 10056 0268 1B05     		lsls	r3, r3, #20
 10057 026a 3FF522AF 		bmi	.L1113
 10058 026e 35E7     		b	.L1214
 10059              	.LVL1054:
 10060              	.L1122:
 10061              	.LBB723:
 10062              	.LBB694:
1011:dm/dm42_fns.cc ****     }
 10063              		.loc 1 1011 0
 10064 0270 3046     		mov	r0, r6
 10065 0272 0521     		movs	r1, #5
 10066 0274 FFF7FEFF 		bl	prtof_add_text
 10067              	.LVL1055:
 10068              	.LBB690:
 10069              	.LBB672:
1838:dm/dm42_fns.cc ****   }
 10070              		.loc 1 1838 0
 10071 0278 D8F80030 		ldr	r3, [r8]
 10072              	.LVL1056:
 10073              	.LBE672:
 10074              	.LBE690:
1014:dm/dm42_fns.cc ****       return;
 10075              		.loc 1 1014 0
 10076 027c 1805     		lsls	r0, r3, #20
 10077 027e 3FF518AF 		bmi	.L1113
 10078 0282 6BE7     		b	.L1203
 10079              	.LVL1057:
 10080              	.L1210:
1019:dm/dm42_fns.cc ****       printer_was_graphics = 1;
 10081              		.loc 1 1019 0
 10082 0284 254B     		ldr	r3, .L1215+24
 10083 0286 0420     		movs	r0, #4
ARM GAS  /tmp/ccGYckNR.s 			page 250


 10084 0288 9847     		blx	r3
 10085              	.LVL1058:
1020:dm/dm42_fns.cc ****     }
 10086              		.loc 1 1020 0
 10087 028a 0123     		movs	r3, #1
 10088 028c 3370     		strb	r3, [r6]
 10089 028e 6AE7     		b	.L1124
 10090              	.LVL1059:
 10091              	.L1207:
 10092              	.LBE694:
 10093              	.LBE723:
1065:dm/dm42_fns.cc ****     print_byte(27); // ESC
 10094              		.loc 1 1065 0 discriminator 1
 10095 0290 FFF7FEFF 		bl	is_wide_print
 10096              	.LVL1060:
 10097 0294 20B1     		cbz	r0, .L1139
1066:dm/dm42_fns.cc ****     print_byte(253);// Start printing expanded characters
 10098              		.loc 1 1066 0
 10099 0296 1B20     		movs	r0, #27
 10100 0298 204D     		ldr	r5, .L1215+24
 10101              	.LVL1061:
 10102 029a A847     		blx	r5
 10103              	.LVL1062:
1067:dm/dm42_fns.cc ****   }
 10104              		.loc 1 1067 0
 10105 029c FD20     		movs	r0, #253
 10106 029e A847     		blx	r5
 10107              	.LVL1063:
 10108              	.L1139:
 10109              	.LBB724:
1070:dm/dm42_fns.cc ****     char b = is_gr_print ? text[i] : bb[i];
 10110              		.loc 1 1070 0 discriminator 1
 10111 02a0 002F     		cmp	r7, #0
 10112 02a2 2368     		ldr	r3, [r4]
 10113 02a4 3FF72DAF 		bgt	.L1155
 10114              	.LVL1064:
 10115              	.L1152:
 10116              	.LBE724:
1085:dm/dm42_fns.cc ****     print_byte(10); // Flush the line
 10117              		.loc 1 1085 0
 10118 02a8 002B     		cmp	r3, #0
 10119 02aa 7FF402AF 		bne	.L1113
1086:dm/dm42_fns.cc ****     if ( is_wide_print() ) {
 10120              		.loc 1 1086 0
 10121 02ae 0A20     		movs	r0, #10
 10122 02b0 1A4C     		ldr	r4, .L1215+24
 10123 02b2 A047     		blx	r4
 10124              	.LVL1065:
1087:dm/dm42_fns.cc ****       print_byte(27); // ESC
 10125              		.loc 1 1087 0
 10126 02b4 FFF7FEFF 		bl	is_wide_print
 10127              	.LVL1066:
 10128 02b8 18B1     		cbz	r0, .L1149
1088:dm/dm42_fns.cc ****       print_byte(252);// Return to normal-width characters
 10129              		.loc 1 1088 0
 10130 02ba 1B20     		movs	r0, #27
 10131 02bc A047     		blx	r4
ARM GAS  /tmp/ccGYckNR.s 			page 251


 10132              	.LVL1067:
1089:dm/dm42_fns.cc ****     }
 10133              		.loc 1 1089 0
 10134 02be FC20     		movs	r0, #252
 10135 02c0 A047     		blx	r4
 10136              	.LVL1068:
 10137              	.L1149:
1091:dm/dm42_fns.cc ****     printer_was_graphics = 0;
 10138              		.loc 1 1091 0
 10139 02c2 174B     		ldr	r3, .L1215+28
 10140 02c4 0020     		movs	r0, #0
 10141 02c6 9847     		blx	r3
 10142              	.LVL1069:
1092:dm/dm42_fns.cc ****   }
 10143              		.loc 1 1092 0
 10144 02c8 134B     		ldr	r3, .L1215+20
 10145 02ca 0022     		movs	r2, #0
 10146 02cc 1A70     		strb	r2, [r3]
 10147 02ce F0E6     		b	.L1113
 10148              	.LVL1070:
 10149              	.L1209:
 10150              	.LBB725:
 10151              	.LBB716:
1072:dm/dm42_fns.cc ****       is_gr_print = text[i+1]+2;
 10152              		.loc 1 1072 0 discriminator 3
 10153 02d0 7378     		ldrb	r3, [r6, #1]	@ zero_extendqisi2
 10154 02d2 A62B     		cmp	r3, #166
 10155 02d4 09DC     		bgt	.L1144
1073:dm/dm42_fns.cc ****       print_wait_for(PRINT_GRA_LN);
 10156              		.loc 1 1073 0
 10157 02d6 0233     		adds	r3, r3, #2
 10158 02d8 2360     		str	r3, [r4]
 10159              	.LVL1071:
 10160              	.L1145:
 10161              	.LBB713:
 10162              	.LBB712:
 843:dm/dm42_fns.cc ****     check_for_repaint(LCD_UPD_DFLT);
 10163              		.loc 1 843 0
 10164 02da 0120     		movs	r0, #1
 10165 02dc C847     		blx	r9
 10166              	.LVL1072:
 10167 02de 20B1     		cbz	r0, .L1144
 844:dm/dm42_fns.cc ****   }
 10168              		.loc 1 844 0
 10169 02e0 4FF0FF30 		mov	r0, #-1
 10170 02e4 FFF7FEFF 		bl	check_for_repaint
 10171              	.LVL1073:
 10172 02e8 F7E7     		b	.L1145
 10173              	.LVL1074:
 10174              	.L1144:
 10175              	.LBE712:
 10176              	.LBE713:
1078:dm/dm42_fns.cc ****     if (is_gr_print > 0) {
 10177              		.loc 1 1078 0
 10178 02ea 1B20     		movs	r0, #27
 10179 02ec C047     		blx	r8
 10180              	.LVL1075:
ARM GAS  /tmp/ccGYckNR.s 			page 252


1079:dm/dm42_fns.cc ****       is_gr_print--;
 10181              		.loc 1 1079 0
 10182 02ee 2368     		ldr	r3, [r4]
 10183 02f0 002B     		cmp	r3, #0
 10184 02f2 7FF719AF 		ble	.L1148
1080:dm/dm42_fns.cc ****       if (!is_gr_print)
 10185              		.loc 1 1080 0
 10186 02f6 013B     		subs	r3, r3, #1
 10187 02f8 2360     		str	r3, [r4]
1081:dm/dm42_fns.cc ****         printer_advance_buf(PRINT_TXT_LN);
 10188              		.loc 1 1081 0
 10189 02fa 002B     		cmp	r3, #0
 10190 02fc 7FF414AF 		bne	.L1148
 10191 0300 28E7     		b	.L1156
 10192              	.L1216:
 10193 0302 00BF     		.align	2
 10194              	.L1215:
 10195 0304 35030008 		.word	134218549
 10196 0308 00000000 		.word	.LC103
 10197 030c 31020008 		.word	134218289
 10198 0310 3D030008 		.word	134218557
 10199 0314 00000000 		.word	.LANCHOR38
 10200 0318 00000000 		.word	.LANCHOR37
 10201 031c 2D030008 		.word	134218541
 10202 0320 39030008 		.word	134218553
 10203 0324 00000000 		.word	.LANCHOR11
 10204 0328 00000000 		.word	.LANCHOR8
 10205              	.LBE716:
 10206              	.LBE725:
 10207              		.cfi_endproc
 10208              	.LFE241:
 10210              		.section	.text._Z12shell_beeperii,"ax",%progbits
 10211              		.align	1
 10212              		.p2align 2,,3
 10213              		.global	_Z12shell_beeperii
 10214              		.syntax unified
 10215              		.thumb
 10216              		.thumb_func
 10217              		.fpu fpv4-sp-d16
 10219              	_Z12shell_beeperii:
 10220              	.LFB248:
1173:dm/dm42_fns.cc ****   DBGSHELL("shell_beeper fr=%i dur=%i\n", frequency, duration);
 10221              		.loc 1 1173 0
 10222              		.cfi_startproc
 10223              		@ args = 0, pretend = 0, frame = 0
 10224              		@ frame_needed = 0, uses_anonymous_args = 0
 10225              	.LVL1076:
1179:dm/dm42_fns.cc ****     for( ; duration > 0 ; duration -= 10) {
 10226              		.loc 1 1179 0
 10227 0000 4FF47A73 		mov	r3, #1000
 10228 0004 9942     		cmp	r1, r3
 10229 0006 A8BF     		it	ge
 10230 0008 1946     		movge	r1, r3
 10231              	.LVL1077:
1173:dm/dm42_fns.cc ****   DBGSHELL("shell_beeper fr=%i dur=%i\n", frequency, duration);
 10232              		.loc 1 1173 0
 10233 000a 70B5     		push	{r4, r5, r6, lr}
ARM GAS  /tmp/ccGYckNR.s 			page 253


 10234              		.cfi_def_cfa_offset 16
 10235              		.cfi_offset 4, -16
 10236              		.cfi_offset 5, -12
 10237              		.cfi_offset 6, -8
 10238              		.cfi_offset 14, -4
1179:dm/dm42_fns.cc ****     for( ; duration > 0 ; duration -= 10) {
 10239              		.loc 1 1179 0
 10240 000c 03FB00F0 		mul	r0, r3, r0
 10241              	.LVL1078:
 10242 0010 0C46     		mov	r4, r1
 10243              	.LVL1079:
 10244 0012 0A4B     		ldr	r3, .L1222
 10245 0014 9847     		blx	r3
 10246              	.LVL1080:
1180:dm/dm42_fns.cc ****       sys_delay(duration > 10 ? 10 : duration);
 10247              		.loc 1 1180 0
 10248 0016 002C     		cmp	r4, #0
 10249 0018 0CDD     		ble	.L1219
1181:dm/dm42_fns.cc ****       check_for_repaint(LCD_UPD_DFLT);
 10250              		.loc 1 1181 0 discriminator 1
 10251 001a 094D     		ldr	r5, .L1222+4
 10252              	.L1220:
 10253 001c 0A2C     		cmp	r4, #10
 10254 001e 2046     		mov	r0, r4
 10255 0020 A8BF     		it	ge
 10256 0022 0A20     		movge	r0, #10
 10257 0024 A847     		blx	r5
 10258              	.LVL1081:
1180:dm/dm42_fns.cc ****       sys_delay(duration > 10 ? 10 : duration);
 10259              		.loc 1 1180 0 discriminator 1
 10260 0026 0A3C     		subs	r4, r4, #10
 10261              	.LVL1082:
1182:dm/dm42_fns.cc ****       // FIXME: Break on key press?
 10262              		.loc 1 1182 0 discriminator 1
 10263 0028 4FF0FF30 		mov	r0, #-1
 10264 002c FFF7FEFF 		bl	check_for_repaint
 10265              	.LVL1083:
1180:dm/dm42_fns.cc ****       sys_delay(duration > 10 ? 10 : duration);
 10266              		.loc 1 1180 0 discriminator 1
 10267 0030 002C     		cmp	r4, #0
 10268 0032 F3DC     		bgt	.L1220
 10269              	.L1219:
1186:dm/dm42_fns.cc **** }
 10270              		.loc 1 1186 0
 10271 0034 034B     		ldr	r3, .L1222+8
1187:dm/dm42_fns.cc **** 
 10272              		.loc 1 1187 0
 10273 0036 BDE87040 		pop	{r4, r5, r6, lr}
 10274              		.cfi_restore 14
 10275              		.cfi_restore 6
 10276              		.cfi_restore 5
 10277              		.cfi_restore 4
 10278              		.cfi_def_cfa_offset 0
 10279              	.LVL1084:
1186:dm/dm42_fns.cc **** }
 10280              		.loc 1 1186 0
 10281 003a 1847     		bx	r3	@ indirect register sibling call
ARM GAS  /tmp/ccGYckNR.s 			page 254


 10282              	.LVL1085:
 10283              	.L1223:
 10284              		.align	2
 10285              	.L1222:
 10286 003c F5020008 		.word	134218485
 10287 0040 05040008 		.word	134218757
 10288 0044 F9020008 		.word	134218489
 10289              		.cfi_endproc
 10290              	.LFE248:
 10292              		.section	.text._Z15shell_wants_cpuv,"ax",%progbits
 10293              		.align	1
 10294              		.p2align 2,,3
 10295              		.global	_Z15shell_wants_cpuv
 10296              		.syntax unified
 10297              		.thumb
 10298              		.thumb_func
 10299              		.fpu fpv4-sp-d16
 10301              	_Z15shell_wants_cpuv:
 10302              	.LFB253:
1286:dm/dm42_fns.cc ****   int res = !key_empty(); // || header_timeout() || lcd_update_timeout();
 10303              		.loc 1 1286 0
 10304              		.cfi_startproc
 10305              		@ args = 0, pretend = 0, frame = 0
 10306              		@ frame_needed = 0, uses_anonymous_args = 0
 10307 0000 10B5     		push	{r4, lr}
 10308              		.cfi_def_cfa_offset 8
 10309              		.cfi_offset 4, -8
 10310              		.cfi_offset 14, -4
1287:dm/dm42_fns.cc ****   
 10311              		.loc 1 1287 0
 10312 0002 064B     		ldr	r3, .L1226
 10313 0004 9847     		blx	r3
 10314              	.LVL1086:
1289:dm/dm42_fns.cc ****   check_for_repaint(LCD_UPD_DFLT);
 10315              		.loc 1 1289 0
 10316 0006 064B     		ldr	r3, .L1226+4
1287:dm/dm42_fns.cc ****   
 10317              		.loc 1 1287 0
 10318 0008 0446     		mov	r4, r0
 10319              	.LVL1087:
1289:dm/dm42_fns.cc ****   check_for_repaint(LCD_UPD_DFLT);
 10320              		.loc 1 1289 0
 10321 000a 9847     		blx	r3
 10322              	.LVL1088:
1290:dm/dm42_fns.cc **** 
 10323              		.loc 1 1290 0
 10324 000c 4FF0FF30 		mov	r0, #-1
 10325 0010 FFF7FEFF 		bl	check_for_repaint
 10326              	.LVL1089:
1296:dm/dm42_fns.cc **** 
 10327              		.loc 1 1296 0
 10328 0014 B4FA84F0 		clz	r0, r4
 10329 0018 4009     		lsrs	r0, r0, #5
 10330 001a 10BD     		pop	{r4, pc}
 10331              	.LVL1090:
 10332              	.L1227:
 10333              		.align	2
ARM GAS  /tmp/ccGYckNR.s 			page 255


 10334              	.L1226:
 10335 001c 7D030008 		.word	134218621
 10336 0020 B9030008 		.word	134218681
 10337              		.cfi_endproc
 10338              	.LFE253:
 10340              		.section	.text._Z23shell_force_lcd_refreshi,"ax",%progbits
 10341              		.align	1
 10342              		.p2align 2,,3
 10343              		.global	_Z23shell_force_lcd_refreshi
 10344              		.syntax unified
 10345              		.thumb
 10346              		.thumb_func
 10347              		.fpu fpv4-sp-d16
 10349              	_Z23shell_force_lcd_refreshi:
 10350              	.LFB263:
1376:dm/dm42_fns.cc ****   check_for_repaint(what); // Force repaint
 10351              		.loc 1 1376 0
 10352              		.cfi_startproc
 10353              		@ args = 0, pretend = 0, frame = 0
 10354              		@ frame_needed = 0, uses_anonymous_args = 0
 10355              		@ link register save eliminated.
 10356              	.LVL1091:
1377:dm/dm42_fns.cc **** }
 10357              		.loc 1 1377 0
 10358 0000 FFF7FEBF 		b	check_for_repaint
 10359              	.LVL1092:
 10360              		.cfi_endproc
 10361              	.LFE263:
 10363              		.section	.text.empty_keydown,"ax",%progbits
 10364              		.align	1
 10365              		.p2align 2,,3
 10366              		.global	empty_keydown
 10367              		.syntax unified
 10368              		.thumb
 10369              		.thumb_func
 10370              		.fpu fpv4-sp-d16
 10372              	empty_keydown:
 10373              	.LFB307:
2581:dm/dm42_fns.cc ****   int dummy1, dummy2, keep_running;
 10374              		.loc 1 2581 0
 10375              		.cfi_startproc
 10376              		@ args = 0, pretend = 0, frame = 8
 10377              		@ frame_needed = 0, uses_anonymous_args = 0
 10378 0000 00B5     		push	{lr}
 10379              		.cfi_def_cfa_offset 4
 10380              		.cfi_offset 14, -4
 10381 0002 83B0     		sub	sp, sp, #12
 10382              		.cfi_def_cfa_offset 16
 10383              	.L1230:
2585:dm/dm42_fns.cc ****     printf("end of empty keydown: keep_running=%i\n", keep_running);
 10384              		.loc 1 2585 0
 10385 0004 01AA     		add	r2, sp, #4
 10386 0006 6946     		mov	r1, sp
 10387 0008 0020     		movs	r0, #0
 10388 000a FFF7FEFF 		bl	_Z12core_keydowniPiS_
 10389              	.LVL1093:
2587:dm/dm42_fns.cc **** }
ARM GAS  /tmp/ccGYckNR.s 			page 256


 10390              		.loc 1 2587 0
 10391 000e 0028     		cmp	r0, #0
 10392 0010 F8D1     		bne	.L1230
2588:dm/dm42_fns.cc **** 
 10393              		.loc 1 2588 0
 10394 0012 03B0     		add	sp, sp, #12
 10395              		.cfi_def_cfa_offset 4
 10396              		@ sp needed
 10397 0014 5DF804FB 		ldr	pc, [sp], #4
 10398              		.cfi_endproc
 10399              	.LFE307:
 10401              		.section	.text.setTimeout0,"ax",%progbits
 10402              		.align	1
 10403              		.p2align 2,,3
 10404              		.global	setTimeout0
 10405              		.syntax unified
 10406              		.thumb
 10407              		.thumb_func
 10408              		.fpu fpv4-sp-d16
 10410              	setTimeout0:
 10411              	.LFB308:
2607:dm/dm42_fns.cc ****   if ( is_pgm_mode() && !is_slow_autorepeat() && (sys_last_key() == KEY_UP || sys_last_key() == KEY
 10412              		.loc 1 2607 0
 10413              		.cfi_startproc
 10414              		@ args = 0, pretend = 0, frame = 0
 10415              		@ frame_needed = 0, uses_anonymous_args = 0
 10416              	.LVL1094:
 10417 0000 70B5     		push	{r4, r5, r6, lr}
 10418              		.cfi_def_cfa_offset 16
 10419              		.cfi_offset 4, -16
 10420              		.cfi_offset 5, -12
 10421              		.cfi_offset 6, -8
 10422              		.cfi_offset 14, -4
2607:dm/dm42_fns.cc ****   if ( is_pgm_mode() && !is_slow_autorepeat() && (sys_last_key() == KEY_UP || sys_last_key() == KEY
 10423              		.loc 1 2607 0
 10424 0002 0546     		mov	r5, r0
 10425 0004 0C46     		mov	r4, r1
2608:dm/dm42_fns.cc ****     value = value/2; // Half in pgm mode
 10426              		.loc 1 2608 0
 10427 0006 FFF7FEFF 		bl	is_pgm_mode
 10428              	.LVL1095:
 10429 000a 38B9     		cbnz	r0, .L1245
 10430              	.L1235:
2612:dm/dm42_fns.cc ****   sys_timer_start(TIMER0, value);
 10431              		.loc 1 2612 0
 10432 000c 0B4A     		ldr	r2, .L1246
2613:dm/dm42_fns.cc **** }
 10433              		.loc 1 2613 0
 10434 000e 0C4B     		ldr	r3, .L1246+4
2612:dm/dm42_fns.cc ****   sys_timer_start(TIMER0, value);
 10435              		.loc 1 2612 0
 10436 0010 1570     		strb	r5, [r2]
2613:dm/dm42_fns.cc **** }
 10437              		.loc 1 2613 0
 10438 0012 2146     		mov	r1, r4
 10439 0014 0020     		movs	r0, #0
2614:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 257


 10440              		.loc 1 2614 0
 10441 0016 BDE87040 		pop	{r4, r5, r6, lr}
 10442              		.cfi_remember_state
 10443              		.cfi_restore 14
 10444              		.cfi_restore 6
 10445              		.cfi_restore 5
 10446              		.cfi_restore 4
 10447              		.cfi_def_cfa_offset 0
 10448              	.LVL1096:
2613:dm/dm42_fns.cc **** }
 10449              		.loc 1 2613 0
 10450 001a 1847     		bx	r3	@ indirect register sibling call
 10451              	.LVL1097:
 10452              	.L1245:
 10453              		.cfi_restore_state
2608:dm/dm42_fns.cc ****     value = value/2; // Half in pgm mode
 10454              		.loc 1 2608 0 discriminator 1
 10455 001c 094B     		ldr	r3, .L1246+8
 10456 001e 9847     		blx	r3
 10457              	.LVL1098:
 10458 0020 0028     		cmp	r0, #0
 10459 0022 F3D1     		bne	.L1235
2608:dm/dm42_fns.cc ****     value = value/2; // Half in pgm mode
 10460              		.loc 1 2608 0 is_stmt 0 discriminator 3
 10461 0024 084E     		ldr	r6, .L1246+12
 10462 0026 B047     		blx	r6
 10463              	.LVL1099:
 10464 0028 1228     		cmp	r0, #18
 10465 002a 02D0     		beq	.L1237
2608:dm/dm42_fns.cc ****     value = value/2; // Half in pgm mode
 10466              		.loc 1 2608 0 discriminator 6
 10467 002c B047     		blx	r6
 10468              	.LVL1100:
 10469 002e 1728     		cmp	r0, #23
 10470 0030 ECD1     		bne	.L1235
 10471              	.L1237:
2609:dm/dm42_fns.cc ****   printf("setTimeout0: %i : %i\n",timeout_type, value);
 10472              		.loc 1 2609 0 is_stmt 1
 10473 0032 04EBD474 		add	r4, r4, r4, lsr #31
 10474              	.LVL1101:
 10475 0036 6410     		asrs	r4, r4, #1
 10476              	.LVL1102:
 10477 0038 E8E7     		b	.L1235
 10478              	.L1247:
 10479 003a 00BF     		.align	2
 10480              	.L1246:
 10481 003c 00000000 		.word	.LANCHOR39
 10482 0040 F9030008 		.word	134218745
 10483 0044 B5030008 		.word	134218677
 10484 0048 25040008 		.word	134218789
 10485              		.cfi_endproc
 10486              	.LFE308:
 10488              		.section	.text.clearTimeout0,"ax",%progbits
 10489              		.align	1
 10490              		.p2align 2,,3
 10491              		.global	clearTimeout0
 10492              		.syntax unified
ARM GAS  /tmp/ccGYckNR.s 			page 258


 10493              		.thumb
 10494              		.thumb_func
 10495              		.fpu fpv4-sp-d16
 10497              	clearTimeout0:
 10498              	.LFB309:
2616:dm/dm42_fns.cc ****   sys_timer_disable(TIMER0);
 10499              		.loc 1 2616 0
 10500              		.cfi_startproc
 10501              		@ args = 0, pretend = 0, frame = 0
 10502              		@ frame_needed = 0, uses_anonymous_args = 0
 10503              		@ link register save eliminated.
2617:dm/dm42_fns.cc **** }
 10504              		.loc 1 2617 0
 10505 0000 014B     		ldr	r3, .L1249
 10506 0002 0020     		movs	r0, #0
 10507 0004 1847     		bx	r3	@ indirect register sibling call
 10508              	.LVL1103:
 10509              	.L1250:
 10510 0006 00BF     		.align	2
 10511              	.L1249:
 10512 0008 F5030008 		.word	134218741
 10513              		.cfi_endproc
 10514              	.LFE309:
 10516              		.section	.text.setTimeout3,"ax",%progbits
 10517              		.align	1
 10518              		.p2align 2,,3
 10519              		.global	setTimeout3
 10520              		.syntax unified
 10521              		.thumb
 10522              		.thumb_func
 10523              		.fpu fpv4-sp-d16
 10525              	setTimeout3:
 10526              	.LFB310:
2620:dm/dm42_fns.cc ****   sys_timer_start(TIMER3, value);
 10527              		.loc 1 2620 0
 10528              		.cfi_startproc
 10529              		@ args = 0, pretend = 0, frame = 0
 10530              		@ frame_needed = 0, uses_anonymous_args = 0
 10531              		@ link register save eliminated.
 10532              	.LVL1104:
2621:dm/dm42_fns.cc **** }
 10533              		.loc 1 2621 0
 10534 0000 0146     		mov	r1, r0
 10535 0002 014B     		ldr	r3, .L1252
 10536 0004 0120     		movs	r0, #1
 10537              	.LVL1105:
 10538 0006 1847     		bx	r3	@ indirect register sibling call
 10539              	.LVL1106:
 10540              	.L1253:
 10541              		.align	2
 10542              	.L1252:
 10543 0008 F9030008 		.word	134218745
 10544              		.cfi_endproc
 10545              	.LFE310:
 10547              		.section	.text._Z22shell_request_timeout3i,"ax",%progbits
 10548              		.align	1
 10549              		.p2align 2,,3
ARM GAS  /tmp/ccGYckNR.s 			page 259


 10550              		.global	_Z22shell_request_timeout3i
 10551              		.syntax unified
 10552              		.thumb
 10553              		.thumb_func
 10554              		.fpu fpv4-sp-d16
 10556              	_Z22shell_request_timeout3i:
 10557              	.LFB341:
 10558              		.cfi_startproc
 10559              		@ args = 0, pretend = 0, frame = 0
 10560              		@ frame_needed = 0, uses_anonymous_args = 0
 10561              		@ link register save eliminated.
 10562 0000 FFF7FEBF 		b	setTimeout3
 10563              		.cfi_endproc
 10564              	.LFE341:
 10566              		.section	.text.clearTimeout3,"ax",%progbits
 10567              		.align	1
 10568              		.p2align 2,,3
 10569              		.global	clearTimeout3
 10570              		.syntax unified
 10571              		.thumb
 10572              		.thumb_func
 10573              		.fpu fpv4-sp-d16
 10575              	clearTimeout3:
 10576              	.LFB311:
2624:dm/dm42_fns.cc ****   sys_timer_disable(TIMER3);
 10577              		.loc 1 2624 0
 10578              		.cfi_startproc
 10579              		@ args = 0, pretend = 0, frame = 0
 10580              		@ frame_needed = 0, uses_anonymous_args = 0
 10581              		@ link register save eliminated.
2625:dm/dm42_fns.cc **** }
 10582              		.loc 1 2625 0
 10583 0000 014B     		ldr	r3, .L1256
 10584 0002 0120     		movs	r0, #1
 10585 0004 1847     		bx	r3	@ indirect register sibling call
 10586              	.LVL1107:
 10587              	.L1257:
 10588 0006 00BF     		.align	2
 10589              	.L1256:
 10590 0008 F5030008 		.word	134218741
 10591              		.cfi_endproc
 10592              	.LFE311:
 10594              		.section	.text.header_timeout,"ax",%progbits
 10595              		.align	1
 10596              		.p2align 2,,3
 10597              		.global	header_timeout
 10598              		.syntax unified
 10599              		.thumb
 10600              		.thumb_func
 10601              		.fpu fpv4-sp-d16
 10603              	header_timeout:
 10604              	.LFB312:
2630:dm/dm42_fns.cc ****   return last_header_min != rtc_read_min() && is_graphics < 2;
 10605              		.loc 1 2630 0
 10606              		.cfi_startproc
 10607              		@ args = 0, pretend = 0, frame = 0
 10608              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccGYckNR.s 			page 260


 10609 0000 08B5     		push	{r3, lr}
 10610              		.cfi_def_cfa_offset 8
 10611              		.cfi_offset 3, -8
 10612              		.cfi_offset 14, -4
2631:dm/dm42_fns.cc **** }
 10613              		.loc 1 2631 0
 10614 0002 074B     		ldr	r3, .L1262
 10615 0004 9847     		blx	r3
 10616              	.LVL1108:
 10617 0006 074B     		ldr	r3, .L1262+4
 10618 0008 1B68     		ldr	r3, [r3]
 10619 000a 9842     		cmp	r0, r3
 10620 000c 06D0     		beq	.L1260
2631:dm/dm42_fns.cc **** }
 10621              		.loc 1 2631 0 is_stmt 0 discriminator 1
 10622 000e 064B     		ldr	r3, .L1262+8
 10623 0010 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 10624 0012 0128     		cmp	r0, #1
 10625 0014 CCBF     		ite	gt
 10626 0016 0020     		movgt	r0, #0
 10627 0018 0120     		movle	r0, #1
 10628 001a 08BD     		pop	{r3, pc}
 10629              	.L1260:
 10630 001c 0020     		movs	r0, #0
2632:dm/dm42_fns.cc **** 
 10631              		.loc 1 2632 0 is_stmt 1
 10632 001e 08BD     		pop	{r3, pc}
 10633              	.L1263:
 10634              		.align	2
 10635              	.L1262:
 10636 0020 DD020008 		.word	134218461
 10637 0024 00000000 		.word	.LANCHOR31
 10638 0028 00000000 		.word	.LANCHOR10
 10639              		.cfi_endproc
 10640              	.LFE312:
 10642              		.section	.text.clear_header_timeout,"ax",%progbits
 10643              		.align	1
 10644              		.p2align 2,,3
 10645              		.global	clear_header_timeout
 10646              		.syntax unified
 10647              		.thumb
 10648              		.thumb_func
 10649              		.fpu fpv4-sp-d16
 10651              	clear_header_timeout:
 10652              	.LFB313:
2634:dm/dm42_fns.cc ****   last_header_min = rtc_read_min();
 10653              		.loc 1 2634 0
 10654              		.cfi_startproc
 10655              		@ args = 0, pretend = 0, frame = 0
 10656              		@ frame_needed = 0, uses_anonymous_args = 0
 10657 0000 08B5     		push	{r3, lr}
 10658              		.cfi_def_cfa_offset 8
 10659              		.cfi_offset 3, -8
 10660              		.cfi_offset 14, -4
2635:dm/dm42_fns.cc **** }
 10661              		.loc 1 2635 0
 10662 0002 024B     		ldr	r3, .L1266
ARM GAS  /tmp/ccGYckNR.s 			page 261


 10663 0004 9847     		blx	r3
 10664              	.LVL1109:
 10665 0006 024B     		ldr	r3, .L1266+4
 10666 0008 1860     		str	r0, [r3]
 10667 000a 08BD     		pop	{r3, pc}
 10668              	.L1267:
 10669              		.align	2
 10670              	.L1266:
 10671 000c DD020008 		.word	134218461
 10672 0010 00000000 		.word	.LANCHOR31
 10673              		.cfi_endproc
 10674              	.LFE313:
 10676              		.section	.text.force_header_timeout,"ax",%progbits
 10677              		.align	1
 10678              		.p2align 2,,3
 10679              		.global	force_header_timeout
 10680              		.syntax unified
 10681              		.thumb
 10682              		.thumb_func
 10683              		.fpu fpv4-sp-d16
 10685              	force_header_timeout:
 10686              	.LFB314:
2638:dm/dm42_fns.cc ****   last_header_min = 77; // Force header timeout
 10687              		.loc 1 2638 0
 10688              		.cfi_startproc
 10689              		@ args = 0, pretend = 0, frame = 0
 10690              		@ frame_needed = 0, uses_anonymous_args = 0
 10691              		@ link register save eliminated.
2639:dm/dm42_fns.cc **** }
 10692              		.loc 1 2639 0
 10693 0000 014B     		ldr	r3, .L1269
 10694 0002 4D22     		movs	r2, #77
 10695 0004 1A60     		str	r2, [r3]
 10696 0006 7047     		bx	lr
 10697              	.L1270:
 10698              		.align	2
 10699              	.L1269:
 10700 0008 00000000 		.word	.LANCHOR31
 10701              		.cfi_endproc
 10702              	.LFE314:
 10704              		.section	.text.lcd_update_timeout,"ax",%progbits
 10705              		.align	1
 10706              		.p2align 2,,3
 10707              		.global	lcd_update_timeout
 10708              		.syntax unified
 10709              		.thumb
 10710              		.thumb_func
 10711              		.fpu fpv4-sp-d16
 10713              	lcd_update_timeout:
 10714              	.LFB315:
2643:dm/dm42_fns.cc ****   return last_lcd_update_ms 
 10715              		.loc 1 2643 0
 10716              		.cfi_startproc
 10717              		@ args = 0, pretend = 0, frame = 0
 10718              		@ frame_needed = 0, uses_anonymous_args = 0
 10719              		@ link register save eliminated.
2646:dm/dm42_fns.cc **** }
ARM GAS  /tmp/ccGYckNR.s 			page 262


 10720              		.loc 1 2646 0
 10721 0000 024B     		ldr	r3, .L1274
2645:dm/dm42_fns.cc ****     :  0;
 10722              		.loc 1 2645 0
 10723 0002 1868     		ldr	r0, [r3]
 10724 0004 00B9     		cbnz	r0, .L1273
2647:dm/dm42_fns.cc **** 
 10725              		.loc 1 2647 0
 10726 0006 7047     		bx	lr
 10727              	.L1273:
 10728 0008 FFF7FEBF 		b	lcd_update_timeout.part.9
 10729              	.LVL1110:
 10730              	.L1275:
 10731              		.align	2
 10732              	.L1274:
 10733 000c 00000000 		.word	.LANCHOR9
 10734              		.cfi_endproc
 10735              	.LFE315:
 10737              		.section	.text.clear_lcd_update_timeout,"ax",%progbits
 10738              		.align	1
 10739              		.p2align 2,,3
 10740              		.global	clear_lcd_update_timeout
 10741              		.syntax unified
 10742              		.thumb
 10743              		.thumb_func
 10744              		.fpu fpv4-sp-d16
 10746              	clear_lcd_update_timeout:
 10747              	.LFB316:
2649:dm/dm42_fns.cc ****   last_lcd_update_ms = 0;
 10748              		.loc 1 2649 0
 10749              		.cfi_startproc
 10750              		@ args = 0, pretend = 0, frame = 0
 10751              		@ frame_needed = 0, uses_anonymous_args = 0
 10752              		@ link register save eliminated.
2650:dm/dm42_fns.cc **** }
 10753              		.loc 1 2650 0
 10754 0000 014B     		ldr	r3, .L1277
 10755 0002 0022     		movs	r2, #0
 10756 0004 1A60     		str	r2, [r3]
 10757 0006 7047     		bx	lr
 10758              	.L1278:
 10759              		.align	2
 10760              	.L1277:
 10761 0008 00000000 		.word	.LANCHOR9
 10762              		.cfi_endproc
 10763              	.LFE316:
 10765              		.section	.text.set_lcd_update_timeout,"ax",%progbits
 10766              		.align	1
 10767              		.p2align 2,,3
 10768              		.global	set_lcd_update_timeout
 10769              		.syntax unified
 10770              		.thumb
 10771              		.thumb_func
 10772              		.fpu fpv4-sp-d16
 10774              	set_lcd_update_timeout:
 10775              	.LFB317:
2653:dm/dm42_fns.cc ****   if (last_lcd_update_ms == 0)
ARM GAS  /tmp/ccGYckNR.s 			page 263


 10776              		.loc 1 2653 0
 10777              		.cfi_startproc
 10778              		@ args = 0, pretend = 0, frame = 0
 10779              		@ frame_needed = 0, uses_anonymous_args = 0
 10780              		@ link register save eliminated.
2654:dm/dm42_fns.cc ****     last_lcd_update_ms = sys_current_ms();
 10781              		.loc 1 2654 0
 10782 0000 024B     		ldr	r3, .L1282
 10783 0002 1B68     		ldr	r3, [r3]
 10784 0004 03B1     		cbz	r3, .L1281
 10785 0006 7047     		bx	lr
 10786              	.L1281:
 10787 0008 FFF7FEBF 		b	set_lcd_update_timeout.part.10
 10788              	.LVL1111:
 10789              	.L1283:
 10790              		.align	2
 10791              	.L1282:
 10792 000c 00000000 		.word	.LANCHOR9
 10793              		.cfi_endproc
 10794              	.LFE317:
 10796              		.section	.text.calc_lcd_redraw,"ax",%progbits
 10797              		.align	1
 10798              		.p2align 2,,3
 10799              		.global	calc_lcd_redraw
 10800              		.syntax unified
 10801              		.thumb
 10802              		.thumb_func
 10803              		.fpu fpv4-sp-d16
 10805              	calc_lcd_redraw:
 10806              	.LFB318:
2660:dm/dm42_fns.cc ****   lcd_for_dm42(DISP_CALC);
 10807              		.loc 1 2660 0
 10808              		.cfi_startproc
 10809              		@ args = 0, pretend = 0, frame = 0
 10810              		@ frame_needed = 0, uses_anonymous_args = 0
 10811 0000 08B5     		push	{r3, lr}
 10812              		.cfi_def_cfa_offset 8
 10813              		.cfi_offset 3, -8
 10814              		.cfi_offset 14, -4
2661:dm/dm42_fns.cc ****   core_redisplay();
 10815              		.loc 1 2661 0
 10816 0002 0020     		movs	r0, #0
 10817 0004 FFF7FEFF 		bl	lcd_for_dm42
 10818              	.LVL1112:
2662:dm/dm42_fns.cc ****   skin_repaint_annunciator(0, 0); // Always repaint all
 10819              		.loc 1 2662 0
 10820 0008 FFF7FEFF 		bl	core_redisplay
 10821              	.LVL1113:
 10822              	.LBB726:
 10823              	.LBB727:
 10824              	.LBB728:
 10825              	.LBB729:
 770:dm/dm42_fns.cc **** 
 10826              		.loc 1 770 0
 10827 000c 054B     		ldr	r3, .L1287
 10828 000e 1B68     		ldr	r3, [r3]
 10829 0010 5B06     		lsls	r3, r3, #25
ARM GAS  /tmp/ccGYckNR.s 			page 264


 10830 0012 01D4     		bmi	.L1285
 10831              	.LBE729:
 10832              	.LBE728:
 10833 0014 FFF7FEFF 		bl	skin_repaint_annunciator.part.1
 10834              	.LVL1114:
 10835              	.L1285:
 10836              	.LBE727:
 10837              	.LBE726:
2664:dm/dm42_fns.cc **** }
 10838              		.loc 1 2664 0
 10839 0018 034A     		ldr	r2, .L1287+4
 10840 001a 1368     		ldr	r3, [r2]
 10841 001c 43F00F03 		orr	r3, r3, #15
 10842 0020 1360     		str	r3, [r2]
 10843 0022 08BD     		pop	{r3, pc}
 10844              	.L1288:
 10845              		.align	2
 10846              	.L1287:
 10847 0024 00200010 		.word	268443648
 10848 0028 00000000 		.word	.LANCHOR7
 10849              		.cfi_endproc
 10850              	.LFE318:
 10852              		.section	.text._Z15thell_draw_chariic,"ax",%progbits
 10853              		.align	1
 10854              		.p2align 2,,3
 10855              		.global	_Z15thell_draw_chariic
 10856              		.syntax unified
 10857              		.thumb
 10858              		.thumb_func
 10859              		.fpu fpv4-sp-d16
 10861              	_Z15thell_draw_chariic:
 10862              	.LFB269:
1500:dm/dm42_fns.cc ****   //DBGTHELL("thell_draw_char %i %i : '%s'\n", x,y, str_from_hp(&c,1));
 10863              		.loc 1 1500 0
 10864              		.cfi_startproc
 10865              		@ args = 0, pretend = 0, frame = 0
 10866              		@ frame_needed = 0, uses_anonymous_args = 0
 10867              	.LVL1115:
 10868 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 10869              		.cfi_def_cfa_offset 24
 10870              		.cfi_offset 3, -24
 10871              		.cfi_offset 4, -20
 10872              		.cfi_offset 5, -16
 10873              		.cfi_offset 6, -12
 10874              		.cfi_offset 7, -8
 10875              		.cfi_offset 14, -4
1505:dm/dm42_fns.cc ****     // Was HiRes -> repaint header
 10876              		.loc 1 1505 0
 10877 0002 0A4D     		ldr	r5, .L1292
 10878 0004 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 10879 0006 012B     		cmp	r3, #1
1500:dm/dm42_fns.cc ****   //DBGTHELL("thell_draw_char %i %i : '%s'\n", x,y, str_from_hp(&c,1));
 10880              		.loc 1 1500 0
 10881 0008 0646     		mov	r6, r0
 10882 000a 0C46     		mov	r4, r1
 10883 000c 1746     		mov	r7, r2
1505:dm/dm42_fns.cc ****     // Was HiRes -> repaint header
ARM GAS  /tmp/ccGYckNR.s 			page 265


 10884              		.loc 1 1505 0
 10885 000e 03DD     		ble	.L1290
1507:dm/dm42_fns.cc ****     calc_lcd_redraw();
 10886              		.loc 1 1507 0
 10887 0010 0023     		movs	r3, #0
 10888 0012 2B70     		strb	r3, [r5]
1508:dm/dm42_fns.cc ****   }
 10889              		.loc 1 1508 0
 10890 0014 FFF7FEFF 		bl	calc_lcd_redraw
 10891              	.LVL1116:
 10892              	.L1290:
1512:dm/dm42_fns.cc **** }
 10893              		.loc 1 1512 0
 10894 0018 054B     		ldr	r3, .L1292+4
 10895 001a 04EB4401 		add	r1, r4, r4, lsl #1
 10896 001e C4EBC104 		rsb	r4, r4, r1, lsl #3
 10897              	.LVL1117:
 10898 0022 1C44     		add	r4, r4, r3
1510:dm/dm42_fns.cc **** 
 10899              		.loc 1 1510 0
 10900 0024 0023     		movs	r3, #0
1512:dm/dm42_fns.cc **** }
 10901              		.loc 1 1512 0
 10902 0026 A755     		strb	r7, [r4, r6]
1510:dm/dm42_fns.cc **** 
 10903              		.loc 1 1510 0
 10904 0028 2B70     		strb	r3, [r5]
 10905 002a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 10906              	.LVL1118:
 10907              	.L1293:
 10908              		.align	2
 10909              	.L1292:
 10910 002c 00000000 		.word	.LANCHOR10
 10911 0030 00000000 		.word	.LANCHOR15
 10912              		.cfi_endproc
 10913              	.LFE269:
 10915              		.section	.text.disp_header,"ax",%progbits
 10916              		.align	1
 10917              		.p2align 2,,3
 10918              		.global	disp_header
 10919              		.syntax unified
 10920              		.thumb
 10921              		.thumb_func
 10922              		.fpu fpv4-sp-d16
 10924              	disp_header:
 10925              	.LFB319:
2673:dm/dm42_fns.cc ****   // Refresh header each second
 10926              		.loc 1 2673 0
 10927              		.cfi_startproc
 10928              		@ args = 0, pretend = 0, frame = 0
 10929              		@ frame_needed = 0, uses_anonymous_args = 0
 10930              		@ link register save eliminated.
2679:dm/dm42_fns.cc **** 
 10931              		.loc 1 2679 0
 10932 0000 054B     		ldr	r3, .L1297
 10933 0002 1B68     		ldr	r3, [r3]
 10934 0004 5B06     		lsls	r3, r3, #25
ARM GAS  /tmp/ccGYckNR.s 			page 266


 10935 0006 03D4     		bmi	.L1294
2681:dm/dm42_fns.cc ****     return;
 10936              		.loc 1 2681 0
 10937 0008 044B     		ldr	r3, .L1297+4
 10938 000a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10939 000c 012B     		cmp	r3, #1
 10940 000e 00DD     		ble	.L1296
 10941              	.L1294:
 10942 0010 7047     		bx	lr
 10943              	.L1296:
 10944 0012 FFF7FEBF 		b	disp_header.part.11
 10945              	.LVL1119:
 10946              	.L1298:
 10947 0016 00BF     		.align	2
 10948              	.L1297:
 10949 0018 00200010 		.word	268443648
 10950 001c 00000000 		.word	.LANCHOR10
 10951              		.cfi_endproc
 10952              	.LFE319:
 10954              		.section	.text.clr_shift,"ax",%progbits
 10955              		.align	1
 10956              		.p2align 2,,3
 10957              		.global	clr_shift
 10958              		.syntax unified
 10959              		.thumb
 10960              		.thumb_func
 10961              		.fpu fpv4-sp-d16
 10963              	clr_shift:
 10964              	.LFB320:
2785:dm/dm42_fns.cc ****   if ( ANN(SHIFT) ) {
 10965              		.loc 1 2785 0
 10966              		.cfi_startproc
 10967              		@ args = 0, pretend = 0, frame = 0
 10968              		@ frame_needed = 0, uses_anonymous_args = 0
 10969              		@ link register save eliminated.
 10970              	.LBB730:
2786:dm/dm42_fns.cc ****     int key = 28; // Turn off shift
 10971              		.loc 1 2786 0
 10972 0000 034B     		ldr	r3, .L1302
 10973 0002 1B68     		ldr	r3, [r3]
 10974 0004 9B07     		lsls	r3, r3, #30
 10975 0006 00D4     		bmi	.L1301
 10976 0008 7047     		bx	lr
 10977              	.L1301:
 10978              	.LBE730:
 10979 000a FFF7FEBF 		b	clr_shift.part.13
 10980              	.LVL1120:
 10981              	.L1303:
 10982 000e 00BF     		.align	2
 10983              	.L1302:
 10984 0010 00000000 		.word	.LANCHOR0
 10985              		.cfi_endproc
 10986              	.LFE320:
 10988              		.section	.text.set_shift,"ax",%progbits
 10989              		.align	1
 10990              		.p2align 2,,3
 10991              		.global	set_shift
ARM GAS  /tmp/ccGYckNR.s 			page 267


 10992              		.syntax unified
 10993              		.thumb
 10994              		.thumb_func
 10995              		.fpu fpv4-sp-d16
 10997              	set_shift:
 10998              	.LFB321:
2793:dm/dm42_fns.cc ****   if ( !ANN(SHIFT) ) {
 10999              		.loc 1 2793 0
 11000              		.cfi_startproc
 11001              		@ args = 0, pretend = 0, frame = 0
 11002              		@ frame_needed = 0, uses_anonymous_args = 0
 11003              		@ link register save eliminated.
 11004              	.LBB731:
2794:dm/dm42_fns.cc ****     int key = 28; // Turn off shift
 11005              		.loc 1 2794 0
 11006 0000 034B     		ldr	r3, .L1307
 11007 0002 1B68     		ldr	r3, [r3]
 11008 0004 9B07     		lsls	r3, r3, #30
 11009 0006 00D5     		bpl	.L1306
 11010 0008 7047     		bx	lr
 11011              	.L1306:
 11012              	.LBE731:
 11013 000a FFF7FEBF 		b	set_shift.part.14
 11014              	.LVL1121:
 11015              	.L1308:
 11016 000e 00BF     		.align	2
 11017              	.L1307:
 11018 0010 00000000 		.word	.LANCHOR0
 11019              		.cfi_endproc
 11020              	.LFE321:
 11022              		.section	.text.update_aplha_table,"ax",%progbits
 11023              		.align	1
 11024              		.p2align 2,,3
 11025              		.global	update_aplha_table
 11026              		.syntax unified
 11027              		.thumb
 11028              		.thumb_func
 11029              		.fpu fpv4-sp-d16
 11031              	update_aplha_table:
 11032              	.LFB322:
 11033              		.loc 1 2802 0
 11034              		.cfi_startproc
 11035              		@ args = 0, pretend = 0, frame = 0
 11036              		@ frame_needed = 0, uses_anonymous_args = 0
 11037 0000 08B5     		push	{r3, lr}
 11038              		.cfi_def_cfa_offset 8
 11039              		.cfi_offset 3, -8
 11040              		.cfi_offset 14, -4
2803:dm/dm42_fns.cc ****   // Check whether alpha mode was activated/deactivated and 
2804:dm/dm42_fns.cc ****   // change state and annunciators accordingly
2805:dm/dm42_fns.cc ****   if ( core_alpha_menu() ) {
 11041              		.loc 1 2805 0
 11042 0002 FFF7FEFF 		bl	_Z15core_alpha_menuv
 11043              	.LVL1122:
2806:dm/dm42_fns.cc ****     if ( alpha_table == ALPHA_INACTIVE ) {
 11044              		.loc 1 2806 0
 11045 0006 114B     		ldr	r3, .L1319
ARM GAS  /tmp/ccGYckNR.s 			page 268


 11046 0008 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
2805:dm/dm42_fns.cc ****     if ( alpha_table == ALPHA_INACTIVE ) {
 11047              		.loc 1 2805 0
 11048 000a 10B1     		cbz	r0, .L1310
 11049              		.loc 1 2806 0
 11050 000c 0F2A     		cmp	r2, #15
 11051 000e 12D0     		beq	.L1318
 11052              	.L1309:
 11053 0010 08BD     		pop	{r3, pc}
 11054              	.L1310:
2807:dm/dm42_fns.cc ****       // Alpha mode activated
2808:dm/dm42_fns.cc ****       alpha_table = last_alpha_table; //ALPHA_ORIG;
2809:dm/dm42_fns.cc ****       repaint_annunciators();
2810:dm/dm42_fns.cc ****     }
2811:dm/dm42_fns.cc ****   } else {
2812:dm/dm42_fns.cc ****     if ( alpha_table != ALPHA_INACTIVE ) {
 11055              		.loc 1 2812 0
 11056 0012 0F2A     		cmp	r2, #15
 11057 0014 FCD0     		beq	.L1309
2813:dm/dm42_fns.cc ****       // Alpha mode deactivated
2814:dm/dm42_fns.cc ****       last_alpha_table = alpha_table;
 11058              		.loc 1 2814 0
 11059 0016 0E48     		ldr	r0, .L1319+4
 11060              	.LBB732:
 11061              	.LBB733:
 770:dm/dm42_fns.cc **** 
 11062              		.loc 1 770 0
 11063 0018 0E49     		ldr	r1, .L1319+8
 11064              	.LBE733:
 11065              	.LBE732:
 11066              		.loc 1 2814 0
 11067 001a 0270     		strb	r2, [r0]
2815:dm/dm42_fns.cc ****       alpha_table = ALPHA_INACTIVE;
 11068              		.loc 1 2815 0
 11069 001c 0F22     		movs	r2, #15
 11070 001e 1A70     		strb	r2, [r3]
 11071              	.LBB736:
 11072              	.LBB734:
 770:dm/dm42_fns.cc **** 
 11073              		.loc 1 770 0
 11074 0020 0B68     		ldr	r3, [r1]
 11075 0022 5B06     		lsls	r3, r3, #25
 11076 0024 F4D4     		bmi	.L1309
 772:dm/dm42_fns.cc ****     return;
 11077              		.loc 1 772 0
 11078 0026 0C4B     		ldr	r3, .L1319+12
 11079 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11080 002a 012B     		cmp	r3, #1
 11081 002c F0DC     		bgt	.L1309
 11082              	.LBE734:
 11083              	.LBE736:
2816:dm/dm42_fns.cc ****       repaint_annunciators();
2817:dm/dm42_fns.cc ****     }
2818:dm/dm42_fns.cc ****   }
2819:dm/dm42_fns.cc **** }
 11084              		.loc 1 2819 0
 11085 002e BDE80840 		pop	{r3, lr}
ARM GAS  /tmp/ccGYckNR.s 			page 269


 11086              		.cfi_remember_state
 11087              		.cfi_restore 14
 11088              		.cfi_restore 3
 11089              		.cfi_def_cfa_offset 0
 11090              	.LBB737:
 11091              	.LBB735:
 11092 0032 FFF7FEBF 		b	repaint_annunciators.part.0
 11093              	.LVL1123:
 11094              	.L1318:
 11095              		.cfi_restore_state
 11096              	.LBE735:
 11097              	.LBE737:
2808:dm/dm42_fns.cc ****       repaint_annunciators();
 11098              		.loc 1 2808 0
 11099 0036 0649     		ldr	r1, .L1319+4
 11100              	.LBB738:
 11101              	.LBB739:
 770:dm/dm42_fns.cc **** 
 11102              		.loc 1 770 0
 11103 0038 064A     		ldr	r2, .L1319+8
 11104              	.LBE739:
 11105              	.LBE738:
2808:dm/dm42_fns.cc ****       repaint_annunciators();
 11106              		.loc 1 2808 0
 11107 003a 0978     		ldrb	r1, [r1]	@ zero_extendqisi2
 11108 003c 1970     		strb	r1, [r3]
 11109              	.LBB741:
 11110              	.LBB740:
 770:dm/dm42_fns.cc **** 
 11111              		.loc 1 770 0
 11112 003e 1368     		ldr	r3, [r2]
 11113 0040 5A06     		lsls	r2, r3, #25
 11114 0042 E5D4     		bmi	.L1309
 11115              	.LBE740:
 11116              	.LBE741:
 11117              		.loc 1 2819 0
 11118 0044 BDE80840 		pop	{r3, lr}
 11119              		.cfi_restore 14
 11120              		.cfi_restore 3
 11121              		.cfi_def_cfa_offset 0
 11122 0048 FFF7FEBF 		b	update_aplha_table.part.15
 11123              	.LVL1124:
 11124              	.L1320:
 11125              		.align	2
 11126              	.L1319:
 11127 004c 00000000 		.word	.LANCHOR5
 11128 0050 00000000 		.word	.LANCHOR40
 11129 0054 00200010 		.word	268443648
 11130 0058 00000000 		.word	.LANCHOR10
 11131              		.cfi_endproc
 11132              	.LFE322:
 11134              		.section	.text.program_main,"ax",%progbits
 11135              		.align	1
 11136              		.p2align 2,,3
 11137              		.global	program_main
 11138              		.syntax unified
 11139              		.thumb
ARM GAS  /tmp/ccGYckNR.s 			page 270


 11140              		.thumb_func
 11141              		.fpu fpv4-sp-d16
 11143              	program_main:
 11144              	.LFB323:
2820:dm/dm42_fns.cc **** 
2821:dm/dm42_fns.cc **** 
2822:dm/dm42_fns.cc **** 
2823:dm/dm42_fns.cc **** void program_main() {
 11145              		.loc 1 2823 0
 11146              		.cfi_startproc
 11147              		@ args = 0, pretend = 0, frame = 56
 11148              		@ frame_needed = 0, uses_anonymous_args = 0
 11149              	.LVL1125:
 11150 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 11151              		.cfi_def_cfa_offset 36
 11152              		.cfi_offset 4, -36
 11153              		.cfi_offset 5, -32
 11154              		.cfi_offset 6, -28
 11155              		.cfi_offset 7, -24
 11156              		.cfi_offset 8, -20
 11157              		.cfi_offset 9, -16
 11158              		.cfi_offset 10, -12
 11159              		.cfi_offset 11, -8
 11160              		.cfi_offset 14, -4
 11161              	.LBB826:
 11162              	.LBB827:
2617:dm/dm42_fns.cc **** }
 11163              		.loc 1 2617 0
 11164 0004 0020     		movs	r0, #0
 11165 0006 A34C     		ldr	r4, .L1710
 11166              	.LBE827:
 11167              	.LBE826:
2824:dm/dm42_fns.cc ****   int enqueued, repeat, keep_running = 0;
2825:dm/dm42_fns.cc ****   int resume_run = 0;
2826:dm/dm42_fns.cc ****   int key = 0;
2827:dm/dm42_fns.cc ****   int no_menu_key = 0;
2828:dm/dm42_fns.cc **** 
2829:dm/dm42_fns.cc ****   // Init
2830:dm/dm42_fns.cc ****   clearTimeout0();
2831:dm/dm42_fns.cc ****   clearTimeout3();
2832:dm/dm42_fns.cc **** 
2833:dm/dm42_fns.cc ****   run_menu_item_app = run_menu_item;
 11168              		.loc 1 2833 0
 11169 0008 A34F     		ldr	r7, .L1710+4
2834:dm/dm42_fns.cc ****   menu_line_str_app = menu_line_str;
2835:dm/dm42_fns.cc **** 
2836:dm/dm42_fns.cc ****   after_fat_format = after_fat_format_dm42;
2837:dm/dm42_fns.cc **** 
2838:dm/dm42_fns.cc ****   is_flag_dmy = is_dmy;
2839:dm/dm42_fns.cc ****   set_flag_dmy = set_dmy;
2840:dm/dm42_fns.cc ****   is_flag_clk24 = is_clk24;
2841:dm/dm42_fns.cc ****   set_flag_clk24 = set_clk24;
2842:dm/dm42_fns.cc ****   is_beep_mute = dm42_is_beep_mute;
 11170              		.loc 1 2842 0
 11171 000a DFF8E8A2 		ldr	r10, .L1710+96
2843:dm/dm42_fns.cc ****   set_beep_mute = dm42_set_beep_mute;
 11172              		.loc 1 2843 0
ARM GAS  /tmp/ccGYckNR.s 			page 271


 11173 000e DFF8E8B2 		ldr	fp, .L1710+100
 11174 0012 DFF8E882 		ldr	r8, .L1710+104
 11175 0016 A14D     		ldr	r5, .L1710+8
 11176 0018 A14E     		ldr	r6, .L1710+12
 11177 001a DFF8E492 		ldr	r9, .L1710+108
2823:dm/dm42_fns.cc ****   int enqueued, repeat, keep_running = 0;
 11178              		.loc 1 2823 0
 11179 001e 8FB0     		sub	sp, sp, #60
 11180              		.cfi_def_cfa_offset 96
 11181              	.LBB829:
 11182              	.LBB828:
2617:dm/dm42_fns.cc **** }
 11183              		.loc 1 2617 0
 11184 0020 A047     		blx	r4
 11185              	.LVL1126:
 11186              	.LBE828:
 11187              	.LBE829:
 11188              	.LBB830:
 11189              	.LBB831:
2625:dm/dm42_fns.cc **** }
 11190              		.loc 1 2625 0
 11191 0022 0120     		movs	r0, #1
 11192 0024 A047     		blx	r4
 11193              	.LVL1127:
 11194              	.LBE831:
 11195              	.LBE830:
2833:dm/dm42_fns.cc ****   menu_line_str_app = menu_line_str;
 11196              		.loc 1 2833 0
 11197 0026 9F4C     		ldr	r4, .L1710+16
2839:dm/dm42_fns.cc ****   is_flag_clk24 = is_clk24;
 11198              		.loc 1 2839 0
 11199 0028 9F4B     		ldr	r3, .L1710+20
 11200 002a E361     		str	r3, [r4, #28]
2834:dm/dm42_fns.cc **** 
 11201              		.loc 1 2834 0
 11202 002c 9F48     		ldr	r0, .L1710+24
2844:dm/dm42_fns.cc **** 
2845:dm/dm42_fns.cc ****   key_to_alpha_table = alpha_upper_transl;
2846:dm/dm42_fns.cc **** 
2847:dm/dm42_fns.cc ****   repeat_timeout = 0;
 11203              		.loc 1 2847 0
 11204 002e A04B     		ldr	r3, .L1710+28
2833:dm/dm42_fns.cc ****   menu_line_str_app = menu_line_str;
 11205              		.loc 1 2833 0
 11206 0030 E760     		str	r7, [r4, #12]
2834:dm/dm42_fns.cc **** 
 11207              		.loc 1 2834 0
 11208 0032 2061     		str	r0, [r4, #16]
2838:dm/dm42_fns.cc ****   set_flag_dmy = set_dmy;
 11209              		.loc 1 2838 0
 11210 0034 9F4A     		ldr	r2, .L1710+32
2845:dm/dm42_fns.cc **** 
 11211              		.loc 1 2845 0
 11212 0036 A04F     		ldr	r7, .L1710+36
2836:dm/dm42_fns.cc **** 
 11213              		.loc 1 2836 0
 11214 0038 A049     		ldr	r1, .L1710+40
ARM GAS  /tmp/ccGYckNR.s 			page 272


2840:dm/dm42_fns.cc ****   set_flag_clk24 = set_clk24;
 11215              		.loc 1 2840 0
 11216 003a DFF8C8E2 		ldr	lr, .L1710+112
2841:dm/dm42_fns.cc ****   is_beep_mute = dm42_is_beep_mute;
 11217              		.loc 1 2841 0
 11218 003e DFF8C8C2 		ldr	ip, .L1710+116
2838:dm/dm42_fns.cc ****   set_flag_dmy = set_dmy;
 11219              		.loc 1 2838 0
 11220 0042 A261     		str	r2, [r4, #24]
 11221              		.loc 1 2847 0
 11222 0044 0020     		movs	r0, #0
2842:dm/dm42_fns.cc ****   set_beep_mute = dm42_set_beep_mute;
 11223              		.loc 1 2842 0
 11224 0046 C4F828A0 		str	r10, [r4, #40]
2845:dm/dm42_fns.cc **** 
 11225              		.loc 1 2845 0
 11226 004a A760     		str	r7, [r4, #8]
2836:dm/dm42_fns.cc **** 
 11227              		.loc 1 2836 0
 11228 004c 6161     		str	r1, [r4, #20]
2840:dm/dm42_fns.cc ****   set_flag_clk24 = set_clk24;
 11229              		.loc 1 2840 0
 11230 004e C4F820E0 		str	lr, [r4, #32]
2841:dm/dm42_fns.cc ****   is_beep_mute = dm42_is_beep_mute;
 11231              		.loc 1 2841 0
 11232 0052 C4F824C0 		str	ip, [r4, #36]
2843:dm/dm42_fns.cc **** 
 11233              		.loc 1 2843 0
 11234 0056 C4F82CB0 		str	fp, [r4, #44]
 11235              		.loc 1 2847 0
 11236 005a 1860     		str	r0, [r3]
2848:dm/dm42_fns.cc ****   read_statefile = !ST(STAT_CLEAN_RESET);
 11237              		.loc 1 2848 0
 11238 005c 2368     		ldr	r3, [r4]
 11239 005e 984A     		ldr	r2, .L1710+44
 11240 0060 DB43     		mvns	r3, r3
 11241 0062 03F00103 		and	r3, r3, #1
 11242 0066 1360     		str	r3, [r2]
2849:dm/dm42_fns.cc **** 
2850:dm/dm42_fns.cc ****   SET_ST(STAT_CLK_WKUP_ENABLE); // Enable wakeup each minute (for clock update)
 11243              		.loc 1 2850 0
 11244 0068 2368     		ldr	r3, [r4]
 11245 006a 43F48063 		orr	r3, r3, #1024
2825:dm/dm42_fns.cc ****   int key = 0;
 11246              		.loc 1 2825 0
 11247 006e 8246     		mov	r10, r0
 11248              		.loc 1 2850 0
 11249 0070 2360     		str	r3, [r4]
2824:dm/dm42_fns.cc ****   int resume_run = 0;
 11250              		.loc 1 2824 0
 11251 0072 0746     		mov	r7, r0
 11252              	.LVL1128:
 11253              	.L1322:
 11254              	.LBB832:
2851:dm/dm42_fns.cc **** 
2852:dm/dm42_fns.cc ****   for(;;)
2853:dm/dm42_fns.cc ****   {
ARM GAS  /tmp/ccGYckNR.s 			page 273


2854:dm/dm42_fns.cc ****     if (last_header_clk24 != is_clk24() || last_header_dmy != is_dmy() )
 11255              		.loc 1 2854 0
 11256 0074 98F800B0 		ldrb	fp, [r8]	@ zero_extendqisi2
 11257 0078 FFF7FEFF 		bl	is_clk24
 11258              	.LVL1129:
 11259 007c 8345     		cmp	fp, r0
 11260 007e 49D0     		beq	.L1323
 11261              	.L1325:
 11262              	.LBB833:
 11263              	.LBB834:
2639:dm/dm42_fns.cc **** }
 11264              		.loc 1 2639 0
 11265 0080 4D23     		movs	r3, #77
 11266 0082 2B60     		str	r3, [r5]
 11267              	.LBE834:
 11268              	.LBE833:
2855:dm/dm42_fns.cc ****       force_header_timeout();
2856:dm/dm42_fns.cc **** 
2857:dm/dm42_fns.cc ****     if ( (!ST(STAT_PGM_END) && !keep_running && key_empty()) ||
 11269              		.loc 1 2857 0
 11270 0084 2368     		ldr	r3, [r4]
 11271 0086 9A05     		lsls	r2, r3, #22
 11272 0088 4ED4     		bmi	.L1326
 11273              	.L1678:
 11274              		.loc 1 2857 0 is_stmt 0 discriminator 1
 11275 008a 002F     		cmp	r7, #0
 11276 008c 00F04081 		beq	.L1676
2858:dm/dm42_fns.cc ****          ( ST(STAT_PGM_END) && ST(STAT_SUSPENDED) ) ) 
 11277              		.loc 1 2858 0 is_stmt 1
 11278 0090 2368     		ldr	r3, [r4]
2857:dm/dm42_fns.cc ****          ( ST(STAT_PGM_END) && ST(STAT_SUSPENDED) ) ) 
 11279              		.loc 1 2857 0
 11280 0092 9B05     		lsls	r3, r3, #22
 11281 0094 4BD4     		bmi	.L1330
 11282              	.L1339:
2859:dm/dm42_fns.cc ****     {
2860:dm/dm42_fns.cc ****       // Go to sleep
2861:dm/dm42_fns.cc ****       if ( core_initialized ) {
2862:dm/dm42_fns.cc ****         printf("Idle: menu[%i,a:%i,h:%i,off:%i] aoff=%i lcd=%lx\n",core_menu(), core_alpha_menu(), 
2863:dm/dm42_fns.cc ****           ST(STAT_OFF)!=0, sys_auto_off_cnt(), lcd_changed);
2864:dm/dm42_fns.cc ****         
2865:dm/dm42_fns.cc ****         // Pending LCD repaint
2866:dm/dm42_fns.cc ****         if ( lcd_changed && !ST(STAT_OFF) ) {
2867:dm/dm42_fns.cc ****           if ( ( /* !ANN(RUN) && */ (lcd_changed & LCD_CHG_REGS) ) || (LCD_CHG_FORCE & lcd_changed)
2868:dm/dm42_fns.cc ****             disp_regs(LCD_UPD_DFLT);
2869:dm/dm42_fns.cc ****           if ( header_timeout() || (LCD_CHG_FORCE & lcd_changed) )
2870:dm/dm42_fns.cc ****             disp_header();
2871:dm/dm42_fns.cc ****           lcd_refresh();
2872:dm/dm42_fns.cc ****           lcd_changed = 0;
2873:dm/dm42_fns.cc ****         }
2874:dm/dm42_fns.cc ****         CLR_ST(STAT_RUNNING);
2875:dm/dm42_fns.cc ****         sys_sleep();
2876:dm/dm42_fns.cc ****         printf("Runner wake-up\n");
2877:dm/dm42_fns.cc ****       } else {
2878:dm/dm42_fns.cc ****         printf("Idle: before init\n");
2879:dm/dm42_fns.cc ****       }
2880:dm/dm42_fns.cc ****     }
ARM GAS  /tmp/ccGYckNR.s 			page 274


2881:dm/dm42_fns.cc **** 
2882:dm/dm42_fns.cc ****     if ( keep_running || !key_empty() ) {
2883:dm/dm42_fns.cc ****       reset_auto_off();
 11283              		.loc 1 2883 0
 11284 0096 8B4B     		ldr	r3, .L1710+48
 11285 0098 9847     		blx	r3
 11286              	.LVL1130:
 11287              	.L1506:
2884:dm/dm42_fns.cc ****     }
2885:dm/dm42_fns.cc **** 
2886:dm/dm42_fns.cc ****     // Force header repaint when USB/BAT power changes
2887:dm/dm42_fns.cc ****     if ( ST(STAT_POWER_CHANGE) )
 11288              		.loc 1 2887 0
 11289 009a 2368     		ldr	r3, [r4]
 11290 009c 1B04     		lsls	r3, r3, #16
 11291              	.LBB835:
 11292              	.LBB836:
2639:dm/dm42_fns.cc **** }
 11293              		.loc 1 2639 0
 11294 009e 44BF     		itt	mi
 11295 00a0 4D23     		movmi	r3, #77
 11296 00a2 2B60     		strmi	r3, [r5]
 11297              	.LBE836:
 11298              	.LBE835:
2888:dm/dm42_fns.cc ****       force_header_timeout();
2889:dm/dm42_fns.cc **** 
2890:dm/dm42_fns.cc ****     // =======================
2891:dm/dm42_fns.cc ****     // Externally forced LCD repaint
2892:dm/dm42_fns.cc ****     if ( !ST(STAT_OFF) && (lcd_changed || header_timeout()) ) {
 11299              		.loc 1 2892 0
 11300 00a4 2368     		ldr	r3, [r4]
 11301 00a6 D806     		lsls	r0, r3, #27
 11302 00a8 26D4     		bmi	.L1342
 11303              		.loc 1 2892 0 is_stmt 0 discriminator 1
 11304 00aa 3368     		ldr	r3, [r6]
 11305 00ac 002B     		cmp	r3, #0
 11306 00ae 00F03D81 		beq	.L1343
 11307              	.L1347:
 11308              	.LBB837:
 11309              	.LBB838:
2631:dm/dm42_fns.cc **** }
 11310              		.loc 1 2631 0 is_stmt 1
 11311 00b2 854B     		ldr	r3, .L1710+52
 11312 00b4 9847     		blx	r3
 11313              	.LVL1131:
 11314 00b6 2B68     		ldr	r3, [r5]
 11315 00b8 9842     		cmp	r0, r3
 11316 00ba 04D0     		beq	.L1345
 11317 00bc 834B     		ldr	r3, .L1710+56
 11318 00be 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11319 00c0 012B     		cmp	r3, #1
 11320 00c2 40F3A181 		ble	.L1677
 11321              	.L1345:
 11322              	.LBE838:
 11323              	.LBE837:
2893:dm/dm42_fns.cc ****       if ( header_timeout() || (LCD_CHG_FORCE & lcd_changed) )
 11324              		.loc 1 2893 0
ARM GAS  /tmp/ccGYckNR.s 			page 275


 11325 00c6 3368     		ldr	r3, [r6]
 11326 00c8 1B07     		lsls	r3, r3, #28
 11327 00ca 0FD5     		bpl	.L1350
 11328              	.LBB839:
 11329              	.LBB840:
2679:dm/dm42_fns.cc **** 
 11330              		.loc 1 2679 0
 11331 00cc 2368     		ldr	r3, [r4]
 11332 00ce 5906     		lsls	r1, r3, #25
 11333 00d0 04D4     		bmi	.L1349
2681:dm/dm42_fns.cc ****     return;
 11334              		.loc 1 2681 0
 11335 00d2 7E4B     		ldr	r3, .L1710+56
 11336 00d4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11337 00d6 012B     		cmp	r3, #1
 11338 00d8 40F3BB85 		ble	.L1530
 11339              	.L1349:
 11340              	.LBE840:
 11341              	.LBE839:
2894:dm/dm42_fns.cc ****         disp_header();
2895:dm/dm42_fns.cc ****       if ( LCD_CHG_FORCE & lcd_changed ) {
2896:dm/dm42_fns.cc ****         disp_regs(LCD_UPD_DFLT);
 11342              		.loc 1 2896 0
 11343 00dc 4FF0FF30 		mov	r0, #-1
 11344 00e0 FFF7FEFF 		bl	disp_regs
 11345              	.LVL1132:
2897:dm/dm42_fns.cc ****         lcd_changed &= ~LCD_CHG_REGS;
 11346              		.loc 1 2897 0
 11347 00e4 3368     		ldr	r3, [r6]
 11348 00e6 23F00203 		bic	r3, r3, #2
 11349 00ea 3360     		str	r3, [r6]
 11350              	.L1350:
2898:dm/dm42_fns.cc ****       }
2899:dm/dm42_fns.cc ****       lcd_refresh();
 11351              		.loc 1 2899 0
 11352 00ec 784B     		ldr	r3, .L1710+60
 11353 00ee 9847     		blx	r3
 11354              	.LVL1133:
2900:dm/dm42_fns.cc ****       lcd_changed &= ~(LCD_CHG_FORCE|LCD_CHG_HEADER);
 11355              		.loc 1 2900 0
 11356 00f0 3368     		ldr	r3, [r6]
 11357 00f2 23F00C03 		bic	r3, r3, #12
 11358 00f6 3360     		str	r3, [r6]
 11359              	.L1342:
2901:dm/dm42_fns.cc ****     }
2902:dm/dm42_fns.cc ****     if ( ST(STAT_CLK_WKUP_FLAG) ) {
 11360              		.loc 1 2902 0
 11361 00f8 2368     		ldr	r3, [r4]
 11362 00fa 13F4805F 		tst	r3, #4096
2903:dm/dm42_fns.cc ****       CLR_ST(STAT_CLK_WKUP_FLAG);
 11363              		.loc 1 2903 0
 11364 00fe 2368     		ldr	r3, [r4]
2902:dm/dm42_fns.cc ****       CLR_ST(STAT_CLK_WKUP_FLAG);
 11365              		.loc 1 2902 0
 11366 0100 4BD0     		beq	.L1351
 11367              		.loc 1 2903 0
 11368 0102 23F48053 		bic	r3, r3, #4096
ARM GAS  /tmp/ccGYckNR.s 			page 276


 11369 0106 2360     		str	r3, [r4]
2854:dm/dm42_fns.cc ****       force_header_timeout();
 11370              		.loc 1 2854 0
 11371 0108 98F800B0 		ldrb	fp, [r8]	@ zero_extendqisi2
 11372 010c FFF7FEFF 		bl	is_clk24
 11373              	.LVL1134:
 11374 0110 8345     		cmp	fp, r0
 11375 0112 B5D1     		bne	.L1325
 11376              	.L1323:
2854:dm/dm42_fns.cc ****       force_header_timeout();
 11377              		.loc 1 2854 0 is_stmt 0 discriminator 2
 11378 0114 6F4B     		ldr	r3, .L1710+64
 11379 0116 93F800B0 		ldrb	fp, [r3]	@ zero_extendqisi2
 11380 011a FFF7FEFF 		bl	is_dmy
 11381              	.LVL1135:
 11382 011e 8345     		cmp	fp, r0
 11383 0120 AED1     		bne	.L1325
2857:dm/dm42_fns.cc ****          ( ST(STAT_PGM_END) && ST(STAT_SUSPENDED) ) ) 
 11384              		.loc 1 2857 0 is_stmt 1
 11385 0122 2368     		ldr	r3, [r4]
 11386 0124 9A05     		lsls	r2, r3, #22
 11387 0126 B0D5     		bpl	.L1678
 11388              	.L1326:
2858:dm/dm42_fns.cc ****     {
 11389              		.loc 1 2858 0 discriminator 6
 11390 0128 2368     		ldr	r3, [r4]
2857:dm/dm42_fns.cc ****          ( ST(STAT_PGM_END) && ST(STAT_SUSPENDED) ) ) 
 11391              		.loc 1 2857 0 discriminator 6
 11392 012a 9B05     		lsls	r3, r3, #22
 11393 012c 2DD5     		bpl	.L1331
 11394              	.L1330:
2858:dm/dm42_fns.cc ****     {
 11395              		.loc 1 2858 0
 11396 012e 2368     		ldr	r3, [r4]
 11397 0130 5807     		lsls	r0, r3, #29
 11398 0132 2AD5     		bpl	.L1331
2861:dm/dm42_fns.cc ****         printf("Idle: menu[%i,a:%i,h:%i,off:%i] aoff=%i lcd=%lx\n",core_menu(), core_alpha_menu(), 
 11399              		.loc 1 2861 0
 11400 0134 99F80030 		ldrb	r3, [r9]	@ zero_extendqisi2
 11401 0138 3BB3     		cbz	r3, .L1331
 11402              	.L1502:
2866:dm/dm42_fns.cc ****           if ( ( /* !ANN(RUN) && */ (lcd_changed & LCD_CHG_REGS) ) || (LCD_CHG_FORCE & lcd_changed)
 11403              		.loc 1 2866 0
 11404 013a 3368     		ldr	r3, [r6]
 11405 013c FBB1     		cbz	r3, .L1334
2866:dm/dm42_fns.cc ****           if ( ( /* !ANN(RUN) && */ (lcd_changed & LCD_CHG_REGS) ) || (LCD_CHG_FORCE & lcd_changed)
 11406              		.loc 1 2866 0 is_stmt 0 discriminator 1
 11407 013e 2268     		ldr	r2, [r4]
 11408 0140 D106     		lsls	r1, r2, #27
 11409 0142 1CD4     		bmi	.L1334
2867:dm/dm42_fns.cc ****             disp_regs(LCD_UPD_DFLT);
 11410              		.loc 1 2867 0 is_stmt 1
 11411 0144 13F00A0F 		tst	r3, #10
 11412 0148 40F0BA81 		bne	.L1679
 11413              	.L1504:
 11414              	.LBB843:
 11415              	.LBB844:
ARM GAS  /tmp/ccGYckNR.s 			page 277


2631:dm/dm42_fns.cc **** }
 11416              		.loc 1 2631 0
 11417 014c 5E4B     		ldr	r3, .L1710+52
 11418 014e 9847     		blx	r3
 11419              	.LVL1136:
 11420 0150 2B68     		ldr	r3, [r5]
 11421 0152 9842     		cmp	r0, r3
 11422 0154 04D0     		beq	.L1336
 11423 0156 5D4B     		ldr	r3, .L1710+56
 11424 0158 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11425 015a 012B     		cmp	r3, #1
 11426 015c 40F35C83 		ble	.L1680
 11427              	.L1336:
 11428              	.LBE844:
 11429              	.LBE843:
2869:dm/dm42_fns.cc ****             disp_header();
 11430              		.loc 1 2869 0
 11431 0160 3368     		ldr	r3, [r6]
 11432 0162 1A07     		lsls	r2, r3, #28
 11433 0164 07D5     		bpl	.L1338
 11434              	.LBB845:
 11435              	.LBB846:
2679:dm/dm42_fns.cc **** 
 11436              		.loc 1 2679 0
 11437 0166 2368     		ldr	r3, [r4]
 11438 0168 5A06     		lsls	r2, r3, #25
 11439 016a 04D4     		bmi	.L1338
2681:dm/dm42_fns.cc ****     return;
 11440              		.loc 1 2681 0
 11441 016c 574B     		ldr	r3, .L1710+56
 11442 016e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11443 0170 012B     		cmp	r3, #1
 11444 0172 40F35583 		ble	.L1528
 11445              	.L1338:
 11446              	.LBE846:
 11447              	.LBE845:
2871:dm/dm42_fns.cc ****           lcd_changed = 0;
 11448              		.loc 1 2871 0
 11449 0176 564B     		ldr	r3, .L1710+60
 11450 0178 9847     		blx	r3
 11451              	.LVL1137:
2872:dm/dm42_fns.cc ****         }
 11452              		.loc 1 2872 0
 11453 017a 0023     		movs	r3, #0
 11454 017c 3360     		str	r3, [r6]
 11455              	.L1334:
2874:dm/dm42_fns.cc ****         sys_sleep();
 11456              		.loc 1 2874 0
 11457 017e 2368     		ldr	r3, [r4]
2875:dm/dm42_fns.cc ****         printf("Runner wake-up\n");
 11458              		.loc 1 2875 0
 11459 0180 554A     		ldr	r2, .L1710+68
2874:dm/dm42_fns.cc ****         sys_sleep();
 11460              		.loc 1 2874 0
 11461 0182 23F00203 		bic	r3, r3, #2
 11462 0186 2360     		str	r3, [r4]
2875:dm/dm42_fns.cc ****         printf("Runner wake-up\n");
ARM GAS  /tmp/ccGYckNR.s 			page 278


 11463              		.loc 1 2875 0
 11464 0188 9047     		blx	r2
 11465              	.LVL1138:
 11466              	.L1331:
2882:dm/dm42_fns.cc ****       reset_auto_off();
 11467              		.loc 1 2882 0
 11468 018a 002F     		cmp	r7, #0
 11469 018c 83D1     		bne	.L1339
 11470 018e 534B     		ldr	r3, .L1710+72
 11471 0190 9847     		blx	r3
 11472              	.LVL1139:
 11473 0192 0028     		cmp	r0, #0
 11474 0194 3FF47FAF 		beq	.L1339
 11475 0198 7FE7     		b	.L1506
 11476              	.L1351:
2904:dm/dm42_fns.cc ****       continue;
2905:dm/dm42_fns.cc ****     }
2906:dm/dm42_fns.cc ****     if ( ST(STAT_POWER_CHANGE) ) {
 11477              		.loc 1 2906 0
 11478 019a 13F4004F 		tst	r3, #32768
2907:dm/dm42_fns.cc ****       CLR_ST(STAT_POWER_CHANGE);
 11479              		.loc 1 2907 0
 11480 019e 2368     		ldr	r3, [r4]
2906:dm/dm42_fns.cc ****       CLR_ST(STAT_POWER_CHANGE);
 11481              		.loc 1 2906 0
 11482 01a0 03D0     		beq	.L1353
 11483              		.loc 1 2907 0
 11484 01a2 23F40043 		bic	r3, r3, #32768
 11485 01a6 2360     		str	r3, [r4]
2908:dm/dm42_fns.cc ****       continue;
 11486              		.loc 1 2908 0
 11487 01a8 64E7     		b	.L1322
 11488              	.L1353:
 11489              	.LBB848:
2909:dm/dm42_fns.cc ****     }
2910:dm/dm42_fns.cc **** 
2911:dm/dm42_fns.cc ****     // =======================
2912:dm/dm42_fns.cc ****     // Off or statefile save
2913:dm/dm42_fns.cc ****     if (ST(STAT_PGM_END) || ST(STAT_SUSPENDED) ) {
 11490              		.loc 1 2913 0
 11491 01aa 9905     		lsls	r1, r3, #22
 11492 01ac 68D4     		bmi	.L1354
 11493              		.loc 1 2913 0 is_stmt 0 discriminator 2
 11494 01ae 2368     		ldr	r3, [r4]
 11495 01b0 5A07     		lsls	r2, r3, #29
 11496 01b2 65D4     		bmi	.L1354
 11497              	.LBE848:
2914:dm/dm42_fns.cc ****       if (!ST(STAT_SUSPENDED)) {
2915:dm/dm42_fns.cc ****         pgm_res = FR_OK; // Clear pgm_res for plain power OFF
2916:dm/dm42_fns.cc **** 
2917:dm/dm42_fns.cc ****         LCD_clear();
2918:dm/dm42_fns.cc **** 
2919:dm/dm42_fns.cc ****         // Quit ... saving state and leave ...
2920:dm/dm42_fns.cc ****         if ( !ST(STAT_SOFT_OFF) && sys_disk_ok() ) {
2921:dm/dm42_fns.cc ****           lcd_for_dm42(DISP_SAVING_STATE);
2922:dm/dm42_fns.cc **** 
2923:dm/dm42_fns.cc ****           sys_disk_write_enable(1);
ARM GAS  /tmp/ccGYckNR.s 			page 279


2924:dm/dm42_fns.cc ****           
2925:dm/dm42_fns.cc ****           mark_region(MARK_42_STAT_SAVE);
2926:dm/dm42_fns.cc ****           savestat_init_write();
2927:dm/dm42_fns.cc ****         }
2928:dm/dm42_fns.cc ****         // Saves the state, but we want to get back so 
2929:dm/dm42_fns.cc ****         // we don't want to call core_quit()
2930:dm/dm42_fns.cc ****         core_enter_background();
2931:dm/dm42_fns.cc **** 
2932:dm/dm42_fns.cc ****         if ( !ST(STAT_SOFT_OFF) && sys_disk_ok() ) {
2933:dm/dm42_fns.cc ****           savestat_data_t dat;
2934:dm/dm42_fns.cc ****           uint wr;
2935:dm/dm42_fns.cc ****           memset(&dat,0,sizeof(dat));
2936:dm/dm42_fns.cc ****           dat.magic = SAVESTAT_MAGIC;
2937:dm/dm42_fns.cc **** 
2938:dm/dm42_fns.cc ****           // == Statefile save flags
2939:dm/dm42_fns.cc ****           dat.flags = 0;
2940:dm/dm42_fns.cc ****           //dat.flags |= ST(STAT_BEEP_MUTE) ? SAVESTAT_FLAG_BEEP_MUTE : 0; // Using calc flag now
2941:dm/dm42_fns.cc ****           dat.flags |= ST(STAT_SLOW_AUTOREP) ? SAVESTAT_FLAG_SLOW_AUTOREP : 0;
2942:dm/dm42_fns.cc ****           dat.flags |= PS(PERM_MAIN_MENU) ? SAVESTAT_PERM_MAIN_MENU : 0;
2943:dm/dm42_fns.cc **** 
2944:dm/dm42_fns.cc ****           dat.flags |= PS(PRTOF_TEXT)      ? SAVESTAT_PRTOF_TXT    : 0;
2945:dm/dm42_fns.cc ****           dat.flags |= PS(PRTOF_GRAPHICS)  ? SAVESTAT_PRTOF_GR     : 0;
2946:dm/dm42_fns.cc ****           dat.flags |= PS(PRTOF_NOIR)      ? SAVESTAT_PRTOF_NOIR   : 0;
2947:dm/dm42_fns.cc ****           dat.flags |= PS(PRTOF_GR_IN_TXT) ? SAVESTAT_PRTOF_GR_IN_TXT : 0;
2948:dm/dm42_fns.cc **** 
2949:dm/dm42_fns.cc ****           // Top-bar header - DOW/DATE/TIME inverted as they are by default displayed
2950:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_STATFN)   ? SAVESTAT_DISP_STATFN   : 0;
2951:dm/dm42_fns.cc ****           dat.flags |= !PS(DISP_DOW)      ? SAVESTAT_DISP_DOW      : 0;
2952:dm/dm42_fns.cc ****           dat.flags |= !PS(DISP_DATE)     ? SAVESTAT_DISP_DATE     : 0;
2953:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_DATE_SEP0)? SAVESTAT_DISP_DATE_SEP0: 0;
2954:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_DATE_SEP1)? SAVESTAT_DISP_DATE_SEP1: 0;
2955:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_SHORTMON) ? SAVESTAT_DISP_SHORTMON : 0;
2956:dm/dm42_fns.cc ****           dat.flags |= !PS(DISP_TIME)     ? SAVESTAT_DISP_TIME     : 0;
2957:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_VOLTAGE)  ? SAVESTAT_FLAG_DISP_VOLTAGE : 0;
2958:dm/dm42_fns.cc ****           // --
2959:dm/dm42_fns.cc **** 
2960:dm/dm42_fns.cc ****           int gm = graphics_mode();
2961:dm/dm42_fns.cc ****           dat.flags |= (gm & 1) ? SAVESTAT_FLAG_GMODE0 : 0;
2962:dm/dm42_fns.cc ****           dat.flags |= (gm & 2) ? SAVESTAT_FLAG_GMODE1 : 0;
2963:dm/dm42_fns.cc ****           
2964:dm/dm42_fns.cc ****           dat.flags |= is_REG_ALIGN_LEFT ? SAVESTAT_FLAG_REG_LEFT  : 0;
2965:dm/dm42_fns.cc ****           dat.flags |= is_REG_LINES      ? SAVESTAT_FLAG_REG_LINES : 0;
2966:dm/dm42_fns.cc ****           
2967:dm/dm42_fns.cc ****           int reflcd = ~get_reflcd_mask() & 7;
2968:dm/dm42_fns.cc ****           dat.flags |= (reflcd & 1) ? SAVESTAT_FLAG_REFLCD0 : 0;
2969:dm/dm42_fns.cc ****           dat.flags |= (reflcd & 2) ? SAVESTAT_FLAG_REFLCD1 : 0;
2970:dm/dm42_fns.cc ****           dat.flags |= (reflcd & 4) ? SAVESTAT_FLAG_REFLCD2 : 0;
2971:dm/dm42_fns.cc ****           // ==
2972:dm/dm42_fns.cc **** 
2973:dm/dm42_fns.cc ****           dat.reg_font_ix = reg_font_ix;
2974:dm/dm42_fns.cc ****           dat.pgm_font_ix = pgm_font_ix;
2975:dm/dm42_fns.cc **** 
2976:dm/dm42_fns.cc ****           dat.font_offsets[0] = (reg_font_offset>> 0) & 0xff;
2977:dm/dm42_fns.cc ****           dat.font_offsets[1] = (reg_font_offset>> 8) & 0xff;
2978:dm/dm42_fns.cc ****           dat.font_offsets[2] = (reg_font_offset>>16) & 0xff;
2979:dm/dm42_fns.cc **** 
2980:dm/dm42_fns.cc ****           strcpy(dat.platf_ver,PLATFORM_VERSION);
ARM GAS  /tmp/ccGYckNR.s 			page 280


2981:dm/dm42_fns.cc ****           dat.century = rtc_read_century();
2982:dm/dm42_fns.cc ****           
2983:dm/dm42_fns.cc ****           dat.printer_delay = core_printer_delay()/10;
2984:dm/dm42_fns.cc ****           if ( dat.printer_delay == 0 ) dat.printer_delay = 1;
2985:dm/dm42_fns.cc **** 
2986:dm/dm42_fns.cc ****           dat.stack_layout = stack_layout;
2987:dm/dm42_fns.cc ****           
2988:dm/dm42_fns.cc ****           if (pgm_res == FR_OK)
2989:dm/dm42_fns.cc ****             pgm_res = f_write(ppgm_fp, &dat, sizeof(savestat_data_t), &wr);
2990:dm/dm42_fns.cc ****           FRESULT cls_res = f_close(ppgm_fp);
2991:dm/dm42_fns.cc **** 
2992:dm/dm42_fns.cc ****           no_region();
2993:dm/dm42_fns.cc **** 
2994:dm/dm42_fns.cc ****           sys_disk_check_valid(); // Unmount drive if disk is invalid
2995:dm/dm42_fns.cc ****           if ( sys_disk_ok() && (pgm_res != FR_OK || cls_res != FR_OK) ) {
2996:dm/dm42_fns.cc ****             // Fat storage OK but save state failed.
2997:dm/dm42_fns.cc ****             // That means statefile isn't saved and everything
2998:dm/dm42_fns.cc ****             // will be lost - display just write fail info and switch to
2999:dm/dm42_fns.cc ****             // soft off mode.
3000:dm/dm42_fns.cc ****             lcd_for_dm42(DISP_SAVE_FAILED);
3001:dm/dm42_fns.cc ****             SET_ST(STAT_SOFT_OFF);
3002:dm/dm42_fns.cc ****           }
3003:dm/dm42_fns.cc ****         }
3004:dm/dm42_fns.cc ****         else {
3005:dm/dm42_fns.cc ****           lcd_set_buf_cleared(0); // Mark no buffer change region
3006:dm/dm42_fns.cc ****           draw_power_off_image(is_graphics<=1);
3007:dm/dm42_fns.cc ****           printf("--- run=%i lcdclr=%i\n",resume_run,lcd_get_buf_cleared());
3008:dm/dm42_fns.cc ****         }
3009:dm/dm42_fns.cc **** 
3010:dm/dm42_fns.cc ****         if ( sys_is_disk_write_enable() )
3011:dm/dm42_fns.cc ****           sys_disk_write_enable(0);
3012:dm/dm42_fns.cc **** 
3013:dm/dm42_fns.cc ****         if ( !ST(STAT_SOFT_OFF) && !sys_disk_ok() ) {
3014:dm/dm42_fns.cc ****           // Disk fail means statefile isn't saved and everything
3015:dm/dm42_fns.cc ****           // will be lost - display just disk fail info and switch to
3016:dm/dm42_fns.cc ****           // soft off mode
3017:dm/dm42_fns.cc ****           disp_disk_info("Save Calculator State");
3018:dm/dm42_fns.cc ****           SET_ST(STAT_SOFT_OFF);
3019:dm/dm42_fns.cc ****         }
3020:dm/dm42_fns.cc ****         
3021:dm/dm42_fns.cc ****         // -- Switch the calc state off --
3022:dm/dm42_fns.cc ****         sys_critical_start();
3023:dm/dm42_fns.cc ****         SET_ST(STAT_SUSPENDED);
3024:dm/dm42_fns.cc ****         LCD_power_off(0);
3025:dm/dm42_fns.cc ****         SET_ST(STAT_OFF);
3026:dm/dm42_fns.cc ****         sys_critical_end();
3027:dm/dm42_fns.cc ****         // --
3028:dm/dm42_fns.cc ****       }
3029:dm/dm42_fns.cc ****       keep_running = 0;
3030:dm/dm42_fns.cc ****       key_pop_all();
3031:dm/dm42_fns.cc ****       continue;
3032:dm/dm42_fns.cc ****     }
3033:dm/dm42_fns.cc **** 
3034:dm/dm42_fns.cc ****     // Well, we are woken-up
3035:dm/dm42_fns.cc ****     SET_ST(STAT_RUNNING);
 11498              		.loc 1 3035 0 is_stmt 1
 11499 01b4 2368     		ldr	r3, [r4]
ARM GAS  /tmp/ccGYckNR.s 			page 281


 11500 01b6 43F00203 		orr	r3, r3, #2
 11501 01ba 2360     		str	r3, [r4]
3036:dm/dm42_fns.cc **** 
3037:dm/dm42_fns.cc ****     // =======================
3038:dm/dm42_fns.cc ****     // Switch from OFF to ON state 
3039:dm/dm42_fns.cc ****     if ( ST(STAT_OFF) ) {
 11502              		.loc 1 3039 0
 11503 01bc 2368     		ldr	r3, [r4]
 11504 01be D806     		lsls	r0, r3, #27
 11505 01c0 00F18F81 		bmi	.L1681
 11506              	.L1393:
3040:dm/dm42_fns.cc ****       LCD_power_on();
3041:dm/dm42_fns.cc ****       rtc_wakeup_delay();
3042:dm/dm42_fns.cc **** 
3043:dm/dm42_fns.cc ****       CLR_ST(STAT_OFF);
3044:dm/dm42_fns.cc ****       resume_run = core_powercycle();
3045:dm/dm42_fns.cc ****       printf("Power ON: run=%i lcdclr=%i\n",resume_run,lcd_get_buf_cleared());
3046:dm/dm42_fns.cc **** 
3047:dm/dm42_fns.cc **** /*
3048:dm/dm42_fns.cc ****       if ( is_graphics > 1 )
3049:dm/dm42_fns.cc ****         draw_gr_off_image();
3050:dm/dm42_fns.cc ****       else
3051:dm/dm42_fns.cc ****         calc_lcd_redraw();
3052:dm/dm42_fns.cc **** */
3053:dm/dm42_fns.cc ****       if (lcd_get_buf_cleared())
3054:dm/dm42_fns.cc ****         calc_lcd_redraw(); // Force complete repaint
3055:dm/dm42_fns.cc ****       else
3056:dm/dm42_fns.cc ****       {
3057:dm/dm42_fns.cc ****         force_header_timeout();
3058:dm/dm42_fns.cc ****         lcd_forced_refresh(); // Just redraw from LCD buffer
3059:dm/dm42_fns.cc ****       }
3060:dm/dm42_fns.cc ****     }
3061:dm/dm42_fns.cc ****     
3062:dm/dm42_fns.cc ****     // Clear suspended state, because now we are definitely reached the active state
3063:dm/dm42_fns.cc ****     CLR_ST(STAT_SUSPENDED);
 11507              		.loc 1 3063 0
 11508 01c4 2368     		ldr	r3, [r4]
 11509 01c6 23F00403 		bic	r3, r3, #4
 11510 01ca 2360     		str	r3, [r4]
 11511              	.LBB865:
3064:dm/dm42_fns.cc **** 
3065:dm/dm42_fns.cc ****     // ========================
3066:dm/dm42_fns.cc ****     // First initialization
3067:dm/dm42_fns.cc ****     if ( !core_initialized ) {
 11512              		.loc 1 3067 0
 11513 01cc 99F80030 		ldrb	r3, [r9]	@ zero_extendqisi2
 11514 01d0 03F0FF0B 		and	fp, r3, #255
 11515 01d4 4BBB     		cbnz	r3, .L1394
 11516              	.LVL1140:
 11517              	.LBB866:
3068:dm/dm42_fns.cc ****       int ver = FREE42_VERSION;
3069:dm/dm42_fns.cc **** 
3070:dm/dm42_fns.cc ****       printf("DM42 start\n");
3071:dm/dm42_fns.cc ****       //savestat_init(SAVEST_NEWEST); // Get one last saved
3072:dm/dm42_fns.cc ****       if ( read_statefile ) {
 11518              		.loc 1 3072 0
 11519 01d6 3A4B     		ldr	r3, .L1710+44
ARM GAS  /tmp/ccGYckNR.s 			page 282


 11520 01d8 1868     		ldr	r0, [r3]
 11521 01da 0028     		cmp	r0, #0
 11522 01dc 40F05083 		bne	.L1682
3068:dm/dm42_fns.cc ****       int ver = FREE42_VERSION;
 11523              		.loc 1 3068 0
 11524 01e0 1621     		movs	r1, #22
 11525              	.LVL1141:
 11526              	.L1395:
3073:dm/dm42_fns.cc ****         mark_region(MARK_42_STAT_LOAD);
3074:dm/dm42_fns.cc ****         ver = savestat_init_read();
3075:dm/dm42_fns.cc ****         if ( pgm_res ) // No state file -> just restart
3076:dm/dm42_fns.cc ****           read_statefile = 0;
3077:dm/dm42_fns.cc ****       }
3078:dm/dm42_fns.cc ****       // Init read start
3079:dm/dm42_fns.cc **** #ifdef STATEFILE_READ_DBG
3080:dm/dm42_fns.cc ****       readix = 0;
3081:dm/dm42_fns.cc **** #endif
3082:dm/dm42_fns.cc ****       core_init(read_statefile, ver);
 11527              		.loc 1 3082 0
 11528 01e2 FFF7FEFF 		bl	_Z9core_initii
 11529              	.LVL1142:
 11530              	.LBB867:
3083:dm/dm42_fns.cc ****       //core_init(read_statefile, FREE42_VERSION);
3084:dm/dm42_fns.cc ****       if ( read_statefile ) {
 11531              		.loc 1 3084 0
 11532 01e6 364B     		ldr	r3, .L1710+44
 11533 01e8 1B68     		ldr	r3, [r3]
 11534 01ea 002B     		cmp	r3, #0
 11535 01ec 40F03583 		bne	.L1683
3085:dm/dm42_fns.cc ****         savestat_data_t dat;
3086:dm/dm42_fns.cc ****         uint rd;
3087:dm/dm42_fns.cc ****         pgm_res = f_read(ppgm_fp, &dat, sizeof(savestat_data_t), &rd);
3088:dm/dm42_fns.cc ****         if ( pgm_res == FR_OK && dat.magic == SAVESTAT_MAGIC ) {
3089:dm/dm42_fns.cc ****           rtc_write_century(dat.century);
3090:dm/dm42_fns.cc ****           core_set_printer_delay(dat.printer_delay ? (10*(uint)dat.printer_delay) : DFLT_82240_LINE
3091:dm/dm42_fns.cc **** 
3092:dm/dm42_fns.cc ****           // == Statefile load flags
3093:dm/dm42_fns.cc ****           //SETBY_ST(dat.flags & SAVESTAT_FLAG_BEEP_MUTE, STAT_BEEP_MUTE);
3094:dm/dm42_fns.cc ****           runner_key_tout_init(dat.flags & SAVESTAT_FLAG_SLOW_AUTOREP);
3095:dm/dm42_fns.cc ****           SETBY_PS(dat.flags & SAVESTAT_PERM_MAIN_MENU, PERM_MAIN_MENU);
3096:dm/dm42_fns.cc **** 
3097:dm/dm42_fns.cc ****           set_print_to_file(PRTOF_TEXT, dat.flags & SAVESTAT_PRTOF_TXT, 0);
3098:dm/dm42_fns.cc ****           set_print_to_file(PRTOF_GRAPHICS, dat.flags & SAVESTAT_PRTOF_GR, 0);
3099:dm/dm42_fns.cc ****           set_print_to_file(PRTOF_NOIR, dat.flags & SAVESTAT_PRTOF_NOIR, 0);
3100:dm/dm42_fns.cc ****           set_print_to_file(PRTOF_GR_IN_TXT, dat.flags & SAVESTAT_PRTOF_GR_IN_TXT, 0);
3101:dm/dm42_fns.cc **** 
3102:dm/dm42_fns.cc ****           // Top-Bar header DOW/DATE/TIME negative as those are displayed by default 
3103:dm/dm42_fns.cc ****           SETBY_PS(  (dat.flags & SAVESTAT_DISP_STATFN), DISP_STATFN);
3104:dm/dm42_fns.cc ****           SETBY_PS( !(dat.flags & SAVESTAT_DISP_DOW), DISP_DOW);
3105:dm/dm42_fns.cc ****           SETBY_PS( !(dat.flags & SAVESTAT_DISP_DATE), DISP_DATE);
3106:dm/dm42_fns.cc ****           SETBY_PS(  (dat.flags & SAVESTAT_DISP_DATE_SEP0), DISP_DATE_SEP0);
3107:dm/dm42_fns.cc ****           SETBY_PS(  (dat.flags & SAVESTAT_DISP_DATE_SEP1), DISP_DATE_SEP1);
3108:dm/dm42_fns.cc ****           SETBY_PS(  (dat.flags & SAVESTAT_DISP_SHORTMON), DISP_SHORTMON);
3109:dm/dm42_fns.cc ****           SETBY_PS( !(dat.flags & SAVESTAT_DISP_TIME), DISP_TIME);
3110:dm/dm42_fns.cc ****           SETBY_PS(   dat.flags & SAVESTAT_FLAG_DISP_VOLTAGE, DISP_VOLTAGE);
3111:dm/dm42_fns.cc **** 
3112:dm/dm42_fns.cc ****           int gm = 0;
ARM GAS  /tmp/ccGYckNR.s 			page 283


3113:dm/dm42_fns.cc ****           gm |= (dat.flags & SAVESTAT_FLAG_GMODE0) ? 1 : 0;
3114:dm/dm42_fns.cc ****           gm |= (dat.flags & SAVESTAT_FLAG_GMODE1) ? 2 : 0;
3115:dm/dm42_fns.cc ****           set_graphics_mode(gm);
3116:dm/dm42_fns.cc **** 
3117:dm/dm42_fns.cc ****           int reflcd = 0;
3118:dm/dm42_fns.cc ****           reflcd |= (dat.flags & SAVESTAT_FLAG_REFLCD0) ? 1 : 0;
3119:dm/dm42_fns.cc ****           reflcd |= (dat.flags & SAVESTAT_FLAG_REFLCD1) ? 2 : 0;
3120:dm/dm42_fns.cc ****           reflcd |= (dat.flags & SAVESTAT_FLAG_REFLCD2) ? 4 : 0;
3121:dm/dm42_fns.cc ****           set_reflcd_mask(~reflcd & 7);
3122:dm/dm42_fns.cc **** 
3123:dm/dm42_fns.cc ****           draw_reg_mode = 0;
3124:dm/dm42_fns.cc ****           draw_reg_mode |= (dat.flags & SAVESTAT_FLAG_REG_LEFT)  ? REG_ALIGN_LEFT : 0;
3125:dm/dm42_fns.cc ****           draw_reg_mode |= (dat.flags & SAVESTAT_FLAG_REG_LINES) ? REG_LINES      : 0;
3126:dm/dm42_fns.cc ****           // ==
3127:dm/dm42_fns.cc ****           
3128:dm/dm42_fns.cc ****           reg_font_ix = dat.reg_font_ix;
3129:dm/dm42_fns.cc ****           pgm_font_ix = dat.pgm_font_ix;
3130:dm/dm42_fns.cc **** 
3131:dm/dm42_fns.cc ****           reg_font_offset = ((uint32_t*)dat.font_offsets)[0] & 0xffffff;
3132:dm/dm42_fns.cc **** 
3133:dm/dm42_fns.cc ****           stack_layout = dat.stack_layout;
3134:dm/dm42_fns.cc ****           if (stack_layout == 0) stack_layout = STACK_XYZTL; // Fall down to default for old savefi
3135:dm/dm42_fns.cc ****         }
3136:dm/dm42_fns.cc ****         f_close(ppgm_fp);
3137:dm/dm42_fns.cc ****       } else {
3138:dm/dm42_fns.cc ****         // State defaults
3139:dm/dm42_fns.cc ****         SET_PS(DISP_DOW);
 11536              		.loc 1 3139 0
 11537 01f0 3B4B     		ldr	r3, .L1710+76
 11538 01f2 3B4A     		ldr	r2, .L1710+76
 11539 01f4 1B68     		ldr	r3, [r3]
 11540 01f6 43F00403 		orr	r3, r3, #4
 11541 01fa 1360     		str	r3, [r2]
3140:dm/dm42_fns.cc ****         SET_PS(DISP_DATE);
 11542              		.loc 1 3140 0
 11543 01fc 1368     		ldr	r3, [r2]
 11544 01fe 43F00803 		orr	r3, r3, #8
 11545 0202 1360     		str	r3, [r2]
3141:dm/dm42_fns.cc ****         SET_PS(DISP_TIME);
 11546              		.loc 1 3141 0
 11547 0204 1368     		ldr	r3, [r2]
 11548 0206 43F08003 		orr	r3, r3, #128
 11549 020a 1360     		str	r3, [r2]
 11550              	.LVL1143:
 11551              	.L1425:
 11552              	.LBE867:
3142:dm/dm42_fns.cc ****       }
3143:dm/dm42_fns.cc ****       resume_run = core_powercycle();
 11553              		.loc 1 3143 0
 11554 020c FFF7FEFF 		bl	_Z15core_powercyclev
 11555              	.LVL1144:
3144:dm/dm42_fns.cc ****       no_region();
 11556              		.loc 1 3144 0
 11557 0210 344B     		ldr	r3, .L1710+80
3143:dm/dm42_fns.cc ****       no_region();
 11558              		.loc 1 3143 0
 11559 0212 8246     		mov	r10, r0
ARM GAS  /tmp/ccGYckNR.s 			page 284


 11560              	.LVL1145:
 11561              		.loc 1 3144 0
 11562 0214 9847     		blx	r3
 11563              	.LVL1146:
3145:dm/dm42_fns.cc ****       read_statefile = 0;
 11564              		.loc 1 3145 0
 11565 0216 2A49     		ldr	r1, .L1710+44
 11566 0218 0022     		movs	r2, #0
3146:dm/dm42_fns.cc ****       printf("DM42 initialized\n");
3147:dm/dm42_fns.cc ****       core_initialized = true;
 11567              		.loc 1 3147 0
 11568 021a 0123     		movs	r3, #1
3145:dm/dm42_fns.cc ****       read_statefile = 0;
 11569              		.loc 1 3145 0
 11570 021c 0A60     		str	r2, [r1]
 11571              		.loc 1 3147 0
 11572 021e 89F80030 		strb	r3, [r9]
3148:dm/dm42_fns.cc **** 
3149:dm/dm42_fns.cc ****       // Init read end
3150:dm/dm42_fns.cc **** 
3151:dm/dm42_fns.cc ****       //if ( is_graphics > 1 )
3152:dm/dm42_fns.cc ****       //  draw_gr_off_image();
3153:dm/dm42_fns.cc ****       //else 
3154:dm/dm42_fns.cc ****       {
3155:dm/dm42_fns.cc ****         rtc_check_unset();
 11573              		.loc 1 3155 0
 11574 0222 314B     		ldr	r3, .L1710+84
 11575 0224 9847     		blx	r3
 11576              	.LVL1147:
3156:dm/dm42_fns.cc ****         calc_lcd_redraw();
 11577              		.loc 1 3156 0
 11578 0226 FFF7FEFF 		bl	calc_lcd_redraw
 11579              	.LVL1148:
 11580              	.L1394:
 11581              	.LBE866:
 11582              	.LBE865:
3157:dm/dm42_fns.cc ****       }
3158:dm/dm42_fns.cc **** 
3159:dm/dm42_fns.cc ****     }
3160:dm/dm42_fns.cc **** 
3161:dm/dm42_fns.cc ****     // ========================
3162:dm/dm42_fns.cc ****     // Second start without core_init ... just ignore state file read
3163:dm/dm42_fns.cc ****     if ( read_statefile ) {
 11583              		.loc 1 3163 0
 11584 022a 254B     		ldr	r3, .L1710+44
 11585 022c 1B68     		ldr	r3, [r3]
 11586 022e 002B     		cmp	r3, #0
 11587 0230 40F04B81 		bne	.L1684
 11588              	.L1427:
3164:dm/dm42_fns.cc ****       read_statefile = 0;
3165:dm/dm42_fns.cc ****       core_repaint_display();
3166:dm/dm42_fns.cc ****       skin_repaint_annunciator(0, 0); // Always repaint all
3167:dm/dm42_fns.cc ****     }
3168:dm/dm42_fns.cc **** 
3169:dm/dm42_fns.cc ****     // ========================
3170:dm/dm42_fns.cc ****     // == Timeout event handling
3171:dm/dm42_fns.cc ****     if ( sys_timer_timeout(TIMER0) ) {
ARM GAS  /tmp/ccGYckNR.s 			page 285


 11589              		.loc 1 3171 0
 11590 0234 DFF8D4B0 		ldr	fp, .L1710+120
 11591 0238 0020     		movs	r0, #0
 11592 023a D847     		blx	fp
 11593              	.LVL1149:
 11594 023c 0028     		cmp	r0, #0
 11595 023e 00F03681 		beq	.L1429
3172:dm/dm42_fns.cc ****       repeat_timeout = 1;
 11596              		.loc 1 3172 0
 11597 0242 1B4A     		ldr	r2, .L1710+28
 11598 0244 0123     		movs	r3, #1
 11599 0246 1360     		str	r3, [r2]
 11600              	.L1430:
 11601              	.LBB891:
3173:dm/dm42_fns.cc ****     } else {
3174:dm/dm42_fns.cc ****       if ( sys_timer_timeout(TIMER3) ) 
3175:dm/dm42_fns.cc ****         repeat_timeout = 2;
3176:dm/dm42_fns.cc ****     }
3177:dm/dm42_fns.cc ****     if ( repeat_timeout ) {
 11602              		.loc 1 3177 0
 11603 0248 194B     		ldr	r3, .L1710+28
 11604 024a 1B68     		ldr	r3, [r3]
 11605 024c 002B     		cmp	r3, #0
 11606 024e 00F08380 		beq	.L1431
 11607              	.LBB892:
 11608              	.LBB893:
3178:dm/dm42_fns.cc ****       if ( repeat_timeout == 1 ) {
 11609              		.loc 1 3178 0
 11610 0252 174B     		ldr	r3, .L1710+28
 11611 0254 1B68     		ldr	r3, [r3]
 11612 0256 012B     		cmp	r3, #1
 11613 0258 40F08981 		bne	.L1432
 11614              	.LBB894:
3179:dm/dm42_fns.cc ****         printf("Timeout %i\n", timeout0_type);
3180:dm/dm42_fns.cc ****         switch ( timeout0_type ) {
 11615              		.loc 1 3180 0
 11616 025c 234B     		ldr	r3, .L1710+88
 11617 025e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11618 0260 012B     		cmp	r3, #1
 11619 0262 00F01485 		beq	.L1434
 11620 0266 C0F00585 		bcc	.L1435
 11621 026a 022B     		cmp	r3, #2
 11622 026c 04D1     		bne	.L1433
 11623              	.LBB895:
3181:dm/dm42_fns.cc ****           case TIMEOUT_REPEAT: {
3182:dm/dm42_fns.cc ****               int repeat = core_repeat();
3183:dm/dm42_fns.cc ****               if ( repeat == 0 )
3184:dm/dm42_fns.cc ****                 clearTimeout0();
3185:dm/dm42_fns.cc ****               else
3186:dm/dm42_fns.cc ****                 setTimeout0(TIMEOUT_REPEAT, repeat == 1 ? 200 : 100);
3187:dm/dm42_fns.cc ****             }
3188:dm/dm42_fns.cc ****             break;
3189:dm/dm42_fns.cc ****           case TIMEOUT_CORE1:
3190:dm/dm42_fns.cc ****             core_keytimeout1();
3191:dm/dm42_fns.cc ****             setTimeout0(TIMEOUT_CORE2, 1750);
3192:dm/dm42_fns.cc ****             break;
3193:dm/dm42_fns.cc ****           case TIMEOUT_CORE2:
ARM GAS  /tmp/ccGYckNR.s 			page 286


3194:dm/dm42_fns.cc ****             core_keytimeout2();
 11624              		.loc 1 3194 0
 11625 026e FFF7FEFF 		bl	_Z16core_keytimeout2v
 11626              	.LVL1150:
 11627              	.LBB896:
 11628              	.LBB897:
2617:dm/dm42_fns.cc **** }
 11629              		.loc 1 2617 0
 11630 0272 084B     		ldr	r3, .L1710
 11631 0274 0020     		movs	r0, #0
 11632 0276 9847     		blx	r3
 11633              	.LVL1151:
 11634              	.L1433:
 11635              	.LBE897:
 11636              	.LBE896:
 11637              	.LBE895:
 11638              	.LBE894:
 11639              	.LBE893:
3195:dm/dm42_fns.cc ****             clearTimeout0();
3196:dm/dm42_fns.cc ****             break;
3197:dm/dm42_fns.cc ****         }
3198:dm/dm42_fns.cc ****       } else {
3199:dm/dm42_fns.cc ****         // timeout3
3200:dm/dm42_fns.cc ****         printf("Timeout:3\n");
3201:dm/dm42_fns.cc ****         keep_running = core_timeout3(1);
3202:dm/dm42_fns.cc ****         clearTimeout3();
3203:dm/dm42_fns.cc ****       }
3204:dm/dm42_fns.cc ****       repeat_timeout = 0;
 11640              		.loc 1 3204 0
 11641 0278 0D4A     		ldr	r2, .L1710+28
 11642 027a 0023     		movs	r3, #0
 11643 027c 1360     		str	r3, [r2]
3205:dm/dm42_fns.cc ****       continue;
 11644              		.loc 1 3205 0
 11645 027e F9E6     		b	.L1322
 11646              	.L1354:
 11647              	.LBE892:
 11648              	.LBE891:
 11649              	.LBB916:
 11650              	.LBB849:
 11651              	.LBB850:
2914:dm/dm42_fns.cc ****         pgm_res = FR_OK; // Clear pgm_res for plain power OFF
 11652              		.loc 1 2914 0
 11653 0280 2368     		ldr	r3, [r4]
 11654 0282 13F00403 		ands	r3, r3, #4
 11655 0286 00F03F81 		beq	.L1685
 11656              	.LVL1152:
 11657              	.L1510:
 11658              	.LBE850:
3030:dm/dm42_fns.cc ****       continue;
 11659              		.loc 1 3030 0
 11660 028a 194B     		ldr	r3, .L1710+92
 11661 028c 9847     		blx	r3
 11662              	.LVL1153:
3029:dm/dm42_fns.cc ****       key_pop_all();
 11663              		.loc 1 3029 0
 11664 028e 0027     		movs	r7, #0
ARM GAS  /tmp/ccGYckNR.s 			page 287


3031:dm/dm42_fns.cc ****     }
 11665              		.loc 1 3031 0
 11666 0290 F0E6     		b	.L1322
 11667              	.L1711:
 11668 0292 00BF     		.align	2
 11669              	.L1710:
 11670 0294 F5030008 		.word	134218741
 11671 0298 00000000 		.word	run_menu_item
 11672 029c 00000000 		.word	.LANCHOR31
 11673 02a0 00000000 		.word	.LANCHOR7
 11674 02a4 00200010 		.word	268443648
 11675 02a8 00000000 		.word	set_dmy
 11676 02ac 00000000 		.word	menu_line_str
 11677 02b0 00000000 		.word	.LANCHOR42
 11678 02b4 00000000 		.word	is_dmy
 11679 02b8 00000000 		.word	.LANCHOR41
 11680 02bc 00000000 		.word	after_fat_format_dm42
 11681 02c0 00000000 		.word	.LANCHOR43
 11682 02c4 B9030008 		.word	134218681
 11683 02c8 DD020008 		.word	134218461
 11684 02cc 00000000 		.word	.LANCHOR10
 11685 02d0 31020008 		.word	134218289
 11686 02d4 00000000 		.word	.LANCHOR29
 11687 02d8 19040008 		.word	134218777
 11688 02dc 7D030008 		.word	134218621
 11689 02e0 00000000 		.word	.LANCHOR8
 11690 02e4 0D030008 		.word	134218509
 11691 02e8 41030008 		.word	134218561
 11692 02ec 00000000 		.word	.LANCHOR39
 11693 02f0 91030008 		.word	134218641
 11694 02f4 00000000 		.word	dm42_is_beep_mute
 11695 02f8 00000000 		.word	dm42_set_beep_mute
 11696 02fc 00000000 		.word	.LANCHOR28
 11697 0300 00000000 		.word	.LANCHOR44
 11698 0304 00000000 		.word	is_clk24
 11699 0308 00000000 		.word	set_clk24
 11700 030c 01040008 		.word	134218753
 11701              	.LVL1154:
 11702              	.L1676:
 11703              	.LBE849:
 11704              	.LBE916:
2857:dm/dm42_fns.cc ****          ( ST(STAT_PGM_END) && ST(STAT_SUSPENDED) ) ) 
 11705              		.loc 1 2857 0 discriminator 3
 11706 0310 A04B     		ldr	r3, .L1712
 11707 0312 9847     		blx	r3
 11708              	.LVL1155:
 11709 0314 B0B1     		cbz	r0, .L1686
2861:dm/dm42_fns.cc ****         printf("Idle: menu[%i,a:%i,h:%i,off:%i] aoff=%i lcd=%lx\n",core_menu(), core_alpha_menu(), 
 11710              		.loc 1 2861 0
 11711 0316 99F80030 		ldrb	r3, [r9]	@ zero_extendqisi2
 11712 031a 002B     		cmp	r3, #0
 11713 031c 7FF40DAF 		bne	.L1502
2882:dm/dm42_fns.cc ****       reset_auto_off();
 11714              		.loc 1 2882 0
 11715 0320 9C4B     		ldr	r3, .L1712
 11716 0322 9847     		blx	r3
 11717              	.LVL1156:
ARM GAS  /tmp/ccGYckNR.s 			page 288


 11718 0324 0028     		cmp	r0, #0
 11719 0326 3FF4B6AE 		beq	.L1339
 11720 032a B6E6     		b	.L1506
 11721              	.L1343:
 11722              	.LBB917:
 11723              	.LBB918:
2631:dm/dm42_fns.cc **** }
 11724              		.loc 1 2631 0
 11725 032c 9A4B     		ldr	r3, .L1712+4
 11726 032e 9847     		blx	r3
 11727              	.LVL1157:
 11728 0330 2B68     		ldr	r3, [r5]
 11729 0332 9842     		cmp	r0, r3
 11730 0334 3FF4E0AE 		beq	.L1342
 11731 0338 984B     		ldr	r3, .L1712+8
 11732 033a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11733 033c 012B     		cmp	r3, #1
 11734 033e 3FF7DBAE 		bgt	.L1342
 11735 0342 B6E6     		b	.L1347
 11736              	.L1686:
 11737              	.LBE918:
 11738              	.LBE917:
2858:dm/dm42_fns.cc ****     {
 11739              		.loc 1 2858 0
 11740 0344 2368     		ldr	r3, [r4]
2857:dm/dm42_fns.cc ****          ( ST(STAT_PGM_END) && ST(STAT_SUSPENDED) ) ) 
 11741              		.loc 1 2857 0
 11742 0346 9A05     		lsls	r2, r3, #22
 11743 0348 3FF5F1AE 		bmi	.L1330
2882:dm/dm42_fns.cc ****       reset_auto_off();
 11744              		.loc 1 2882 0
 11745 034c 914B     		ldr	r3, .L1712
 11746 034e 9847     		blx	r3
 11747              	.LVL1158:
 11748 0350 0028     		cmp	r0, #0
 11749 0352 3FF4A0AE 		beq	.L1339
 11750 0356 A0E6     		b	.L1506
 11751              	.L1431:
3206:dm/dm42_fns.cc ****     }
3207:dm/dm42_fns.cc **** 
3208:dm/dm42_fns.cc ****     // ========================
3209:dm/dm42_fns.cc ****     // Resume Run or key read
3210:dm/dm42_fns.cc ****     if ( resume_run ) {
 11752              		.loc 1 3210 0
 11753 0358 BAF1000F 		cmp	r10, #0
 11754 035c 5FD0     		beq	.L1439
 11755              	.LVL1159:
3211:dm/dm42_fns.cc ****       resume_run = 0;
3212:dm/dm42_fns.cc ****       sys_delay(100); // Give some time to read key for automatic stop
 11756              		.loc 1 3212 0
 11757 035e 904B     		ldr	r3, .L1712+12
 11758 0360 6420     		movs	r0, #100
 11759 0362 9847     		blx	r3
 11760              	.LVL1160:
3213:dm/dm42_fns.cc ****       key = key_tail();
 11761              		.loc 1 3213 0
 11762 0364 8F4B     		ldr	r3, .L1712+16
ARM GAS  /tmp/ccGYckNR.s 			page 289


 11763 0366 9847     		blx	r3
 11764              	.LVL1161:
3214:dm/dm42_fns.cc ****       if ( key == KEY_RUN ) {
 11765              		.loc 1 3214 0
 11766 0368 2428     		cmp	r0, #36
 11767 036a 58D0     		beq	.L1439
3215:dm/dm42_fns.cc ****         // Stop
3216:dm/dm42_fns.cc ****         key = key_pop();
3217:dm/dm42_fns.cc ****       } else {
3218:dm/dm42_fns.cc ****         // Run again
3219:dm/dm42_fns.cc ****         if(key==0) key_pop();
 11768              		.loc 1 3219 0
 11769 036c 0028     		cmp	r0, #0
 11770 036e 00F07D84 		beq	.L1687
 11771              	.LVL1162:
 11772              	.L1442:
3220:dm/dm42_fns.cc ****         clear_no_keystrokes_yet();
 11773              		.loc 1 3220 0
 11774 0372 FFF7FEFF 		bl	clear_no_keystrokes_yet
 11775              	.LVL1163:
 11776              	.LBB919:
3221:dm/dm42_fns.cc ****         key = -1; // Proceed
3222:dm/dm42_fns.cc ****       }
3223:dm/dm42_fns.cc ****     } else {
3224:dm/dm42_fns.cc ****       // Fetch the key
3225:dm/dm42_fns.cc ****       //  < 0 -> No key event
3226:dm/dm42_fns.cc ****       //  > 0 -> Key pressed
3227:dm/dm42_fns.cc ****       // == 0 -> Key released
3228:dm/dm42_fns.cc ****       key = key_pop();
3229:dm/dm42_fns.cc ****     }
3230:dm/dm42_fns.cc **** 
3231:dm/dm42_fns.cc **** #ifdef SWO_DEBUG
3232:dm/dm42_fns.cc ****     if (key == KEY_F6) hwdbg_trace_init();
3233:dm/dm42_fns.cc **** #endif
3234:dm/dm42_fns.cc **** 
3235:dm/dm42_fns.cc **** 
3236:dm/dm42_fns.cc ****     /* =========================
3237:dm/dm42_fns.cc ****        Main menu - Function keys
3238:dm/dm42_fns.cc **** 
3239:dm/dm42_fns.cc ****            F1 - Help
3240:dm/dm42_fns.cc ****            F2 - Toggle main menu
3241:dm/dm42_fns.cc ****            F3 - (not assigned)
3242:dm/dm42_fns.cc ****            F4 - Increase volume 
3243:dm/dm42_fns.cc ****      Shift-F4 - Decrease volume
3244:dm/dm42_fns.cc ****            F5 - Stack alignment
3245:dm/dm42_fns.cc ****      Shift-F5 - Vintage/sans font
3246:dm/dm42_fns.cc ****            F6 - Increase font size
3247:dm/dm42_fns.cc ****      Shift-F6 - Decrease font size
3248:dm/dm42_fns.cc ****     */
3249:dm/dm42_fns.cc **** 
3250:dm/dm42_fns.cc ****     if ( !core_menu() && key>=KEY_F1 && key<=KEY_F6 ) {
 11777              		.loc 1 3250 0
 11778 0376 FFF7FEFF 		bl	_Z9core_menuv
 11779              	.LVL1164:
 11780              	.L1659:
 11781              	.LBE919:
3251:dm/dm42_fns.cc ****       int consume_key = 1;
ARM GAS  /tmp/ccGYckNR.s 			page 290


3252:dm/dm42_fns.cc ****       int redraw = 1;
3253:dm/dm42_fns.cc **** 
3254:dm/dm42_fns.cc ****       switch (key) {
3255:dm/dm42_fns.cc ****         case KEY_F1:
3256:dm/dm42_fns.cc ****           // Start Help system
3257:dm/dm42_fns.cc ****           //test_help_fonts();
3258:dm/dm42_fns.cc ****           //help_demo();
3259:dm/dm42_fns.cc ****           if ( !ANN(RUN) ) { // We don't want to display help during program run
3260:dm/dm42_fns.cc ****             run_help();
3261:dm/dm42_fns.cc ****             calc_lcd_redraw();
3262:dm/dm42_fns.cc ****           } 
3263:dm/dm42_fns.cc ****           break;
3264:dm/dm42_fns.cc **** 
3265:dm/dm42_fns.cc ****         case KEY_F2:
3266:dm/dm42_fns.cc ****           // Toggle main menu visibility
3267:dm/dm42_fns.cc ****           set_disp_main_menu(!is_disp_main_menu());
3268:dm/dm42_fns.cc ****           break;
3269:dm/dm42_fns.cc ****         
3270:dm/dm42_fns.cc ****         case KEY_F3:
3271:dm/dm42_fns.cc ****           break;
3272:dm/dm42_fns.cc **** 
3273:dm/dm42_fns.cc ****         case KEY_F4:
3274:dm/dm42_fns.cc ****           ANN(SHIFT) ? beep_volume_down() : beep_volume_up();
3275:dm/dm42_fns.cc ****           consume_key = 0; // We want the beep (by passing invalid key to core)
3276:dm/dm42_fns.cc ****           redraw = 0; // No visual changes
3277:dm/dm42_fns.cc ****           break;
3278:dm/dm42_fns.cc **** 
3279:dm/dm42_fns.cc ****         case KEY_F5:
3280:dm/dm42_fns.cc ****           if ( ANN(SHIFT) ) {
3281:dm/dm42_fns.cc ****             // Shift-F5 = Toggle to HP font
3282:dm/dm42_fns.cc ****             if ( is_pgm_mode() )
3283:dm/dm42_fns.cc ****               pgm_font_ix = lcd_toggleFontT(pgm_font_ix);
3284:dm/dm42_fns.cc ****             else
3285:dm/dm42_fns.cc ****               reg_font_ix = lcd_toggleFontT(reg_font_ix);
3286:dm/dm42_fns.cc ****           } else {
3287:dm/dm42_fns.cc ****             // F5 = Stack alignment
3288:dm/dm42_fns.cc ****             draw_reg_mode++;
3289:dm/dm42_fns.cc ****             if(draw_reg_mode > DRAW_REG_MODE_MAX) draw_reg_mode=0;
3290:dm/dm42_fns.cc ****           }
3291:dm/dm42_fns.cc ****           break;
3292:dm/dm42_fns.cc **** 
3293:dm/dm42_fns.cc ****         case KEY_F6:
3294:dm/dm42_fns.cc ****           if ( ANN(SHIFT) ) {
3295:dm/dm42_fns.cc ****             // Shift-F6 = decrease font size
3296:dm/dm42_fns.cc ****             if ( is_pgm_mode() )
3297:dm/dm42_fns.cc ****               pgm_font_ix = lcd_prevFontNr(pgm_font_ix);
3298:dm/dm42_fns.cc ****             else
3299:dm/dm42_fns.cc ****               reg_font_ix = lcd_prevFontNr(reg_font_ix);
3300:dm/dm42_fns.cc ****           } else {
3301:dm/dm42_fns.cc ****             // F6 = Increase font size
3302:dm/dm42_fns.cc ****             if ( is_pgm_mode() )
3303:dm/dm42_fns.cc ****               pgm_font_ix = lcd_nextFontNr(pgm_font_ix);
3304:dm/dm42_fns.cc ****             else
3305:dm/dm42_fns.cc ****               reg_font_ix = lcd_nextFontNr(reg_font_ix);
3306:dm/dm42_fns.cc ****           }
3307:dm/dm42_fns.cc ****           break;
3308:dm/dm42_fns.cc ****       }
ARM GAS  /tmp/ccGYckNR.s 			page 291


3309:dm/dm42_fns.cc **** 
3310:dm/dm42_fns.cc ****       // Consume shift
3311:dm/dm42_fns.cc ****       if ( ANN(SHIFT) )
3312:dm/dm42_fns.cc ****         clr_shift();
3313:dm/dm42_fns.cc **** 
3314:dm/dm42_fns.cc ****       if ( consume_key ) key = -1;
3315:dm/dm42_fns.cc **** 
3316:dm/dm42_fns.cc ****       if ( redraw && !ANN(RUN) ) {
3317:dm/dm42_fns.cc ****         disp_regs(LCD_UPD_DFLT);
3318:dm/dm42_fns.cc ****         lcd_refresh();
3319:dm/dm42_fns.cc ****       }
3320:dm/dm42_fns.cc **** 
3321:dm/dm42_fns.cc ****     } // == End of main menu function keys handling
3322:dm/dm42_fns.cc **** 
3323:dm/dm42_fns.cc **** 
3324:dm/dm42_fns.cc ****     if (key == KEY_SCREENSHOT) {
3325:dm/dm42_fns.cc ****       start_buzzer_freq(4400); sys_delay(10); stop_buzzer();
3326:dm/dm42_fns.cc ****       // Turn OFF SHIFT
3327:dm/dm42_fns.cc ****       if ( ANN(SHIFT) )
3328:dm/dm42_fns.cc ****         keep_running = core_keydown(KEY_SHIFT, &enqueued, &repeat);
3329:dm/dm42_fns.cc ****       // Make screenshot
3330:dm/dm42_fns.cc ****       if ( create_screenshot(1) == 2 ) {
3331:dm/dm42_fns.cc ****         wait_for_key_press();
3332:dm/dm42_fns.cc ****         calc_lcd_redraw();
3333:dm/dm42_fns.cc ****       }
3334:dm/dm42_fns.cc ****       start_buzzer_freq(8800); sys_delay(10); stop_buzzer();
3335:dm/dm42_fns.cc ****       key = -1;
3336:dm/dm42_fns.cc ****     }
3337:dm/dm42_fns.cc **** 
3338:dm/dm42_fns.cc ****     if ( key == KEY_DOUBLE_RELEASE )
3339:dm/dm42_fns.cc ****       key = -1; // Ignore double key release
3340:dm/dm42_fns.cc **** 
3341:dm/dm42_fns.cc ****     // == Key translation
3342:dm/dm42_fns.cc **** 
3343:dm/dm42_fns.cc ****     update_aplha_table();
 11782              		.loc 1 3343 0
 11783 037a FFF7FEFF 		bl	update_aplha_table
 11784              	.LVL1165:
3344:dm/dm42_fns.cc **** 
3345:dm/dm42_fns.cc ****     if ( alpha_table != ALPHA_INACTIVE && ANN(SHIFT) ) {
 11785              		.loc 1 3345 0
 11786 037e 8A4B     		ldr	r3, .L1712+20
 11787 0380 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11788 0382 0F2B     		cmp	r3, #15
 11789 0384 01D0     		beq	.L1661
 11790              	.L1654:
 11791 0386 894B     		ldr	r3, .L1712+24
 11792 0388 1B68     		ldr	r3, [r3]
 11793              	.L1661:
 11794 038a 4FF0FF3A 		mov	r10, #-1
 11795              	.LVL1166:
 11796              	.L1644:
 11797 038e CDF800A0 		str	r10, [sp]
3346:dm/dm42_fns.cc ****       if ( key == KEY_UP ) {
3347:dm/dm42_fns.cc ****         alpha_table = (alpha_table+1)%ALPHA_TABLE_COUNT;
3348:dm/dm42_fns.cc ****         key = KEY_SHIFT;
3349:dm/dm42_fns.cc ****       }
ARM GAS  /tmp/ccGYckNR.s 			page 292


3350:dm/dm42_fns.cc ****       if ( key == KEY_DOWN ) {
3351:dm/dm42_fns.cc ****         alpha_table = (alpha_table+ALPHA_TABLE_COUNT-1)%ALPHA_TABLE_COUNT;
3352:dm/dm42_fns.cc ****         key = KEY_SHIFT;
3353:dm/dm42_fns.cc ****       }
3354:dm/dm42_fns.cc ****     }
3355:dm/dm42_fns.cc **** 
3356:dm/dm42_fns.cc **** 
3357:dm/dm42_fns.cc ****     if ( alpha_table != ALPHA_INACTIVE ) {
3358:dm/dm42_fns.cc ****       if ( key == KEY_SH_UP ) {
3359:dm/dm42_fns.cc ****         set_shift();
3360:dm/dm42_fns.cc ****         key = KEY_UP;
3361:dm/dm42_fns.cc ****       }
3362:dm/dm42_fns.cc ****       if ( key == KEY_SH_DOWN ) {
3363:dm/dm42_fns.cc ****         set_shift();
3364:dm/dm42_fns.cc ****         key = KEY_DOWN;
3365:dm/dm42_fns.cc ****       }
3366:dm/dm42_fns.cc ****     }
3367:dm/dm42_fns.cc **** 
3368:dm/dm42_fns.cc ****     // Interpret the key as normal key (not F1-F6) if menu is displayed and key1-key6 pressed
3369:dm/dm42_fns.cc ****     uint8_t is_menu_active = core_menu() || core_hex_menu() || core_alpha_menu();
 11798              		.loc 1 3369 0
 11799 0392 FFF7FEFF 		bl	_Z9core_menuv
 11800              	.LVL1167:
 11801 0396 0AF1FF3B 		add	fp, r10, #-1
 11802 039a 009B     		ldr	r3, [sp]
 11803 039c 0028     		cmp	r0, #0
 11804 039e 00F08184 		beq	.L1537
 11805              	.LVL1168:
 11806              	.L1482:
3370:dm/dm42_fns.cc ****     no_menu_key = is_menu_active && key > 0 && key < 7;
 11807              		.loc 1 3370 0
 11808 03a2 BAF1000F 		cmp	r10, #0
 11809 03a6 00F3B781 		bgt	.L1518
 11810 03aa 0022     		movs	r2, #0
 11811 03ac 0092     		str	r2, [sp]
 11812 03ae 0121     		movs	r1, #1
 11813              	.LVL1169:
 11814              	.L1483:
 11815              	.LBB942:
3371:dm/dm42_fns.cc **** 
3372:dm/dm42_fns.cc ****     if ( (key > 0 && key <= MAX_KEY_NR) && alpha_table != ALPHA_INACTIVE ) {
 11816              		.loc 1 3372 0 discriminator 8
 11817 03b0 BBF1240F 		cmp	fp, #36
 11818 03b4 71D8     		bhi	.L1484
 11819              		.loc 1 3372 0 is_stmt 0 discriminator 1
 11820 03b6 7C4A     		ldr	r2, .L1712+20
 11821 03b8 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 11822 03ba 0F2A     		cmp	r2, #15
 11823 03bc 6DD0     		beq	.L1484
 11824              	.LBB943:
3373:dm/dm42_fns.cc ****       // Translate alpha keys
3374:dm/dm42_fns.cc ****       const char * transl = ANN(SHIFT) ? alpha_shift_tables[alpha_table] : alpha_tables[alpha_table
 11825              		.loc 1 3374 0 is_stmt 1
 11826 03be 7B49     		ldr	r1, .L1712+24
 11827 03c0 0968     		ldr	r1, [r1]
 11828 03c2 8907     		lsls	r1, r1, #30
 11829 03c4 4CBF     		ite	mi
ARM GAS  /tmp/ccGYckNR.s 			page 293


 11830 03c6 7A49     		ldrmi	r1, .L1712+28
 11831 03c8 7A49     		ldrpl	r1, .L1712+32
 11832 03ca 51F82220 		ldr	r2, [r1, r2, lsl #2]
 11833              	.LVL1170:
3375:dm/dm42_fns.cc ****       char c = ALPHA_NO_TRANSL;
3376:dm/dm42_fns.cc ****       if ( transl )
 11834              		.loc 1 3376 0
 11835 03ce 002A     		cmp	r2, #0
 11836 03d0 00F0E481 		beq	.L1487
3377:dm/dm42_fns.cc ****         c = transl[key];
 11837              		.loc 1 3377 0
 11838 03d4 D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 11839              	.LVL1171:
3378:dm/dm42_fns.cc **** 
3379:dm/dm42_fns.cc ****       //if ( ANN(SHIFT) && (c >= '0' && c <= '9' ) ) {
3380:dm/dm42_fns.cc ****       //  key = nr_to_key(c-'0');
3381:dm/dm42_fns.cc ****       //} else {
3382:dm/dm42_fns.cc ****         if ( c != ALPHA_NO_TRANSL ) {
 11840              		.loc 1 3382 0
 11841 03d6 5F2B     		cmp	r3, #95
 11842 03d8 00F0E081 		beq	.L1487
3383:dm/dm42_fns.cc ****           key = 0x400 | c;
 11843              		.loc 1 3383 0
 11844 03dc 43F4806A 		orr	r10, r3, #1024
 11845              	.LVL1172:
 11846              	.L1521:
 11847              	.LBE943:
 11848              	.LBE942:
3384:dm/dm42_fns.cc ****         }
3385:dm/dm42_fns.cc ****       //}
3386:dm/dm42_fns.cc ****       //clr_shift();
3387:dm/dm42_fns.cc ****     } else
3388:dm/dm42_fns.cc ****       // Translate top row into function keys if function menu or alpha menu is activated
3389:dm/dm42_fns.cc ****       if ( (key > MAX_KEY_NR && key <= MAX_FNKEY_NR) && is_menu_active ) {
3390:dm/dm42_fns.cc ****         key -= MAX_KEY_NR; // Translate FN keys to codes 1-6
3391:dm/dm42_fns.cc ****       }
3392:dm/dm42_fns.cc **** 
3393:dm/dm42_fns.cc ****     // ==================================
3394:dm/dm42_fns.cc ****     // == Setup key - Setup MENU
3395:dm/dm42_fns.cc ****     // ==================================
3396:dm/dm42_fns.cc ****     if ( key == KEY_0 && ANN(SHIFT)) { 
3397:dm/dm42_fns.cc ****       key = KEY_SHIFT; // Key remains SHIFT to turn the shift off or rewrite for special actions
3398:dm/dm42_fns.cc ****       
3399:dm/dm42_fns.cc ****       // We don't want to display menu during program run
3400:dm/dm42_fns.cc ****       // as well as during hires graphics modes
3401:dm/dm42_fns.cc ****       if ( !ANN(RUN) && is_graphics <= 1) {
3402:dm/dm42_fns.cc ****         SET_ST(STAT_MENU);
3403:dm/dm42_fns.cc ****         int ret = handle_menu(&MID_MENU, MENU_RESET, 0);
3404:dm/dm42_fns.cc ****         CLR_ST(STAT_MENU);
3405:dm/dm42_fns.cc ****         if ( ret == MRET_SAVESTATE ) { // FIXME: Really?
3406:dm/dm42_fns.cc ****           CLR_ST(STAT_SOFT_OFF); // Hard off
3407:dm/dm42_fns.cc ****           key = KEY_EXIT;
3408:dm/dm42_fns.cc ****         }
3409:dm/dm42_fns.cc ****         calc_lcd_redraw();
3410:dm/dm42_fns.cc ****         wait_for_key_release(-1);
3411:dm/dm42_fns.cc ****       } else {
3412:dm/dm42_fns.cc ****         // Just beep :)
ARM GAS  /tmp/ccGYckNR.s 			page 294


3413:dm/dm42_fns.cc ****         shell_beeper(1835, 125);
3414:dm/dm42_fns.cc ****       }
3415:dm/dm42_fns.cc ****     }
3416:dm/dm42_fns.cc **** 
3417:dm/dm42_fns.cc ****     // == Key press
3418:dm/dm42_fns.cc ****     if ( key > 0 ) {
3419:dm/dm42_fns.cc ****       if ( sys_timer_active(TIMER3) && key != KEY_SHIFT ) {
 11849              		.loc 1 3419 0
 11850 03e0 754B     		ldr	r3, .L1712+36
 11851 03e2 0120     		movs	r0, #1
 11852 03e4 9847     		blx	r3
 11853              	.LVL1173:
 11854 03e6 40B1     		cbz	r0, .L1494
 11855              		.loc 1 3419 0 is_stmt 0 discriminator 1
 11856 03e8 BAF11C0F 		cmp	r10, #28
 11857 03ec 05D0     		beq	.L1494
 11858              	.LVL1174:
 11859              	.L1495:
 11860              	.LBB944:
 11861              	.LBB945:
2625:dm/dm42_fns.cc **** }
 11862              		.loc 1 2625 0 is_stmt 1
 11863 03ee 0120     		movs	r0, #1
 11864 03f0 724B     		ldr	r3, .L1712+40
 11865 03f2 9847     		blx	r3
 11866              	.LVL1175:
 11867              	.LBE945:
 11868              	.LBE944:
3420:dm/dm42_fns.cc ****         clearTimeout3();
3421:dm/dm42_fns.cc ****         core_timeout3(0);
 11869              		.loc 1 3421 0
 11870 03f4 0020     		movs	r0, #0
 11871 03f6 FFF7FEFF 		bl	_Z13core_timeout3i
 11872              	.LVL1176:
 11873              	.L1494:
3422:dm/dm42_fns.cc ****       }
3423:dm/dm42_fns.cc **** 
3424:dm/dm42_fns.cc ****       // We don't want to process other key when exiting
3425:dm/dm42_fns.cc ****       if (ST(STAT_PGM_END)) continue;
 11874              		.loc 1 3425 0
 11875 03fa 2368     		ldr	r3, [r4]
 11876 03fc 9905     		lsls	r1, r3, #22
 11877 03fe 40F1DE81 		bpl	.L1688
 11878              	.L1561:
 11879 0402 4FF0000A 		mov	r10, #0
 11880 0406 35E6     		b	.L1322
 11881              	.LVL1177:
 11882              	.L1677:
 11883              	.LBB946:
 11884              	.LBB841:
2679:dm/dm42_fns.cc **** 
 11885              		.loc 1 2679 0
 11886 0408 2368     		ldr	r3, [r4]
 11887 040a 5A06     		lsls	r2, r3, #25
 11888 040c 40F12184 		bpl	.L1530
 11889              	.L1652:
 11890 0410 3368     		ldr	r3, [r6]
ARM GAS  /tmp/ccGYckNR.s 			page 295


 11891 0412 03F00803 		and	r3, r3, #8
 11892              	.LBE841:
 11893              	.LBE946:
2895:dm/dm42_fns.cc ****         disp_regs(LCD_UPD_DFLT);
 11894              		.loc 1 2895 0
 11895 0416 002B     		cmp	r3, #0
 11896 0418 3FF468AE 		beq	.L1350
 11897 041c 5EE6     		b	.L1349
 11898              	.LVL1178:
 11899              	.L1439:
3228:dm/dm42_fns.cc ****     }
 11900              		.loc 1 3228 0
 11901 041e 684B     		ldr	r3, .L1712+44
 11902 0420 9847     		blx	r3
 11903              	.LVL1179:
 11904 0422 8246     		mov	r10, r0
 11905              	.LVL1180:
 11906              	.LBB947:
3250:dm/dm42_fns.cc ****       int consume_key = 1;
 11907              		.loc 1 3250 0
 11908 0424 FFF7FEFF 		bl	_Z9core_menuv
 11909              	.LVL1181:
 11910 0428 8346     		mov	fp, r0
 11911 042a 20B9     		cbnz	r0, .L1445
3250:dm/dm42_fns.cc ****       int consume_key = 1;
 11912              		.loc 1 3250 0 is_stmt 0 discriminator 1
 11913 042c AAF12603 		sub	r3, r10, #38
 11914 0430 052B     		cmp	r3, #5
 11915 0432 40F2A480 		bls	.L1446
 11916              	.L1445:
 11917              	.LBE947:
3324:dm/dm42_fns.cc ****       start_buzzer_freq(4400); sys_delay(10); stop_buzzer();
 11918              		.loc 1 3324 0 is_stmt 1
 11919 0436 BAF12C0F 		cmp	r10, #44
 11920 043a 40F00481 		bne	.L1467
3325:dm/dm42_fns.cc ****       // Turn OFF SHIFT
 11921              		.loc 1 3325 0
 11922 043e 614B     		ldr	r3, .L1712+48
 11923 0440 41F23010 		movw	r0, #4400
 11924 0444 9847     		blx	r3
 11925              	.LVL1182:
 11926 0446 564B     		ldr	r3, .L1712+12
 11927 0448 0A20     		movs	r0, #10
 11928 044a 9847     		blx	r3
 11929              	.LVL1183:
 11930 044c 5E4B     		ldr	r3, .L1712+52
 11931 044e 9847     		blx	r3
 11932              	.LVL1184:
3327:dm/dm42_fns.cc ****         keep_running = core_keydown(KEY_SHIFT, &enqueued, &repeat);
 11933              		.loc 1 3327 0
 11934 0450 564B     		ldr	r3, .L1712+24
 11935 0452 1B68     		ldr	r3, [r3]
 11936 0454 9907     		lsls	r1, r3, #30
 11937 0456 00F14F84 		bmi	.L1689
3330:dm/dm42_fns.cc ****         wait_for_key_press();
 11938              		.loc 1 3330 0
 11939 045a 5C4B     		ldr	r3, .L1712+56
ARM GAS  /tmp/ccGYckNR.s 			page 296


 11940 045c 0120     		movs	r0, #1
 11941 045e 9847     		blx	r3
 11942              	.LVL1185:
 11943 0460 0228     		cmp	r0, #2
 11944 0462 00F05584 		beq	.L1690
 11945              	.L1469:
3334:dm/dm42_fns.cc ****       key = -1;
 11946              		.loc 1 3334 0
 11947 0466 574B     		ldr	r3, .L1712+48
 11948 0468 42F26020 		movw	r0, #8800
 11949 046c 9847     		blx	r3
 11950              	.LVL1186:
 11951 046e 4C4B     		ldr	r3, .L1712+12
 11952 0470 0A20     		movs	r0, #10
 11953 0472 9847     		blx	r3
 11954              	.LVL1187:
 11955 0474 544B     		ldr	r3, .L1712+52
 11956 0476 9847     		blx	r3
 11957              	.LVL1188:
 11958              	.L1662:
3343:dm/dm42_fns.cc **** 
 11959              		.loc 1 3343 0
 11960 0478 FFF7FEFF 		bl	update_aplha_table
 11961              	.LVL1189:
3345:dm/dm42_fns.cc ****       if ( key == KEY_UP ) {
 11962              		.loc 1 3345 0
 11963 047c 4A4B     		ldr	r3, .L1712+20
 11964 047e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11965 0480 0F2B     		cmp	r3, #15
 11966 0482 80D1     		bne	.L1654
3369:dm/dm42_fns.cc ****     no_menu_key = is_menu_active && key > 0 && key < 7;
 11967              		.loc 1 3369 0
 11968 0484 FFF7FEFF 		bl	_Z9core_menuv
 11969              	.LVL1190:
 11970 0488 4FF0FF33 		mov	r3, #-1
 11971 048c 9A46     		mov	r10, r3
 11972 048e 0028     		cmp	r0, #0
 11973 0490 00F00684 		beq	.L1691
 11974 0494 0022     		movs	r2, #0
 11975 0496 0092     		str	r2, [sp]
 11976 0498 0121     		movs	r1, #1
 11977              	.LVL1191:
 11978              	.L1484:
 11979              	.LBB948:
3389:dm/dm42_fns.cc ****         key -= MAX_KEY_NR; // Translate FN keys to codes 1-6
 11980              		.loc 1 3389 0
 11981 049a 263B     		subs	r3, r3, #38
 11982 049c 052B     		cmp	r3, #5
 11983 049e 00F27D81 		bhi	.L1487
3389:dm/dm42_fns.cc ****         key -= MAX_KEY_NR; // Translate FN keys to codes 1-6
 11984              		.loc 1 3389 0 is_stmt 0 discriminator 1
 11985 04a2 0029     		cmp	r1, #0
 11986 04a4 00F0BF81 		beq	.L1489
3390:dm/dm42_fns.cc ****       }
 11987              		.loc 1 3390 0 is_stmt 1
 11988 04a8 AAF1250A 		sub	r10, r10, #37
 11989              	.LVL1192:
ARM GAS  /tmp/ccGYckNR.s 			page 297


 11990 04ac 98E7     		b	.L1521
 11991              	.LVL1193:
 11992              	.L1429:
 11993              	.LBE948:
3174:dm/dm42_fns.cc ****         repeat_timeout = 2;
 11994              		.loc 1 3174 0
 11995 04ae 0120     		movs	r0, #1
 11996 04b0 D847     		blx	fp
 11997              	.LVL1194:
 11998 04b2 0028     		cmp	r0, #0
 11999 04b4 3FF4C8AE 		beq	.L1430
3175:dm/dm42_fns.cc ****     }
 12000              		.loc 1 3175 0
 12001 04b8 454A     		ldr	r2, .L1712+60
 12002 04ba 0223     		movs	r3, #2
 12003 04bc 1360     		str	r3, [r2]
 12004 04be C3E6     		b	.L1430
 12005              	.L1679:
2868:dm/dm42_fns.cc ****           if ( header_timeout() || (LCD_CHG_FORCE & lcd_changed) )
 12006              		.loc 1 2868 0
 12007 04c0 4FF0FF30 		mov	r0, #-1
 12008 04c4 FFF7FEFF 		bl	disp_regs
 12009              	.LVL1195:
 12010 04c8 40E6     		b	.L1504
 12011              	.L1684:
3164:dm/dm42_fns.cc ****       core_repaint_display();
 12012              		.loc 1 3164 0
 12013 04ca 424A     		ldr	r2, .L1712+64
 12014 04cc 0023     		movs	r3, #0
 12015 04ce 1360     		str	r3, [r2]
3165:dm/dm42_fns.cc ****       skin_repaint_annunciator(0, 0); // Always repaint all
 12016              		.loc 1 3165 0
 12017 04d0 FFF7FEFF 		bl	_Z20core_repaint_displayv
 12018              	.LVL1196:
 12019              	.LBB949:
 12020              	.LBB950:
 12021              	.LBB951:
 12022              	.LBB952:
 770:dm/dm42_fns.cc **** 
 12023              		.loc 1 770 0
 12024 04d4 2368     		ldr	r3, [r4]
 12025 04d6 5906     		lsls	r1, r3, #25
 12026 04d8 3FF5ACAE 		bmi	.L1427
 12027              	.LBE952:
 12028              	.LBE951:
 12029 04dc FFF7FEFF 		bl	skin_repaint_annunciator.part.1
 12030              	.LVL1197:
 12031 04e0 A8E6     		b	.L1427
 12032              	.LVL1198:
 12033              	.L1681:
 12034              	.LBE950:
 12035              	.LBE949:
3040:dm/dm42_fns.cc ****       rtc_wakeup_delay();
 12036              		.loc 1 3040 0
 12037 04e2 3D4B     		ldr	r3, .L1712+68
 12038 04e4 9847     		blx	r3
 12039              	.LVL1199:
ARM GAS  /tmp/ccGYckNR.s 			page 298


3041:dm/dm42_fns.cc **** 
 12040              		.loc 1 3041 0
 12041 04e6 3D4B     		ldr	r3, .L1712+72
 12042 04e8 9847     		blx	r3
 12043              	.LVL1200:
3043:dm/dm42_fns.cc ****       resume_run = core_powercycle();
 12044              		.loc 1 3043 0
 12045 04ea 2368     		ldr	r3, [r4]
 12046 04ec 23F01003 		bic	r3, r3, #16
 12047 04f0 2360     		str	r3, [r4]
3044:dm/dm42_fns.cc ****       printf("Power ON: run=%i lcdclr=%i\n",resume_run,lcd_get_buf_cleared());
 12048              		.loc 1 3044 0
 12049 04f2 FFF7FEFF 		bl	_Z15core_powercyclev
 12050              	.LVL1201:
3053:dm/dm42_fns.cc ****         calc_lcd_redraw(); // Force complete repaint
 12051              		.loc 1 3053 0
 12052 04f6 3A4B     		ldr	r3, .L1712+76
3044:dm/dm42_fns.cc ****       printf("Power ON: run=%i lcdclr=%i\n",resume_run,lcd_get_buf_cleared());
 12053              		.loc 1 3044 0
 12054 04f8 8246     		mov	r10, r0
 12055              	.LVL1202:
3053:dm/dm42_fns.cc ****         calc_lcd_redraw(); // Force complete repaint
 12056              		.loc 1 3053 0
 12057 04fa 9847     		blx	r3
 12058              	.LVL1203:
 12059 04fc 0028     		cmp	r0, #0
 12060 04fe 00F0CD81 		beq	.L1392
3054:dm/dm42_fns.cc ****       else
 12061              		.loc 1 3054 0
 12062 0502 FFF7FEFF 		bl	calc_lcd_redraw
 12063              	.LVL1204:
 12064 0506 5DE6     		b	.L1393
 12065              	.L1685:
 12066              	.LBB953:
 12067              	.LBB862:
 12068              	.LBB859:
 12069              	.LBB851:
2915:dm/dm42_fns.cc **** 
 12070              		.loc 1 2915 0
 12071 0508 364A     		ldr	r2, .L1712+80
 12072 050a 1370     		strb	r3, [r2]
2917:dm/dm42_fns.cc **** 
 12073              		.loc 1 2917 0
 12074 050c 364B     		ldr	r3, .L1712+84
 12075 050e 9847     		blx	r3
 12076              	.LVL1205:
2920:dm/dm42_fns.cc ****           lcd_for_dm42(DISP_SAVING_STATE);
 12077              		.loc 1 2920 0
 12078 0510 2368     		ldr	r3, [r4]
 12079 0512 9B06     		lsls	r3, r3, #26
 12080 0514 40F18C83 		bpl	.L1692
 12081              	.L1357:
2930:dm/dm42_fns.cc **** 
 12082              		.loc 1 2930 0
 12083 0518 FFF7FEFF 		bl	_Z21core_enter_backgroundv
 12084              	.LVL1206:
 12085              	.LBB852:
ARM GAS  /tmp/ccGYckNR.s 			page 299


2932:dm/dm42_fns.cc ****           savestat_data_t dat;
 12086              		.loc 1 2932 0
 12087 051c 2768     		ldr	r7, [r4]
 12088              	.LVL1207:
 12089 051e 17F02007 		ands	r7, r7, #32
 12090 0522 00F04982 		beq	.L1693
 12091              	.L1360:
3005:dm/dm42_fns.cc ****           draw_power_off_image(is_graphics<=1);
 12092              		.loc 1 3005 0
 12093 0526 314B     		ldr	r3, .L1712+88
 12094 0528 0020     		movs	r0, #0
 12095 052a 9847     		blx	r3
 12096              	.LVL1208:
3006:dm/dm42_fns.cc ****           printf("--- run=%i lcdclr=%i\n",resume_run,lcd_get_buf_cleared());
 12097              		.loc 1 3006 0
 12098 052c 1B4B     		ldr	r3, .L1712+8
 12099 052e 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 12100 0530 2F4B     		ldr	r3, .L1712+92
 12101 0532 0128     		cmp	r0, #1
 12102 0534 CCBF     		ite	gt
 12103 0536 0020     		movgt	r0, #0
 12104 0538 0120     		movle	r0, #1
 12105 053a 9847     		blx	r3
 12106              	.LVL1209:
 12107              	.L1512:
 12108              	.LBE852:
3010:dm/dm42_fns.cc ****           sys_disk_write_enable(0);
 12109              		.loc 1 3010 0
 12110 053c 2D4B     		ldr	r3, .L1712+96
 12111 053e 9847     		blx	r3
 12112              	.LVL1210:
 12113 0540 0028     		cmp	r0, #0
 12114 0542 40F03582 		bne	.L1694
 12115              	.L1387:
3013:dm/dm42_fns.cc ****           // Disk fail means statefile isn't saved and everything
 12116              		.loc 1 3013 0
 12117 0546 2368     		ldr	r3, [r4]
 12118 0548 9F06     		lsls	r7, r3, #26
 12119 054a 40F12482 		bpl	.L1695
 12120              	.L1389:
3022:dm/dm42_fns.cc ****         SET_ST(STAT_SUSPENDED);
 12121              		.loc 1 3022 0
 12122 054e 2A4B     		ldr	r3, .L1712+100
 12123 0550 9847     		blx	r3
 12124              	.LVL1211:
3023:dm/dm42_fns.cc ****         LCD_power_off(0);
 12125              		.loc 1 3023 0
 12126 0552 2368     		ldr	r3, [r4]
3024:dm/dm42_fns.cc ****         SET_ST(STAT_OFF);
 12127              		.loc 1 3024 0
 12128 0554 294A     		ldr	r2, .L1712+104
3023:dm/dm42_fns.cc ****         LCD_power_off(0);
 12129              		.loc 1 3023 0
 12130 0556 43F00403 		orr	r3, r3, #4
 12131 055a 2360     		str	r3, [r4]
3024:dm/dm42_fns.cc ****         SET_ST(STAT_OFF);
 12132              		.loc 1 3024 0
ARM GAS  /tmp/ccGYckNR.s 			page 300


 12133 055c 0020     		movs	r0, #0
 12134 055e 9047     		blx	r2
 12135              	.LVL1212:
3025:dm/dm42_fns.cc ****         sys_critical_end();
 12136              		.loc 1 3025 0
 12137 0560 2368     		ldr	r3, [r4]
3026:dm/dm42_fns.cc ****         // --
 12138              		.loc 1 3026 0
 12139 0562 274A     		ldr	r2, .L1712+108
3025:dm/dm42_fns.cc ****         sys_critical_end();
 12140              		.loc 1 3025 0
 12141 0564 43F01003 		orr	r3, r3, #16
 12142 0568 2360     		str	r3, [r4]
3026:dm/dm42_fns.cc ****         // --
 12143              		.loc 1 3026 0
 12144 056a 9047     		blx	r2
 12145              	.LVL1213:
 12146              	.LBE851:
 12147 056c 8DE6     		b	.L1510
 12148              	.LVL1214:
 12149              	.L1432:
 12150              	.LBE859:
 12151              	.LBE862:
 12152              	.LBE953:
 12153              	.LBB954:
 12154              	.LBB913:
 12155              	.LBB910:
3201:dm/dm42_fns.cc ****         clearTimeout3();
 12156              		.loc 1 3201 0
 12157 056e 0120     		movs	r0, #1
 12158 0570 FFF7FEFF 		bl	_Z13core_timeout3i
 12159              	.LVL1215:
 12160              	.LBB904:
 12161              	.LBB905:
2625:dm/dm42_fns.cc **** }
 12162              		.loc 1 2625 0
 12163 0574 114B     		ldr	r3, .L1712+40
 12164              	.LBE905:
 12165              	.LBE904:
3201:dm/dm42_fns.cc ****         clearTimeout3();
 12166              		.loc 1 3201 0
 12167 0576 0746     		mov	r7, r0
 12168              	.LVL1216:
 12169              	.LBB907:
 12170              	.LBB906:
2625:dm/dm42_fns.cc **** }
 12171              		.loc 1 2625 0
 12172 0578 0120     		movs	r0, #1
 12173              	.LVL1217:
 12174 057a 9847     		blx	r3
 12175              	.LVL1218:
 12176 057c 7CE6     		b	.L1433
 12177              	.LVL1219:
 12178              	.L1446:
 12179              	.LBE906:
 12180              	.LBE907:
 12181              	.LBE910:
ARM GAS  /tmp/ccGYckNR.s 			page 301


 12182              	.LBE913:
 12183              	.LBE954:
 12184              	.LBB955:
 12185              	.LBB920:
3254:dm/dm42_fns.cc ****         case KEY_F1:
 12186              		.loc 1 3254 0
 12187 057e 052B     		cmp	r3, #5
 12188 0580 50D8     		bhi	.L1449
 12189 0582 DFE813F0 		tbh	[pc, r3, lsl #1]
 12190              	.L1514:
 12191 0586 D100     		.2byte	(.L1447-.L1514)/2
 12192 0588 FD00     		.2byte	(.L1450-.L1514)/2
 12193 058a 4F00     		.2byte	(.L1449-.L1514)/2
 12194 058c 9800     		.2byte	(.L1452-.L1514)/2
 12195 058e 3F00     		.2byte	(.L1455-.L1514)/2
 12196 0590 EB00     		.2byte	(.L1460-.L1514)/2
 12197              		.p2align 1
 12198              	.L1713:
 12199 0592 00BF     		.align	2
 12200              	.L1712:
 12201 0594 7D030008 		.word	134218621
 12202 0598 DD020008 		.word	134218461
 12203 059c 00000000 		.word	.LANCHOR10
 12204 05a0 05040008 		.word	134218757
 12205 05a4 85030008 		.word	134218629
 12206 05a8 00000000 		.word	.LANCHOR5
 12207 05ac 00000000 		.word	.LANCHOR0
 12208 05b0 00000000 		.word	.LANCHOR45
 12209 05b4 00000000 		.word	.LANCHOR46
 12210 05b8 FD030008 		.word	134218749
 12211 05bc F5030008 		.word	134218741
 12212 05c0 89030008 		.word	134218633
 12213 05c4 F5020008 		.word	134218485
 12214 05c8 F9020008 		.word	134218489
 12215 05cc 79030008 		.word	134218617
 12216 05d0 00000000 		.word	.LANCHOR42
 12217 05d4 00000000 		.word	.LANCHOR43
 12218 05d8 19020008 		.word	134218265
 12219 05dc E5020008 		.word	134218469
 12220 05e0 59020008 		.word	134218329
 12221 05e4 00000000 		.word	.LANCHOR14
 12222 05e8 15020008 		.word	134218261
 12223 05ec 55020008 		.word	134218325
 12224 05f0 2D040008 		.word	134218797
 12225 05f4 E9030008 		.word	134218729
 12226 05f8 11040008 		.word	134218769
 12227 05fc 1D020008 		.word	134218269
 12228 0600 15040008 		.word	134218773
 12229              	.L1455:
3280:dm/dm42_fns.cc ****             // Shift-F5 = Toggle to HP font
 12230              		.loc 1 3280 0
 12231 0604 A84B     		ldr	r3, .L1714
 12232 0606 1B68     		ldr	r3, [r3]
 12233 0608 13F00203 		ands	r3, r3, #2
 12234 060c 40F08A83 		bne	.L1696
3288:dm/dm42_fns.cc ****             if(draw_reg_mode > DRAW_REG_MODE_MAX) draw_reg_mode=0;
 12235              		.loc 1 3288 0
ARM GAS  /tmp/ccGYckNR.s 			page 302


 12236 0610 A64A     		ldr	r2, .L1714+4
 12237 0612 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 12238 0614 0132     		adds	r2, r2, #1
 12239 0616 D2B2     		uxtb	r2, r2
3289:dm/dm42_fns.cc ****           }
 12240              		.loc 1 3289 0
 12241 0618 022A     		cmp	r2, #2
3288:dm/dm42_fns.cc ****             if(draw_reg_mode > DRAW_REG_MODE_MAX) draw_reg_mode=0;
 12242              		.loc 1 3288 0
 12243 061a 95BF     		itete	ls
 12244 061c A34B     		ldrls	r3, .L1714+4
3289:dm/dm42_fns.cc ****           }
 12245              		.loc 1 3289 0
 12246 061e A34A     		ldrhi	r2, .L1714+4
3288:dm/dm42_fns.cc ****             if(draw_reg_mode > DRAW_REG_MODE_MAX) draw_reg_mode=0;
 12247              		.loc 1 3288 0
 12248 0620 1A70     		strbls	r2, [r3]
3289:dm/dm42_fns.cc ****           }
 12249              		.loc 1 3289 0
 12250 0622 1370     		strbhi	r3, [r2]
 12251              	.L1449:
3311:dm/dm42_fns.cc ****         clr_shift();
 12252              		.loc 1 3311 0
 12253 0624 A04B     		ldr	r3, .L1714
 12254 0626 1B68     		ldr	r3, [r3]
 12255 0628 9907     		lsls	r1, r3, #30
 12256 062a 40F18B80 		bpl	.L1464
 12257              	.L1515:
 12258              	.LBB921:
 12259              	.LBB922:
 12260              	.LBB923:
2786:dm/dm42_fns.cc ****     int key = 28; // Turn off shift
 12261              		.loc 1 2786 0
 12262 062e 9E4B     		ldr	r3, .L1714
 12263 0630 1B68     		ldr	r3, [r3]
 12264 0632 9B07     		lsls	r3, r3, #30
 12265 0634 40F18680 		bpl	.L1464
 12266 0638 4FF0010B 		mov	fp, #1
 12267              	.LVL1220:
 12268              	.L1536:
 12269              	.LBE923:
 12270 063c FFF7FEFF 		bl	clr_shift.part.13
 12271              	.LVL1221:
 12272              	.LBE922:
 12273              	.LBE921:
3314:dm/dm42_fns.cc **** 
 12274              		.loc 1 3314 0
 12275 0640 BBF1000F 		cmp	fp, #0
 12276 0644 7ED1     		bne	.L1464
 12277              	.L1467:
 12278              	.LBE920:
 12279              	.LBE955:
3338:dm/dm42_fns.cc ****       key = -1; // Ignore double key release
 12280              		.loc 1 3338 0
 12281 0646 BAF1630F 		cmp	r10, #99
 12282 064a 3FF415AF 		beq	.L1662
3343:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 303


 12283              		.loc 1 3343 0
 12284 064e FFF7FEFF 		bl	update_aplha_table
 12285              	.LVL1222:
3345:dm/dm42_fns.cc ****       if ( key == KEY_UP ) {
 12286              		.loc 1 3345 0
 12287 0652 974B     		ldr	r3, .L1714+8
 12288 0654 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12289 0656 0F2B     		cmp	r3, #15
 12290 0658 3FF499AE 		beq	.L1644
3345:dm/dm42_fns.cc ****       if ( key == KEY_UP ) {
 12291              		.loc 1 3345 0 is_stmt 0 discriminator 1
 12292 065c 924A     		ldr	r2, .L1714
 12293 065e 1268     		ldr	r2, [r2]
 12294 0660 9207     		lsls	r2, r2, #30
 12295 0662 3FD4     		bmi	.L1472
 12296              	.L1478:
3358:dm/dm42_fns.cc ****         set_shift();
 12297              		.loc 1 3358 0 is_stmt 1
 12298 0664 BAF12D0F 		cmp	r10, #45
 12299 0668 00F07E81 		beq	.L1697
 12300              	.LVL1223:
 12301              	.L1473:
3362:dm/dm42_fns.cc ****         set_shift();
 12302              		.loc 1 3362 0
 12303 066c BAF12E0F 		cmp	r10, #46
 12304 0670 7FF48DAE 		bne	.L1644
 12305              	.LBB956:
 12306              	.LBB957:
 12307              	.LBB958:
2794:dm/dm42_fns.cc ****     int key = 28; // Turn off shift
 12308              		.loc 1 2794 0
 12309 0674 8C4B     		ldr	r3, .L1714
 12310 0676 1B68     		ldr	r3, [r3]
 12311 0678 9807     		lsls	r0, r3, #30
 12312              	.LBE958:
 12313 067a 4FF0170A 		mov	r10, #23
 12314              	.LVL1224:
 12315              	.LBB959:
 12316 067e 40F12283 		bpl	.L1698
 12317              	.LBE959:
 12318              	.LBE957:
 12319              	.LBE956:
3364:dm/dm42_fns.cc ****       }
 12320              		.loc 1 3364 0
 12321 0682 5346     		mov	r3, r10
 12322              	.LBB963:
 12323              	.LBB961:
 12324              	.LBB960:
2794:dm/dm42_fns.cc ****     int key = 28; // Turn off shift
 12325              		.loc 1 2794 0
 12326 0684 4FF0160B 		mov	fp, #22
 12327              	.L1480:
 12328              	.LVL1225:
 12329 0688 0093     		str	r3, [sp]
 12330              	.LBE960:
 12331              	.LBE961:
 12332              	.LBE963:
ARM GAS  /tmp/ccGYckNR.s 			page 304


3369:dm/dm42_fns.cc ****     no_menu_key = is_menu_active && key > 0 && key < 7;
 12333              		.loc 1 3369 0
 12334 068a FFF7FEFF 		bl	_Z9core_menuv
 12335              	.LVL1226:
 12336 068e 009B     		ldr	r3, [sp]
 12337 0690 0028     		cmp	r0, #0
 12338 0692 41D1     		bne	.L1518
 12339              	.LVL1227:
 12340              	.L1533:
 12341 0694 0093     		str	r3, [sp]
 12342 0696 FFF7FEFF 		bl	_Z13core_hex_menuv
 12343              	.LVL1228:
 12344 069a 009B     		ldr	r3, [sp]
 12345 069c 0028     		cmp	r0, #0
 12346 069e 3BD1     		bne	.L1518
 12347              	.L1538:
 12348 06a0 0193     		str	r3, [sp, #4]
3369:dm/dm42_fns.cc ****     no_menu_key = is_menu_active && key > 0 && key < 7;
 12349              		.loc 1 3369 0 is_stmt 0 discriminator 4
 12350 06a2 FFF7FEFF 		bl	_Z15core_alpha_menuv
 12351              	.LVL1229:
 12352 06a6 019B     		ldr	r3, [sp, #4]
 12353 06a8 0090     		str	r0, [sp]
 12354 06aa 0246     		mov	r2, r0
 12355 06ac 0028     		cmp	r0, #0
 12356 06ae 7FF478AE 		bne	.L1482
3369:dm/dm42_fns.cc ****     no_menu_key = is_menu_active && key > 0 && key < 7;
 12357              		.loc 1 3369 0
 12358 06b2 0146     		mov	r1, r0
 12359 06b4 7CE6     		b	.L1483
 12360              	.LVL1230:
 12361              	.L1452:
 12362              	.LBB964:
 12363              	.LBB937:
3274:dm/dm42_fns.cc ****           consume_key = 0; // We want the beep (by passing invalid key to core)
 12364              		.loc 1 3274 0 is_stmt 1
 12365 06b6 7C4B     		ldr	r3, .L1714
 12366 06b8 1B68     		ldr	r3, [r3]
 12367 06ba 9B07     		lsls	r3, r3, #30
 12368 06bc 4CBF     		ite	mi
 12369 06be 7D4B     		ldrmi	r3, .L1714+12
 12370 06c0 7D4B     		ldrpl	r3, .L1714+16
 12371 06c2 9847     		blx	r3
 12372              	.LVL1231:
3311:dm/dm42_fns.cc ****         clr_shift();
 12373              		.loc 1 3311 0
 12374 06c4 784B     		ldr	r3, .L1714
 12375 06c6 1B68     		ldr	r3, [r3]
 12376 06c8 9B07     		lsls	r3, r3, #30
 12377 06ca 00F15784 		bmi	.L1534
 12378              	.LVL1232:
 12379              	.LBE937:
 12380              	.LBE964:
3343:dm/dm42_fns.cc **** 
 12381              		.loc 1 3343 0
 12382 06ce FFF7FEFF 		bl	update_aplha_table
 12383              	.LVL1233:
ARM GAS  /tmp/ccGYckNR.s 			page 305


3345:dm/dm42_fns.cc ****       if ( key == KEY_UP ) {
 12384              		.loc 1 3345 0
 12385 06d2 774B     		ldr	r3, .L1714+8
 12386 06d4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12387 06d6 0F2B     		cmp	r3, #15
 12388 06d8 3FF459AE 		beq	.L1644
 12389 06dc 724A     		ldr	r2, .L1714
 12390 06de 1268     		ldr	r2, [r2]
 12391 06e0 9007     		lsls	r0, r2, #30
 12392 06e2 C3D5     		bpl	.L1473
 12393              	.LVL1234:
 12394              	.L1472:
3346:dm/dm42_fns.cc ****         alpha_table = (alpha_table+1)%ALPHA_TABLE_COUNT;
 12395              		.loc 1 3346 0
 12396 06e4 BAF1120F 		cmp	r10, #18
 12397 06e8 00F0BD82 		beq	.L1699
 12398              	.LVL1235:
3350:dm/dm42_fns.cc ****         alpha_table = (alpha_table+ALPHA_TABLE_COUNT-1)%ALPHA_TABLE_COUNT;
 12399              		.loc 1 3350 0
 12400 06ec BAF1170F 		cmp	r10, #23
 12401 06f0 B8D1     		bne	.L1478
3351:dm/dm42_fns.cc ****         key = KEY_SHIFT;
 12402              		.loc 1 3351 0
 12403 06f2 724A     		ldr	r2, .L1714+20
 12404 06f4 0233     		adds	r3, r3, #2
 12405              	.LVL1236:
 12406              	.L1657:
 12407 06f6 82FB0312 		smull	r1, r2, r2, r3
 12408 06fa A2EBE372 		sub	r2, r2, r3, asr #31
 12409 06fe 02EB4202 		add	r2, r2, r2, lsl #1
 12410 0702 9B1A     		subs	r3, r3, r2
 12411 0704 6A4A     		ldr	r2, .L1714+8
 12412 0706 1370     		strb	r3, [r2]
 12413              	.LVL1237:
3369:dm/dm42_fns.cc ****     no_menu_key = is_menu_active && key > 0 && key < 7;
 12414              		.loc 1 3369 0
 12415 0708 FFF7FEFF 		bl	_Z9core_menuv
 12416              	.LVL1238:
 12417 070c 1C23     		movs	r3, #28
 12418 070e 9A46     		mov	r10, r3
 12419 0710 4FF01B0B 		mov	fp, #27
 12420 0714 0028     		cmp	r0, #0
 12421 0716 BDD0     		beq	.L1533
 12422              	.LVL1239:
 12423              	.L1518:
3370:dm/dm42_fns.cc **** 
 12424              		.loc 1 3370 0 discriminator 3
 12425 0718 BAF1060F 		cmp	r10, #6
 12426 071c CCBF     		ite	gt
 12427 071e 0022     		movgt	r2, #0
 12428 0720 0122     		movle	r2, #1
 12429 0722 0092     		str	r2, [sp]
 12430 0724 0121     		movs	r1, #1
 12431 0726 43E6     		b	.L1483
 12432              	.LVL1240:
 12433              	.L1447:
 12434              	.LBB965:
ARM GAS  /tmp/ccGYckNR.s 			page 306


 12435              	.LBB938:
3259:dm/dm42_fns.cc ****             run_help();
 12436              		.loc 1 3259 0
 12437 0728 5F4B     		ldr	r3, .L1714
 12438 072a 1B68     		ldr	r3, [r3]
 12439 072c 1A07     		lsls	r2, r3, #28
 12440 072e 3FF579AF 		bmi	.L1449
3260:dm/dm42_fns.cc ****             calc_lcd_redraw();
 12441              		.loc 1 3260 0
 12442 0732 634B     		ldr	r3, .L1714+24
 12443 0734 9847     		blx	r3
 12444              	.LVL1241:
3261:dm/dm42_fns.cc ****           } 
 12445              		.loc 1 3261 0
 12446 0736 FFF7FEFF 		bl	calc_lcd_redraw
 12447              	.LVL1242:
3311:dm/dm42_fns.cc ****         clr_shift();
 12448              		.loc 1 3311 0
 12449 073a 5B4B     		ldr	r3, .L1714
 12450 073c 1B68     		ldr	r3, [r3]
 12451 073e 9907     		lsls	r1, r3, #30
 12452 0740 3FF575AF 		bmi	.L1515
 12453              	.LVL1243:
 12454              	.L1464:
3316:dm/dm42_fns.cc ****         disp_regs(LCD_UPD_DFLT);
 12455              		.loc 1 3316 0
 12456 0744 584B     		ldr	r3, .L1714
 12457 0746 1B68     		ldr	r3, [r3]
 12458 0748 1907     		lsls	r1, r3, #28
 12459 074a 3FF516AE 		bmi	.L1659
3317:dm/dm42_fns.cc ****         lcd_refresh();
 12460              		.loc 1 3317 0
 12461 074e 4FF0FF30 		mov	r0, #-1
 12462 0752 FFF7FEFF 		bl	disp_regs
 12463              	.LVL1244:
3318:dm/dm42_fns.cc ****       }
 12464              		.loc 1 3318 0
 12465 0756 5B4B     		ldr	r3, .L1714+28
 12466 0758 9847     		blx	r3
 12467              	.LVL1245:
 12468 075a 0EE6     		b	.L1659
 12469              	.LVL1246:
 12470              	.L1460:
3294:dm/dm42_fns.cc ****             // Shift-F6 = decrease font size
 12471              		.loc 1 3294 0
 12472 075c 524B     		ldr	r3, .L1714
 12473 075e 1B68     		ldr	r3, [r3]
 12474 0760 9807     		lsls	r0, r3, #30
 12475 0762 40F1BC82 		bpl	.L1461
3296:dm/dm42_fns.cc ****               pgm_font_ix = lcd_prevFontNr(pgm_font_ix);
 12476              		.loc 1 3296 0
 12477 0766 FFF7FEFF 		bl	is_pgm_mode
 12478              	.LVL1247:
3297:dm/dm42_fns.cc ****             else
 12479              		.loc 1 3297 0
 12480 076a 574B     		ldr	r3, .L1714+32
3296:dm/dm42_fns.cc ****               pgm_font_ix = lcd_prevFontNr(pgm_font_ix);
ARM GAS  /tmp/ccGYckNR.s 			page 307


 12481              		.loc 1 3296 0
 12482 076c 0028     		cmp	r0, #0
 12483 076e 00F0BC82 		beq	.L1463
 12484              	.L1656:
3303:dm/dm42_fns.cc ****             else
 12485              		.loc 1 3303 0
 12486 0772 564A     		ldr	r2, .L1714+36
 12487 0774 92F90000 		ldrsb	r0, [r2]
 12488 0778 9847     		blx	r3
 12489              	.LVL1248:
 12490 077a 544B     		ldr	r3, .L1714+36
 12491 077c 1870     		strb	r0, [r3]
 12492 077e 51E7     		b	.L1449
 12493              	.L1450:
 12494              	.LBB926:
 12495              	.LBB927:
1669:dm/dm42_fns.cc **** }
 12496              		.loc 1 1669 0
 12497 0780 534B     		ldr	r3, .L1714+40
 12498              	.LBE927:
 12499              	.LBE926:
 12500              	.LBB929:
 12501              	.LBB930:
1665:dm/dm42_fns.cc **** }
 12502              		.loc 1 1665 0
 12503 0782 534A     		ldr	r2, .L1714+40
 12504              	.LBE930:
 12505              	.LBE929:
 12506              	.LBB934:
 12507              	.LBB928:
1669:dm/dm42_fns.cc **** }
 12508              		.loc 1 1669 0
 12509 0784 1B68     		ldr	r3, [r3]
 12510              	.LVL1249:
 12511              	.LBE928:
 12512              	.LBE934:
 12513              	.LBB935:
 12514              	.LBB933:
1665:dm/dm42_fns.cc **** }
 12515              		.loc 1 1665 0
 12516 0786 13F4807F 		tst	r3, #256
 12517              	.LBB931:
 12518              	.LBB932:
 12519 078a 514B     		ldr	r3, .L1714+40
 12520              	.LVL1250:
 12521 078c 1B68     		ldr	r3, [r3]
 12522              	.LVL1251:
 12523 078e 0CBF     		ite	eq
 12524 0790 43F48073 		orreq	r3, r3, #256
 12525              	.LBE932:
 12526              	.LBE931:
 12527 0794 23F48073 		bicne	r3, r3, #256
 12528 0798 1360     		str	r3, [r2]
 12529 079a 43E7     		b	.L1449
 12530              	.LVL1252:
 12531              	.L1487:
 12532              	.LBE933:
ARM GAS  /tmp/ccGYckNR.s 			page 308


 12533              	.LBE935:
 12534              	.LBE938:
 12535              	.LBE965:
 12536              	.LBB966:
3396:dm/dm42_fns.cc ****       key = KEY_SHIFT; // Key remains SHIFT to turn the shift off or rewrite for special actions
 12537              		.loc 1 3396 0
 12538 079c BAF1220F 		cmp	r10, #34
 12539 07a0 41D1     		bne	.L1489
3396:dm/dm42_fns.cc ****       key = KEY_SHIFT; // Key remains SHIFT to turn the shift off or rewrite for special actions
 12540              		.loc 1 3396 0 is_stmt 0 discriminator 1
 12541 07a2 414B     		ldr	r3, .L1714
 12542 07a4 1B68     		ldr	r3, [r3]
 12543 07a6 9807     		lsls	r0, r3, #30
 12544 07a8 21D4     		bmi	.L1490
 12545              	.LVL1253:
 12546              	.LBE966:
3419:dm/dm42_fns.cc ****         clearTimeout3();
 12547              		.loc 1 3419 0 is_stmt 1
 12548 07aa 4A4B     		ldr	r3, .L1714+44
 12549 07ac 0120     		movs	r0, #1
 12550 07ae 9847     		blx	r3
 12551              	.LVL1254:
 12552 07b0 0028     		cmp	r0, #0
 12553 07b2 7FF41CAE 		bne	.L1495
 12554              		.loc 1 3425 0
 12555 07b6 2368     		ldr	r3, [r4]
 12556 07b8 9905     		lsls	r1, r3, #22
 12557 07ba 3FF522AE 		bmi	.L1561
 12558              	.LVL1255:
 12559              	.L1688:
3426:dm/dm42_fns.cc **** 
3427:dm/dm42_fns.cc ****       // Press key
3428:dm/dm42_fns.cc ****       printf("key press %i nomenu=%i\n",key,no_menu_key);
3429:dm/dm42_fns.cc ****       mark_region(MARK_42_KEYP);
 12560              		.loc 1 3429 0
 12561 07be 464B     		ldr	r3, .L1714+48
 12562 07c0 4648     		ldr	r0, .L1714+52
 12563 07c2 9847     		blx	r3
 12564              	.LVL1256:
3430:dm/dm42_fns.cc ****       keep_running = core_keydown_ex(key, &enqueued, &repeat, no_menu_key);
 12565              		.loc 1 3430 0
 12566 07c4 009B     		ldr	r3, [sp]
 12567 07c6 04AA     		add	r2, sp, #16
 12568 07c8 03A9     		add	r1, sp, #12
 12569 07ca 5046     		mov	r0, r10
 12570 07cc FFF7FEFF 		bl	core_keydown_ex
 12571              	.LVL1257:
3431:dm/dm42_fns.cc ****       no_region();
 12572              		.loc 1 3431 0
 12573 07d0 434B     		ldr	r3, .L1714+56
3430:dm/dm42_fns.cc ****       keep_running = core_keydown_ex(key, &enqueued, &repeat, no_menu_key);
 12574              		.loc 1 3430 0
 12575 07d2 0746     		mov	r7, r0
 12576              	.LVL1258:
 12577              		.loc 1 3431 0
 12578 07d4 9847     		blx	r3
 12579              	.LVL1259:
ARM GAS  /tmp/ccGYckNR.s 			page 309


3432:dm/dm42_fns.cc ****       printf("end of keydown: keep_running=%i  enqueued=%i  repeat=%i\n", keep_running, enqueued, r
3433:dm/dm42_fns.cc **** 
3434:dm/dm42_fns.cc ****       if ( keep_running ) {
 12580              		.loc 1 3434 0
 12581 07d6 002F     		cmp	r7, #0
 12582 07d8 3AD1     		bne	.L1501
3435:dm/dm42_fns.cc ****         // keep running
3436:dm/dm42_fns.cc ****       } else {
3437:dm/dm42_fns.cc ****         // Set timeouts
3438:dm/dm42_fns.cc ****         if (repeat != 0) {
 12583              		.loc 1 3438 0
 12584 07da 049B     		ldr	r3, [sp, #16]
 12585 07dc 002B     		cmp	r3, #0
 12586 07de 40F0A782 		bne	.L1700
3439:dm/dm42_fns.cc ****           if ( is_pgm_mode() && !is_slow_autorepeat()  && (sys_last_key() == KEY_UP || sys_last_key
3440:dm/dm42_fns.cc ****             setTimeout0(TIMEOUT_REPEAT, repeat == 1 ?  400 : 200); // First repeat is longer
3441:dm/dm42_fns.cc ****           else
3442:dm/dm42_fns.cc ****             setTimeout0(TIMEOUT_REPEAT, repeat == 1 ? 1000 : 500); // First repeat is longer
3443:dm/dm42_fns.cc ****         }
3444:dm/dm42_fns.cc ****         else if (!enqueued)
 12587              		.loc 1 3444 0
 12588 07e2 039F     		ldr	r7, [sp, #12]
 12589              	.LVL1260:
 12590 07e4 002F     		cmp	r7, #0
 12591 07e6 00F07983 		beq	.L1701
 12592              	.L1655:
 12593 07ea 0027     		movs	r7, #0
 12594 07ec 30E0     		b	.L1501
 12595              	.LVL1261:
 12596              	.L1490:
 12597              	.LBB979:
 12598              	.LBB967:
 12599              	.LBB968:
3401:dm/dm42_fns.cc ****         SET_ST(STAT_MENU);
 12600              		.loc 1 3401 0
 12601 07ee 2E4B     		ldr	r3, .L1714
 12602 07f0 1A68     		ldr	r2, [r3]
 12603 07f2 12F00802 		ands	r2, r2, #8
 12604 07f6 04D1     		bne	.L1493
3401:dm/dm42_fns.cc ****         SET_ST(STAT_MENU);
 12605              		.loc 1 3401 0 is_stmt 0 discriminator 1
 12606 07f8 3A4B     		ldr	r3, .L1714+60
 12607 07fa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12608 07fc 012B     		cmp	r3, #1
 12609 07fe 40F38380 		ble	.L1702
 12610              	.L1493:
3413:dm/dm42_fns.cc ****       }
 12611              		.loc 1 3413 0 is_stmt 1
 12612 0802 7D21     		movs	r1, #125
 12613 0804 40F22B70 		movw	r0, #1835
 12614 0808 FFF7FEFF 		bl	_Z12shell_beeperii
 12615              	.LVL1262:
 12616              	.LBE968:
 12617              	.LBE967:
 12618              	.LBE979:
3419:dm/dm42_fns.cc ****         clearTimeout3();
 12619              		.loc 1 3419 0
ARM GAS  /tmp/ccGYckNR.s 			page 310


 12620 080c 314B     		ldr	r3, .L1714+44
 12621 080e 0120     		movs	r0, #1
 12622 0810 9847     		blx	r3
 12623              	.LVL1263:
 12624              	.LBB980:
 12625              	.LBB975:
3397:dm/dm42_fns.cc ****       
 12626              		.loc 1 3397 0
 12627 0812 4FF01C0A 		mov	r10, #28
 12628 0816 F0E5     		b	.L1494
 12629              	.LVL1264:
 12630              	.L1680:
 12631              	.LBE975:
 12632              	.LBE980:
 12633              	.LBB981:
 12634              	.LBB847:
2679:dm/dm42_fns.cc **** 
 12635              		.loc 1 2679 0
 12636 0818 2368     		ldr	r3, [r4]
 12637 081a 5806     		lsls	r0, r3, #25
 12638 081c 3FF5ABAC 		bmi	.L1338
 12639              	.L1528:
 12640 0820 FFF7FEFF 		bl	disp_header.part.11
 12641              	.LVL1265:
 12642 0824 A7E4     		b	.L1338
 12643              	.LVL1266:
 12644              	.L1489:
 12645              	.LBE847:
 12646              	.LBE981:
3418:dm/dm42_fns.cc ****       if ( sys_timer_active(TIMER3) && key != KEY_SHIFT ) {
 12647              		.loc 1 3418 0
 12648 0826 BAF1000F 		cmp	r10, #0
 12649 082a 3FF7D9AD 		bgt	.L1521
3445:dm/dm42_fns.cc ****           setTimeout0(TIMEOUT_CORE1, 250);
3446:dm/dm42_fns.cc ****       }
3447:dm/dm42_fns.cc ****     }
3448:dm/dm42_fns.cc **** 
3449:dm/dm42_fns.cc ****     // == Key up
3450:dm/dm42_fns.cc ****     if ( key == 0 ) {
 12650              		.loc 1 3450 0
 12651 082e 00F0A680 		beq	.L1703
3451:dm/dm42_fns.cc ****       clearTimeout0();
3452:dm/dm42_fns.cc ****       printf("keyup\n");
3453:dm/dm42_fns.cc ****       mark_region(MARK_42_KEYR);
3454:dm/dm42_fns.cc ****       keep_running = core_keyup();
3455:dm/dm42_fns.cc ****       no_region();
3456:dm/dm42_fns.cc ****       printf("end of keyup: keep_running=%i\n", keep_running);
3457:dm/dm42_fns.cc ****     }
3458:dm/dm42_fns.cc **** 
3459:dm/dm42_fns.cc ****     /* Empty key 
3460:dm/dm42_fns.cc ****        - we were woken-up and no key waits for handling
3461:dm/dm42_fns.cc ****        - or we reiterate on keep_running
3462:dm/dm42_fns.cc ****        - !mode_pause - Important here! core_keydown cancels running flag otherwise */
3463:dm/dm42_fns.cc ****     if ( key < 0 && !is_mode_pause() ) {
 12652              		.loc 1 3463 0
 12653 0832 FFF7FEFF 		bl	is_mode_pause
 12654              	.LVL1267:
ARM GAS  /tmp/ccGYckNR.s 			page 311


 12655 0836 8246     		mov	r10, r0
 12656              	.LVL1268:
 12657 0838 50B9     		cbnz	r0, .L1501
3464:dm/dm42_fns.cc ****       printf("RUN: empty key press\n");
3465:dm/dm42_fns.cc ****       //keep_running = core_keydown(0, &dummy1, &dummy2);
3466:dm/dm42_fns.cc ****       mark_region(MARK_42_KEY0);
 12658              		.loc 1 3466 0
 12659 083a 274B     		ldr	r3, .L1714+48
 12660 083c 2A48     		ldr	r0, .L1714+64
 12661 083e 9847     		blx	r3
 12662              	.LVL1269:
3467:dm/dm42_fns.cc ****       keep_running = core_keydown(0, &enqueued, &repeat);
 12663              		.loc 1 3467 0
 12664 0840 04AA     		add	r2, sp, #16
 12665 0842 03A9     		add	r1, sp, #12
 12666 0844 5046     		mov	r0, r10
 12667 0846 FFF7FEFF 		bl	_Z12core_keydowniPiS_
 12668              	.LVL1270:
3468:dm/dm42_fns.cc ****       no_region();
 12669              		.loc 1 3468 0
 12670 084a 254B     		ldr	r3, .L1714+56
3467:dm/dm42_fns.cc ****       keep_running = core_keydown(0, &enqueued, &repeat);
 12671              		.loc 1 3467 0
 12672 084c 0746     		mov	r7, r0
 12673              	.LVL1271:
 12674              		.loc 1 3468 0
 12675 084e 9847     		blx	r3
 12676              	.LVL1272:
 12677              	.L1501:
3469:dm/dm42_fns.cc ****       printf("RUN: end of keydown: keep_running=%i\n", keep_running);
3470:dm/dm42_fns.cc ****     }
3471:dm/dm42_fns.cc **** 
3472:dm/dm42_fns.cc ****     update_aplha_table();
 12678              		.loc 1 3472 0
 12679 0850 FFF7FEFF 		bl	update_aplha_table
 12680              	.LVL1273:
 12681 0854 4FF0000A 		mov	r10, #0
 12682 0858 0CE4     		b	.L1322
 12683              	.LVL1274:
 12684              	.L1683:
 12685              	.LBB982:
 12686              	.LBB887:
 12687              	.LBB884:
 12688              	.LBB868:
3087:dm/dm42_fns.cc ****         if ( pgm_res == FR_OK && dat.magic == SAVESTAT_MAGIC ) {
 12689              		.loc 1 3087 0
 12690 085a 05AB     		add	r3, sp, #20
 12691 085c DFF8A4A0 		ldr	r10, .L1714+92
 12692              	.LVL1275:
 12693 0860 6068     		ldr	r0, [r4, #4]
 12694 0862 2022     		movs	r2, #32
 12695 0864 06A9     		add	r1, sp, #24
 12696 0866 D047     		blx	r10
 12697              	.LVL1276:
 12698 0868 204B     		ldr	r3, .L1714+68
 12699 086a 1870     		strb	r0, [r3]
 12700              	.LBB869:
ARM GAS  /tmp/ccGYckNR.s 			page 312


3088:dm/dm42_fns.cc ****           rtc_write_century(dat.century);
 12701              		.loc 1 3088 0
 12702 086c 20B9     		cbnz	r0, .L1399
3088:dm/dm42_fns.cc ****           rtc_write_century(dat.century);
 12703              		.loc 1 3088 0 is_stmt 0 discriminator 1
 12704 086e 069B     		ldr	r3, [sp, #24]
 12705 0870 1F4A     		ldr	r2, .L1714+72
 12706 0872 9342     		cmp	r3, r2
 12707 0874 00F06C82 		beq	.L1704
 12708              	.L1399:
 12709              	.LBE869:
3136:dm/dm42_fns.cc ****       } else {
 12710              		.loc 1 3136 0 is_stmt 1 discriminator 1
 12711 0878 1E4B     		ldr	r3, .L1714+76
 12712 087a 6068     		ldr	r0, [r4, #4]
 12713 087c 9847     		blx	r3
 12714              	.LVL1277:
 12715              	.LBE868:
 12716 087e C5E4     		b	.L1425
 12717              	.LVL1278:
 12718              	.L1682:
 12719              	.LBE884:
3073:dm/dm42_fns.cc ****         ver = savestat_init_read();
 12720              		.loc 1 3073 0
 12721 0880 154B     		ldr	r3, .L1714+48
 12722 0882 1D48     		ldr	r0, .L1714+80
 12723 0884 9847     		blx	r3
 12724              	.LVL1279:
3074:dm/dm42_fns.cc ****         if ( pgm_res ) // No state file -> just restart
 12725              		.loc 1 3074 0
 12726 0886 FFF7FEFF 		bl	savestat_init_read
 12727              	.LVL1280:
3075:dm/dm42_fns.cc ****           read_statefile = 0;
 12728              		.loc 1 3075 0
 12729 088a 184B     		ldr	r3, .L1714+68
 12730 088c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
3074:dm/dm42_fns.cc ****         if ( pgm_res ) // No state file -> just restart
 12731              		.loc 1 3074 0
 12732 088e 0146     		mov	r1, r0
 12733              	.LVL1281:
3075:dm/dm42_fns.cc ****           read_statefile = 0;
 12734              		.loc 1 3075 0
 12735 0890 002B     		cmp	r3, #0
 12736 0892 40F0E281 		bne	.L1396
 12737 0896 194B     		ldr	r3, .L1714+84
 12738 0898 1868     		ldr	r0, [r3]
 12739              	.LVL1282:
 12740 089a A2E4     		b	.L1395
 12741              	.LVL1283:
 12742              	.L1392:
 12743              	.LBE887:
 12744              	.LBE982:
 12745              	.LBB983:
 12746              	.LBB984:
2639:dm/dm42_fns.cc **** }
 12747              		.loc 1 2639 0
 12748 089c 4D23     		movs	r3, #77
ARM GAS  /tmp/ccGYckNR.s 			page 313


 12749 089e 2B60     		str	r3, [r5]
 12750              	.LBE984:
 12751              	.LBE983:
3058:dm/dm42_fns.cc ****       }
 12752              		.loc 1 3058 0
 12753 08a0 174B     		ldr	r3, .L1714+88
 12754 08a2 9847     		blx	r3
 12755              	.LVL1284:
 12756 08a4 8EE4     		b	.L1393
 12757              	.L1715:
 12758 08a6 00BF     		.align	2
 12759              	.L1714:
 12760 08a8 00000000 		.word	.LANCHOR0
 12761 08ac 00000000 		.word	.LANCHOR34
 12762 08b0 00000000 		.word	.LANCHOR5
 12763 08b4 01030008 		.word	134218497
 12764 08b8 FD020008 		.word	134218493
 12765 08bc 56555555 		.word	1431655766
 12766 08c0 29040008 		.word	134218793
 12767 08c4 31020008 		.word	134218289
 12768 08c8 99020008 		.word	134218393
 12769 08cc 00000000 		.word	.LANCHOR32
 12770 08d0 00000000 		.word	.LANCHOR8
 12771 08d4 FD030008 		.word	134218749
 12772 08d8 09030008 		.word	134218505
 12773 08dc 010177D3 		.word	-747175679
 12774 08e0 0D030008 		.word	134218509
 12775 08e4 00000000 		.word	.LANCHOR10
 12776 08e8 030177D3 		.word	-747175677
 12777 08ec 00000000 		.word	.LANCHOR14
 12778 08f0 7ADA42D3 		.word	-750593414
 12779 08f4 39040008 		.word	134218809
 12780 08f8 060177D3 		.word	-747175674
 12781 08fc 00000000 		.word	.LANCHOR43
 12782 0900 35020008 		.word	134218293
 12783 0904 3D040008 		.word	134218813
 12784              	.LVL1285:
 12785              	.L1702:
 12786              	.LBB985:
 12787              	.LBB976:
 12788              	.LBB972:
 12789              	.LBB969:
3402:dm/dm42_fns.cc ****         int ret = handle_menu(&MID_MENU, MENU_RESET, 0);
 12790              		.loc 1 3402 0
 12791 0908 2168     		ldr	r1, [r4]
3403:dm/dm42_fns.cc ****         CLR_ST(STAT_MENU);
 12792              		.loc 1 3403 0
 12793 090a AF4B     		ldr	r3, .L1716
 12794 090c AF48     		ldr	r0, .L1716+4
3402:dm/dm42_fns.cc ****         int ret = handle_menu(&MID_MENU, MENU_RESET, 0);
 12795              		.loc 1 3402 0
 12796 090e 41F0400E 		orr	lr, r1, #64
 12797 0912 C4F800E0 		str	lr, [r4]
3403:dm/dm42_fns.cc ****         CLR_ST(STAT_MENU);
 12798              		.loc 1 3403 0
 12799 0916 1146     		mov	r1, r2
 12800 0918 9847     		blx	r3
ARM GAS  /tmp/ccGYckNR.s 			page 314


 12801              	.LVL1286:
3404:dm/dm42_fns.cc ****         if ( ret == MRET_SAVESTATE ) { // FIXME: Really?
 12802              		.loc 1 3404 0
 12803 091a 2368     		ldr	r3, [r4]
3405:dm/dm42_fns.cc ****           CLR_ST(STAT_SOFT_OFF); // Hard off
 12804              		.loc 1 3405 0
 12805 091c 40F20932 		movw	r2, #777
3404:dm/dm42_fns.cc ****         if ( ret == MRET_SAVESTATE ) { // FIXME: Really?
 12806              		.loc 1 3404 0
 12807 0920 23F04003 		bic	r3, r3, #64
3405:dm/dm42_fns.cc ****           CLR_ST(STAT_SOFT_OFF); // Hard off
 12808              		.loc 1 3405 0
 12809 0924 9042     		cmp	r0, r2
3404:dm/dm42_fns.cc ****         if ( ret == MRET_SAVESTATE ) { // FIXME: Really?
 12810              		.loc 1 3404 0
 12811 0926 2360     		str	r3, [r4]
3405:dm/dm42_fns.cc ****           CLR_ST(STAT_SOFT_OFF); // Hard off
 12812              		.loc 1 3405 0
 12813 0928 0BD0     		beq	.L1705
3409:dm/dm42_fns.cc ****         wait_for_key_release(-1);
 12814              		.loc 1 3409 0
 12815 092a FFF7FEFF 		bl	calc_lcd_redraw
 12816              	.LVL1287:
3410:dm/dm42_fns.cc ****       } else {
 12817              		.loc 1 3410 0
 12818 092e A84B     		ldr	r3, .L1716+8
 12819 0930 4FF0FF30 		mov	r0, #-1
 12820 0934 9847     		blx	r3
 12821              	.LVL1288:
 12822              	.LBE969:
 12823              	.LBE972:
 12824              	.LBE976:
 12825              	.LBE985:
3419:dm/dm42_fns.cc ****         clearTimeout3();
 12826              		.loc 1 3419 0
 12827 0936 A74B     		ldr	r3, .L1716+12
 12828 0938 0120     		movs	r0, #1
 12829 093a 9847     		blx	r3
 12830              	.LVL1289:
 12831              	.LBB986:
 12832              	.LBB977:
3397:dm/dm42_fns.cc ****       
 12833              		.loc 1 3397 0
 12834 093c 4FF01C0A 		mov	r10, #28
 12835 0940 5BE5     		b	.L1494
 12836              	.LVL1290:
 12837              	.L1705:
 12838              	.LBB973:
 12839              	.LBB970:
3406:dm/dm42_fns.cc ****           key = KEY_EXIT;
 12840              		.loc 1 3406 0
 12841 0942 2368     		ldr	r3, [r4]
 12842 0944 23F02003 		bic	r3, r3, #32
 12843 0948 2360     		str	r3, [r4]
 12844              	.LVL1291:
3409:dm/dm42_fns.cc ****         wait_for_key_release(-1);
 12845              		.loc 1 3409 0
ARM GAS  /tmp/ccGYckNR.s 			page 315


 12846 094a FFF7FEFF 		bl	calc_lcd_redraw
 12847              	.LVL1292:
3410:dm/dm42_fns.cc ****       } else {
 12848              		.loc 1 3410 0
 12849 094e A04B     		ldr	r3, .L1716+8
 12850 0950 4FF0FF30 		mov	r0, #-1
 12851 0954 9847     		blx	r3
 12852              	.LVL1293:
 12853              	.LBE970:
 12854              	.LBE973:
 12855              	.LBE977:
 12856              	.LBE986:
3419:dm/dm42_fns.cc ****         clearTimeout3();
 12857              		.loc 1 3419 0
 12858 0956 9F4B     		ldr	r3, .L1716+12
 12859 0958 0120     		movs	r0, #1
 12860 095a 9847     		blx	r3
 12861              	.LVL1294:
 12862              	.LBB987:
 12863              	.LBB978:
 12864              	.LBB974:
 12865              	.LBB971:
3407:dm/dm42_fns.cc ****         }
 12866              		.loc 1 3407 0
 12867 095c 4FF0210A 		mov	r10, #33
 12868              	.LBE971:
 12869              	.LBE974:
 12870              	.LBE978:
 12871              	.LBE987:
3419:dm/dm42_fns.cc ****         clearTimeout3();
 12872              		.loc 1 3419 0
 12873 0960 0028     		cmp	r0, #0
 12874 0962 7FF444AD 		bne	.L1495
 12875 0966 48E5     		b	.L1494
 12876              	.LVL1295:
 12877              	.L1697:
 12878              	.LBB988:
 12879              	.LBB989:
 12880              	.LBB990:
2794:dm/dm42_fns.cc ****     int key = 28; // Turn off shift
 12881              		.loc 1 2794 0
 12882 0968 9B4B     		ldr	r3, .L1716+16
 12883 096a 1B68     		ldr	r3, [r3]
 12884 096c 9B07     		lsls	r3, r3, #30
 12885              	.LBE990:
 12886 096e 4FF0120A 		mov	r10, #18
 12887              	.LVL1296:
 12888              	.LBB991:
 12889 0972 40F1AE81 		bpl	.L1706
 12890              	.LBE991:
 12891              	.LBE989:
 12892              	.LBE988:
3360:dm/dm42_fns.cc ****       }
 12893              		.loc 1 3360 0
 12894 0976 5346     		mov	r3, r10
 12895              	.LBB995:
 12896              	.LBB993:
ARM GAS  /tmp/ccGYckNR.s 			page 316


 12897              	.LBB992:
2794:dm/dm42_fns.cc ****     int key = 28; // Turn off shift
 12898              		.loc 1 2794 0
 12899 0978 4FF0110B 		mov	fp, #17
 12900 097c 84E6     		b	.L1480
 12901              	.LVL1297:
 12902              	.L1703:
 12903              	.LBE992:
 12904              	.LBE993:
 12905              	.LBE995:
 12906              	.LBB996:
 12907              	.LBB997:
2617:dm/dm42_fns.cc **** }
 12908              		.loc 1 2617 0
 12909 097e 5046     		mov	r0, r10
 12910 0980 964B     		ldr	r3, .L1716+20
 12911 0982 9847     		blx	r3
 12912              	.LVL1298:
 12913              	.LBE997:
 12914              	.LBE996:
3453:dm/dm42_fns.cc ****       keep_running = core_keyup();
 12915              		.loc 1 3453 0
 12916 0984 964B     		ldr	r3, .L1716+24
 12917 0986 9748     		ldr	r0, .L1716+28
 12918 0988 9847     		blx	r3
 12919              	.LVL1299:
3454:dm/dm42_fns.cc ****       no_region();
 12920              		.loc 1 3454 0
 12921 098a FFF7FEFF 		bl	_Z10core_keyupv
 12922              	.LVL1300:
3455:dm/dm42_fns.cc ****       printf("end of keyup: keep_running=%i\n", keep_running);
 12923              		.loc 1 3455 0
 12924 098e 964B     		ldr	r3, .L1716+32
3454:dm/dm42_fns.cc ****       no_region();
 12925              		.loc 1 3454 0
 12926 0990 0746     		mov	r7, r0
 12927              	.LVL1301:
3455:dm/dm42_fns.cc ****       printf("end of keyup: keep_running=%i\n", keep_running);
 12928              		.loc 1 3455 0
 12929 0992 9847     		blx	r3
 12930              	.LVL1302:
 12931 0994 5CE7     		b	.L1501
 12932              	.LVL1303:
 12933              	.L1695:
 12934              	.LBB998:
 12935              	.LBB863:
 12936              	.LBB860:
 12937              	.LBB857:
3013:dm/dm42_fns.cc ****           // Disk fail means statefile isn't saved and everything
 12938              		.loc 1 3013 0 discriminator 1
 12939 0996 954B     		ldr	r3, .L1716+36
 12940 0998 9847     		blx	r3
 12941              	.LVL1304:
 12942 099a 0028     		cmp	r0, #0
 12943 099c 7FF4D7AD 		bne	.L1389
3017:dm/dm42_fns.cc ****           SET_ST(STAT_SOFT_OFF);
 12944              		.loc 1 3017 0
ARM GAS  /tmp/ccGYckNR.s 			page 317


 12945 09a0 934B     		ldr	r3, .L1716+40
 12946 09a2 9448     		ldr	r0, .L1716+44
 12947 09a4 9847     		blx	r3
 12948              	.LVL1305:
3018:dm/dm42_fns.cc ****         }
 12949              		.loc 1 3018 0
 12950 09a6 2368     		ldr	r3, [r4]
 12951 09a8 43F02003 		orr	r3, r3, #32
 12952 09ac 2360     		str	r3, [r4]
 12953 09ae CEE5     		b	.L1389
 12954              	.L1694:
3011:dm/dm42_fns.cc **** 
 12955              		.loc 1 3011 0
 12956 09b0 914B     		ldr	r3, .L1716+48
 12957 09b2 0020     		movs	r0, #0
 12958 09b4 9847     		blx	r3
 12959              	.LVL1306:
 12960 09b6 C6E5     		b	.L1387
 12961              	.L1693:
 12962              	.LBB855:
2932:dm/dm42_fns.cc ****           savestat_data_t dat;
 12963              		.loc 1 2932 0 discriminator 1
 12964 09b8 8C4B     		ldr	r3, .L1716+36
 12965 09ba 9847     		blx	r3
 12966              	.LVL1307:
 12967 09bc 0028     		cmp	r0, #0
 12968 09be 3FF4B2AD 		beq	.L1360
 12969              	.LBB853:
2935:dm/dm42_fns.cc ****           dat.magic = SAVESTAT_MAGIC;
 12970              		.loc 1 2935 0
 12971 09c2 3946     		mov	r1, r7
 12972 09c4 2022     		movs	r2, #32
 12973 09c6 06A8     		add	r0, sp, #24
 12974 09c8 FFF7FEFF 		bl	memset
 12975              	.LVL1308:
2936:dm/dm42_fns.cc **** 
 12976              		.loc 1 2936 0
 12977 09cc 8B4B     		ldr	r3, .L1716+52
 12978 09ce 0693     		str	r3, [sp, #24]
2942:dm/dm42_fns.cc **** 
 12979              		.loc 1 2942 0
 12980 09d0 8B4B     		ldr	r3, .L1716+56
2941:dm/dm42_fns.cc ****           dat.flags |= PS(PERM_MAIN_MENU) ? SAVESTAT_PERM_MAIN_MENU : 0;
 12981              		.loc 1 2941 0
 12982 09d2 2268     		ldr	r2, [r4]
2942:dm/dm42_fns.cc **** 
 12983              		.loc 1 2942 0
 12984 09d4 1B68     		ldr	r3, [r3]
2944:dm/dm42_fns.cc ****           dat.flags |= PS(PRTOF_GRAPHICS)  ? SAVESTAT_PRTOF_GR     : 0;
 12985              		.loc 1 2944 0
 12986 09d6 8A49     		ldr	r1, .L1716+56
2941:dm/dm42_fns.cc ****           dat.flags |= PS(PERM_MAIN_MENU) ? SAVESTAT_PERM_MAIN_MENU : 0;
 12987              		.loc 1 2941 0
 12988 09d8 12F48072 		ands	r2, r2, #256
 12989 09dc 18BF     		it	ne
 12990 09de 0222     		movne	r2, #2
2942:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 318


 12991              		.loc 1 2942 0
 12992 09e0 13F48073 		ands	r3, r3, #256
 12993 09e4 18BF     		it	ne
 12994 09e6 4FF40033 		movne	r3, #131072
2944:dm/dm42_fns.cc ****           dat.flags |= PS(PRTOF_GRAPHICS)  ? SAVESTAT_PRTOF_GR     : 0;
 12995              		.loc 1 2944 0
 12996 09ea 0868     		ldr	r0, [r1]
2945:dm/dm42_fns.cc ****           dat.flags |= PS(PRTOF_NOIR)      ? SAVESTAT_PRTOF_NOIR   : 0;
 12997              		.loc 1 2945 0
 12998 09ec 0968     		ldr	r1, [r1]
2942:dm/dm42_fns.cc **** 
 12999              		.loc 1 2942 0
 13000 09ee 1A43     		orrs	r2, r2, r3
2946:dm/dm42_fns.cc ****           dat.flags |= PS(PRTOF_GR_IN_TXT) ? SAVESTAT_PRTOF_GR_IN_TXT : 0;
 13001              		.loc 1 2946 0
 13002 09f0 834B     		ldr	r3, .L1716+56
2944:dm/dm42_fns.cc ****           dat.flags |= PS(PRTOF_GRAPHICS)  ? SAVESTAT_PRTOF_GR     : 0;
 13003              		.loc 1 2944 0
 13004 09f2 10F40070 		ands	r0, r0, #512
2946:dm/dm42_fns.cc ****           dat.flags |= PS(PRTOF_GR_IN_TXT) ? SAVESTAT_PRTOF_GR_IN_TXT : 0;
 13005              		.loc 1 2946 0
 13006 09f6 D3F800E0 		ldr	lr, [r3]
2947:dm/dm42_fns.cc **** 
 13007              		.loc 1 2947 0
 13008 09fa 1B68     		ldr	r3, [r3]
2944:dm/dm42_fns.cc ****           dat.flags |= PS(PRTOF_GRAPHICS)  ? SAVESTAT_PRTOF_GR     : 0;
 13009              		.loc 1 2944 0
 13010 09fc 18BF     		it	ne
 13011 09fe 4FF40020 		movne	r0, #524288
2945:dm/dm42_fns.cc ****           dat.flags |= PS(PRTOF_NOIR)      ? SAVESTAT_PRTOF_NOIR   : 0;
 13012              		.loc 1 2945 0
 13013 0a02 11F48061 		ands	r1, r1, #1024
 13014 0a06 18BF     		it	ne
 13015 0a08 4FF48021 		movne	r1, #262144
2944:dm/dm42_fns.cc ****           dat.flags |= PS(PRTOF_GRAPHICS)  ? SAVESTAT_PRTOF_GR     : 0;
 13016              		.loc 1 2944 0
 13017 0a0c 0243     		orrs	r2, r2, r0
2946:dm/dm42_fns.cc ****           dat.flags |= PS(PRTOF_GR_IN_TXT) ? SAVESTAT_PRTOF_GR_IN_TXT : 0;
 13018              		.loc 1 2946 0
 13019 0a0e 1EF4006E 		ands	lr, lr, #2048
 13020 0a12 18BF     		it	ne
 13021 0a14 4FF4801E 		movne	lr, #1048576
2945:dm/dm42_fns.cc ****           dat.flags |= PS(PRTOF_NOIR)      ? SAVESTAT_PRTOF_NOIR   : 0;
 13022              		.loc 1 2945 0
 13023 0a18 0A43     		orrs	r2, r2, r1
2947:dm/dm42_fns.cc **** 
 13024              		.loc 1 2947 0
 13025 0a1a 13F48053 		ands	r3, r3, #4096
2950:dm/dm42_fns.cc ****           dat.flags |= !PS(DISP_DOW)      ? SAVESTAT_DISP_DOW      : 0;
 13026              		.loc 1 2950 0
 13027 0a1e 7849     		ldr	r1, .L1716+56
2951:dm/dm42_fns.cc ****           dat.flags |= !PS(DISP_DATE)     ? SAVESTAT_DISP_DATE     : 0;
 13028              		.loc 1 2951 0
 13029 0a20 7748     		ldr	r0, .L1716+56
2950:dm/dm42_fns.cc ****           dat.flags |= !PS(DISP_DOW)      ? SAVESTAT_DISP_DOW      : 0;
 13030              		.loc 1 2950 0
 13031 0a22 0968     		ldr	r1, [r1]
ARM GAS  /tmp/ccGYckNR.s 			page 319


2951:dm/dm42_fns.cc ****           dat.flags |= !PS(DISP_DATE)     ? SAVESTAT_DISP_DATE     : 0;
 13032              		.loc 1 2951 0
 13033 0a24 0068     		ldr	r0, [r0]
2946:dm/dm42_fns.cc ****           dat.flags |= PS(PRTOF_GR_IN_TXT) ? SAVESTAT_PRTOF_GR_IN_TXT : 0;
 13034              		.loc 1 2946 0
 13035 0a26 42EA0E02 		orr	r2, r2, lr
2947:dm/dm42_fns.cc **** 
 13036              		.loc 1 2947 0
 13037 0a2a 18BF     		it	ne
 13038 0a2c 4FF40013 		movne	r3, #2097152
 13039 0a30 43EA020C 		orr	ip, r3, r2
2952:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_DATE_SEP0)? SAVESTAT_DISP_DATE_SEP0: 0;
 13040              		.loc 1 2952 0
 13041 0a34 724A     		ldr	r2, .L1716+56
2953:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_DATE_SEP1)? SAVESTAT_DISP_DATE_SEP1: 0;
 13042              		.loc 1 2953 0
 13043 0a36 724B     		ldr	r3, .L1716+56
2952:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_DATE_SEP0)? SAVESTAT_DISP_DATE_SEP0: 0;
 13044              		.loc 1 2952 0
 13045 0a38 1268     		ldr	r2, [r2]
2953:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_DATE_SEP1)? SAVESTAT_DISP_DATE_SEP1: 0;
 13046              		.loc 1 2953 0
 13047 0a3a D3F800E0 		ldr	lr, [r3]
2950:dm/dm42_fns.cc ****           dat.flags |= !PS(DISP_DOW)      ? SAVESTAT_DISP_DOW      : 0;
 13048              		.loc 1 2950 0
 13049 0a3e 11F00201 		ands	r1, r1, #2
 13050 0a42 18BF     		it	ne
 13051 0a44 4FF48061 		movne	r1, #1024
2951:dm/dm42_fns.cc ****           dat.flags |= !PS(DISP_DATE)     ? SAVESTAT_DISP_DATE     : 0;
 13052              		.loc 1 2951 0
 13053 0a48 10F0040F 		tst	r0, #4
2950:dm/dm42_fns.cc ****           dat.flags |= !PS(DISP_DOW)      ? SAVESTAT_DISP_DOW      : 0;
 13054              		.loc 1 2950 0
 13055 0a4c 4CEA0103 		orr	r3, ip, r1
2951:dm/dm42_fns.cc ****           dat.flags |= !PS(DISP_DATE)     ? SAVESTAT_DISP_DATE     : 0;
 13056              		.loc 1 2951 0
 13057 0a50 14BF     		ite	ne
 13058 0a52 0021     		movne	r1, #0
 13059 0a54 4FF40061 		moveq	r1, #2048
2952:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_DATE_SEP0)? SAVESTAT_DISP_DATE_SEP0: 0;
 13060              		.loc 1 2952 0
 13061 0a58 12F0080F 		tst	r2, #8
2954:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_SHORTMON) ? SAVESTAT_DISP_SHORTMON : 0;
 13062              		.loc 1 2954 0
 13063 0a5c 684A     		ldr	r2, .L1716+56
2956:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_VOLTAGE)  ? SAVESTAT_FLAG_DISP_VOLTAGE : 0;
 13064              		.loc 1 2956 0
 13065 0a5e 6848     		ldr	r0, .L1716+56
2954:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_SHORTMON) ? SAVESTAT_DISP_SHORTMON : 0;
 13066              		.loc 1 2954 0
 13067 0a60 1268     		ldr	r2, [r2]
2951:dm/dm42_fns.cc ****           dat.flags |= !PS(DISP_DATE)     ? SAVESTAT_DISP_DATE     : 0;
 13068              		.loc 1 2951 0
 13069 0a62 43EA0103 		orr	r3, r3, r1
2952:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_DATE_SEP0)? SAVESTAT_DISP_DATE_SEP0: 0;
 13070              		.loc 1 2952 0
 13071 0a66 14BF     		ite	ne
ARM GAS  /tmp/ccGYckNR.s 			page 320


 13072 0a68 0021     		movne	r1, #0
 13073 0a6a 4FF48051 		moveq	r1, #4096
2953:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_DATE_SEP1)? SAVESTAT_DISP_DATE_SEP1: 0;
 13074              		.loc 1 2953 0
 13075 0a6e 1EF0100E 		ands	lr, lr, #16
 13076 0a72 18BF     		it	ne
 13077 0a74 4FF4005E 		movne	lr, #8192
2952:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_DATE_SEP0)? SAVESTAT_DISP_DATE_SEP0: 0;
 13078              		.loc 1 2952 0
 13079 0a78 0B43     		orrs	r3, r3, r1
2954:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_SHORTMON) ? SAVESTAT_DISP_SHORTMON : 0;
 13080              		.loc 1 2954 0
 13081 0a7a 12F02002 		ands	r2, r2, #32
2955:dm/dm42_fns.cc ****           dat.flags |= !PS(DISP_TIME)     ? SAVESTAT_DISP_TIME     : 0;
 13082              		.loc 1 2955 0
 13083 0a7e 6049     		ldr	r1, .L1716+56
2953:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_DATE_SEP1)? SAVESTAT_DISP_DATE_SEP1: 0;
 13084              		.loc 1 2953 0
 13085 0a80 43EA0E03 		orr	r3, r3, lr
2954:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_SHORTMON) ? SAVESTAT_DISP_SHORTMON : 0;
 13086              		.loc 1 2954 0
 13087 0a84 18BF     		it	ne
 13088 0a86 4FF48042 		movne	r2, #16384
2955:dm/dm42_fns.cc ****           dat.flags |= !PS(DISP_TIME)     ? SAVESTAT_DISP_TIME     : 0;
 13089              		.loc 1 2955 0
 13090 0a8a 0968     		ldr	r1, [r1]
2956:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_VOLTAGE)  ? SAVESTAT_FLAG_DISP_VOLTAGE : 0;
 13091              		.loc 1 2956 0
 13092 0a8c 0068     		ldr	r0, [r0]
2954:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_SHORTMON) ? SAVESTAT_DISP_SHORTMON : 0;
 13093              		.loc 1 2954 0
 13094 0a8e 1343     		orrs	r3, r3, r2
2957:dm/dm42_fns.cc ****           // --
 13095              		.loc 1 2957 0
 13096 0a90 5B4A     		ldr	r2, .L1716+56
2955:dm/dm42_fns.cc ****           dat.flags |= !PS(DISP_TIME)     ? SAVESTAT_DISP_TIME     : 0;
 13097              		.loc 1 2955 0
 13098 0a92 11F04001 		ands	r1, r1, #64
2957:dm/dm42_fns.cc ****           // --
 13099              		.loc 1 2957 0
 13100 0a96 1268     		ldr	r2, [r2]
2955:dm/dm42_fns.cc ****           dat.flags |= !PS(DISP_TIME)     ? SAVESTAT_DISP_TIME     : 0;
 13101              		.loc 1 2955 0
 13102 0a98 18BF     		it	ne
 13103 0a9a 4FF40041 		movne	r1, #32768
2956:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_VOLTAGE)  ? SAVESTAT_FLAG_DISP_VOLTAGE : 0;
 13104              		.loc 1 2956 0
 13105 0a9e 10F0800F 		tst	r0, #128
2955:dm/dm42_fns.cc ****           dat.flags |= !PS(DISP_TIME)     ? SAVESTAT_DISP_TIME     : 0;
 13106              		.loc 1 2955 0
 13107 0aa2 43EA0103 		orr	r3, r3, r1
2956:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_VOLTAGE)  ? SAVESTAT_FLAG_DISP_VOLTAGE : 0;
 13108              		.loc 1 2956 0
 13109 0aa6 14BF     		ite	ne
 13110 0aa8 0021     		movne	r1, #0
 13111 0aaa 4FF48031 		moveq	r1, #65536
2957:dm/dm42_fns.cc ****           // --
ARM GAS  /tmp/ccGYckNR.s 			page 321


 13112              		.loc 1 2957 0
 13113 0aae 12F00102 		ands	r2, r2, #1
2956:dm/dm42_fns.cc ****           dat.flags |=  PS(DISP_VOLTAGE)  ? SAVESTAT_FLAG_DISP_VOLTAGE : 0;
 13114              		.loc 1 2956 0
 13115 0ab2 43EA0103 		orr	r3, r3, r1
2957:dm/dm42_fns.cc ****           // --
 13116              		.loc 1 2957 0
 13117 0ab6 18BF     		it	ne
 13118 0ab8 0422     		movne	r2, #4
 13119 0aba 1A43     		orrs	r2, r2, r3
 13120 0abc 0792     		str	r2, [sp, #28]
2960:dm/dm42_fns.cc ****           dat.flags |= (gm & 1) ? SAVESTAT_FLAG_GMODE0 : 0;
 13121              		.loc 1 2960 0
 13122 0abe FFF7FEFF 		bl	graphics_mode
 13123              	.LVL1309:
2964:dm/dm42_fns.cc ****           dat.flags |= is_REG_LINES      ? SAVESTAT_FLAG_REG_LINES : 0;
 13124              		.loc 1 2964 0
 13125 0ac2 504A     		ldr	r2, .L1716+60
2961:dm/dm42_fns.cc ****           dat.flags |= (gm & 2) ? SAVESTAT_FLAG_GMODE1 : 0;
 13126              		.loc 1 2961 0
 13127 0ac4 079B     		ldr	r3, [sp, #28]
2964:dm/dm42_fns.cc ****           dat.flags |= is_REG_LINES      ? SAVESTAT_FLAG_REG_LINES : 0;
 13128              		.loc 1 2964 0
 13129 0ac6 1178     		ldrb	r1, [r2]	@ zero_extendqisi2
2961:dm/dm42_fns.cc ****           dat.flags |= (gm & 2) ? SAVESTAT_FLAG_GMODE1 : 0;
 13130              		.loc 1 2961 0
 13131 0ac8 10F0010F 		tst	r0, #1
 13132 0acc 0CBF     		ite	eq
 13133 0ace 0022     		moveq	r2, #0
 13134 0ad0 2022     		movne	r2, #32
2962:dm/dm42_fns.cc ****           
 13135              		.loc 1 2962 0
 13136 0ad2 10F0020F 		tst	r0, #2
2961:dm/dm42_fns.cc ****           dat.flags |= (gm & 2) ? SAVESTAT_FLAG_GMODE1 : 0;
 13137              		.loc 1 2961 0
 13138 0ad6 43EA0203 		orr	r3, r3, r2
2962:dm/dm42_fns.cc ****           
 13139              		.loc 1 2962 0
 13140 0ada 0CBF     		ite	eq
 13141 0adc 0022     		moveq	r2, #0
 13142 0ade 4022     		movne	r2, #64
2964:dm/dm42_fns.cc ****           dat.flags |= is_REG_LINES      ? SAVESTAT_FLAG_REG_LINES : 0;
 13143              		.loc 1 2964 0
 13144 0ae0 11F0020F 		tst	r1, #2
2962:dm/dm42_fns.cc ****           
 13145              		.loc 1 2962 0
 13146 0ae4 42EA0302 		orr	r2, r2, r3
2964:dm/dm42_fns.cc ****           dat.flags |= is_REG_LINES      ? SAVESTAT_FLAG_REG_LINES : 0;
 13147              		.loc 1 2964 0
 13148 0ae8 0CBF     		ite	eq
 13149 0aea 0023     		moveq	r3, #0
 13150 0aec 0823     		movne	r3, #8
2965:dm/dm42_fns.cc ****           
 13151              		.loc 1 2965 0
 13152 0aee 11F0010F 		tst	r1, #1
2964:dm/dm42_fns.cc ****           dat.flags |= is_REG_LINES      ? SAVESTAT_FLAG_REG_LINES : 0;
 13153              		.loc 1 2964 0
ARM GAS  /tmp/ccGYckNR.s 			page 322


 13154 0af2 42EA0302 		orr	r2, r2, r3
2965:dm/dm42_fns.cc ****           
 13155              		.loc 1 2965 0
 13156 0af6 0CBF     		ite	eq
 13157 0af8 0023     		moveq	r3, #0
 13158 0afa 1023     		movne	r3, #16
 13159 0afc 1343     		orrs	r3, r3, r2
 13160 0afe 0793     		str	r3, [sp, #28]
2967:dm/dm42_fns.cc ****           dat.flags |= (reflcd & 1) ? SAVESTAT_FLAG_REFLCD0 : 0;
 13161              		.loc 1 2967 0
 13162 0b00 FFF7FEFF 		bl	get_reflcd_mask
 13163              	.LVL1310:
 13164 0b04 C043     		mvns	r0, r0
 13165              	.LVL1311:
2968:dm/dm42_fns.cc ****           dat.flags |= (reflcd & 2) ? SAVESTAT_FLAG_REFLCD1 : 0;
 13166              		.loc 1 2968 0
 13167 0b06 10F0010F 		tst	r0, #1
 13168 0b0a 0799     		ldr	r1, [sp, #28]
2976:dm/dm42_fns.cc ****           dat.font_offsets[1] = (reg_font_offset>> 8) & 0xff;
 13169              		.loc 1 2976 0
 13170 0b0c 3E4B     		ldr	r3, .L1716+64
2968:dm/dm42_fns.cc ****           dat.flags |= (reflcd & 2) ? SAVESTAT_FLAG_REFLCD1 : 0;
 13171              		.loc 1 2968 0
 13172 0b0e 0CBF     		ite	eq
 13173 0b10 0022     		moveq	r2, #0
 13174 0b12 8022     		movne	r2, #128
2969:dm/dm42_fns.cc ****           dat.flags |= (reflcd & 4) ? SAVESTAT_FLAG_REFLCD2 : 0;
 13175              		.loc 1 2969 0
 13176 0b14 10F0020F 		tst	r0, #2
2976:dm/dm42_fns.cc ****           dat.font_offsets[1] = (reg_font_offset>> 8) & 0xff;
 13177              		.loc 1 2976 0
 13178 0b18 1B68     		ldr	r3, [r3]
 13179 0b1a 8DF83130 		strb	r3, [sp, #49]
2968:dm/dm42_fns.cc ****           dat.flags |= (reflcd & 2) ? SAVESTAT_FLAG_REFLCD1 : 0;
 13180              		.loc 1 2968 0
 13181 0b1e 41EA0201 		orr	r1, r1, r2
2969:dm/dm42_fns.cc ****           dat.flags |= (reflcd & 4) ? SAVESTAT_FLAG_REFLCD2 : 0;
 13182              		.loc 1 2969 0
 13183 0b22 0CBF     		ite	eq
 13184 0b24 0022     		moveq	r2, #0
 13185 0b26 4FF48072 		movne	r2, #256
2970:dm/dm42_fns.cc ****           // ==
 13186              		.loc 1 2970 0
 13187 0b2a 10F0040F 		tst	r0, #4
2969:dm/dm42_fns.cc ****           dat.flags |= (reflcd & 4) ? SAVESTAT_FLAG_REFLCD2 : 0;
 13188              		.loc 1 2969 0
 13189 0b2e 42EA0102 		orr	r2, r2, r1
2970:dm/dm42_fns.cc ****           // ==
 13190              		.loc 1 2970 0
 13191 0b32 18BF     		it	ne
 13192 0b34 4FF40077 		movne	r7, #512
2980:dm/dm42_fns.cc ****           dat.century = rtc_read_century();
 13193              		.loc 1 2980 0
 13194 0b38 3449     		ldr	r1, .L1716+68
2970:dm/dm42_fns.cc ****           // ==
 13195              		.loc 1 2970 0
 13196 0b3a 1743     		orrs	r7, r7, r2
ARM GAS  /tmp/ccGYckNR.s 			page 323


2977:dm/dm42_fns.cc ****           dat.font_offsets[2] = (reg_font_offset>>16) & 0xff;
 13197              		.loc 1 2977 0
 13198 0b3c 1A0A     		lsrs	r2, r3, #8
2980:dm/dm42_fns.cc ****           dat.century = rtc_read_century();
 13199              		.loc 1 2980 0
 13200 0b3e 03C9     		ldm	r1, {r0, r1}
 13201              	.LVL1312:
2970:dm/dm42_fns.cc ****           // ==
 13202              		.loc 1 2970 0
 13203 0b40 0797     		str	r7, [sp, #28]
2977:dm/dm42_fns.cc ****           dat.font_offsets[2] = (reg_font_offset>>16) & 0xff;
 13204              		.loc 1 2977 0
 13205 0b42 8DF83220 		strb	r2, [sp, #50]
2973:dm/dm42_fns.cc ****           dat.pgm_font_ix = pgm_font_ix;
 13206              		.loc 1 2973 0
 13207 0b46 324F     		ldr	r7, .L1716+72
2974:dm/dm42_fns.cc **** 
 13208              		.loc 1 2974 0
 13209 0b48 324A     		ldr	r2, .L1716+76
2973:dm/dm42_fns.cc ****           dat.pgm_font_ix = pgm_font_ix;
 13210              		.loc 1 2973 0
 13211 0b4a 3F78     		ldrb	r7, [r7]	@ zero_extendqisi2
2974:dm/dm42_fns.cc **** 
 13212              		.loc 1 2974 0
 13213 0b4c 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 13214 0b4e 8DF83020 		strb	r2, [sp, #48]
2978:dm/dm42_fns.cc **** 
 13215              		.loc 1 2978 0
 13216 0b52 1B0C     		lsrs	r3, r3, #16
 13217 0b54 8DF83330 		strb	r3, [sp, #51]
2980:dm/dm42_fns.cc ****           dat.century = rtc_read_century();
 13218              		.loc 1 2980 0
 13219 0b58 8DF82410 		strb	r1, [sp, #36]
2981:dm/dm42_fns.cc ****           
 13220              		.loc 1 2981 0
 13221 0b5c 2E4B     		ldr	r3, .L1716+80
2980:dm/dm42_fns.cc ****           dat.century = rtc_read_century();
 13222              		.loc 1 2980 0
 13223 0b5e 0890     		str	r0, [sp, #32]
2973:dm/dm42_fns.cc ****           dat.pgm_font_ix = pgm_font_ix;
 13224              		.loc 1 2973 0
 13225 0b60 8DF82E70 		strb	r7, [sp, #46]
2981:dm/dm42_fns.cc ****           
 13226              		.loc 1 2981 0
 13227 0b64 9847     		blx	r3
 13228              	.LVL1313:
 13229 0b66 8DF82C00 		strb	r0, [sp, #44]
2983:dm/dm42_fns.cc ****           if ( dat.printer_delay == 0 ) dat.printer_delay = 1;
 13230              		.loc 1 2983 0
 13231 0b6a FFF7FEFF 		bl	core_printer_delay
 13232              	.LVL1314:
 13233 0b6e 2B4B     		ldr	r3, .L1716+84
 13234 0b70 A3FB0023 		umull	r2, r3, r3, r0
 13235 0b74 C3F3C703 		ubfx	r3, r3, #3, #8
2984:dm/dm42_fns.cc **** 
 13236              		.loc 1 2984 0
 13237 0b78 03B9     		cbnz	r3, .L1653
ARM GAS  /tmp/ccGYckNR.s 			page 324


2984:dm/dm42_fns.cc **** 
 13238              		.loc 1 2984 0 is_stmt 0 discriminator 1
 13239 0b7a 0123     		movs	r3, #1
 13240              	.L1653:
 13241 0b7c 8DF82D30 		strb	r3, [sp, #45]
2988:dm/dm42_fns.cc ****             pgm_res = f_write(ppgm_fp, &dat, sizeof(savestat_data_t), &wr);
 13242              		.loc 1 2988 0 is_stmt 1 discriminator 1
 13243 0b80 274B     		ldr	r3, .L1716+88
2986:dm/dm42_fns.cc ****           
 13244              		.loc 1 2986 0 discriminator 1
 13245 0b82 284A     		ldr	r2, .L1716+92
2988:dm/dm42_fns.cc ****             pgm_res = f_write(ppgm_fp, &dat, sizeof(savestat_data_t), &wr);
 13246              		.loc 1 2988 0 discriminator 1
 13247 0b84 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
2986:dm/dm42_fns.cc ****           
 13248              		.loc 1 2986 0 discriminator 1
 13249 0b86 1268     		ldr	r2, [r2]
 13250 0b88 8DF82F20 		strb	r2, [sp, #47]
2988:dm/dm42_fns.cc ****             pgm_res = f_write(ppgm_fp, &dat, sizeof(savestat_data_t), &wr);
 13251              		.loc 1 2988 0 discriminator 1
 13252 0b8c 002B     		cmp	r3, #0
 13253 0b8e 00F09180 		beq	.L1707
 13254              	.L1384:
2990:dm/dm42_fns.cc **** 
 13255              		.loc 1 2990 0
 13256 0b92 254B     		ldr	r3, .L1716+96
 13257 0b94 6068     		ldr	r0, [r4, #4]
 13258 0b96 9847     		blx	r3
 13259              	.LVL1315:
2992:dm/dm42_fns.cc **** 
 13260              		.loc 1 2992 0
 13261 0b98 134B     		ldr	r3, .L1716+32
2990:dm/dm42_fns.cc **** 
 13262              		.loc 1 2990 0
 13263 0b9a 0746     		mov	r7, r0
 13264              	.LVL1316:
2992:dm/dm42_fns.cc **** 
 13265              		.loc 1 2992 0
 13266 0b9c 9847     		blx	r3
 13267              	.LVL1317:
2994:dm/dm42_fns.cc ****           if ( sys_disk_ok() && (pgm_res != FR_OK || cls_res != FR_OK) ) {
 13268              		.loc 1 2994 0
 13269 0b9e 234B     		ldr	r3, .L1716+100
 13270 0ba0 9847     		blx	r3
 13271              	.LVL1318:
2995:dm/dm42_fns.cc ****             // Fat storage OK but save state failed.
 13272              		.loc 1 2995 0
 13273 0ba2 124B     		ldr	r3, .L1716+36
 13274 0ba4 9847     		blx	r3
 13275              	.LVL1319:
 13276 0ba6 0028     		cmp	r0, #0
 13277 0ba8 3FF4C8AC 		beq	.L1512
2995:dm/dm42_fns.cc ****             // Fat storage OK but save state failed.
 13278              		.loc 1 2995 0 is_stmt 0 discriminator 1
 13279 0bac 1C4B     		ldr	r3, .L1716+88
 13280 0bae 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 13281 0bb0 13B9     		cbnz	r3, .L1386
ARM GAS  /tmp/ccGYckNR.s 			page 325


2995:dm/dm42_fns.cc ****             // Fat storage OK but save state failed.
 13282              		.loc 1 2995 0 discriminator 4
 13283 0bb2 002F     		cmp	r7, #0
 13284 0bb4 3FF4C2AC 		beq	.L1512
 13285              	.L1386:
3000:dm/dm42_fns.cc ****             SET_ST(STAT_SOFT_OFF);
 13286              		.loc 1 3000 0 is_stmt 1
 13287 0bb8 6620     		movs	r0, #102
 13288 0bba FFF7FEFF 		bl	lcd_for_dm42
 13289              	.LVL1320:
3001:dm/dm42_fns.cc ****           }
 13290              		.loc 1 3001 0
 13291 0bbe 2368     		ldr	r3, [r4]
 13292 0bc0 43F02003 		orr	r3, r3, #32
 13293 0bc4 2360     		str	r3, [r4]
 13294 0bc6 B9E4     		b	.L1512
 13295              	.L1717:
 13296              		.align	2
 13297              	.L1716:
 13298 0bc8 59030008 		.word	134218585
 13299 0bcc 00000000 		.word	MID_MENU
 13300 0bd0 A5030008 		.word	134218661
 13301 0bd4 FD030008 		.word	134218749
 13302 0bd8 00000000 		.word	.LANCHOR0
 13303 0bdc F5030008 		.word	134218741
 13304 0be0 09030008 		.word	134218505
 13305 0be4 020177D3 		.word	-747175678
 13306 0be8 0D030008 		.word	134218509
 13307 0bec DD030008 		.word	134218717
 13308 0bf0 4D030008 		.word	134218573
 13309 0bf4 08000000 		.word	.LC105
 13310 0bf8 E1030008 		.word	134218721
 13311 0bfc 7ADA42D3 		.word	-750593414
 13312 0c00 00000000 		.word	.LANCHOR8
 13313 0c04 00000000 		.word	.LANCHOR34
 13314 0c08 00000000 		.word	.LANCHOR24
 13315 0c0c 00000000 		.word	.LC104
 13316 0c10 00000000 		.word	.LANCHOR33
 13317 0c14 00000000 		.word	.LANCHOR32
 13318 0c18 D5020008 		.word	134218453
 13319 0c1c CDCCCCCC 		.word	-858993459
 13320 0c20 00000000 		.word	.LANCHOR14
 13321 0c24 00000000 		.word	.LANCHOR25
 13322 0c28 39040008 		.word	134218809
 13323 0c2c E5030008 		.word	134218725
 13324              	.LVL1321:
 13325              	.L1692:
 13326              	.LBE853:
 13327              	.LBE855:
2920:dm/dm42_fns.cc ****           lcd_for_dm42(DISP_SAVING_STATE);
 13328              		.loc 1 2920 0 discriminator 1
 13329 0c30 B04B     		ldr	r3, .L1718
 13330 0c32 9847     		blx	r3
 13331              	.LVL1322:
 13332 0c34 0028     		cmp	r0, #0
 13333 0c36 3FF46FAC 		beq	.L1357
2921:dm/dm42_fns.cc **** 
ARM GAS  /tmp/ccGYckNR.s 			page 326


 13334              		.loc 1 2921 0
 13335 0c3a 6520     		movs	r0, #101
 13336 0c3c FFF7FEFF 		bl	lcd_for_dm42
 13337              	.LVL1323:
2923:dm/dm42_fns.cc ****           
 13338              		.loc 1 2923 0
 13339 0c40 AD4B     		ldr	r3, .L1718+4
 13340 0c42 0120     		movs	r0, #1
 13341 0c44 9847     		blx	r3
 13342              	.LVL1324:
2925:dm/dm42_fns.cc ****           savestat_init_write();
 13343              		.loc 1 2925 0
 13344 0c46 AD4B     		ldr	r3, .L1718+8
 13345 0c48 AD48     		ldr	r0, .L1718+12
 13346 0c4a 9847     		blx	r3
 13347              	.LVL1325:
2926:dm/dm42_fns.cc ****         }
 13348              		.loc 1 2926 0
 13349 0c4c FFF7FEFF 		bl	savestat_init_write
 13350              	.LVL1326:
 13351 0c50 62E4     		b	.L1357
 13352              	.L1530:
 13353              	.LBE857:
 13354              	.LBE860:
 13355              	.LBE863:
 13356              	.LBE998:
 13357              	.LBB999:
 13358              	.LBB842:
 13359 0c52 FFF7FEFF 		bl	disp_header.part.11
 13360              	.LVL1327:
 13361 0c56 FFF7DBBB 		b	.L1652
 13362              	.LVL1328:
 13363              	.L1396:
 13364              	.LBE842:
 13365              	.LBE999:
 13366              	.LBB1000:
 13367              	.LBB888:
3076:dm/dm42_fns.cc ****       }
 13368              		.loc 1 3076 0
 13369 0c5a AA4B     		ldr	r3, .L1718+16
 13370 0c5c 5846     		mov	r0, fp
 13371              	.LVL1329:
 13372 0c5e C3F800B0 		str	fp, [r3]
 13373 0c62 FFF7BEBA 		b	.L1395
 13374              	.LVL1330:
 13375              	.L1699:
 13376              	.LBE888:
 13377              	.LBE1000:
3347:dm/dm42_fns.cc ****         key = KEY_SHIFT;
 13378              		.loc 1 3347 0
 13379 0c66 A84A     		ldr	r2, .L1718+20
 13380 0c68 0133     		adds	r3, r3, #1
 13381 0c6a 44E5     		b	.L1657
 13382              	.LVL1331:
 13383              	.L1687:
3219:dm/dm42_fns.cc ****         clear_no_keystrokes_yet();
 13384              		.loc 1 3219 0 discriminator 1
ARM GAS  /tmp/ccGYckNR.s 			page 327


 13385 0c6c A74B     		ldr	r3, .L1718+24
 13386 0c6e 9847     		blx	r3
 13387              	.LVL1332:
 13388 0c70 FFF77FBB 		b	.L1442
 13389              	.LVL1333:
 13390              	.L1435:
 13391              	.LBB1001:
 13392              	.LBB914:
 13393              	.LBB911:
 13394              	.LBB908:
 13395              	.LBB902:
 13396              	.LBB898:
3182:dm/dm42_fns.cc ****               if ( repeat == 0 )
 13397              		.loc 1 3182 0
 13398 0c74 FFF7FEFF 		bl	_Z11core_repeatv
 13399              	.LVL1334:
3183:dm/dm42_fns.cc ****                 clearTimeout0();
 13400              		.loc 1 3183 0
 13401 0c78 0028     		cmp	r0, #0
 13402 0c7a 4FD0     		beq	.L1708
3186:dm/dm42_fns.cc ****             }
 13403              		.loc 1 3186 0
 13404 0c7c 0128     		cmp	r0, #1
 13405 0c7e 14BF     		ite	ne
 13406 0c80 6421     		movne	r1, #100
 13407 0c82 C821     		moveq	r1, #200
 13408 0c84 0020     		movs	r0, #0
 13409              	.LVL1335:
 13410 0c86 FFF7FEFF 		bl	setTimeout0
 13411              	.LVL1336:
 13412 0c8a FFF7F5BA 		b	.L1433
 13413              	.L1434:
 13414              	.LBE898:
3190:dm/dm42_fns.cc ****             setTimeout0(TIMEOUT_CORE2, 1750);
 13415              		.loc 1 3190 0
 13416 0c8e FFF7FEFF 		bl	_Z16core_keytimeout1v
 13417              	.LVL1337:
3191:dm/dm42_fns.cc ****             break;
 13418              		.loc 1 3191 0
 13419 0c92 40F2D661 		movw	r1, #1750
 13420 0c96 0220     		movs	r0, #2
 13421 0c98 FFF7FEFF 		bl	setTimeout0
 13422              	.LVL1338:
3192:dm/dm42_fns.cc ****           case TIMEOUT_CORE2:
 13423              		.loc 1 3192 0
 13424 0c9c FFF7ECBA 		b	.L1433
 13425              	.LVL1339:
 13426              	.L1691:
 13427              	.LBE902:
 13428              	.LBE908:
 13429              	.LBE911:
 13430              	.LBE914:
 13431              	.LBE1001:
3369:dm/dm42_fns.cc ****     no_menu_key = is_menu_active && key > 0 && key < 7;
 13432              		.loc 1 3369 0
 13433 0ca0 6FF0010B 		mvn	fp, #1
 13434              	.LVL1340:
ARM GAS  /tmp/ccGYckNR.s 			page 328


 13435              	.L1537:
 13436 0ca4 0093     		str	r3, [sp]
3369:dm/dm42_fns.cc ****     no_menu_key = is_menu_active && key > 0 && key < 7;
 13437              		.loc 1 3369 0 is_stmt 0 discriminator 2
 13438 0ca6 FFF7FEFF 		bl	_Z13core_hex_menuv
 13439              	.LVL1341:
 13440 0caa 009B     		ldr	r3, [sp]
 13441 0cac 0028     		cmp	r0, #0
 13442 0cae 7FF478AB 		bne	.L1482
 13443 0cb2 F5E4     		b	.L1538
 13444              	.LVL1342:
 13445              	.L1707:
 13446              	.LBB1002:
 13447              	.LBB864:
 13448              	.LBB861:
 13449              	.LBB858:
 13450              	.LBB856:
 13451              	.LBB854:
2989:dm/dm42_fns.cc ****           FRESULT cls_res = f_close(ppgm_fp);
 13452              		.loc 1 2989 0 is_stmt 1
 13453 0cb4 05AB     		add	r3, sp, #20
 13454 0cb6 964F     		ldr	r7, .L1718+28
 13455 0cb8 6068     		ldr	r0, [r4, #4]
 13456 0cba 2022     		movs	r2, #32
 13457 0cbc 06A9     		add	r1, sp, #24
 13458 0cbe B847     		blx	r7
 13459              	.LVL1343:
 13460 0cc0 944B     		ldr	r3, .L1718+32
 13461 0cc2 1870     		strb	r0, [r3]
 13462 0cc4 65E7     		b	.L1384
 13463              	.LVL1344:
 13464              	.L1698:
 13465              	.LBE854:
 13466              	.LBE856:
 13467              	.LBE858:
 13468              	.LBE861:
 13469              	.LBE864:
 13470              	.LBE1002:
 13471              	.LBB1003:
 13472              	.LBB962:
 13473 0cc6 FFF7FEFF 		bl	set_shift.part.14
 13474              	.LVL1345:
 13475 0cca 4FF0160B 		mov	fp, #22
 13476              	.LBE962:
 13477              	.LBE1003:
3364:dm/dm42_fns.cc ****       }
 13478              		.loc 1 3364 0
 13479 0cce 5346     		mov	r3, r10
 13480 0cd0 DAE4     		b	.L1480
 13481              	.L1706:
 13482              	.LBB1004:
 13483              	.LBB994:
 13484 0cd2 FFF7FEFF 		bl	set_shift.part.14
 13485              	.LVL1346:
 13486 0cd6 4FF0110B 		mov	fp, #17
 13487              	.LBE994:
 13488              	.LBE1004:
ARM GAS  /tmp/ccGYckNR.s 			page 329


3360:dm/dm42_fns.cc ****       }
 13489              		.loc 1 3360 0
 13490 0cda 5346     		mov	r3, r10
 13491 0cdc D4E4     		b	.L1480
 13492              	.LVL1347:
 13493              	.L1461:
 13494              	.LBB1005:
 13495              	.LBB939:
3302:dm/dm42_fns.cc ****               pgm_font_ix = lcd_nextFontNr(pgm_font_ix);
 13496              		.loc 1 3302 0
 13497 0cde FFF7FEFF 		bl	is_pgm_mode
 13498              	.LVL1348:
3303:dm/dm42_fns.cc ****             else
 13499              		.loc 1 3303 0
 13500 0ce2 8D4B     		ldr	r3, .L1718+36
3302:dm/dm42_fns.cc ****               pgm_font_ix = lcd_nextFontNr(pgm_font_ix);
 13501              		.loc 1 3302 0
 13502 0ce4 0028     		cmp	r0, #0
 13503 0ce6 7FF444AD 		bne	.L1656
 13504              	.L1463:
3305:dm/dm42_fns.cc ****           }
 13505              		.loc 1 3305 0
 13506 0cea 8C4A     		ldr	r2, .L1718+40
 13507 0cec 92F90000 		ldrsb	r0, [r2]
 13508 0cf0 9847     		blx	r3
 13509              	.LVL1349:
 13510 0cf2 8A4B     		ldr	r3, .L1718+40
 13511 0cf4 1870     		strb	r0, [r3]
 13512 0cf6 95E4     		b	.L1449
 13513              	.LVL1350:
 13514              	.L1689:
 13515              	.LBE939:
 13516              	.LBE1005:
3328:dm/dm42_fns.cc ****       // Make screenshot
 13517              		.loc 1 3328 0
 13518 0cf8 04AA     		add	r2, sp, #16
 13519 0cfa 03A9     		add	r1, sp, #12
 13520 0cfc 1C20     		movs	r0, #28
 13521 0cfe FFF7FEFF 		bl	_Z12core_keydowniPiS_
 13522              	.LVL1351:
3330:dm/dm42_fns.cc ****         wait_for_key_press();
 13523              		.loc 1 3330 0
 13524 0d02 874B     		ldr	r3, .L1718+44
3328:dm/dm42_fns.cc ****       // Make screenshot
 13525              		.loc 1 3328 0
 13526 0d04 0746     		mov	r7, r0
 13527              	.LVL1352:
3330:dm/dm42_fns.cc ****         wait_for_key_press();
 13528              		.loc 1 3330 0
 13529 0d06 0120     		movs	r0, #1
 13530              	.LVL1353:
 13531 0d08 9847     		blx	r3
 13532              	.LVL1354:
 13533 0d0a 0228     		cmp	r0, #2
 13534 0d0c 7FF4ABAB 		bne	.L1469
 13535              	.L1690:
3331:dm/dm42_fns.cc ****         calc_lcd_redraw();
ARM GAS  /tmp/ccGYckNR.s 			page 330


 13536              		.loc 1 3331 0
 13537 0d10 844B     		ldr	r3, .L1718+48
 13538 0d12 9847     		blx	r3
 13539              	.LVL1355:
3332:dm/dm42_fns.cc ****       }
 13540              		.loc 1 3332 0
 13541 0d14 FFF7FEFF 		bl	calc_lcd_redraw
 13542              	.LVL1356:
 13543 0d18 FFF7A5BB 		b	.L1469
 13544              	.LVL1357:
 13545              	.L1708:
 13546              	.LBB1006:
 13547              	.LBB915:
 13548              	.LBB912:
 13549              	.LBB909:
 13550              	.LBB903:
 13551              	.LBB901:
 13552              	.LBB899:
 13553              	.LBB900:
2617:dm/dm42_fns.cc **** }
 13554              		.loc 1 2617 0
 13555 0d1c 824B     		ldr	r3, .L1718+52
 13556 0d1e 9847     		blx	r3
 13557              	.LVL1358:
 13558 0d20 FFF7AABA 		b	.L1433
 13559              	.LVL1359:
 13560              	.L1696:
 13561              	.LBE900:
 13562              	.LBE899:
 13563              	.LBE901:
 13564              	.LBE903:
 13565              	.LBE909:
 13566              	.LBE912:
 13567              	.LBE915:
 13568              	.LBE1006:
 13569              	.LBB1007:
 13570              	.LBB940:
3282:dm/dm42_fns.cc ****               pgm_font_ix = lcd_toggleFontT(pgm_font_ix);
 13571              		.loc 1 3282 0
 13572 0d24 FFF7FEFF 		bl	is_pgm_mode
 13573              	.LVL1360:
3283:dm/dm42_fns.cc ****             else
 13574              		.loc 1 3283 0
 13575 0d28 804B     		ldr	r3, .L1718+56
3282:dm/dm42_fns.cc ****               pgm_font_ix = lcd_toggleFontT(pgm_font_ix);
 13576              		.loc 1 3282 0
 13577 0d2a 0028     		cmp	r0, #0
 13578 0d2c DDD0     		beq	.L1463
 13579 0d2e 20E5     		b	.L1656
 13580              	.LVL1361:
 13581              	.L1700:
 13582              	.LBE940:
 13583              	.LBE1007:
3439:dm/dm42_fns.cc ****             setTimeout0(TIMEOUT_REPEAT, repeat == 1 ?  400 : 200); // First repeat is longer
 13584              		.loc 1 3439 0
 13585 0d30 FFF7FEFF 		bl	is_pgm_mode
 13586              	.LVL1362:
ARM GAS  /tmp/ccGYckNR.s 			page 331


 13587 0d34 0028     		cmp	r0, #0
 13588 0d36 40F00981 		bne	.L1709
 13589              	.L1498:
3442:dm/dm42_fns.cc ****         }
 13590              		.loc 1 3442 0
 13591 0d3a 049B     		ldr	r3, [sp, #16]
 13592 0d3c 012B     		cmp	r3, #1
 13593 0d3e 14BF     		ite	ne
 13594 0d40 4FF4FA71 		movne	r1, #500
 13595 0d44 4FF47A71 		moveq	r1, #1000
 13596 0d48 0020     		movs	r0, #0
 13597 0d4a FFF7FEFF 		bl	setTimeout0
 13598              	.LVL1363:
 13599 0d4e 7FE5     		b	.L1501
 13600              	.LVL1364:
 13601              	.L1704:
 13602              	.LBB1008:
 13603              	.LBB889:
 13604              	.LBB885:
 13605              	.LBB882:
 13606              	.LBB880:
 13607              	.LBB870:
3089:dm/dm42_fns.cc ****           core_set_printer_delay(dat.printer_delay ? (10*(uint)dat.printer_delay) : DFLT_82240_LINE
 13608              		.loc 1 3089 0
 13609 0d50 774B     		ldr	r3, .L1718+60
 13610 0d52 9DF82C00 		ldrb	r0, [sp, #44]	@ zero_extendqisi2
 13611 0d56 9847     		blx	r3
 13612              	.LVL1365:
3090:dm/dm42_fns.cc **** 
 13613              		.loc 1 3090 0
 13614 0d58 9DF82D30 		ldrb	r3, [sp, #45]	@ zero_extendqisi2
 13615 0d5c 002B     		cmp	r3, #0
 13616 0d5e 00F0C680 		beq	.L1550
3090:dm/dm42_fns.cc **** 
 13617              		.loc 1 3090 0 is_stmt 0 discriminator 1
 13618 0d62 03EB8303 		add	r3, r3, r3, lsl #2
 13619 0d66 5800     		lsls	r0, r3, #1
 13620              	.L1401:
3090:dm/dm42_fns.cc **** 
 13621              		.loc 1 3090 0 discriminator 4
 13622 0d68 FFF7FEFF 		bl	core_set_printer_delay
 13623              	.LVL1366:
3094:dm/dm42_fns.cc ****           SETBY_PS(dat.flags & SAVESTAT_PERM_MAIN_MENU, PERM_MAIN_MENU);
 13624              		.loc 1 3094 0 is_stmt 1 discriminator 4
 13625 0d6c 0798     		ldr	r0, [sp, #28]
 13626 0d6e 714B     		ldr	r3, .L1718+64
 13627 0d70 00F00200 		and	r0, r0, #2
 13628 0d74 9847     		blx	r3
 13629              	.LVL1367:
3095:dm/dm42_fns.cc **** 
 13630              		.loc 1 3095 0 discriminator 4
 13631 0d76 704B     		ldr	r3, .L1718+68
 13632 0d78 0799     		ldr	r1, [sp, #28]
 13633              	.LVL1368:
 13634 0d7a 1B68     		ldr	r3, [r3]
 13635 0d7c 6E4A     		ldr	r2, .L1718+68
 13636 0d7e 8803     		lsls	r0, r1, #14
ARM GAS  /tmp/ccGYckNR.s 			page 332


 13637 0d80 4CBF     		ite	mi
 13638 0d82 43F48073 		orrmi	r3, r3, #256
 13639 0d86 23F48073 		bicpl	r3, r3, #256
 13640 0d8a 1360     		str	r3, [r2]
 13641              	.LBB871:
 13642              	.LBB872:
 13643 0d8c 0022     		movs	r2, #0
 13644 0d8e 1046     		mov	r0, r2
 13645 0d90 01F40021 		and	r1, r1, #524288
 13646              	.LVL1369:
 13647 0d94 FFF7FEFF 		bl	set_print_to_file.part.8
 13648              	.LVL1370:
 13649              	.LBE872:
 13650              	.LBE871:
3098:dm/dm42_fns.cc ****           set_print_to_file(PRTOF_NOIR, dat.flags & SAVESTAT_PRTOF_NOIR, 0);
 13651              		.loc 1 3098 0 discriminator 4
 13652 0d98 0799     		ldr	r1, [sp, #28]
 13653              	.LBB873:
 13654              	.LBB874:
 13655 0d9a 0022     		movs	r2, #0
 13656 0d9c 01F48021 		and	r1, r1, #262144
 13657              	.LVL1371:
 13658 0da0 0120     		movs	r0, #1
 13659 0da2 FFF7FEFF 		bl	set_print_to_file.part.8
 13660              	.LVL1372:
 13661              	.LBE874:
 13662              	.LBE873:
3099:dm/dm42_fns.cc ****           set_print_to_file(PRTOF_GR_IN_TXT, dat.flags & SAVESTAT_PRTOF_GR_IN_TXT, 0);
 13663              		.loc 1 3099 0 discriminator 4
 13664 0da6 0799     		ldr	r1, [sp, #28]
 13665              	.LBB875:
 13666              	.LBB876:
2136:dm/dm42_fns.cc ****     return;
 13667              		.loc 1 2136 0 discriminator 4
 13668 0da8 0720     		movs	r0, #7
 13669 0daa 01F48011 		and	r1, r1, #1048576
 13670              	.LVL1373:
 13671 0dae FFF7FEFF 		bl	set_print_to_file_flag
 13672              	.LVL1374:
 13673              	.LBE876:
 13674              	.LBE875:
3100:dm/dm42_fns.cc **** 
 13675              		.loc 1 3100 0 discriminator 4
 13676 0db2 0799     		ldr	r1, [sp, #28]
 13677              	.LBB877:
 13678              	.LBB878:
2136:dm/dm42_fns.cc ****     return;
 13679              		.loc 1 2136 0 discriminator 4
 13680 0db4 0620     		movs	r0, #6
 13681 0db6 01F40011 		and	r1, r1, #2097152
 13682              	.LVL1375:
 13683 0dba FFF7FEFF 		bl	set_print_to_file_flag
 13684              	.LVL1376:
 13685              	.LBE878:
 13686              	.LBE877:
3103:dm/dm42_fns.cc ****           SETBY_PS( !(dat.flags & SAVESTAT_DISP_DOW), DISP_DOW);
 13687              		.loc 1 3103 0 discriminator 4
ARM GAS  /tmp/ccGYckNR.s 			page 333


 13688 0dbe 5E4A     		ldr	r2, .L1718+68
 13689 0dc0 079B     		ldr	r3, [sp, #28]
 13690 0dc2 1268     		ldr	r2, [r2]
 13691 0dc4 5905     		lsls	r1, r3, #21
 13692 0dc6 5C49     		ldr	r1, .L1718+68
 13693 0dc8 4CBF     		ite	mi
 13694 0dca 42F00202 		orrmi	r2, r2, #2
 13695 0dce 22F00202 		bicpl	r2, r2, #2
 13696 0dd2 0A60     		str	r2, [r1]
3104:dm/dm42_fns.cc ****           SETBY_PS( !(dat.flags & SAVESTAT_DISP_DATE), DISP_DATE);
 13697              		.loc 1 3104 0 discriminator 4
 13698 0dd4 584A     		ldr	r2, .L1718+68
 13699 0dd6 1268     		ldr	r2, [r2]
 13700 0dd8 1905     		lsls	r1, r3, #20
 13701 0dda 5749     		ldr	r1, .L1718+68
 13702 0ddc 54BF     		ite	pl
 13703 0dde 42F00402 		orrpl	r2, r2, #4
 13704 0de2 22F00402 		bicmi	r2, r2, #4
 13705 0de6 0A60     		str	r2, [r1]
3105:dm/dm42_fns.cc ****           SETBY_PS(  (dat.flags & SAVESTAT_DISP_DATE_SEP0), DISP_DATE_SEP0);
 13706              		.loc 1 3105 0 discriminator 4
 13707 0de8 534A     		ldr	r2, .L1718+68
 13708 0dea 1268     		ldr	r2, [r2]
 13709 0dec D904     		lsls	r1, r3, #19
 13710 0dee 5249     		ldr	r1, .L1718+68
 13711 0df0 54BF     		ite	pl
 13712 0df2 42F00802 		orrpl	r2, r2, #8
 13713 0df6 22F00802 		bicmi	r2, r2, #8
 13714 0dfa 0A60     		str	r2, [r1]
3106:dm/dm42_fns.cc ****           SETBY_PS(  (dat.flags & SAVESTAT_DISP_DATE_SEP1), DISP_DATE_SEP1);
 13715              		.loc 1 3106 0 discriminator 4
 13716 0dfc 4E4A     		ldr	r2, .L1718+68
 13717 0dfe 1268     		ldr	r2, [r2]
 13718 0e00 9904     		lsls	r1, r3, #18
 13719 0e02 4D49     		ldr	r1, .L1718+68
 13720 0e04 4CBF     		ite	mi
 13721 0e06 42F01002 		orrmi	r2, r2, #16
 13722 0e0a 22F01002 		bicpl	r2, r2, #16
 13723 0e0e 0A60     		str	r2, [r1]
3107:dm/dm42_fns.cc ****           SETBY_PS(  (dat.flags & SAVESTAT_DISP_SHORTMON), DISP_SHORTMON);
 13724              		.loc 1 3107 0 discriminator 4
 13725 0e10 494A     		ldr	r2, .L1718+68
 13726 0e12 1268     		ldr	r2, [r2]
 13727 0e14 5904     		lsls	r1, r3, #17
 13728 0e16 4849     		ldr	r1, .L1718+68
 13729 0e18 4CBF     		ite	mi
 13730 0e1a 42F02002 		orrmi	r2, r2, #32
 13731 0e1e 22F02002 		bicpl	r2, r2, #32
 13732 0e22 0A60     		str	r2, [r1]
3108:dm/dm42_fns.cc ****           SETBY_PS( !(dat.flags & SAVESTAT_DISP_TIME), DISP_TIME);
 13733              		.loc 1 3108 0 discriminator 4
 13734 0e24 444A     		ldr	r2, .L1718+68
 13735 0e26 1268     		ldr	r2, [r2]
 13736 0e28 1904     		lsls	r1, r3, #16
 13737 0e2a 4349     		ldr	r1, .L1718+68
 13738 0e2c 4CBF     		ite	mi
 13739 0e2e 42F04002 		orrmi	r2, r2, #64
ARM GAS  /tmp/ccGYckNR.s 			page 334


 13740 0e32 22F04002 		bicpl	r2, r2, #64
 13741 0e36 0A60     		str	r2, [r1]
3109:dm/dm42_fns.cc ****           SETBY_PS(   dat.flags & SAVESTAT_FLAG_DISP_VOLTAGE, DISP_VOLTAGE);
 13742              		.loc 1 3109 0 discriminator 4
 13743 0e38 3F4A     		ldr	r2, .L1718+68
 13744 0e3a 1268     		ldr	r2, [r2]
 13745 0e3c D903     		lsls	r1, r3, #15
 13746 0e3e 3E49     		ldr	r1, .L1718+68
 13747 0e40 54BF     		ite	pl
 13748 0e42 42F08002 		orrpl	r2, r2, #128
 13749 0e46 22F08002 		bicmi	r2, r2, #128
 13750 0e4a 0A60     		str	r2, [r1]
3110:dm/dm42_fns.cc **** 
 13751              		.loc 1 3110 0 discriminator 4
 13752 0e4c 3A4A     		ldr	r2, .L1718+68
 13753 0e4e 1268     		ldr	r2, [r2]
 13754 0e50 5907     		lsls	r1, r3, #29
 13755 0e52 4CBF     		ite	mi
 13756 0e54 42F00102 		orrmi	r2, r2, #1
 13757 0e58 22F00102 		bicpl	r2, r2, #1
3114:dm/dm42_fns.cc ****           set_graphics_mode(gm);
 13758              		.loc 1 3114 0 discriminator 4
 13759 0e5c 13F0400F 		tst	r3, #64
3110:dm/dm42_fns.cc **** 
 13760              		.loc 1 3110 0 discriminator 4
 13761 0e60 3549     		ldr	r1, .L1718+68
3113:dm/dm42_fns.cc ****           gm |= (dat.flags & SAVESTAT_FLAG_GMODE1) ? 2 : 0;
 13762              		.loc 1 3113 0 discriminator 4
 13763 0e62 C3F34013 		ubfx	r3, r3, #5, #1
 13764              	.LVL1377:
3114:dm/dm42_fns.cc ****           set_graphics_mode(gm);
 13765              		.loc 1 3114 0 discriminator 4
 13766 0e66 0CBF     		ite	eq
 13767 0e68 0020     		moveq	r0, #0
 13768 0e6a 0220     		movne	r0, #2
 13769              	.LVL1378:
3115:dm/dm42_fns.cc **** 
 13770              		.loc 1 3115 0 discriminator 4
 13771 0e6c 1843     		orrs	r0, r0, r3
 13772              	.LVL1379:
3110:dm/dm42_fns.cc **** 
 13773              		.loc 1 3110 0 discriminator 4
 13774 0e6e 0A60     		str	r2, [r1]
3115:dm/dm42_fns.cc **** 
 13775              		.loc 1 3115 0 discriminator 4
 13776 0e70 FFF7FEFF 		bl	set_graphics_mode
 13777              	.LVL1380:
3118:dm/dm42_fns.cc ****           reflcd |= (dat.flags & SAVESTAT_FLAG_REFLCD1) ? 2 : 0;
 13778              		.loc 1 3118 0 discriminator 4
 13779 0e74 079B     		ldr	r3, [sp, #28]
3119:dm/dm42_fns.cc ****           reflcd |= (dat.flags & SAVESTAT_FLAG_REFLCD2) ? 4 : 0;
 13780              		.loc 1 3119 0 discriminator 4
 13781 0e76 13F4807F 		tst	r3, #256
 13782 0e7a 0CBF     		ite	eq
 13783 0e7c 0020     		moveq	r0, #0
 13784 0e7e 0220     		movne	r0, #2
3120:dm/dm42_fns.cc ****           set_reflcd_mask(~reflcd & 7);
ARM GAS  /tmp/ccGYckNR.s 			page 335


 13785              		.loc 1 3120 0 discriminator 4
 13786 0e80 13F4007F 		tst	r3, #512
3118:dm/dm42_fns.cc ****           reflcd |= (dat.flags & SAVESTAT_FLAG_REFLCD1) ? 2 : 0;
 13787              		.loc 1 3118 0 discriminator 4
 13788 0e84 C3F3C013 		ubfx	r3, r3, #7, #1
 13789              	.LVL1381:
3119:dm/dm42_fns.cc ****           reflcd |= (dat.flags & SAVESTAT_FLAG_REFLCD2) ? 4 : 0;
 13790              		.loc 1 3119 0 discriminator 4
 13791 0e88 43EA0003 		orr	r3, r3, r0
 13792              	.LVL1382:
3120:dm/dm42_fns.cc ****           set_reflcd_mask(~reflcd & 7);
 13793              		.loc 1 3120 0 discriminator 4
 13794 0e8c 0CBF     		ite	eq
 13795 0e8e 0020     		moveq	r0, #0
 13796 0e90 0420     		movne	r0, #4
 13797              	.LVL1383:
 13798 0e92 1843     		orrs	r0, r0, r3
 13799              	.LVL1384:
3121:dm/dm42_fns.cc **** 
 13800              		.loc 1 3121 0 discriminator 4
 13801 0e94 C043     		mvns	r0, r0
 13802              	.LVL1385:
 13803 0e96 00F00700 		and	r0, r0, #7
 13804              	.LVL1386:
 13805 0e9a FFF7FEFF 		bl	set_reflcd_mask
 13806              	.LVL1387:
3124:dm/dm42_fns.cc ****           draw_reg_mode |= (dat.flags & SAVESTAT_FLAG_REG_LINES) ? REG_LINES      : 0;
 13807              		.loc 1 3124 0 discriminator 4
 13808 0e9e 079B     		ldr	r3, [sp, #28]
3125:dm/dm42_fns.cc ****           // ==
 13809              		.loc 1 3125 0 discriminator 4
 13810 0ea0 2648     		ldr	r0, .L1718+72
3131:dm/dm42_fns.cc **** 
 13811              		.loc 1 3131 0 discriminator 4
 13812 0ea2 DDF83120 		ldr	r2, [sp, #49]	@ unaligned
3124:dm/dm42_fns.cc ****           draw_reg_mode |= (dat.flags & SAVESTAT_FLAG_REG_LINES) ? REG_LINES      : 0;
 13813              		.loc 1 3124 0 discriminator 4
 13814 0ea6 13F0080F 		tst	r3, #8
 13815 0eaa 0CBF     		ite	eq
 13816 0eac 0021     		moveq	r1, #0
 13817 0eae 0221     		movne	r1, #2
3125:dm/dm42_fns.cc ****           // ==
 13818              		.loc 1 3125 0 discriminator 4
 13819 0eb0 C3F30013 		ubfx	r3, r3, #4, #1
 13820 0eb4 0B43     		orrs	r3, r3, r1
 13821 0eb6 0370     		strb	r3, [r0]
3131:dm/dm42_fns.cc **** 
 13822              		.loc 1 3131 0 discriminator 4
 13823 0eb8 2148     		ldr	r0, .L1718+76
3133:dm/dm42_fns.cc ****           if (stack_layout == 0) stack_layout = STACK_XYZTL; // Fall down to default for old savefi
 13824              		.loc 1 3133 0 discriminator 4
 13825 0eba 9DF82F10 		ldrb	r1, [sp, #47]	@ zero_extendqisi2
3131:dm/dm42_fns.cc **** 
 13826              		.loc 1 3131 0 discriminator 4
 13827 0ebe 22F07F43 		bic	r3, r2, #-16777216
 13828 0ec2 0360     		str	r3, [r0]
3128:dm/dm42_fns.cc ****           pgm_font_ix = dat.pgm_font_ix;
ARM GAS  /tmp/ccGYckNR.s 			page 336


 13829              		.loc 1 3128 0 discriminator 4
 13830 0ec4 1548     		ldr	r0, .L1718+40
 13831 0ec6 9DF82E20 		ldrb	r2, [sp, #46]	@ zero_extendqisi2
 13832 0eca 0270     		strb	r2, [r0]
3129:dm/dm42_fns.cc **** 
 13833              		.loc 1 3129 0 discriminator 4
 13834 0ecc 1D4A     		ldr	r2, .L1718+80
 13835 0ece 9DF83030 		ldrb	r3, [sp, #48]	@ zero_extendqisi2
 13836 0ed2 1370     		strb	r3, [r2]
3134:dm/dm42_fns.cc ****         }
 13837              		.loc 1 3134 0 discriminator 4
 13838 0ed4 39B1     		cbz	r1, .L1424
3133:dm/dm42_fns.cc ****           if (stack_layout == 0) stack_layout = STACK_XYZTL; // Fall down to default for old savefi
 13839              		.loc 1 3133 0
 13840 0ed6 1C4B     		ldr	r3, .L1718+84
 13841 0ed8 1960     		str	r1, [r3]
 13842 0eda CDE4     		b	.L1399
 13843              	.LVL1388:
 13844              	.L1701:
 13845              	.LBE870:
 13846              	.LBE880:
 13847              	.LBE882:
 13848              	.LBE885:
 13849              	.LBE889:
 13850              	.LBE1008:
3445:dm/dm42_fns.cc ****       }
 13851              		.loc 1 3445 0
 13852 0edc FA21     		movs	r1, #250
 13853 0ede 0120     		movs	r0, #1
 13854 0ee0 FFF7FEFF 		bl	setTimeout0
 13855              	.LVL1389:
 13856 0ee4 B4E4     		b	.L1501
 13857              	.LVL1390:
 13858              	.L1424:
 13859              	.LBB1009:
 13860              	.LBB890:
 13861              	.LBB886:
 13862              	.LBB883:
 13863              	.LBB881:
 13864              	.LBB879:
3134:dm/dm42_fns.cc ****         }
 13865              		.loc 1 3134 0 discriminator 1
 13866 0ee6 184A     		ldr	r2, .L1718+84
 13867 0ee8 1E23     		movs	r3, #30
 13868 0eea 1360     		str	r3, [r2]
 13869 0eec C4E4     		b	.L1399
 13870              	.LVL1391:
 13871              	.L1550:
3090:dm/dm42_fns.cc **** 
 13872              		.loc 1 3090 0
 13873 0eee 4FF4E160 		mov	r0, #1800
 13874 0ef2 39E7     		b	.L1401
 13875              	.L1719:
 13876              		.align	2
 13877              	.L1718:
 13878 0ef4 DD030008 		.word	134218717
 13879 0ef8 E1030008 		.word	134218721
ARM GAS  /tmp/ccGYckNR.s 			page 337


 13880 0efc 09030008 		.word	134218505
 13881 0f00 070177D3 		.word	-747175673
 13882 0f04 00000000 		.word	.LANCHOR43
 13883 0f08 56555555 		.word	1431655766
 13884 0f0c 89030008 		.word	134218633
 13885 0f10 41040008 		.word	134218817
 13886 0f14 00000000 		.word	.LANCHOR14
 13887 0f18 95020008 		.word	134218389
 13888 0f1c 00000000 		.word	.LANCHOR33
 13889 0f20 79030008 		.word	134218617
 13890 0f24 99030008 		.word	134218649
 13891 0f28 F5030008 		.word	134218741
 13892 0f2c A1020008 		.word	134218401
 13893 0f30 D9020008 		.word	134218457
 13894 0f34 AD030008 		.word	134218669
 13895 0f38 00000000 		.word	.LANCHOR8
 13896 0f3c 00000000 		.word	.LANCHOR34
 13897 0f40 00000000 		.word	.LANCHOR24
 13898 0f44 00000000 		.word	.LANCHOR32
 13899 0f48 00000000 		.word	.LANCHOR25
 13900              	.LVL1392:
 13901              	.L1709:
 13902              	.LBE879:
 13903              	.LBE881:
 13904              	.LBE883:
 13905              	.LBE886:
 13906              	.LBE890:
 13907              	.LBE1009:
3439:dm/dm42_fns.cc ****             setTimeout0(TIMEOUT_REPEAT, repeat == 1 ?  400 : 200); // First repeat is longer
 13908              		.loc 1 3439 0 discriminator 1
 13909 0f4c 0F4B     		ldr	r3, .L1720
 13910 0f4e 9847     		blx	r3
 13911              	.LVL1393:
 13912 0f50 0028     		cmp	r0, #0
 13913 0f52 7FF4F2AE 		bne	.L1498
3439:dm/dm42_fns.cc ****             setTimeout0(TIMEOUT_REPEAT, repeat == 1 ?  400 : 200); // First repeat is longer
 13914              		.loc 1 3439 0 is_stmt 0 discriminator 3
 13915 0f56 DFF83CA0 		ldr	r10, .L1720+8
 13916 0f5a D047     		blx	r10
 13917              	.LVL1394:
 13918 0f5c 1228     		cmp	r0, #18
 13919 0f5e 03D0     		beq	.L1499
3439:dm/dm42_fns.cc ****             setTimeout0(TIMEOUT_REPEAT, repeat == 1 ?  400 : 200); // First repeat is longer
 13920              		.loc 1 3439 0 discriminator 6
 13921 0f60 D047     		blx	r10
 13922              	.LVL1395:
 13923 0f62 1728     		cmp	r0, #23
 13924 0f64 7FF4E9AE 		bne	.L1498
 13925              	.L1499:
3440:dm/dm42_fns.cc ****           else
 13926              		.loc 1 3440 0 is_stmt 1
 13927 0f68 049B     		ldr	r3, [sp, #16]
 13928 0f6a 012B     		cmp	r3, #1
 13929 0f6c 14BF     		ite	ne
 13930 0f6e C821     		movne	r1, #200
 13931 0f70 4FF4C871 		moveq	r1, #400
 13932 0f74 0020     		movs	r0, #0
ARM GAS  /tmp/ccGYckNR.s 			page 338


 13933 0f76 FFF7FEFF 		bl	setTimeout0
 13934              	.LVL1396:
 13935 0f7a 36E4     		b	.L1655
 13936              	.LVL1397:
 13937              	.L1534:
 13938              	.LBB1010:
 13939              	.LBB941:
 13940              	.LBB936:
 13941              	.LBB925:
 13942              	.LBB924:
2786:dm/dm42_fns.cc ****     int key = 28; // Turn off shift
 13943              		.loc 1 2786 0
 13944 0f7c 044B     		ldr	r3, .L1720+4
 13945 0f7e 1B68     		ldr	r3, [r3]
 13946 0f80 9A07     		lsls	r2, r3, #30
 13947 0f82 7FF560AB 		bpl	.L1467
 13948 0f86 FFF759BB 		b	.L1536
 13949              	.L1721:
 13950 0f8a 00BF     		.align	2
 13951              	.L1720:
 13952 0f8c B5030008 		.word	134218677
 13953 0f90 00000000 		.word	.LANCHOR0
 13954 0f94 25040008 		.word	134218789
 13955              	.LBE924:
 13956              	.LBE925:
 13957              	.LBE936:
 13958              	.LBE941:
 13959              	.LBE1010:
 13960              	.LBE832:
 13961              		.cfi_endproc
 13962              	.LFE323:
 13964              		.global	last_header_dmy
 13965              		.global	last_header_clk24
 13966              		.global	box_chars
 13967              		.global	prtof_buf
 13968              		.global	date_separators
 13969              		.global	is_show
 13970              		.global	is_graphics
 13971              		.global	is_edit_x
 13972              		.global	is_edit
 13973              		.global	edit_line
 13974              		.global	edit_prompt
 13975              		.global	printer_was_graphics
 13976              		.global	is_gr_print
 13977              		.global	last_alpha_table
 13978              		.global	alpha_table
 13979              		.global	alpha_shift_tables
 13980              		.global	alpha_tables
 13981              		.global	alpha_upper_transl
 13982              		.global	read_statefile
 13983              		.global	tlcd
 13984              		.global	pgm_res
 13985              		.global	pgm_sz
 13986              		.global	pgm_ptr
 13987              		.global	repeat_timeout
 13988              		.global	core_initialized
 13989              		.global	decimal_point
ARM GAS  /tmp/ccGYckNR.s 			page 339


 13990              		.global	draw_reg_mode
 13991              		.global	stack_layout
 13992              		.global	reg_font_offset
 13993              		.global	pgm_font_ix
 13994              		.global	reg_font_ix
 13995              		.global	disp_was_menu_drawn
 13996              		.section	.rodata
 13997              		.align	2
 13998              		.set	.LANCHOR22,. + 0
 13999              	.LC0:
 14000 0000 00000000 		.word	0
 14001 0004 00000000 		.word	0
 14002 0008 01000000 		.word	1
 14003 000c 02000000 		.word	2
 14004              	.LC102:
 14005 0010 04000000 		.word	.LC1
 14006 0014 0C000000 		.word	.LC2
 14007 0018 00000000 		.word	.LC3
 14008 001c 14000000 		.word	.LC4
 14009 0020 1C000000 		.word	.LC5
 14010 0024 24000000 		.word	.LC6
 14011              		.section	.bss._ZL11lcd_changed,"aw",%nobits
 14012              		.align	2
 14013              		.set	.LANCHOR7,. + 0
 14016              	_ZL11lcd_changed:
 14017 0000 00000000 		.space	4
 14018              		.section	.bss._ZL13timeout0_type,"aw",%nobits
 14019              		.set	.LANCHOR39,. + 0
 14022              	_ZL13timeout0_type:
 14023 0000 00       		.space	1
 14024              		.section	.bss._ZL15last_header_min,"aw",%nobits
 14025              		.align	2
 14026              		.set	.LANCHOR31,. + 0
 14029              	_ZL15last_header_min:
 14030 0000 00000000 		.space	4
 14031              		.section	.bss._ZL18last_lcd_update_ms,"aw",%nobits
 14032              		.align	2
 14033              		.set	.LANCHOR9,. + 0
 14036              	_ZL18last_lcd_update_ms:
 14037 0000 00000000 		.space	4
 14038              		.section	.bss._ZL9ann_state,"aw",%nobits
 14039              		.align	2
 14040              		.set	.LANCHOR0,. + 0
 14043              	_ZL9ann_state:
 14044 0000 00000000 		.space	4
 14045              		.section	.bss._ZL9pgm_state,"aw",%nobits
 14046              		.align	2
 14047              		.set	.LANCHOR8,. + 0
 14050              	_ZL9pgm_state:
 14051 0000 00000000 		.space	4
 14052              		.section	.bss._ZZ11str_from_hpE2ss,"aw",%nobits
 14053              		.align	2
 14054              		.set	.LANCHOR12,. + 0
 14057              	_ZZ11str_from_hpE2ss:
 14058 0000 00000000 		.space	80
 14058      00000000 
 14058      00000000 
ARM GAS  /tmp/ccGYckNR.s 			page 340


 14058      00000000 
 14058      00000000 
 14059              		.section	.bss._ZZ9disp_regsE17last_pgm_top_line,"aw",%nobits
 14060              		.align	2
 14061              		.set	.LANCHOR35,. + 0
 14064              	_ZZ9disp_regsE17last_pgm_top_line:
 14065 0000 00000000 		.space	4
 14066              		.section	.bss.core_initialized,"aw",%nobits
 14067              		.set	.LANCHOR44,. + 0
 14070              	core_initialized:
 14071 0000 00       		.space	1
 14072              		.section	.bss.disp_was_menu_drawn,"aw",%nobits
 14073              		.set	.LANCHOR19,. + 0
 14076              	disp_was_menu_drawn:
 14077 0000 00       		.space	1
 14078              		.section	.bss.edit_line,"aw",%nobits
 14079              		.align	2
 14080              		.set	.LANCHOR21,. + 0
 14083              	edit_line:
 14084 0000 00000000 		.space	80
 14084      00000000 
 14084      00000000 
 14084      00000000 
 14084      00000000 
 14085              		.section	.bss.edit_prompt,"aw",%nobits
 14086              		.align	2
 14087              		.set	.LANCHOR20,. + 0
 14090              	edit_prompt:
 14091 0000 00000000 		.space	16
 14091      00000000 
 14091      00000000 
 14091      00000000 
 14092              		.section	.bss.is_edit,"aw",%nobits
 14093              		.set	.LANCHOR18,. + 0
 14096              	is_edit:
 14097 0000 00       		.space	1
 14098              		.section	.bss.is_edit_x,"aw",%nobits
 14099              		.set	.LANCHOR17,. + 0
 14102              	is_edit_x:
 14103 0000 00       		.space	1
 14104              		.section	.bss.is_gr_print,"aw",%nobits
 14105              		.align	2
 14106              		.set	.LANCHOR38,. + 0
 14109              	is_gr_print:
 14110 0000 00000000 		.space	4
 14111              		.section	.bss.is_graphics,"aw",%nobits
 14112              		.set	.LANCHOR10,. + 0
 14115              	is_graphics:
 14116 0000 00       		.space	1
 14117              		.section	.bss.is_show,"aw",%nobits
 14118              		.set	.LANCHOR16,. + 0
 14121              	is_show:
 14122 0000 00       		.space	1
 14123              		.section	.bss.last_alpha_table,"aw",%nobits
 14124              		.set	.LANCHOR40,. + 0
 14127              	last_alpha_table:
 14128 0000 00       		.space	1
ARM GAS  /tmp/ccGYckNR.s 			page 341


 14129              		.section	.bss.last_header_clk24,"aw",%nobits
 14130              		.set	.LANCHOR28,. + 0
 14133              	last_header_clk24:
 14134 0000 00       		.space	1
 14135              		.section	.bss.last_header_dmy,"aw",%nobits
 14136              		.set	.LANCHOR29,. + 0
 14139              	last_header_dmy:
 14140 0000 00       		.space	1
 14141              		.section	.bss.pgm_ptr,"aw",%nobits
 14142              		.align	2
 14145              	pgm_ptr:
 14146 0000 00000000 		.space	4
 14147              		.section	.bss.pgm_res,"aw",%nobits
 14148              		.set	.LANCHOR14,. + 0
 14151              	pgm_res:
 14152 0000 00       		.space	1
 14153              		.section	.bss.pgm_sz,"aw",%nobits
 14154              		.align	2
 14157              	pgm_sz:
 14158 0000 00000000 		.space	4
 14159              		.section	.bss.printer_was_graphics,"aw",%nobits
 14160              		.set	.LANCHOR37,. + 0
 14163              	printer_was_graphics:
 14164 0000 00       		.space	1
 14165              		.section	.bss.prtof_buf,"aw",%nobits
 14166              		.align	2
 14167              		.set	.LANCHOR26,. + 0
 14170              	prtof_buf:
 14171 0000 00000000 		.space	8
 14171      00000000 
 14172              		.section	.bss.read_statefile,"aw",%nobits
 14173              		.align	2
 14174              		.set	.LANCHOR43,. + 0
 14177              	read_statefile:
 14178 0000 00000000 		.space	4
 14179              		.section	.bss.reg_font_offset,"aw",%nobits
 14180              		.align	2
 14181              		.set	.LANCHOR24,. + 0
 14184              	reg_font_offset:
 14185 0000 00000000 		.space	4
 14186              		.section	.bss.repeat_timeout,"aw",%nobits
 14187              		.align	2
 14188              		.set	.LANCHOR42,. + 0
 14191              	repeat_timeout:
 14192 0000 00000000 		.space	4
 14193              		.section	.bss.tlcd,"aw",%nobits
 14194              		.align	2
 14195              		.set	.LANCHOR15,. + 0
 14198              	tlcd:
 14199 0000 00000000 		.space	46
 14199      00000000 
 14199      00000000 
 14199      00000000 
 14199      00000000 
 14200              		.section	.data.alpha_shift_tables,"aw",%progbits
 14201              		.align	2
 14202              		.set	.LANCHOR45,. + 0
ARM GAS  /tmp/ccGYckNR.s 			page 342


 14205              	alpha_shift_tables:
 14206 0000 00000000 		.word	0
 14207 0004 00000000 		.word	_ZL24alpha_shift_upper_transl
 14208 0008 00000000 		.word	_ZL24alpha_shift_lower_transl
 14209              		.section	.data.alpha_table,"aw",%progbits
 14210              		.set	.LANCHOR5,. + 0
 14213              	alpha_table:
 14214 0000 0F       		.byte	15
 14215              		.section	.data.alpha_tables,"aw",%progbits
 14216              		.align	2
 14217              		.set	.LANCHOR46,. + 0
 14220              	alpha_tables:
 14221 0000 00000000 		.word	0
 14222 0004 00000000 		.word	alpha_upper_transl
 14223 0008 00000000 		.word	_ZL18alpha_lower_transl
 14224              		.section	.data.box_chars,"aw",%progbits
 14225              		.align	2
 14226              		.set	.LANCHOR27,. + 0
 14229              	box_chars:
 14230 0000 00000000 		.word	.LC92
 14231 0004 2C000000 		.word	.LC106
 14232 0008 30000000 		.word	.LC107
 14233 000c 34000000 		.word	.LC108
 14234 0010 38000000 		.word	.LC109
 14235 0014 3C000000 		.word	.LC110
 14236 0018 40000000 		.word	.LC111
 14237 001c 44000000 		.word	.LC112
 14238 0020 48000000 		.word	.LC113
 14239 0024 4C000000 		.word	.LC114
 14240 0028 50000000 		.word	.LC115
 14241 002c 54000000 		.word	.LC116
 14242 0030 58000000 		.word	.LC117
 14243 0034 5C000000 		.word	.LC118
 14244 0038 60000000 		.word	.LC119
 14245 003c 64000000 		.word	.LC120
 14246              		.section	.data.date_separators,"aw",%progbits
 14247              		.align	2
 14248              		.set	.LANCHOR23,. + 0
 14251              	date_separators:
 14252 0000 2F2D2E00 		.ascii	"/-.\000"
 14253              		.section	.data.decimal_point,"aw",%progbits
 14254              		.set	.LANCHOR13,. + 0
 14257              	decimal_point:
 14258 0000 01       		.byte	1
 14259              		.section	.data.draw_reg_mode,"aw",%progbits
 14260              		.set	.LANCHOR34,. + 0
 14263              	draw_reg_mode:
 14264 0000 02       		.byte	2
 14265              		.section	.data.pgm_font_ix,"aw",%progbits
 14266              		.set	.LANCHOR32,. + 0
 14269              	pgm_font_ix:
 14270 0000 02       		.byte	2
 14271              		.section	.data.reg_font_ix,"aw",%progbits
 14272              		.set	.LANCHOR33,. + 0
 14275              	reg_font_ix:
 14276 0000 05       		.byte	5
 14277              		.section	.data.stack_layout,"aw",%progbits
ARM GAS  /tmp/ccGYckNR.s 			page 343


 14278              		.align	2
 14279              		.set	.LANCHOR25,. + 0
 14282              	stack_layout:
 14283 0000 0E000000 		.word	14
 14284              		.section	.rodata._Z10hp2utfcharPch.str1.4,"aMS",%progbits,1
 14285              		.align	2
 14286              	.LC44:
 14287 0000 C3B700   		.ascii	"\303\267\000"
 14288 0003 00       		.space	1
 14289              	.LC45:
 14290 0004 C39700   		.ascii	"\303\227\000"
 14291 0007 00       		.space	1
 14292              	.LC46:
 14293 0008 E2889A00 		.ascii	"\342\210\232\000"
 14294              	.LC47:
 14295 000c E288AB00 		.ascii	"\342\210\253\000"
 14296              	.LC48:
 14297 0010 E2969200 		.ascii	"\342\226\222\000"
 14298              	.LC49:
 14299 0014 CEA300   		.ascii	"\316\243\000"
 14300 0017 00       		.space	1
 14301              	.LC50:
 14302 0018 E296B600 		.ascii	"\342\226\266\000"
 14303              	.LC51:
 14304 001c CF8000   		.ascii	"\317\200\000"
 14305 001f 00       		.space	1
 14306              	.LC52:
 14307 0020 C2BF00   		.ascii	"\302\277\000"
 14308 0023 00       		.space	1
 14309              	.LC53:
 14310 0024 E289A400 		.ascii	"\342\211\244\000"
 14311              	.LC54:
 14312 0028 0D0A00   		.ascii	"\015\012\000"
 14313 002b 00       		.space	1
 14314              	.LC55:
 14315 002c E289A500 		.ascii	"\342\211\245\000"
 14316              	.LC56:
 14317 0030 E289A000 		.ascii	"\342\211\240\000"
 14318              	.LC57:
 14319 0034 E286B200 		.ascii	"\342\206\262\000"
 14320              	.LC58:
 14321 0038 E2869300 		.ascii	"\342\206\223\000"
 14322              	.LC59:
 14323 003c E2869200 		.ascii	"\342\206\222\000"
 14324              	.LC60:
 14325 0040 E2869000 		.ascii	"\342\206\220\000"
 14326              	.LC61:
 14327 0044 CEBC00   		.ascii	"\316\274\000"
 14328 0047 00       		.space	1
 14329              	.LC62:
 14330 0048 C2A300   		.ascii	"\302\243\000"
 14331 004b 00       		.space	1
 14332              	.LC63:
 14333 004c C2B000   		.ascii	"\302\260\000"
 14334 004f 00       		.space	1
 14335              	.LC64:
 14336 0050 C38500   		.ascii	"\303\205\000"
ARM GAS  /tmp/ccGYckNR.s 			page 344


 14337 0053 00       		.space	1
 14338              	.LC65:
 14339 0054 C39100   		.ascii	"\303\221\000"
 14340 0057 00       		.space	1
 14341              	.LC66:
 14342 0058 C38400   		.ascii	"\303\204\000"
 14343 005b 00       		.space	1
 14344              	.LC67:
 14345 005c E288A100 		.ascii	"\342\210\241\000"
 14346              	.LC68:
 14347 0060 E1B48700 		.ascii	"\341\264\207\000"
 14348              	.LC69:
 14349 0064 C38600   		.ascii	"\303\206\000"
 14350 0067 00       		.space	1
 14351              	.LC70:
 14352 0068 E280A600 		.ascii	"\342\200\246\000"
 14353              	.LC71:
 14354 006c E2909B00 		.ascii	"\342\220\233\000"
 14355              	.LC72:
 14356 0070 C39600   		.ascii	"\303\226\000"
 14357 0073 00       		.space	1
 14358              	.LC73:
 14359 0074 C39C00   		.ascii	"\303\234\000"
 14360 0077 00       		.space	1
 14361              	.LC74:
 14362 0078 E296A000 		.ascii	"\342\226\240\000"
 14363              	.LC75:
 14364 007c E2949C00 		.ascii	"\342\224\234\000"
 14365              	.LC76:
 14366 0080 5900     		.ascii	"Y\000"
 14367 0082 0000     		.space	2
 14368              	.LC77:
 14369 0084 E2908A00 		.ascii	"\342\220\212\000"
 14370              		.section	.rodata._Z11shell_printPKciS0_iiiii.str1.4,"aMS",%progbits,1
 14371              		.align	2
 14372              	.LC103:
 14373 0000 3C6C6364 		.ascii	"<lcd>\000"
 14373      3E00
 14374              		.section	.rodata._Z17shell_malloc_failjPKci.str1.4,"aMS",%progbits,1
 14375              		.align	2
 14376              	.LC78:
 14377 0000 556E6861 		.ascii	"Unhandled memory allocation fail file:\000"
 14377      6E646C65 
 14377      64206D65 
 14377      6D6F7279 
 14377      20616C6C 
 14378 0027 00       		.space	1
 14379              	.LC79:
 14380 0028 6174206C 		.ascii	"at line %i\000"
 14380      696E6520 
 14380      256900
 14381 0033 00       		.space	1
 14382              	.LC80:
 14383 0034 73697A65 		.ascii	"size %i\000"
 14383      20256900 
 14384              	.LC81:
 14385 003c 50726573 		.ascii	"Press EXIT to RESET the calculator...\000"
ARM GAS  /tmp/ccGYckNR.s 			page 345


 14385      73204558 
 14385      49542074 
 14385      6F205245 
 14385      53455420 
 14386              		.section	.rodata._Z8hp2asciiPcPKci.str1.4,"aMS",%progbits,1
 14387              		.align	2
 14388              	.LC8:
 14389 0000 F700     		.ascii	"\367\000"
 14390 0002 0000     		.space	2
 14391              	.LC9:
 14392 0004 5C4C4600 		.ascii	"\\LF\000"
 14393              	.LC10:
 14394 0008 7900     		.ascii	"y\000"
 14395 000a 0000     		.space	2
 14396              	.LC11:
 14397 000c 3A00     		.ascii	":\000"
 14398 000e 0000     		.space	2
 14399              	.LC12:
 14400 0010 7C2D00   		.ascii	"|-\000"
 14401 0013 00       		.space	1
 14402              	.LC13:
 14403 0014 5C5C00   		.ascii	"\\\\\000"
 14404 0017 00       		.space	1
 14405              	.LC14:
 14406 0018 5C62756C 		.ascii	"\\bullet\000"
 14406      6C657400 
 14407              	.LC15:
 14408 0020 5C677261 		.ascii	"\\gray2\000"
 14408      793200
 14409 0027 00       		.space	1
 14410              	.LC16:
 14411 0028 DC00     		.ascii	"\334\000"
 14412 002a 0000     		.space	2
 14413              	.LC17:
 14414 002c D600     		.ascii	"\326\000"
 14415 002e 0000     		.space	2
 14416              	.LC18:
 14417 0030 5C657363 		.ascii	"\\esc\000"
 14417      00
 14418 0035 000000   		.space	3
 14419              	.LC19:
 14420 0038 2E2E2E00 		.ascii	"...\000"
 14421              	.LC20:
 14422 003c C600     		.ascii	"\306\000"
 14423 003e 0000     		.space	2
 14424              	.LC21:
 14425 0040 4500     		.ascii	"E\000"
 14426 0042 0000     		.space	2
 14427              	.LC22:
 14428 0044 3C00     		.ascii	"<\000"
 14429 0046 0000     		.space	2
 14430              	.LC23:
 14431 0048 C400     		.ascii	"\304\000"
 14432 004a 0000     		.space	2
 14433              	.LC24:
 14434 004c D100     		.ascii	"\321\000"
 14435 004e 0000     		.space	2
ARM GAS  /tmp/ccGYckNR.s 			page 346


 14436              	.LC25:
 14437 0050 C500     		.ascii	"\305\000"
 14438 0052 0000     		.space	2
 14439              	.LC26:
 14440 0054 B000     		.ascii	"\260\000"
 14441 0056 0000     		.space	2
 14442              	.LC27:
 14443 0058 A300     		.ascii	"\243\000"
 14444 005a 0000     		.space	2
 14445              	.LC28:
 14446 005c B500     		.ascii	"\265\000"
 14447 005e 0000     		.space	2
 14448              	.LC29:
 14449 0060 3C2D00   		.ascii	"<-\000"
 14450 0063 00       		.space	1
 14451              	.LC30:
 14452 0064 2D3E00   		.ascii	"->\000"
 14453 0067 00       		.space	1
 14454              	.LC31:
 14455 0068 7600     		.ascii	"v\000"
 14456 006a 0000     		.space	2
 14457              	.LC32:
 14458 006c 5C7200   		.ascii	"\\r\000"
 14459 006f 00       		.space	1
 14460              	.LC33:
 14461 0070 213D00   		.ascii	"!=\000"
 14462 0073 00       		.space	1
 14463              	.LC34:
 14464 0074 3E3D00   		.ascii	">=\000"
 14465 0077 00       		.space	1
 14466              	.LC35:
 14467 0078 3C3D00   		.ascii	"<=\000"
 14468 007b 00       		.space	1
 14469              	.LC36:
 14470 007c BF00     		.ascii	"\277\000"
 14471 007e 0000     		.space	2
 14472              	.LC37:
 14473 0080 5C706900 		.ascii	"\\pi\000"
 14474              	.LC38:
 14475 0084 3E00     		.ascii	">\000"
 14476 0086 0000     		.space	2
 14477              	.LC39:
 14478 0088 5C536967 		.ascii	"\\Sigma\000"
 14478      6D6100
 14479 008f 00       		.space	1
 14480              	.LC40:
 14481 0090 5C677261 		.ascii	"\\gray1\000"
 14481      793100
 14482 0097 00       		.space	1
 14483              	.LC41:
 14484 0098 5C696E74 		.ascii	"\\int\000"
 14484      00
 14485 009d 000000   		.space	3
 14486              	.LC42:
 14487 00a0 D700     		.ascii	"\327\000"
 14488 00a2 0000     		.space	2
 14489              	.LC43:
ARM GAS  /tmp/ccGYckNR.s 			page 347


 14490 00a4 5C737172 		.ascii	"\\sqrt\000"
 14490      7400
 14491              		.section	.rodata._ZL16hp2printer_table,"a",%progbits
 14492              		.align	2
 14493              		.set	.LANCHOR11,. + 0
 14496              	_ZL16hp2printer_table:
 14497 0000 81       		.byte	-127
 14498 0001 82       		.byte	-126
 14499 0002 83       		.byte	-125
 14500 0003 84       		.byte	-124
 14501 0004 04       		.byte	4
 14502 0005 85       		.byte	-123
 14503 0006 86       		.byte	-122
 14504 0007 87       		.byte	-121
 14505 0008 B9       		.byte	-71
 14506 0009 89       		.byte	-119
 14507 000a 0A       		.byte	10
 14508 000b 8A       		.byte	-118
 14509 000c 8B       		.byte	-117
 14510 000d F4       		.byte	-12
 14511 000e 76       		.byte	118
 14512 000f 8D       		.byte	-115
 14513 0010 8E       		.byte	-114
 14514 0011 8F       		.byte	-113
 14515 0012 AF       		.byte	-81
 14516 0013 91       		.byte	-111
 14517 0014 D0       		.byte	-48
 14518 0015 B6       		.byte	-74
 14519 0016 D8       		.byte	-40
 14520 0017 A0       		.byte	-96
 14521 0018 45       		.byte	69
 14522 0019 D3       		.byte	-45
 14523 001a 9B       		.byte	-101
 14524 001b 1B       		.byte	27
 14525 001c DA       		.byte	-38
 14526 001d DB       		.byte	-37
 14527 001e 7F       		.byte	127
 14528 001f F2       		.byte	-14
 14529 0020 94       		.byte	-108
 14530 0021 3A       		.byte	58
 14531 0022 59       		.byte	89
 14532              		.section	.rodata._ZL18alpha_lower_transl,"a",%progbits
 14533              		.align	2
 14536              	_ZL18alpha_lower_transl:
 14537 0000 5F616263 		.ascii	"_abcdefghijkl_mno__pqrs_tuvw_xyz-_:._ \000"
 14537      64656667 
 14537      68696A6B 
 14537      6C5F6D6E 
 14537      6F5F5F70 
 14538              		.section	.rodata._ZL24alpha_shift_lower_transl,"a",%progbits
 14539              		.align	2
 14542              	_ZL24alpha_shift_lower_transl:
 14543 0000 5F616263 		.ascii	"_abcdefghijkl_mno__789/_456*_123-_0.?+\000"
 14543      64656667 
 14543      68696A6B 
 14543      6C5F6D6E 
 14543      6F5F5F37 
ARM GAS  /tmp/ccGYckNR.s 			page 348


 14544              		.section	.rodata._ZL24alpha_shift_upper_transl,"a",%progbits
 14545              		.align	2
 14548              	_ZL24alpha_shift_upper_transl:
 14549 0000 5F414243 		.ascii	"_ABCDEFGHIJKL_MNO__789/_456*_123-_0.?+\000"
 14549      44454647 
 14549      48494A4B 
 14549      4C5F4D4E 
 14549      4F5F5F37 
 14550              		.section	.rodata._ZL5ann00,"a",%progbits
 14551              		.align	2
 14552              		.set	.LANCHOR3,. + 0
 14555              	_ZL5ann00:
 14556 0000 FFFFFFFF 		.ascii	"\377\377\377\377\377\377\377\377\377\377\377\377\377"
 14556      FFFFFFFF 
 14556      FFFFFFFF 
 14556      FF
 14557 000d FFFFDFFF 		.ascii	"\377\377\337\377\367\377\377\377\377\377\377\377\377"
 14557      F7FFFFFF 
 14557      FFFFFFFF 
 14557      FF
 14558 001a FFFFFFFF 		.ascii	"\377\377\377\377\377\377\377\377\377\377\377\377\377"
 14558      FFFFFFFF 
 14558      FFFFFFFF 
 14558      FF
 14559 0027 FFFFFFFF 		.ascii	"\377\377\377\377\377\377\377\377\317\377\347\377\377"
 14559      FFFFFFFF 
 14559      CFFFE7FF 
 14559      FF
 14560 0034 FF03FEFF 		.ascii	"\377\003\376\377\373\377\377\377\377\371\000\300\377"
 14560      FBFFFFFF 
 14560      FFF900C0 
 14560      FF
 14561 0041 FFFFFFFF 		.ascii	"\377\377\377\377\037\370\374\200\007\377\001\000\000"
 14561      1FF8FC80 
 14561      07FF0100 
 14561      00
 14562 004e F8CFFFE7 		.ascii	"\370\317\377\347\377\377?\000\370\377\361\377\377\377"
 14562      FFFF3F00 
 14562      F8FFF1FF 
 14562      FFFF
 14563 005c FFF900C0 		.ascii	"\377\371\000\300\377\377\377\377\377\017xx\200\003\376"
 14563      FFFFFFFF 
 14563      FF0F7878 
 14563      8003FE
 14564 006b 000000F0 		.ascii	"\000\000\000\360\347}\317\377\377\003\000\360\377\340"
 14564      E77DCFFF 
 14564      FF0300F0 
 14564      FFE0
 14565 0079 FFFFFFFF 		.ascii	"\377\377\377\377\360\001\340\377\377\377\377\377\317"
 14565      F001E0FF 
 14565      FFFFFFFF 
 14565      CF
 14566 0086 79789E71 		.ascii	"yx\236q\374\374\377\377\363\347|\316\377\177\000\000"
 14566      FCFCFFFF 
 14566      F3E77CCE 
 14566      FF7F0000 
 14567 0096 E07FC0FF 		.ascii	"\340\177\300\377\377\377\377\360\003\340\377\377\377"
ARM GAS  /tmp/ccGYckNR.s 			page 349


 14567      FFFFFFF0 
 14567      03E0FFFF 
 14567      FF
 14568 00a3 FFFFC779 		.ascii	"\377\377\307yx\236\371\374\374\377\377\203g\376\314"
 14568      789EF9FC 
 14568      FCFFFF83 
 14568      67FECC
 14569 00b2 FF070000 		.ascii	"\377\007\000\000\300?\200\377\377\377\177\340\003\360"
 14569      C03F80FF 
 14569      FFFF7FE0 
 14569      03F0
 14570 00c0 FFFFFFFF 		.ascii	"\377\377\377\377\377\3479s\236\377\374\374\377\377\007"
 14570      FFE73973 
 14570      9EFFFCFC 
 14570      FFFF07
 14571 00cf 73C69C7F 		.ascii	"s\306\234\177\000\000\000\300\037\000\377\377\377\177"
 14571      000000C0 
 14571      1F00FFFF 
 14571      FF7F
 14572 00dd C007F0FF 		.ascii	"\300\007\360\377\377\377\377\377\3479s\234\377\374\374"
 14572      FFFFFFFF 
 14572      E739739C 
 14572      FFFCFC
 14573 00ec FFFF3F33 		.ascii	"\377\377?3\203\231\037\000\000\000\200\017\000\376\377"
 14573      83991F00 
 14573      0000800F 
 14573      00FEFF
 14574 00fb FF7FC007 		.ascii	"\377\177\300\007\370\377\377\377\377\377\3479\363\200"
 14574      F8FFFFFF 
 14574      FFFFE739 
 14574      F380
 14575 0109 C1FCFCFF 		.ascii	"\301\374\374\377\377?3\203\231\017\000\000\000\200\017"
 14575      FF3F3383 
 14575      990F0000 
 14575      00800F
 14576 0118 00FEFFFF 		.ascii	"\000\376\377\377?\300\007\370\377\377\377\377\377\347"
 14576      3FC007F8 
 14576      FFFFFFFF 
 14576      FFE7
 14577 0126 19E081C1 		.ascii	"\031\340\201\301\374\374\377\377?3\203\231\007\000\000"
 14577      FCFCFFFF 
 14577      3F338399 
 14577      070000
 14578 0135 0080FFE0 		.ascii	"\000\200\377\340\377\377\377?\200\017\374\377\377\377"
 14578      FFFFFF3F 
 14578      800FFCFF 
 14578      FFFF
 14579 0143 FFFFCF19 		.ascii	"\377\377\317\031\340\230\371\374\374\377\377\007c\306"
 14579      E098F9FC 
 14579      FCFFFF07 
 14579      63C6
 14580 0151 8C07A8AA 		.ascii	"\214\007\250\252\002\300\377\340\377\377\377\037\200"
 14580      02C0FFE0 
 14580      FFFFFF1F 
 14580      80
 14581 015e 0FFCFFFF 		.ascii	"\017\374\377\377\377\377\377\317\231g\234q\374\374\377"
 14581      FFFFFFCF 
ARM GAS  /tmp/ccGYckNR.s 			page 350


 14581      99679C71 
 14581      FCFCFF
 14582 016d FF8367FE 		.ascii	"\377\203g\376\314\007\370\377\007\300\377\000\000\000"
 14582      CC07F8FF 
 14582      07C0FF00 
 14582      0000
 14583 017b F01F001F 		.ascii	"\360\037\000\037\376\377\377\377\377\377\017\210O\236"
 14583      FEFFFFFF 
 14583      FFFF0F88 
 14583      4F9E
 14584 0189 03FEFCFF 		.ascii	"\003\376\374\377\377\363\347|\316\377\257\252\016\340"
 14584      FFF3E77C 
 14584      CEFFAFAA 
 14584      0EE0
 14585 0197 FF000000 		.ascii	"\377\000\000\000\360\017\000\037\376\377\377\377\377"
 14585      F00F001F 
 14585      FEFFFFFF 
 14585      FF
 14586 01a4 FF1FC84F 		.ascii	"\377\037\310O\236\007\377\000\000\000\360\317}\347\377"
 14586      9E07FF00 
 14586      0000F0CF 
 14586      7DE7FF
 14587 01b3 07001CF8 		.ascii	"\007\000\034\370\377\000\000\000\360\017\000>\377\377"
 14587      FF000000 
 14587      F00F003E 
 14587      FFFF
 14588 01c1 FFFFFFFF 		.ascii	"\377\377\377\377\377\377\377\377\377\377\001\000\000"
 14588      FFFFFFFF 
 14588      FFFF0100 
 14588      00
 14589 01ce F8CFFFE7 		.ascii	"\370\317\377\347\003\000\000x\375\377\000\000\000\360"
 14589      03000078 
 14589      FDFF0000 
 14589      00F0
 14590 01dc 07003EFF 		.ascii	"\007\000>\377\377\377\377\377\377\377\377\377\377\377"
 14590      FFFFFFFF 
 14590      FFFFFFFF 
 14590      FFFF
 14591 01ea FFFFFFFF 		.ascii	"\377\377\377\377\377\337\377\367\377\377\377\375\377"
 14591      FFDFFFF7 
 14591      FFFFFFFD 
 14591      FF
 14592 01f7 FFFFFFFF 		.ascii	"\377\377\377\377\377\377\377\377\377\000"
 14592      FFFFFFFF 
 14592      FF00
 14593              		.section	.rodata._ZL5ann01,"a",%progbits
 14594              		.align	2
 14595              		.set	.LANCHOR6,. + 0
 14598              	_ZL5ann01:
 14599 0000 070000E0 		.ascii	"\007\000\000\340\007\000\000\340\007\000\000\340\007"
 14599      070000E0 
 14599      070000E0 
 14599      07
 14600 000d E007E0FF 		.ascii	"\340\007\340\377\361\377\217\361\303\217\361\377\217"
 14600      F1FF8FF1 
 14600      C38FF1FF 
 14600      8F
ARM GAS  /tmp/ccGYckNR.s 			page 351


 14601 001a 030000C0 		.ascii	"\003\000\000\300\003\000\000\300\003\000\000\300\003"
 14601      030000C0 
 14601      030000C0 
 14601      03
 14602 0027 C003C0FF 		.ascii	"\300\003\300\377\371\377\237\371\303\237\371\377\237"
 14602      F9FF9FF9 
 14602      C39FF9FF 
 14602      9F
 14603 0034 F3FFFFCF 		.ascii	"\363\377\377\317\363\377\377\317\363\377\377\317\003"
 14603      F3FFFFCF 
 14603      F3FFFFCF 
 14603      03
 14604 0041 C0C3C3FF 		.ascii	"\300\303\303\377\371\201\237\371\201\237\371\377\237"
 14604      F9819FF9 
 14604      819FF9FF 
 14604      9F
 14605 004e F9FFF99F 		.ascii	"\371\377\371\2379<x\236\371\207\317\237\001\200a\206"
 14605      393C789E 
 14605      F987CF9F 
 14605      01806186 
 14606 005e FFF9009F 		.ascii	"\377\371\000\237\371\201\237\371\377\237\371\377\371"
 14606      F9819FF9 
 14606      FF9FF9FF 
 14606      F9
 14607 006b 9F191838 		.ascii	"\237\031\0308\234\3713\317\237\341\2071\214\377y\030"
 14607      9CF933CF 
 14607      9FE18731 
 14607      8CFF7918 
 14608 007b 9EF9999F 		.ascii	"\236\371\231\237\371\377\237\371\377\371\237\231\231"
 14608      F9FF9FF9 
 14608      FFF99F99 
 14608      99
 14609 0088 1998F933 		.ascii	"\031\230\3713\317\2371\2141\214\377y<\236\371\030\237"
 14609      CF9F318C 
 14609      318CFF79 
 14609      3C9EF918 
 14609      9F
 14610 0099 F9FF9F39 		.ascii	"\371\377\2379<8\234\371\231\231\231\371\363\237\237"
 14610      3C389CF9 
 14610      999999F9 
 14610      F39F9F
 14611 00a8 3180318C 		.ascii	"1\2001\214\377y\374\237\371\030\237\371\377\237\231"
 14611      FF79FC9F 
 14611      F9189FF9 
 14611      FF9F99
 14612 00b7 99999BF9 		.ascii	"\231\231\233\3719\230\231\371\347\237\2371\2001\214"
 14612      399899F9 
 14612      E79F9F31 
 14612      80318C
 14613 00c6 FF79009F 		.ascii	"\377y\000\237\371<\237\371\377\237\371\231\231\237\371"
 14613      F93C9FF9 
 14613      FF9FF999 
 14613      999FF9
 14614 00d5 391898F9 		.ascii	"9\030\230\371\317?\237\361\207\361\217\377y\000\236"
 14614      CF3F9FF1 
 14614      87F18FFF 
 14614      79009E
ARM GAS  /tmp/ccGYckNR.s 			page 352


 14615 00e4 793C9EF9 		.ascii	"y<\236\371\377\237\371\231\031\234\371\231\031\230\371"
 14615      FF9FF999 
 14615      199CF999 
 14615      1998F9
 14616 00f3 9F279F31 		.ascii	"\237'\2371\2141\214\377y<\234y\000\236\371\377\237\371"
 14616      8C318CFF 
 14616      793C9C79 
 14616      009EF9FF 
 14616      9FF9
 14617 0105 99999999 		.ascii	"\231\231\231\231\231\231\231\371?\003\2371\2141\214"
 14617      999999F9 
 14617      3F039F31 
 14617      8C318C
 14618 0114 FF797C9C 		.ascii	"\377y|\234y\000\236\371\377\237\231\231\231\231\031"
 14618      79009EF9 
 14618      FF9F9999 
 14618      999919
 14619 0123 189899F9 		.ascii	"\030\230\231\371?\347\237q\2141\214\377y|\2349~\234"
 14619      3FE79F71 
 14619      8C318CFF 
 14619      797C9C39 
 14619      7E9C
 14620 0135 F9FF9F39 		.ascii	"\371\377\2379<Z\2349<\230\231\371\003\347\237\261\207"
 14620      3C5A9C39 
 14620      3C9899F9 
 14620      03E79FB1 
 14620      87
 14621 0146 318CFF79 		.ascii	"1\214\377y0\2349~\234\371\377\237\363\377\377\317\363"
 14621      309C397E 
 14621      9CF9FF9F 
 14621      F3FFFFCF 
 14621      F3
 14622 0157 FFFFCFF3 		.ascii	"\377\377\317\363\377\377\317\003\3003\314\3779\002\236"
 14622      FFFFCF03 
 14622      C033CCFF 
 14622      39029E
 14623 0166 397E9CF9 		.ascii	"9~\234\371\377\237\003\000\000\300\003\000\000\300\003"
 14623      FF9F0300 
 14623      00C00300 
 14623      00C003
 14624 0175 0000C003 		.ascii	"\000\000\300\003\300\003\300\3779\007\237\031\377\230"
 14624      C003C0FF 
 14624      39079F19 
 14624      FF98
 14625 0183 F9FF9F07 		.ascii	"\371\377\237\007\000\000\340\007\000\000\340\007\000"
 14625      0000E007 
 14625      0000E007 
 14625      00
 14626 0190 00E007E0 		.ascii	"\000\340\007\340\007\340\377\361\377\217\021\377\210"
 14626      07E0FFF1 
 14626      FF8F11FF 
 14626      88
 14627 019d F1FF8F00 		.ascii	"\361\377\217\000"
 14628              		.section	.rodata._ZL5ann02,"a",%progbits
 14629              		.align	2
 14630              		.set	.LANCHOR30,. + 0
 14633              	_ZL5ann02:
ARM GAS  /tmp/ccGYckNR.s 			page 353


 14634 0000 00000000 		.ascii	"\000\000\000\000\000\000\000\000\000\000\000\000\000"
 14634      00000000 
 14634      00000000 
 14634      00
 14635 000d 00000000 		.ascii	"\000\000\000\000\000\000\000\000\000\000\000\000\000"
 14635      00000000 
 14635      00000000 
 14635      00
 14636 001a 00000000 		.ascii	"\000\000\000\000\000\000\340\001\000\017\340\377\377"
 14636      0000E001 
 14636      000FE0FF 
 14636      FF
 14637 0027 0FE0FFFF 		.ascii	"\017\340\377\377\017\340\377\377\017\340\377\377\017"
 14637      0FE0FFFF 
 14637      0FE0FFFF 
 14637      0F
 14638 0034 E0FFFF0F 		.ascii	"\340\377\377\017\340\377\377\017\0000\000\000P\003\200"
 14638      E0FFFF0F 
 14638      00300000 
 14638      500380
 14639 0043 1DF0FFFF 		.ascii	"\035\360\377\377\037\360\377\377\037\360\377\377\037"
 14639      1FF0FFFF 
 14639      1FF0FFFF 
 14639      1F
 14640 0050 F0FFFF1F 		.ascii	"\360\377\377\037\360\377\377\037\360\377\377\037\000"
 14640      F0FFFF1F 
 14640      F0FFFF1F 
 14640      00
 14641 005d F80F0030 		.ascii	"\370\017\0000\006\300\0100\000\000\0300\000\000\030"
 14641      06C00830 
 14641      00001830 
 14641      000018
 14642 006c 30000018 		.ascii	"0\000\000\0300\000\000\0300\000\000\0300\000\000\030"
 14642      30000018 
 14642      30000018 
 14642      30000018 
 14643 007c 00F81F00 		.ascii	"\000\370\037\000 \034p\0300\000\000\0300\000\200\033"
 14643      201C7018 
 14643      30000018 
 14643      3000801B 
 14644 008c 3000B81B 		.ascii	"0\000\270\0330\200\273\0330\270\273\033\260\273\273"
 14644      3080BB1B 
 14644      30B8BB1B 
 14644      B0BBBB
 14645 009b 1B003038 		.ascii	"\033\00008\000\024\370<\020>\000\000\030>\000\200\033"
 14645      0014F83C 
 14645      103E0000 
 14645      183E0080 
 14645      1B
 14646 00ac 3E00B81B 		.ascii	">\000\270\033>\200\273\033>\270\273\033\276\273\273"
 14646      3E80BB1B 
 14646      3EB8BB1B 
 14646      BEBBBB
 14647 00bb 1B080070 		.ascii	"\033\010\000p\000*\300\017\030>\000\000\030>\000\200"
 14647      002AC00F 
 14647      183E0000 
 14647      183E0080 
ARM GAS  /tmp/ccGYckNR.s 			page 354


 14648 00cb 1B3E00B8 		.ascii	"\033>\000\270\033>\200\273\033>\270\273\033\276\273"
 14648      1B3E80BB 
 14648      1B3EB8BB 
 14648      1BBEBB
 14649 00da BB1B0C00 		.ascii	"\273\033\014\000\340\034\024\000\000\010>\000\000\030"
 14649      E01C1400 
 14649      00083E00 
 14649      0018
 14650 00e8 3E00801B 		.ascii	">\000\200\033>\000\270\033>\200\273\033>\270\273\033"
 14650      3E00B81B 
 14650      3E80BB1B 
 14650      3EB8BB1B 
 14651 00f8 BEBBBB1B 		.ascii	"\276\273\273\033\376\377\377?*\000\000\030>\000\000"
 14651      FEFFFF3F 
 14651      2A000018 
 14651      3E0000
 14652 0107 183E0080 		.ascii	"\030>\000\200\033>\000\270\033>\200\273\033>\270\273"
 14652      1B3E00B8 
 14652      1B3E80BB 
 14652      1B3EB8BB 
 14653 0117 1BBEBBBB 		.ascii	"\033\276\273\273\033\377\377\377?\024\000\000\020>\000"
 14653      1BFFFFFF 
 14653      3F140000 
 14653      103E00
 14654 0126 00183E00 		.ascii	"\000\030>\000\200\033>\000\270\033>\200\273\033>\270"
 14654      801B3E00 
 14654      B81B3E80 
 14654      BB1B3EB8 
 14655 0136 BB1BBEBB 		.ascii	"\273\033\276\273\273\033\376\377\377?*\300\017\030>"
 14655      BB1BFEFF 
 14655      FF3F2AC0 
 14655      0F183E
 14656 0145 0000183E 		.ascii	"\000\000\030>\000\200\033>\000\270\033>\200\273\033"
 14656      00801B3E 
 14656      00B81B3E 
 14656      80BB1B
 14657 0154 3EB8BB1B 		.ascii	">\270\273\033\276\273\273\033\014\000\034\034\024\370"
 14657      BEBBBB1B 
 14657      0C001C1C 
 14657      14F8
 14658 0162 3C083E00 		.ascii	"<\010>\000\000\030>\000\200\033>\000\270\033>\200\273"
 14658      00183E00 
 14658      801B3E00 
 14658      B81B3E80 
 14658      BB
 14659 0173 1B3EB8BB 		.ascii	"\033>\270\273\033\276\273\273\033\010\000\016\000 \034"
 14659      1BBEBBBB 
 14659      1B08000E 
 14659      00201C
 14660 0182 70183000 		.ascii	"p\0300\000\000\0300\000\200\0330\000\270\0330\200\273"
 14660      00183000 
 14660      801B3000 
 14660      B81B3080 
 14660      BB
 14661 0193 1B30B8BB 		.ascii	"\0330\270\273\033\260\273\273\033\200\007\007\0000\006"
 14661      1BB0BBBB 
 14661      1B800707 
ARM GAS  /tmp/ccGYckNR.s 			page 355


 14661      003006
 14662 01a2 C0103000 		.ascii	"\300\0200\000\000\0300\000\000\0300\000\000\0300\000"
 14662      00183000 
 14662      00183000 
 14662      00183000 
 14663 01b2 00183000 		.ascii	"\000\0300\000\000\0300\000\000\030\200\377\003\000p"
 14663      00183000 
 14663      001880FF 
 14663      030070
 14664 01c1 03801DF0 		.ascii	"\003\200\035\360\377\377\037\360\377\377\037\360\377"
 14664      FFFF1FF0 
 14664      FFFF1FF0 
 14664      FF
 14665 01ce FF1FF0FF 		.ascii	"\377\037\360\377\377\037\360\377\377\037\360\377\377"
 14665      FF1FF0FF 
 14665      FF1FF0FF 
 14665      FF
 14666 01db 1F80FF01 		.ascii	"\037\200\377\001\000\340\001\000\017\340\377\377\017"
 14666      00E00100 
 14666      0FE0FFFF 
 14666      0F
 14667 01e8 E0FFFF0F 		.ascii	"\340\377\377\017\340\377\377\017\340\377\377\017\340"
 14667      E0FFFF0F 
 14667      E0FFFF0F 
 14667      E0
 14668 01f5 FFFF0FE0 		.ascii	"\377\377\017\340\377\377\017\200\007\000\000\000"
 14668      FFFF0F80 
 14668      07000000 
 14669              		.section	.rodata._ZL5ann03,"a",%progbits
 14670              		.align	2
 14671              		.set	.LANCHOR36,. + 0
 14674              	_ZL5ann03:
 14675 0000 FFFFFFFF 		.ascii	"\377\377\377\377\377\377\377\377?\000~\000\374\000\370"
 14675      FFFFFFFF 
 14675      3F007E00 
 14675      FC00F8
 14676 000f 01F003E0 		.ascii	"\001\360\003\340\007\300\017\200\037\000?\000~\000\374"
 14676      07C00F80 
 14676      1F003F00 
 14676      7E00FC
 14677 001e 00F8FFFF 		.ascii	"\000\370\377\377\377\377\377\377\377\377\037\307<|x"
 14677      FFFFFFFF 
 14677      FFFF1FC7 
 14677      3C7C78
 14678 002d F8F0FCE7 		.ascii	"\370\360\374\347\341\301\343\217\207\001\017?\036~<"
 14678      E1C1E38F 
 14678      87010F3F 
 14678      1E7E3C
 14679 003c 3878F8F0 		.ascii	"8x\370\360\377\377\377\377\377\377\377\377\237\317<"
 14679      FFFFFFFF 
 14679      FFFFFFFF 
 14679      9FCF3C
 14680 004b FE78FCF1 		.ascii	"\376x\374\361\374\347\361\303\343\217\207\003\217\177"
 14680      FCE7F1C3 
 14680      E38F8703 
 14680      8F7F
 14681 0059 1EFF3CF8 		.ascii	"\036\377<\370x\374\361\377\377\377\377\377\377\377\377"
ARM GAS  /tmp/ccGYckNR.s 			page 356


 14681      78FCF1FF 
 14681      FFFFFFFF 
 14681      FFFFFF
 14682 0068 8FCD19C6 		.ascii	"\217\315\031\3061\216c\030\300\020\207\001\014\203\003"
 14682      318E6318 
 14682      C0108701 
 14682      0C8303
 14683 0077 C6418C83 		.ascii	"\306A\214\203\030\3300\214\341\377\377\377\377\377\377"
 14683      18D8308C 
 14683      E1FFFFFF 
 14683      FFFFFF
 14684 0086 FFFFCFD8 		.ascii	"\377\377\317\330\031\2031\006c\030\300\000\216\001\014"
 14684      19833106 
 14684      6318C000 
 14684      8E010C
 14685 0095 8305C600 		.ascii	"\203\005\306\000\214\001\030\0300\006\343\377\377\377"
 14685      8C011818 
 14685      3006E3FF 
 14685      FFFF
 14686 00a3 FFFFFFFF 		.ascii	"\377\377\377\377\377\317\330\030\2031\006c\030\300\000"
 14686      FFCFD818 
 14686      83310663 
 14686      18C000
 14687 00b2 8C010C83 		.ascii	"\214\001\014\203\005\306\000\214\001\030\0300\006\343"
 14687      05C6008C 
 14687      01181830 
 14687      06E3
 14688 00c0 FFFFFFFF 		.ascii	"\377\377\377\377\377\377\377\377\317\330\030\2031\214"
 14688      FFFFFFFF 
 14688      CFD81883 
 14688      318C
 14689 00ce 6130C0E0 		.ascii	"a0\300\340\215\301\017\203\011\206\001\214\001\030\030"
 14689      8DC10F83 
 14689      0986018C 
 14689      011818
 14690 00dd 3006E3FF 		.ascii	"0\006\343\377\377\377\377\377\377\377\377\317\330\030"
 14690      FFFFFFFF 
 14690      FFFFFFCF 
 14690      D818
 14691 00eb C731F860 		.ascii	"\3071\370`0\300\360\217\341\017\203\031\006\037\214"
 14691      30C0F08F 
 14691      E10F8319 
 14691      061F8C
 14692 00fa 03181830 		.ascii	"\003\030\0300\006\343\377\377\377\377\377\377\377\377"
 14692      06E3FFFF 
 14692      FFFFFFFF 
 14692      FFFF
 14693 0108 CFD818FF 		.ascii	"\317\330\030\3770\374ap\3008\216q\010\203\021\206\037"
 14693      30FC6170 
 14693      C0388E71 
 14693      08831186 
 14693      1F
 14694 0119 0C071818 		.ascii	"\014\007\030\0300\006\343\377\377\377\377\377\377\377"
 14694      3006E3FF 
 14694      FFFFFFFF 
 14694      FFFF
 14695 0127 FFCFD818 		.ascii	"\377\317\330\030{0\216c`\300\030\2141\000\2031\306\001"
ARM GAS  /tmp/ccGYckNR.s 			page 357


 14695      7B308E63 
 14695      60C0188C 
 14695      31008331 
 14695      C601
 14696 0139 0C0E1818 		.ascii	"\014\016\030\0300\006\343\377\377\377\377\377\377\377"
 14696      3006E3FF 
 14696      FFFFFFFF 
 14696      FFFF
 14697 0147 FFCFD818 		.ascii	"\377\317\330\030\0030\006c`\300\030\2141\000\343?\306"
 14697      03300663 
 14697      60C0188C 
 14697      3100E33F 
 14697      C6
 14698 0158 000C1C18 		.ascii	"\000\014\034\030\0300\006\343\377\377\377\377\377\377"
 14698      183006E3 
 14698      FFFFFFFF 
 14698      FFFF
 14699 0166 FFFFCFD8 		.ascii	"\377\377\317\330\030\0070\006c\300\300\030\2141\000"
 14699      18073006 
 14699      63C0C018 
 14699      8C3100
 14700 0175 E33FC600 		.ascii	"\343?\306\000\0140\030\0300\006\343\377\377\377\377"
 14700      0C301818 
 14700      3006E3FF 
 14700      FFFFFF
 14701 0184 FFFFFFFF 		.ascii	"\377\377\377\377\217\315\030\2160\216c\300\3008\206"
 14701      8FCD188E 
 14701      308E63C0 
 14701      C03886
 14702 0193 71108301 		.ascii	"q\020\203\001\306A\014`\030\0300\214\341\377\377\377"
 14702      C6410C60 
 14702      1818308C 
 14702      E1FFFFFF 
 14703 01a3 FFFFFFFF 		.ascii	"\377\377\377\377\377\237\317<\374x\374\361\300\340\361"
 14703      FF9FCF3C 
 14703      FC78FCF1 
 14703      C0E0F1
 14704 01b2 C7E39F87 		.ascii	"\307\343\237\207\001\217\177\236\377<\377x\374\361\377"
 14704      018F7F9E 
 14704      FF3CFF78 
 14704      FCF1FF
 14705 01c1 FFFFFFFF 		.ascii	"\377\377\377\377\377\377\377\037\307<xx\370\360\200"
 14705      FFFFFF1F 
 14705      C73C7878 
 14705      F8F080
 14706 01d0 E1E1C3C3 		.ascii	"\341\341\303\303\217\207\001\017?\236\377<\377x\370"
 14706      8F87010F 
 14706      3F9EFF3C 
 14706      FF78F8
 14707 01df F0FFFFFF 		.ascii	"\360\377\377\377\377\377\377\377\377?\000~\000\374\000"
 14707      FFFFFFFF 
 14707      FF3F007E 
 14707      00FC00
 14708 01ee F801F003 		.ascii	"\370\001\360\003\340\007\300\017\200\037\000?\000~\000"
 14708      E007C00F 
 14708      801F003F 
 14708      007E00
ARM GAS  /tmp/ccGYckNR.s 			page 358


 14709 01fd FC00F800 		.ascii	"\374\000\370\000"
 14710              		.section	.rodata._ZL6ann_dx,"a",%progbits
 14711              		.align	2
 14712              		.set	.LANCHOR1,. + 0
 14715              	_ZL6ann_dx:
 14716 0000 04       		.byte	4
 14717 0001 05       		.byte	5
 14718 0002 05       		.byte	5
 14719 0003 03       		.byte	3
 14720 0004 04       		.byte	4
 14721 0005 02       		.byte	2
 14722 0006 04       		.byte	4
 14723 0007 03       		.byte	3
 14724              		.section	.rodata._ZL8ann_offs,"a",%progbits
 14725              		.align	2
 14726              		.set	.LANCHOR4,. + 0
 14729              	_ZL8ann_offs:
 14730 0000 00       		.byte	0
 14731 0001 04       		.byte	4
 14732 0002 09       		.byte	9
 14733 0003 0E       		.byte	14
 14734 0004 11       		.byte	17
 14735 0005 15       		.byte	21
 14736 0006 17       		.byte	23
 14737              		.section	.rodata._ZL9ann_lcd_x,"a",%progbits
 14738              		.align	2
 14739              		.set	.LANCHOR2,. + 0
 14742              	_ZL9ann_lcd_x:
 14743 0000 0800     		.short	8
 14744 0002 3000     		.short	48
 14745 0004 5800     		.short	88
 14746 0006 7000     		.short	112
 14747 0008 0000     		.short	0
 14748 000a 8000     		.short	128
 14749 000c 9C00     		.short	156
 14750 000e 2C01     		.short	300
 14751              		.section	.rodata.alpha_upper_transl,"a",%progbits
 14752              		.align	2
 14753              		.set	.LANCHOR41,. + 0
 14756              	alpha_upper_transl:
 14757 0000 5F414243 		.ascii	"_ABCDEFGHIJKL_MNO__PQRS_TUVW_XYZ-_:._ \000"
 14757      44454647 
 14757      48494A4B 
 14757      4C5F4D4E 
 14757      4F5F5F50 
 14758              		.section	.rodata.copy_reset_state_filename.str1.4,"aMS",%progbits,1
 14759              		.align	2
 14760              	.LC91:
 14761 0000 6E6F6E65 		.ascii	"none\000"
 14761      00
 14762              		.section	.rodata.disp_header.part.11.str1.4,"aMS",%progbits,1
 14763              		.align	2
 14764              	.LC92:
 14765 0000 2000     		.ascii	" \000"
 14766 0002 0000     		.space	2
 14767              	.LC93:
 14768 0004 25692E25 		.ascii	"%i.%02iV\000"
ARM GAS  /tmp/ccGYckNR.s 			page 359


 14768      30326956 
 14768      00
 14769              		.section	.rodata.disp_regs.str1.4,"aMS",%progbits,1
 14770              		.align	2
 14771              	.LC94:
 14772 0000 4C3A00   		.ascii	"L:\000"
 14773 0003 00       		.space	1
 14774              	.LC95:
 14775 0004 583A00   		.ascii	"X:\000"
 14776 0007 00       		.space	1
 14777              	.LC96:
 14778 0008 25735F00 		.ascii	"%s_\000"
 14779              	.LC97:
 14780 000c 9A25735F 		.ascii	"\232%s_\000"
 14780      00
 14781 0011 000000   		.space	3
 14782              	.LC98:
 14783 0014 593A00   		.ascii	"Y:\000"
 14784 0017 00       		.space	1
 14785              	.LC99:
 14786 0018 5A3A00   		.ascii	"Z:\000"
 14787 001b 00       		.space	1
 14788              	.LC100:
 14789 001c 543A00   		.ascii	"T:\000"
 14790 001f 00       		.space	1
 14791              	.LC101:
 14792 0020 413A00   		.ascii	"A:\000"
 14793              		.section	.rodata.program_main.str1.4,"aMS",%progbits,1
 14794              		.align	2
 14795              	.LC104:
 14796 0000 332E3132 		.ascii	"3.12\000"
 14796      00
 14797 0005 000000   		.space	3
 14798              	.LC105:
 14799 0008 53617665 		.ascii	"Save Calculator State\000"
 14799      2043616C 
 14799      63756C61 
 14799      746F7220 
 14799      53746174 
 14800              		.section	.rodata.prtof_buf_flush.str1.4,"aMS",%progbits,1
 14801              		.align	2
 14802              	.LC82:
 14803 0000 EFBBBF00 		.ascii	"\357\273\277\000"
 14804              		.section	.rodata.savestat_init_write.str1.4,"aMS",%progbits,1
 14805              		.align	2
 14806              	.LC90:
 14807 0000 2F535441 		.ascii	"/STATE\000"
 14807      544500
 14808              		.section	.rodata.set_print_to_file.part.8.str1.4,"aMS",%progbits,1
 14809              		.align	2
 14810              	.LC83:
 14811 0000 2E626D70 		.ascii	".bmp\000"
 14811      00
 14812 0005 000000   		.space	3
 14813              	.LC84:
 14814 0008 2E747874 		.ascii	".txt\000"
 14814      00
ARM GAS  /tmp/ccGYckNR.s 			page 360


 14815 000d 000000   		.space	3
 14816              	.LC85:
 14817 0010 43616E6E 		.ascii	"Cannot create /PRINTS directory\000"
 14817      6F742063 
 14817      72656174 
 14817      65202F50 
 14817      52494E54 
 14818              	.LC86:
 14819 0030 43616E6E 		.ascii	"Cannot allocate memory\000"
 14819      6F742061 
 14819      6C6C6F63 
 14819      61746520 
 14819      6D656D6F 
 14820 0047 00       		.space	1
 14821              	.LC87:
 14822 0048 2F505249 		.ascii	"/PRINTS\000"
 14822      4E545300 
 14823              	.LC88:
 14824 0050 28427566 		.ascii	"(Buffer size %i bytes)\000"
 14824      66657220 
 14824      73697A65 
 14824      20256920 
 14824      62797465 
 14825 0067 00       		.space	1
 14826              	.LC89:
 14827 0068 50726573 		.ascii	"Press a key to continue\000"
 14827      73206120 
 14827      6B657920 
 14827      746F2063 
 14827      6F6E7469 
 14828              		.section	.rodata.str1.4,"aMS",%progbits,1
 14829              		.align	2
 14830              	.LC3:
 14831 0000 00       		.ascii	"\000"
 14832 0001 000000   		.space	3
 14833              	.LC1:
 14834 0004 48656C70 		.ascii	"Help\000"
 14834      00
 14835 0009 000000   		.space	3
 14836              	.LC2:
 14837 000c 4D656E75 		.ascii	"Menu\000"
 14837      00
 14838 0011 000000   		.space	3
 14839              	.LC4:
 14840 0014 566F6C75 		.ascii	"Volume\000"
 14840      6D6500
 14841 001b 00       		.space	1
 14842              	.LC5:
 14843 001c 52656746 		.ascii	"RegFmt\000"
 14843      6D7400
 14844 0023 00       		.space	1
 14845              	.LC6:
 14846 0024 466F6E53 		.ascii	"FonSz\000"
 14846      7A00
 14847 002a 0000     		.space	2
 14848              	.LC106:
 14849 002c E2969800 		.ascii	"\342\226\230\000"
ARM GAS  /tmp/ccGYckNR.s 			page 361


 14850              	.LC107:
 14851 0030 E2969D00 		.ascii	"\342\226\235\000"
 14852              	.LC108:
 14853 0034 E2968000 		.ascii	"\342\226\200\000"
 14854              	.LC109:
 14855 0038 E2969600 		.ascii	"\342\226\226\000"
 14856              	.LC110:
 14857 003c E2968C00 		.ascii	"\342\226\214\000"
 14858              	.LC111:
 14859 0040 E2969E00 		.ascii	"\342\226\236\000"
 14860              	.LC112:
 14861 0044 E2969B00 		.ascii	"\342\226\233\000"
 14862              	.LC113:
 14863 0048 E2969700 		.ascii	"\342\226\227\000"
 14864              	.LC114:
 14865 004c E2969A00 		.ascii	"\342\226\232\000"
 14866              	.LC115:
 14867 0050 E2969000 		.ascii	"\342\226\220\000"
 14868              	.LC116:
 14869 0054 E2969C00 		.ascii	"\342\226\234\000"
 14870              	.LC117:
 14871 0058 E2968400 		.ascii	"\342\226\204\000"
 14872              	.LC118:
 14873 005c E2969900 		.ascii	"\342\226\231\000"
 14874              	.LC119:
 14875 0060 E2969F00 		.ascii	"\342\226\237\000"
 14876              	.LC120:
 14877 0064 E2968700 		.ascii	"\342\226\207\000"
 14878              		.text
 14879              	.Letext0:
 14880              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 14881              		.file 3 "/usr/lib/gcc/arm-none-eabi/6.3.1/include/stddef.h"
 14882              		.file 4 "/usr/include/newlib/sys/lock.h"
 14883              		.file 5 "/usr/include/newlib/sys/_types.h"
 14884              		.file 6 "/usr/include/newlib/sys/reent.h"
 14885              		.file 7 "/usr/include/newlib/sys/_stdint.h"
 14886              		.file 8 "/usr/include/newlib/sys/types.h"
 14887              		.file 9 "/usr/include/newlib/c++/6.3.1/cstdlib"
 14888              		.file 10 "/usr/include/newlib/c++/6.3.1/bits/cpp_type_traits.h"
 14889              		.file 11 "/usr/include/newlib/c++/6.3.1/cmath"
 14890              		.file 12 "/usr/include/newlib/c++/6.3.1/arm-none-eabi/thumb/v7e-m/fpv4-sp/hard/bits/c++config.h"
 14891              		.file 13 "/usr/include/newlib/stdlib.h"
 14892              		.file 14 "/usr/include/newlib/c++/6.3.1/stdlib.h"
 14893              		.file 15 "/usr/include/newlib/ctype.h"
 14894              		.file 16 "/usr/include/newlib/math.h"
 14895              		.file 17 "/usr/include/newlib/c++/6.3.1/math.h"
 14896              		.file 18 "free42/core_main.h"
 14897              		.file 19 "free42/core_aux.h"
 14898              		.file 20 "dmcp/ff_ifc.h"
 14899              		.file 21 "dmcp/dmcp.h"
 14900              		.file 22 "dm/dm42_menu.h"
 14901              		.file 23 "dm/dm42_fns.h"
 14902              		.file 24 "/usr/include/newlib/string.h"
 14903              		.file 25 "/usr/include/newlib/stdio.h"
 14904              		.file 26 "<built-in>"
ARM GAS  /tmp/ccGYckNR.s 			page 362


DEFINED SYMBOLS
                            *ABS*:0000000000000000 dm42_fns.cc
     /tmp/ccGYckNR.s:18     .text.dm42_set_beep_mute:0000000000000000 $t
     /tmp/ccGYckNR.s:26     .text.dm42_set_beep_mute:0000000000000000 dm42_set_beep_mute
     /tmp/ccGYckNR.s:46     .text.dm42_is_beep_mute:0000000000000000 $t
     /tmp/ccGYckNR.s:54     .text.dm42_is_beep_mute:0000000000000000 dm42_is_beep_mute
     /tmp/ccGYckNR.s:76     .text.repaint_annunciators.part.0:0000000000000000 $t
     /tmp/ccGYckNR.s:83     .text.repaint_annunciators.part.0:0000000000000000 repaint_annunciators.part.0
     /tmp/ccGYckNR.s:206    .text.repaint_annunciators.part.0:00000000000000a0 $d
     /tmp/ccGYckNR.s:220    .text.is_disp.part.6:0000000000000000 $t
     /tmp/ccGYckNR.s:227    .text.is_disp.part.6:0000000000000000 is_disp.part.6
     /tmp/ccGYckNR.s:256    .text.is_disp.part.6:0000000000000018 $d
     /tmp/ccGYckNR.s:261    .text.lcd_update_timeout.part.9:0000000000000000 $t
     /tmp/ccGYckNR.s:268    .text.lcd_update_timeout.part.9:0000000000000000 lcd_update_timeout.part.9
     /tmp/ccGYckNR.s:294    .text.lcd_update_timeout.part.9:0000000000000018 $d
     /tmp/ccGYckNR.s:300    .text.set_lcd_update_timeout.part.10:0000000000000000 $t
     /tmp/ccGYckNR.s:307    .text.set_lcd_update_timeout.part.10:0000000000000000 set_lcd_update_timeout.part.10
     /tmp/ccGYckNR.s:327    .text.set_lcd_update_timeout.part.10:000000000000000c $d
     /tmp/ccGYckNR.s:333    .text.set_shift.part.14:0000000000000000 $t
     /tmp/ccGYckNR.s:340    .text.set_shift.part.14:0000000000000000 set_shift.part.14
     /tmp/ccGYckNR.s:340    .text.set_shift.part.14:0000000000000000 clr_shift.part.13
     /tmp/ccGYckNR.s:361    .text.update_aplha_table.part.15:0000000000000000 $t
     /tmp/ccGYckNR.s:368    .text.update_aplha_table.part.15:0000000000000000 update_aplha_table.part.15
     /tmp/ccGYckNR.s:389    .text.update_aplha_table.part.15:0000000000000010 $d
     /tmp/ccGYckNR.s:368    .text.update_aplha_table.part.15:0000000000000000 skin_repaint_annunciator.part.1
     /tmp/ccGYckNR.s:397    .text._Z8hp2printPcPKci:0000000000000000 $t
     /tmp/ccGYckNR.s:405    .text._Z8hp2printPcPKci:0000000000000000 _Z8hp2printPcPKci
     /tmp/ccGYckNR.s:497    .text._Z8hp2printPcPKci:0000000000000040 $d
     /tmp/ccGYckNR.s:502    .text._Z8hp2asciiPcPKci:0000000000000000 $t
     /tmp/ccGYckNR.s:510    .text._Z8hp2asciiPcPKci:0000000000000000 _Z8hp2asciiPcPKci
     /tmp/ccGYckNR.s:570    .text._Z8hp2asciiPcPKci:0000000000000044 $d
     /tmp/ccGYckNR.s:945    .text._Z8hp2asciiPcPKci:000000000000018c $d
     /tmp/ccGYckNR.s:985    .text._Z10hp2utfcharPch:0000000000000000 $t
     /tmp/ccGYckNR.s:993    .text._Z10hp2utfcharPch:0000000000000000 _Z10hp2utfcharPch
     /tmp/ccGYckNR.s:1009   .text._Z10hp2utfcharPch:000000000000000c $d
     /tmp/ccGYckNR.s:1354   .text._Z10hp2utfcharPch:000000000000013c $d
     /tmp/ccGYckNR.s:1393   .text._Z7hp2fontPcPKci:0000000000000000 $t
     /tmp/ccGYckNR.s:1401   .text._Z7hp2fontPcPKci:0000000000000000 _Z7hp2fontPcPKci
     /tmp/ccGYckNR.s:1513   .text.repaint_annunciators:0000000000000000 $t
     /tmp/ccGYckNR.s:1521   .text.repaint_annunciators:0000000000000000 repaint_annunciators
     /tmp/ccGYckNR.s:1546   .text.repaint_annunciators:0000000000000018 $d
     /tmp/ccGYckNR.s:1552   .text.get_printer_delay:0000000000000000 $t
     /tmp/ccGYckNR.s:1560   .text.get_printer_delay:0000000000000000 get_printer_delay
     /tmp/ccGYckNR.s:1574   .text.str_from_hp:0000000000000000 $t
     /tmp/ccGYckNR.s:1582   .text.str_from_hp:0000000000000000 str_from_hp
     /tmp/ccGYckNR.s:1645   .text.str_from_hp:0000000000000034 $d
     /tmp/ccGYckNR.s:1650   .text.draw_hp42_lcd:0000000000000000 $t
     /tmp/ccGYckNR.s:1658   .text.draw_hp42_lcd:0000000000000000 draw_hp42_lcd
     /tmp/ccGYckNR.s:1922   .text.draw_hp42_lcd:0000000000000144 $d
     /tmp/ccGYckNR.s:1929   .text._Z22shell_get_accelerationPdS_S_:0000000000000000 $t
     /tmp/ccGYckNR.s:1937   .text._Z22shell_get_accelerationPdS_S_:0000000000000000 _Z22shell_get_accelerationPdS_S_
     /tmp/ccGYckNR.s:1953   .text._Z18shell_get_locationPdS_S_S_S_:0000000000000000 $t
     /tmp/ccGYckNR.s:1961   .text._Z18shell_get_locationPdS_S_S_S_:0000000000000000 _Z18shell_get_locationPdS_S_S_S_
     /tmp/ccGYckNR.s:1975   .text._Z17shell_get_headingPdS_S_S_S_S_:0000000000000000 $t
     /tmp/ccGYckNR.s:1983   .text._Z17shell_get_headingPdS_S_S_S_S_:0000000000000000 _Z17shell_get_headingPdS_S_S_S_S_
     /tmp/ccGYckNR.s:1997   .text._Z17shell_malloc_failjPKci:0000000000000000 $t
     /tmp/ccGYckNR.s:2005   .text._Z17shell_malloc_failjPKci:0000000000000000 _Z17shell_malloc_failjPKci
ARM GAS  /tmp/ccGYckNR.s 			page 363


     /tmp/ccGYckNR.s:2142   .text._Z17shell_malloc_failjPKci:0000000000000084 $d
     /tmp/ccGYckNR.s:2159   .text._Z17shell_low_batteryv:0000000000000000 $t
     /tmp/ccGYckNR.s:2167   .text._Z17shell_low_batteryv:0000000000000000 _Z17shell_low_batteryv
     /tmp/ccGYckNR.s:2237   .text._Z17shell_low_batteryv:0000000000000044 $d
     /tmp/ccGYckNR.s:2246   .text._Z10shell_vbatv:0000000000000000 $t
     /tmp/ccGYckNR.s:2254   .text._Z10shell_vbatv:0000000000000000 _Z10shell_vbatv
     /tmp/ccGYckNR.s:2281   .text._Z10shell_vbatv:0000000000000018 $d
     /tmp/ccGYckNR.s:2287   .text._Z12shell_dev_idv:0000000000000000 $t
     /tmp/ccGYckNR.s:2295   .text._Z12shell_dev_idv:0000000000000000 _Z12shell_dev_idv
     /tmp/ccGYckNR.s:2314   .text._Z12shell_dev_idv:0000000000000008 $d
     /tmp/ccGYckNR.s:2319   .text._Z17shell_random_seedv:0000000000000000 $t
     /tmp/ccGYckNR.s:2327   .text._Z17shell_random_seedv:0000000000000000 _Z17shell_random_seedv
     /tmp/ccGYckNR.s:2379   .text._Z17shell_random_seedv:0000000000000044 $d
     /tmp/ccGYckNR.s:2386   .text._Z19shell_decimal_pointv:0000000000000000 $t
     /tmp/ccGYckNR.s:2394   .text._Z19shell_decimal_pointv:0000000000000000 _Z19shell_decimal_pointv
     /tmp/ccGYckNR.s:2412   .text._Z19shell_decimal_pointv:000000000000000c $d
     /tmp/ccGYckNR.s:2417   .text._Z19shell_get_time_datePjS_Pi:0000000000000000 $t
     /tmp/ccGYckNR.s:2425   .text._Z19shell_get_time_datePjS_Pi:0000000000000000 _Z19shell_get_time_datePjS_Pi
     /tmp/ccGYckNR.s:2501   .text._Z19shell_get_time_datePjS_Pi:000000000000006c $d
     /tmp/ccGYckNR.s:2506   .text._Z13shell_blitterPKciiiii:0000000000000000 $t
     /tmp/ccGYckNR.s:2514   .text._Z13shell_blitterPKciiiii:0000000000000000 _Z13shell_blitterPKciiiii
     /tmp/ccGYckNR.s:2555   .text._Z13shell_blitterPKciiiii:0000000000000018 $d
     /tmp/ccGYckNR.s:2563   .text.skin_repaint_annunciator:0000000000000000 $t
     /tmp/ccGYckNR.s:2571   .text.skin_repaint_annunciator:0000000000000000 skin_repaint_annunciator
     /tmp/ccGYckNR.s:2595   .text.skin_repaint_annunciator:0000000000000010 $d
     /tmp/ccGYckNR.s:2600   .text._Z18shell_annunciatorsiiiiii:0000000000000000 $t
     /tmp/ccGYckNR.s:2608   .text._Z18shell_annunciatorsiiiiii:0000000000000000 _Z18shell_annunciatorsiiiiii
     /tmp/ccGYckNR.s:2855   .text._Z18shell_annunciatorsiiiiii:000000000000011c $d
     /tmp/ccGYckNR.s:2861   .text._Z10shell_readPci:0000000000000000 $t
     /tmp/ccGYckNR.s:2869   .text._Z10shell_readPci:0000000000000000 _Z10shell_readPci
     /tmp/ccGYckNR.s:2907   .text._Z10shell_readPci:000000000000001c $d
     /tmp/ccGYckNR.s:2914   .text._Z11shell_writePKci:0000000000000000 $t
     /tmp/ccGYckNR.s:2922   .text._Z11shell_writePKci:0000000000000000 _Z11shell_writePKci
     /tmp/ccGYckNR.s:2960   .text._Z11shell_writePKci:000000000000001c $d
     /tmp/ccGYckNR.s:2967   .text._Z13shell_get_memv:0000000000000000 $t
     /tmp/ccGYckNR.s:2975   .text._Z13shell_get_memv:0000000000000000 _Z13shell_get_memv
     /tmp/ccGYckNR.s:2989   .text._Z13shell_get_memv:0000000000000004 $d
     /tmp/ccGYckNR.s:2994   .text._Z18shell_millisecondsv:0000000000000000 $t
     /tmp/ccGYckNR.s:3002   .text._Z18shell_millisecondsv:0000000000000000 _Z18shell_millisecondsv
     /tmp/ccGYckNR.s:3029   .text._Z18shell_millisecondsv:0000000000000010 $d
     /tmp/ccGYckNR.s:3035   .text._Z11shell_delayi:0000000000000000 $t
     /tmp/ccGYckNR.s:3043   .text._Z11shell_delayi:0000000000000000 _Z11shell_delayi
     /tmp/ccGYckNR.s:3058   .text._Z11shell_delayi:0000000000000004 $d
     /tmp/ccGYckNR.s:3063   .text._Z15shell_powerdownv:0000000000000000 $t
     /tmp/ccGYckNR.s:3071   .text._Z15shell_powerdownv:0000000000000000 _Z15shell_powerdownv
     /tmp/ccGYckNR.s:3087   .text._Z15shell_powerdownv:000000000000000c $d
     /tmp/ccGYckNR.s:3092   .text._Z22shell_read_saved_statePvi:0000000000000000 $t
     /tmp/ccGYckNR.s:3100   .text._Z22shell_read_saved_statePvi:0000000000000000 _Z22shell_read_saved_statePvi
     /tmp/ccGYckNR.s:3138   .text._Z22shell_read_saved_statePvi:000000000000001c $d
     /tmp/ccGYckNR.s:3145   .text._Z23shell_write_saved_statePKvi:0000000000000000 $t
     /tmp/ccGYckNR.s:3153   .text._Z23shell_write_saved_statePKvi:0000000000000000 _Z23shell_write_saved_statePKvi
     /tmp/ccGYckNR.s:3202   .text._Z23shell_write_saved_statePKvi:000000000000002c $d
     /tmp/ccGYckNR.s:3209   .text.clear_tlcd_row:0000000000000000 $t
     /tmp/ccGYckNR.s:3217   .text.clear_tlcd_row:0000000000000000 clear_tlcd_row
     /tmp/ccGYckNR.s:3285   .text.clear_tlcd_row:0000000000000044 $d
     /tmp/ccGYckNR.s:3297   .text.tlcd_row_empty:0000000000000000 $t
     /tmp/ccGYckNR.s:3305   .text.tlcd_row_empty:0000000000000000 tlcd_row_empty
ARM GAS  /tmp/ccGYckNR.s 			page 364


     /tmp/ccGYckNR.s:3347   .text.tlcd_row_empty:0000000000000028 $d
     /tmp/ccGYckNR.s:3352   .text.get_pattern_pixels:0000000000000000 $t
     /tmp/ccGYckNR.s:3360   .text.get_pattern_pixels:0000000000000000 get_pattern_pixels
     /tmp/ccGYckNR.s:3441   .text._Z19thell_draw_menu_keyiiPKci:0000000000000000 $t
     /tmp/ccGYckNR.s:3449   .text._Z19thell_draw_menu_keyiiPKci:0000000000000000 _Z19thell_draw_menu_keyiiPKci
     /tmp/ccGYckNR.s:3573   .text._Z19thell_draw_menu_keyiiPKci:0000000000000078 $d
     /tmp/ccGYckNR.s:3582   .text._Z17thell_edit_numberPKciS0_i:0000000000000000 $t
     /tmp/ccGYckNR.s:3590   .text._Z17thell_edit_numberPKciS0_i:0000000000000000 _Z17thell_edit_numberPKciS0_i
     /tmp/ccGYckNR.s:3648   .text._Z17thell_edit_numberPKciS0_i:0000000000000044 $d
     /tmp/ccGYckNR.s:3656   .text._Z18thell_draw_patterniiPKcii:0000000000000000 $t
     /tmp/ccGYckNR.s:3664   .text._Z18thell_draw_patterniiPKcii:0000000000000000 _Z18thell_draw_patterniiPKcii
     /tmp/ccGYckNR.s:4080   .text._Z18thell_draw_patterniiPKcii:00000000000001b4 $d
     /tmp/ccGYckNR.s:4092   .text._Z16thell_draw_pixelii:0000000000000000 $t
     /tmp/ccGYckNR.s:4100   .text._Z16thell_draw_pixelii:0000000000000000 _Z16thell_draw_pixelii
     /tmp/ccGYckNR.s:4260   .text._Z16thell_draw_pixelii:0000000000000090 $d
     /tmp/ccGYckNR.s:4269   .text._Z16thell_start_showv:0000000000000000 $t
     /tmp/ccGYckNR.s:4277   .text._Z16thell_start_showv:0000000000000000 _Z16thell_start_showv
     /tmp/ccGYckNR.s:4292   .text._Z16thell_start_showv:0000000000000008 $d
     /tmp/ccGYckNR.s:4297   .text._Z19thell_clear_displayv:0000000000000000 $t
     /tmp/ccGYckNR.s:4305   .text._Z19thell_clear_displayv:0000000000000000 _Z19thell_clear_displayv
     /tmp/ccGYckNR.s:4333   .text._Z15thell_clear_rowi:0000000000000000 $t
     /tmp/ccGYckNR.s:4341   .text._Z15thell_clear_rowi:0000000000000000 _Z15thell_clear_rowi
     /tmp/ccGYckNR.s:4356   .text.set_disp_main_menu:0000000000000000 $t
     /tmp/ccGYckNR.s:4364   .text.set_disp_main_menu:0000000000000000 set_disp_main_menu
     /tmp/ccGYckNR.s:4395   .text.set_disp_main_menu:0000000000000018 $d
     /tmp/ccGYckNR.s:4402   .text.is_disp_main_menu:0000000000000000 $t
     /tmp/ccGYckNR.s:4410   .text.is_disp_main_menu:0000000000000000 is_disp_main_menu
     /tmp/ccGYckNR.s:4426   .text.is_disp_main_menu:000000000000000c $d
     /tmp/ccGYckNR.s:4431   .text.get_disp_date_sep:0000000000000000 $t
     /tmp/ccGYckNR.s:4439   .text.get_disp_date_sep:0000000000000000 get_disp_date_sep
     /tmp/ccGYckNR.s:4464   .text.get_disp_date_sep:000000000000000c $d
     /tmp/ccGYckNR.s:4469   .text.toggle_disp:0000000000000000 $t
     /tmp/ccGYckNR.s:4477   .text.toggle_disp:0000000000000000 toggle_disp
     /tmp/ccGYckNR.s:4500   .text.toggle_disp:000000000000000c $d
     /tmp/ccGYckNR.s:4672   .text.toggle_disp:00000000000000ec $d
     /tmp/ccGYckNR.s:4680   .text.is_disp:0000000000000000 $t
     /tmp/ccGYckNR.s:4688   .text.is_disp:0000000000000000 is_disp
     /tmp/ccGYckNR.s:4703   .text.is_disp:000000000000000a $d
     /tmp/ccGYckNR.s:4771   .text.is_disp:0000000000000058 $d
     /tmp/ccGYckNR.s:4776   .text.get_reg_font_offset:0000000000000000 $t
     /tmp/ccGYckNR.s:4784   .text.get_reg_font_offset:0000000000000000 get_reg_font_offset
     /tmp/ccGYckNR.s:4810   .text.get_reg_font_offset:0000000000000018 $d
     /tmp/ccGYckNR.s:4815   .text.inc_reg_font_offset:0000000000000000 $t
     /tmp/ccGYckNR.s:4823   .text.inc_reg_font_offset:0000000000000000 inc_reg_font_offset
     /tmp/ccGYckNR.s:4913   .text.inc_reg_font_offset:0000000000000048 $d
     /tmp/ccGYckNR.s:4918   .text.set_reg_font_offset:0000000000000000 $t
     /tmp/ccGYckNR.s:4926   .text.set_reg_font_offset:0000000000000000 set_reg_font_offset
     /tmp/ccGYckNR.s:4990   .text.set_reg_font_offset:0000000000000038 $d
     /tmp/ccGYckNR.s:4995   .text.set_stack_layout:0000000000000000 $t
     /tmp/ccGYckNR.s:5003   .text.set_stack_layout:0000000000000000 set_stack_layout
     /tmp/ccGYckNR.s:5018   .text.set_stack_layout:0000000000000008 $d
     /tmp/ccGYckNR.s:5023   .text.get_stack_layout:0000000000000000 $t
     /tmp/ccGYckNR.s:5031   .text.get_stack_layout:0000000000000000 get_stack_layout
     /tmp/ccGYckNR.s:5046   .text.get_stack_layout:0000000000000008 $d
     /tmp/ccGYckNR.s:5051   .text.get_stack_layout_str:0000000000000000 $t
     /tmp/ccGYckNR.s:5059   .text.get_stack_layout_str:0000000000000000 get_stack_layout_str
     /tmp/ccGYckNR.s:5138   .text.is_print_to_file:0000000000000000 $t
ARM GAS  /tmp/ccGYckNR.s 			page 365


     /tmp/ccGYckNR.s:5146   .text.is_print_to_file:0000000000000000 is_print_to_file
     /tmp/ccGYckNR.s:5159   .text.is_print_to_file:0000000000000008 $d
     /tmp/ccGYckNR.s:5167   .text.is_print_to_file:0000000000000010 $t
     /tmp/ccGYckNR.s:5213   .text.is_print_to_file:000000000000003c $d
     /tmp/ccGYckNR.s:5218   .text.set_print_to_file_flag:0000000000000000 $t
     /tmp/ccGYckNR.s:5226   .text.set_print_to_file_flag:0000000000000000 set_print_to_file_flag
     /tmp/ccGYckNR.s:5239   .text.set_print_to_file_flag:0000000000000008 $d
     /tmp/ccGYckNR.s:5247   .text.set_print_to_file_flag:0000000000000010 $t
     /tmp/ccGYckNR.s:5312   .text.set_print_to_file_flag:0000000000000068 $d
     /tmp/ccGYckNR.s:5317   .text.prtof_buf_flush:0000000000000000 $t
     /tmp/ccGYckNR.s:5325   .text.prtof_buf_flush:0000000000000000 prtof_buf_flush
     /tmp/ccGYckNR.s:5528   .text.prtof_buf_flush:00000000000000e8 $d
     /tmp/ccGYckNR.s:5543   .text.prtof_buf_size:0000000000000000 $t
     /tmp/ccGYckNR.s:5551   .text.prtof_buf_size:0000000000000000 prtof_buf_size
     /tmp/ccGYckNR.s:5571   .text.prtof_buf_write:0000000000000000 $t
     /tmp/ccGYckNR.s:5579   .text.prtof_buf_write:0000000000000000 prtof_buf_write
     /tmp/ccGYckNR.s:5636   .text.prtof_buf_write:0000000000000038 $d
     /tmp/ccGYckNR.s:5641   .text.prtof_buf_update:0000000000000000 $t
     /tmp/ccGYckNR.s:5649   .text.prtof_buf_update:0000000000000000 prtof_buf_update
     /tmp/ccGYckNR.s:5750   .text.prtof_buf_update:0000000000000070 $d
     /tmp/ccGYckNR.s:5755   .text.set_print_to_file.part.8:0000000000000000 $t
     /tmp/ccGYckNR.s:5762   .text.set_print_to_file.part.8:0000000000000000 set_print_to_file.part.8
     /tmp/ccGYckNR.s:5941   .text.set_print_to_file.part.8:00000000000000a4 $d
     /tmp/ccGYckNR.s:5963   .text.prtof_add_text:0000000000000000 $t
     /tmp/ccGYckNR.s:5971   .text.prtof_add_text:0000000000000000 prtof_add_text
     /tmp/ccGYckNR.s:6081   .text.prtof_add_text:0000000000000060 $d
     /tmp/ccGYckNR.s:6086   .text.prtof_add_gr_text:0000000000000000 $t
     /tmp/ccGYckNR.s:6094   .text.prtof_add_gr_text:0000000000000000 prtof_add_gr_text
     /tmp/ccGYckNR.s:6266   .text.prtof_add_gr_text:00000000000000bc $d
     /tmp/ccGYckNR.s:6274   .text.prtof_add_graphics_lines:0000000000000000 $t
     /tmp/ccGYckNR.s:6282   .text.prtof_add_graphics_lines:0000000000000000 prtof_add_graphics_lines
     /tmp/ccGYckNR.s:6490   .text.prtof_add_graphics_lines:00000000000000ac $d
     /tmp/ccGYckNR.s:6497   .text.prtof_buf_init_fname:0000000000000000 $t
     /tmp/ccGYckNR.s:6505   .text.prtof_buf_init_fname:0000000000000000 prtof_buf_init_fname
     /tmp/ccGYckNR.s:6565   .text.prtof_buf_init_fname:0000000000000030 $d
     /tmp/ccGYckNR.s:6575   .text.set_print_to_file:0000000000000000 $t
     /tmp/ccGYckNR.s:6583   .text.set_print_to_file:0000000000000000 set_print_to_file
     /tmp/ccGYckNR.s:6608   .text.savestat_init_read:0000000000000000 $t
     /tmp/ccGYckNR.s:6616   .text.savestat_init_read:0000000000000000 savestat_init_read
     /tmp/ccGYckNR.s:6723   .text.savestat_init_read:0000000000000070 $d
     /tmp/ccGYckNR.s:6735   .text.savestat_init_write:0000000000000000 $t
     /tmp/ccGYckNR.s:6743   .text.savestat_init_write:0000000000000000 savestat_init_write
     /tmp/ccGYckNR.s:6806   .text.savestat_init_write:0000000000000038 $d
     /tmp/ccGYckNR.s:6817   .text.copy_reset_state_filename:0000000000000000 $t
     /tmp/ccGYckNR.s:6825   .text.copy_reset_state_filename:0000000000000000 copy_reset_state_filename
     /tmp/ccGYckNR.s:6959   .text.copy_reset_state_filename:0000000000000090 $d
     /tmp/ccGYckNR.s:6965   .text.disp_header.part.11:0000000000000000 $t
     /tmp/ccGYckNR.s:6972   .text.disp_header.part.11:0000000000000000 disp_header.part.11
     /tmp/ccGYckNR.s:7426   .text.disp_header.part.11:0000000000000238 $d
     /tmp/ccGYckNR.s:7459   .text.current_font_nr:0000000000000000 $t
     /tmp/ccGYckNR.s:7467   .text.current_font_nr:0000000000000000 current_font_nr
     /tmp/ccGYckNR.s:7494   .text.current_font_nr:0000000000000018 $d
     /tmp/ccGYckNR.s:7500   .text.disp_aligned_line:0000000000000000 $t
     /tmp/ccGYckNR.s:7508   .text.disp_aligned_line:0000000000000000 disp_aligned_line
     /tmp/ccGYckNR.s:7794   .text.disp_aligned_line:0000000000000138 $d
     /tmp/ccGYckNR.s:7814   .text.set_reg_font:0000000000000000 $t
     /tmp/ccGYckNR.s:7822   .text.set_reg_font:0000000000000000 set_reg_font
ARM GAS  /tmp/ccGYckNR.s 			page 366


     /tmp/ccGYckNR.s:7956   .text.set_reg_font:0000000000000084 $d
     /tmp/ccGYckNR.s:7966   .text.disp_reg:0000000000000000 $t
     /tmp/ccGYckNR.s:7974   .text.disp_reg:0000000000000000 disp_reg
     /tmp/ccGYckNR.s:8072   .text.disp_reg:000000000000006c $d
     /tmp/ccGYckNR.s:8079   .text.disp_regs:0000000000000000 $t
     /tmp/ccGYckNR.s:8087   .text.disp_regs:0000000000000000 disp_regs
     /tmp/ccGYckNR.s:8694   .text.disp_regs:00000000000002d0 $d
     /tmp/ccGYckNR.s:8720   .text.disp_regs:0000000000000320 $t
     /tmp/ccGYckNR.s:9136   .text.disp_regs:0000000000000548 $d
     /tmp/ccGYckNR.s:9168   .text.check_for_repaint:0000000000000000 $t
     /tmp/ccGYckNR.s:9176   .text.check_for_repaint:0000000000000000 check_for_repaint
     /tmp/ccGYckNR.s:9357   .text.check_for_repaint:00000000000000a4 $d
     /tmp/ccGYckNR.s:9372   .text.print_wait_for:0000000000000000 $t
     /tmp/ccGYckNR.s:9380   .text.print_wait_for:0000000000000000 print_wait_for
     /tmp/ccGYckNR.s:9416   .text.print_wait_for:000000000000001c $d
     /tmp/ccGYckNR.s:9421   .text._Z11shell_printPKciS0_iiiii:0000000000000000 $t
     /tmp/ccGYckNR.s:9429   .text._Z11shell_printPKciS0_iiiii:0000000000000000 _Z11shell_printPKciS0_iiiii
     /tmp/ccGYckNR.s:10195  .text._Z11shell_printPKciS0_iiiii:0000000000000304 $d
     /tmp/ccGYckNR.s:10211  .text._Z12shell_beeperii:0000000000000000 $t
     /tmp/ccGYckNR.s:10219  .text._Z12shell_beeperii:0000000000000000 _Z12shell_beeperii
     /tmp/ccGYckNR.s:10286  .text._Z12shell_beeperii:000000000000003c $d
     /tmp/ccGYckNR.s:10293  .text._Z15shell_wants_cpuv:0000000000000000 $t
     /tmp/ccGYckNR.s:10301  .text._Z15shell_wants_cpuv:0000000000000000 _Z15shell_wants_cpuv
     /tmp/ccGYckNR.s:10335  .text._Z15shell_wants_cpuv:000000000000001c $d
     /tmp/ccGYckNR.s:10341  .text._Z23shell_force_lcd_refreshi:0000000000000000 $t
     /tmp/ccGYckNR.s:10349  .text._Z23shell_force_lcd_refreshi:0000000000000000 _Z23shell_force_lcd_refreshi
     /tmp/ccGYckNR.s:10364  .text.empty_keydown:0000000000000000 $t
     /tmp/ccGYckNR.s:10372  .text.empty_keydown:0000000000000000 empty_keydown
     /tmp/ccGYckNR.s:10402  .text.setTimeout0:0000000000000000 $t
     /tmp/ccGYckNR.s:10410  .text.setTimeout0:0000000000000000 setTimeout0
     /tmp/ccGYckNR.s:10481  .text.setTimeout0:000000000000003c $d
     /tmp/ccGYckNR.s:10489  .text.clearTimeout0:0000000000000000 $t
     /tmp/ccGYckNR.s:10497  .text.clearTimeout0:0000000000000000 clearTimeout0
     /tmp/ccGYckNR.s:10512  .text.clearTimeout0:0000000000000008 $d
     /tmp/ccGYckNR.s:10517  .text.setTimeout3:0000000000000000 $t
     /tmp/ccGYckNR.s:10525  .text.setTimeout3:0000000000000000 setTimeout3
     /tmp/ccGYckNR.s:10543  .text.setTimeout3:0000000000000008 $d
     /tmp/ccGYckNR.s:10548  .text._Z22shell_request_timeout3i:0000000000000000 $t
     /tmp/ccGYckNR.s:10556  .text._Z22shell_request_timeout3i:0000000000000000 _Z22shell_request_timeout3i
     /tmp/ccGYckNR.s:10567  .text.clearTimeout3:0000000000000000 $t
     /tmp/ccGYckNR.s:10575  .text.clearTimeout3:0000000000000000 clearTimeout3
     /tmp/ccGYckNR.s:10590  .text.clearTimeout3:0000000000000008 $d
     /tmp/ccGYckNR.s:10595  .text.header_timeout:0000000000000000 $t
     /tmp/ccGYckNR.s:10603  .text.header_timeout:0000000000000000 header_timeout
     /tmp/ccGYckNR.s:10636  .text.header_timeout:0000000000000020 $d
     /tmp/ccGYckNR.s:10643  .text.clear_header_timeout:0000000000000000 $t
     /tmp/ccGYckNR.s:10651  .text.clear_header_timeout:0000000000000000 clear_header_timeout
     /tmp/ccGYckNR.s:10671  .text.clear_header_timeout:000000000000000c $d
     /tmp/ccGYckNR.s:10677  .text.force_header_timeout:0000000000000000 $t
     /tmp/ccGYckNR.s:10685  .text.force_header_timeout:0000000000000000 force_header_timeout
     /tmp/ccGYckNR.s:10700  .text.force_header_timeout:0000000000000008 $d
     /tmp/ccGYckNR.s:10705  .text.lcd_update_timeout:0000000000000000 $t
     /tmp/ccGYckNR.s:10713  .text.lcd_update_timeout:0000000000000000 lcd_update_timeout
     /tmp/ccGYckNR.s:10733  .text.lcd_update_timeout:000000000000000c $d
     /tmp/ccGYckNR.s:10738  .text.clear_lcd_update_timeout:0000000000000000 $t
     /tmp/ccGYckNR.s:10746  .text.clear_lcd_update_timeout:0000000000000000 clear_lcd_update_timeout
     /tmp/ccGYckNR.s:10761  .text.clear_lcd_update_timeout:0000000000000008 $d
ARM GAS  /tmp/ccGYckNR.s 			page 367


     /tmp/ccGYckNR.s:10766  .text.set_lcd_update_timeout:0000000000000000 $t
     /tmp/ccGYckNR.s:10774  .text.set_lcd_update_timeout:0000000000000000 set_lcd_update_timeout
     /tmp/ccGYckNR.s:10792  .text.set_lcd_update_timeout:000000000000000c $d
     /tmp/ccGYckNR.s:10797  .text.calc_lcd_redraw:0000000000000000 $t
     /tmp/ccGYckNR.s:10805  .text.calc_lcd_redraw:0000000000000000 calc_lcd_redraw
     /tmp/ccGYckNR.s:10847  .text.calc_lcd_redraw:0000000000000024 $d
     /tmp/ccGYckNR.s:10853  .text._Z15thell_draw_chariic:0000000000000000 $t
     /tmp/ccGYckNR.s:10861  .text._Z15thell_draw_chariic:0000000000000000 _Z15thell_draw_chariic
     /tmp/ccGYckNR.s:10910  .text._Z15thell_draw_chariic:000000000000002c $d
     /tmp/ccGYckNR.s:10916  .text.disp_header:0000000000000000 $t
     /tmp/ccGYckNR.s:10924  .text.disp_header:0000000000000000 disp_header
     /tmp/ccGYckNR.s:10949  .text.disp_header:0000000000000018 $d
     /tmp/ccGYckNR.s:10955  .text.clr_shift:0000000000000000 $t
     /tmp/ccGYckNR.s:10963  .text.clr_shift:0000000000000000 clr_shift
     /tmp/ccGYckNR.s:10984  .text.clr_shift:0000000000000010 $d
     /tmp/ccGYckNR.s:10989  .text.set_shift:0000000000000000 $t
     /tmp/ccGYckNR.s:10997  .text.set_shift:0000000000000000 set_shift
     /tmp/ccGYckNR.s:11018  .text.set_shift:0000000000000010 $d
     /tmp/ccGYckNR.s:11023  .text.update_aplha_table:0000000000000000 $t
     /tmp/ccGYckNR.s:11031  .text.update_aplha_table:0000000000000000 update_aplha_table
     /tmp/ccGYckNR.s:11127  .text.update_aplha_table:000000000000004c $d
     /tmp/ccGYckNR.s:11135  .text.program_main:0000000000000000 $t
     /tmp/ccGYckNR.s:11143  .text.program_main:0000000000000000 program_main
     /tmp/ccGYckNR.s:11670  .text.program_main:0000000000000294 $d
     /tmp/ccGYckNR.s:11706  .text.program_main:0000000000000310 $t
     /tmp/ccGYckNR.s:12191  .text.program_main:0000000000000586 $d
     /tmp/ccGYckNR.s:12197  .text.program_main:0000000000000592 $t
     /tmp/ccGYckNR.s:12201  .text.program_main:0000000000000594 $d
     /tmp/ccGYckNR.s:12231  .text.program_main:0000000000000604 $t
     /tmp/ccGYckNR.s:12760  .text.program_main:00000000000008a8 $d
     /tmp/ccGYckNR.s:12791  .text.program_main:0000000000000908 $t
     /tmp/ccGYckNR.s:13298  .text.program_main:0000000000000bc8 $d
     /tmp/ccGYckNR.s:13329  .text.program_main:0000000000000c30 $t
     /tmp/ccGYckNR.s:13878  .text.program_main:0000000000000ef4 $d
     /tmp/ccGYckNR.s:13909  .text.program_main:0000000000000f4c $t
     /tmp/ccGYckNR.s:13952  .text.program_main:0000000000000f8c $d
     /tmp/ccGYckNR.s:14139  .bss.last_header_dmy:0000000000000000 last_header_dmy
     /tmp/ccGYckNR.s:14133  .bss.last_header_clk24:0000000000000000 last_header_clk24
     /tmp/ccGYckNR.s:14229  .data.box_chars:0000000000000000 box_chars
     /tmp/ccGYckNR.s:14170  .bss.prtof_buf:0000000000000000 prtof_buf
     /tmp/ccGYckNR.s:14251  .data.date_separators:0000000000000000 date_separators
     /tmp/ccGYckNR.s:14121  .bss.is_show:0000000000000000 is_show
     /tmp/ccGYckNR.s:14115  .bss.is_graphics:0000000000000000 is_graphics
     /tmp/ccGYckNR.s:14102  .bss.is_edit_x:0000000000000000 is_edit_x
     /tmp/ccGYckNR.s:14096  .bss.is_edit:0000000000000000 is_edit
     /tmp/ccGYckNR.s:14083  .bss.edit_line:0000000000000000 edit_line
     /tmp/ccGYckNR.s:14090  .bss.edit_prompt:0000000000000000 edit_prompt
     /tmp/ccGYckNR.s:14163  .bss.printer_was_graphics:0000000000000000 printer_was_graphics
     /tmp/ccGYckNR.s:14109  .bss.is_gr_print:0000000000000000 is_gr_print
     /tmp/ccGYckNR.s:14127  .bss.last_alpha_table:0000000000000000 last_alpha_table
     /tmp/ccGYckNR.s:14213  .data.alpha_table:0000000000000000 alpha_table
     /tmp/ccGYckNR.s:14205  .data.alpha_shift_tables:0000000000000000 alpha_shift_tables
     /tmp/ccGYckNR.s:14220  .data.alpha_tables:0000000000000000 alpha_tables
     /tmp/ccGYckNR.s:14756  .rodata.alpha_upper_transl:0000000000000000 alpha_upper_transl
     /tmp/ccGYckNR.s:14177  .bss.read_statefile:0000000000000000 read_statefile
     /tmp/ccGYckNR.s:14198  .bss.tlcd:0000000000000000 tlcd
     /tmp/ccGYckNR.s:14151  .bss.pgm_res:0000000000000000 pgm_res
ARM GAS  /tmp/ccGYckNR.s 			page 368


     /tmp/ccGYckNR.s:14157  .bss.pgm_sz:0000000000000000 pgm_sz
     /tmp/ccGYckNR.s:14145  .bss.pgm_ptr:0000000000000000 pgm_ptr
     /tmp/ccGYckNR.s:14191  .bss.repeat_timeout:0000000000000000 repeat_timeout
     /tmp/ccGYckNR.s:14070  .bss.core_initialized:0000000000000000 core_initialized
     /tmp/ccGYckNR.s:14257  .data.decimal_point:0000000000000000 decimal_point
     /tmp/ccGYckNR.s:14263  .data.draw_reg_mode:0000000000000000 draw_reg_mode
     /tmp/ccGYckNR.s:14282  .data.stack_layout:0000000000000000 stack_layout
     /tmp/ccGYckNR.s:14184  .bss.reg_font_offset:0000000000000000 reg_font_offset
     /tmp/ccGYckNR.s:14269  .data.pgm_font_ix:0000000000000000 pgm_font_ix
     /tmp/ccGYckNR.s:14275  .data.reg_font_ix:0000000000000000 reg_font_ix
     /tmp/ccGYckNR.s:14076  .bss.disp_was_menu_drawn:0000000000000000 disp_was_menu_drawn
     /tmp/ccGYckNR.s:13997  .rodata:0000000000000000 $d
     /tmp/ccGYckNR.s:14012  .bss._ZL11lcd_changed:0000000000000000 $d
     /tmp/ccGYckNR.s:14016  .bss._ZL11lcd_changed:0000000000000000 _ZL11lcd_changed
     /tmp/ccGYckNR.s:14022  .bss._ZL13timeout0_type:0000000000000000 _ZL13timeout0_type
     /tmp/ccGYckNR.s:14023  .bss._ZL13timeout0_type:0000000000000000 $d
     /tmp/ccGYckNR.s:14025  .bss._ZL15last_header_min:0000000000000000 $d
     /tmp/ccGYckNR.s:14029  .bss._ZL15last_header_min:0000000000000000 _ZL15last_header_min
     /tmp/ccGYckNR.s:14032  .bss._ZL18last_lcd_update_ms:0000000000000000 $d
     /tmp/ccGYckNR.s:14036  .bss._ZL18last_lcd_update_ms:0000000000000000 _ZL18last_lcd_update_ms
     /tmp/ccGYckNR.s:14039  .bss._ZL9ann_state:0000000000000000 $d
     /tmp/ccGYckNR.s:14043  .bss._ZL9ann_state:0000000000000000 _ZL9ann_state
     /tmp/ccGYckNR.s:14046  .bss._ZL9pgm_state:0000000000000000 $d
     /tmp/ccGYckNR.s:14050  .bss._ZL9pgm_state:0000000000000000 _ZL9pgm_state
     /tmp/ccGYckNR.s:14053  .bss._ZZ11str_from_hpE2ss:0000000000000000 $d
     /tmp/ccGYckNR.s:14057  .bss._ZZ11str_from_hpE2ss:0000000000000000 _ZZ11str_from_hpE2ss
     /tmp/ccGYckNR.s:14060  .bss._ZZ9disp_regsE17last_pgm_top_line:0000000000000000 $d
     /tmp/ccGYckNR.s:14064  .bss._ZZ9disp_regsE17last_pgm_top_line:0000000000000000 _ZZ9disp_regsE17last_pgm_top_line
     /tmp/ccGYckNR.s:14071  .bss.core_initialized:0000000000000000 $d
     /tmp/ccGYckNR.s:14077  .bss.disp_was_menu_drawn:0000000000000000 $d
     /tmp/ccGYckNR.s:14079  .bss.edit_line:0000000000000000 $d
     /tmp/ccGYckNR.s:14086  .bss.edit_prompt:0000000000000000 $d
     /tmp/ccGYckNR.s:14097  .bss.is_edit:0000000000000000 $d
     /tmp/ccGYckNR.s:14103  .bss.is_edit_x:0000000000000000 $d
     /tmp/ccGYckNR.s:14105  .bss.is_gr_print:0000000000000000 $d
     /tmp/ccGYckNR.s:14116  .bss.is_graphics:0000000000000000 $d
     /tmp/ccGYckNR.s:14122  .bss.is_show:0000000000000000 $d
     /tmp/ccGYckNR.s:14128  .bss.last_alpha_table:0000000000000000 $d
     /tmp/ccGYckNR.s:14134  .bss.last_header_clk24:0000000000000000 $d
     /tmp/ccGYckNR.s:14140  .bss.last_header_dmy:0000000000000000 $d
     /tmp/ccGYckNR.s:14142  .bss.pgm_ptr:0000000000000000 $d
     /tmp/ccGYckNR.s:14152  .bss.pgm_res:0000000000000000 $d
     /tmp/ccGYckNR.s:14154  .bss.pgm_sz:0000000000000000 $d
     /tmp/ccGYckNR.s:14164  .bss.printer_was_graphics:0000000000000000 $d
     /tmp/ccGYckNR.s:14166  .bss.prtof_buf:0000000000000000 $d
     /tmp/ccGYckNR.s:14173  .bss.read_statefile:0000000000000000 $d
     /tmp/ccGYckNR.s:14180  .bss.reg_font_offset:0000000000000000 $d
     /tmp/ccGYckNR.s:14187  .bss.repeat_timeout:0000000000000000 $d
     /tmp/ccGYckNR.s:14194  .bss.tlcd:0000000000000000 $d
     /tmp/ccGYckNR.s:14201  .data.alpha_shift_tables:0000000000000000 $d
     /tmp/ccGYckNR.s:14548  .rodata._ZL24alpha_shift_upper_transl:0000000000000000 _ZL24alpha_shift_upper_transl
     /tmp/ccGYckNR.s:14542  .rodata._ZL24alpha_shift_lower_transl:0000000000000000 _ZL24alpha_shift_lower_transl
     /tmp/ccGYckNR.s:14216  .data.alpha_tables:0000000000000000 $d
     /tmp/ccGYckNR.s:14536  .rodata._ZL18alpha_lower_transl:0000000000000000 _ZL18alpha_lower_transl
     /tmp/ccGYckNR.s:14225  .data.box_chars:0000000000000000 $d
     /tmp/ccGYckNR.s:14247  .data.date_separators:0000000000000000 $d
     /tmp/ccGYckNR.s:14278  .data.stack_layout:0000000000000000 $d
ARM GAS  /tmp/ccGYckNR.s 			page 369


     /tmp/ccGYckNR.s:14285  .rodata._Z10hp2utfcharPch.str1.4:0000000000000000 $d
     /tmp/ccGYckNR.s:14371  .rodata._Z11shell_printPKciS0_iiiii.str1.4:0000000000000000 $d
     /tmp/ccGYckNR.s:14375  .rodata._Z17shell_malloc_failjPKci.str1.4:0000000000000000 $d
     /tmp/ccGYckNR.s:14387  .rodata._Z8hp2asciiPcPKci.str1.4:0000000000000000 $d
     /tmp/ccGYckNR.s:14492  .rodata._ZL16hp2printer_table:0000000000000000 $d
     /tmp/ccGYckNR.s:14496  .rodata._ZL16hp2printer_table:0000000000000000 _ZL16hp2printer_table
     /tmp/ccGYckNR.s:14533  .rodata._ZL18alpha_lower_transl:0000000000000000 $d
     /tmp/ccGYckNR.s:14539  .rodata._ZL24alpha_shift_lower_transl:0000000000000000 $d
     /tmp/ccGYckNR.s:14545  .rodata._ZL24alpha_shift_upper_transl:0000000000000000 $d
     /tmp/ccGYckNR.s:14551  .rodata._ZL5ann00:0000000000000000 $d
     /tmp/ccGYckNR.s:14555  .rodata._ZL5ann00:0000000000000000 _ZL5ann00
     /tmp/ccGYckNR.s:14594  .rodata._ZL5ann01:0000000000000000 $d
     /tmp/ccGYckNR.s:14598  .rodata._ZL5ann01:0000000000000000 _ZL5ann01
     /tmp/ccGYckNR.s:14629  .rodata._ZL5ann02:0000000000000000 $d
     /tmp/ccGYckNR.s:14633  .rodata._ZL5ann02:0000000000000000 _ZL5ann02
     /tmp/ccGYckNR.s:14670  .rodata._ZL5ann03:0000000000000000 $d
     /tmp/ccGYckNR.s:14674  .rodata._ZL5ann03:0000000000000000 _ZL5ann03
     /tmp/ccGYckNR.s:14711  .rodata._ZL6ann_dx:0000000000000000 $d
     /tmp/ccGYckNR.s:14715  .rodata._ZL6ann_dx:0000000000000000 _ZL6ann_dx
     /tmp/ccGYckNR.s:14725  .rodata._ZL8ann_offs:0000000000000000 $d
     /tmp/ccGYckNR.s:14729  .rodata._ZL8ann_offs:0000000000000000 _ZL8ann_offs
     /tmp/ccGYckNR.s:14738  .rodata._ZL9ann_lcd_x:0000000000000000 $d
     /tmp/ccGYckNR.s:14742  .rodata._ZL9ann_lcd_x:0000000000000000 _ZL9ann_lcd_x
     /tmp/ccGYckNR.s:14752  .rodata.alpha_upper_transl:0000000000000000 $d
     /tmp/ccGYckNR.s:14759  .rodata.copy_reset_state_filename.str1.4:0000000000000000 $d
     /tmp/ccGYckNR.s:14763  .rodata.disp_header.part.11.str1.4:0000000000000000 $d
     /tmp/ccGYckNR.s:14770  .rodata.disp_regs.str1.4:0000000000000000 $d
     /tmp/ccGYckNR.s:14794  .rodata.program_main.str1.4:0000000000000000 $d
     /tmp/ccGYckNR.s:14801  .rodata.prtof_buf_flush.str1.4:0000000000000000 $d
     /tmp/ccGYckNR.s:14805  .rodata.savestat_init_write.str1.4:0000000000000000 $d
     /tmp/ccGYckNR.s:14809  .rodata.set_print_to_file.part.8.str1.4:0000000000000000 $d
     /tmp/ccGYckNR.s:14829  .rodata.str1.4:0000000000000000 $d
                     .debug_frame:0000000000000010 $d
     /tmp/ccGYckNR.s:709    .text._Z8hp2asciiPcPKci:00000000000000cf $d
     /tmp/ccGYckNR.s:709    .text._Z8hp2asciiPcPKci:00000000000000d0 $t
     /tmp/ccGYckNR.s:1148   .text._Z10hp2utfcharPch:0000000000000097 $d
     /tmp/ccGYckNR.s:1148   .text._Z10hp2utfcharPch:0000000000000098 $t
     /tmp/ccGYckNR.s:4507   .text.toggle_disp:0000000000000013 $d
     /tmp/ccGYckNR.s:4507   .text.toggle_disp:0000000000000014 $t
     /tmp/ccGYckNR.s:4710   .text.is_disp:0000000000000011 $d
     /tmp/ccGYckNR.s:4710   .text.is_disp:0000000000000012 $t

UNDEFINED SYMBOLS
set_calc_flag
get_calc_flag
_Z12core_keydowniPiS_
strcpy
strlen
core_printer_delay
memcpy
lcd_for_dm42
__aeabi_i2d
__aeabi_ddiv
is_number_entry
graphics_mode
gr_MAXX
memmove
ARM GAS  /tmp/ccGYckNR.s 			page 370


free
malloc
memset
strrchr
strncpy
is_clk24
is_dmy
stpcpy
is_pgm_mode
reg2str
get_reflcd_mask
_Z9core_menuv
get_pgm_info
pgm_line_init
get_pgm_line
is_goose
_Z19core_display_bufferv
sprintf
strncmp
is_wide_print
core_redisplay
_Z15core_alpha_menuv
_Z9core_initii
_Z15core_powercyclev
_Z16core_keytimeout2v
run_menu_item
set_dmy
menu_line_str
after_fat_format_dm42
set_clk24
clear_no_keystrokes_yet
_Z13core_timeout3i
_Z20core_repaint_displayv
_Z21core_enter_backgroundv
_Z13core_hex_menuv
core_keydown_ex
is_mode_pause
_Z10core_keyupv
MID_MENU
_Z11core_repeatv
_Z16core_keytimeout1v
core_set_printer_delay
set_graphics_mode
set_reflcd_mask
