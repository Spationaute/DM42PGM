ARM GAS  /tmp/ccT5mNbt.s 			page 1


   1              		.arch armv7e-m
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 2
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"dm42_menu.cc"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.load_statefile,"ax",%progbits
  18              		.align	1
  19              		.p2align 2,,3
  20              		.global	load_statefile
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	load_statefile:
  27              	.LFB10:
  28              		.file 1 "dm/dm42_menu.cc"
   1:dm/dm42_menu.cc **** /*
   2:dm/dm42_menu.cc **** 
   3:dm/dm42_menu.cc **** BSD 3-Clause License
   4:dm/dm42_menu.cc **** 
   5:dm/dm42_menu.cc **** Copyright (c) 2018, SwissMicros
   6:dm/dm42_menu.cc **** All rights reserved.
   7:dm/dm42_menu.cc **** 
   8:dm/dm42_menu.cc **** Redistribution and use in source and binary forms, with or without
   9:dm/dm42_menu.cc **** modification, are permitted provided that the following conditions are met:
  10:dm/dm42_menu.cc **** 
  11:dm/dm42_menu.cc **** * Redistributions of source code must retain the above copyright notice, this
  12:dm/dm42_menu.cc ****   list of conditions and the following disclaimer.
  13:dm/dm42_menu.cc **** 
  14:dm/dm42_menu.cc **** * Redistributions in binary form must reproduce the above copyright notice,
  15:dm/dm42_menu.cc ****   this list of conditions and the following disclaimer in the documentation
  16:dm/dm42_menu.cc ****   and/or other materials provided with the distribution.
  17:dm/dm42_menu.cc **** 
  18:dm/dm42_menu.cc **** * Neither the name of the copyright holder nor the names of its
  19:dm/dm42_menu.cc ****   contributors may be used to endorse or promote products derived from
  20:dm/dm42_menu.cc ****   this software without specific prior written permission.
  21:dm/dm42_menu.cc **** 
  22:dm/dm42_menu.cc **** THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  23:dm/dm42_menu.cc **** AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  24:dm/dm42_menu.cc **** IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  25:dm/dm42_menu.cc **** DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
  26:dm/dm42_menu.cc **** FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  27:dm/dm42_menu.cc **** DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  28:dm/dm42_menu.cc **** SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
  29:dm/dm42_menu.cc **** CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
  30:dm/dm42_menu.cc **** OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
ARM GAS  /tmp/ccT5mNbt.s 			page 2


  31:dm/dm42_menu.cc **** OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  32:dm/dm42_menu.cc **** 
  33:dm/dm42_menu.cc **** 
  34:dm/dm42_menu.cc ****   The software and related material is released as “NOMAS”  (NOt MAnufacturer Supported). 
  35:dm/dm42_menu.cc **** 
  36:dm/dm42_menu.cc ****   1. Info is released to assist customers using, exploring and extending the product
  37:dm/dm42_menu.cc ****   2. Do NOT contact the manufacturer with questions, seeking support, etc. regarding
  38:dm/dm42_menu.cc ****      NOMAS material as no support is implied or committed-to by the Manufacturer
  39:dm/dm42_menu.cc ****   3. The Manufacturer may reply and/or update materials if and when needed solely
  40:dm/dm42_menu.cc ****      at their discretion
  41:dm/dm42_menu.cc **** 
  42:dm/dm42_menu.cc **** */
  43:dm/dm42_menu.cc **** 
  44:dm/dm42_menu.cc **** #include <stdio.h>
  45:dm/dm42_menu.cc **** #include <stdlib.h>
  46:dm/dm42_menu.cc **** #include <string.h>
  47:dm/dm42_menu.cc **** 
  48:dm/dm42_menu.cc **** #include "core_main.h"
  49:dm/dm42_menu.cc **** #include "core_aux.h"
  50:dm/dm42_menu.cc **** 
  51:dm/dm42_menu.cc **** 
  52:dm/dm42_menu.cc **** extern "C" {
  53:dm/dm42_menu.cc **** 
  54:dm/dm42_menu.cc **** #include <main.h>
  55:dm/dm42_menu.cc **** #include <dmcp.h>
  56:dm/dm42_menu.cc **** 
  57:dm/dm42_menu.cc **** #include <dm42_menu.h>
  58:dm/dm42_menu.cc **** #include <dm42_fns.h>
  59:dm/dm42_menu.cc **** 
  60:dm/dm42_menu.cc **** 
  61:dm/dm42_menu.cc **** // Possibility to override default
  62:dm/dm42_menu.cc **** #ifdef printf
  63:dm/dm42_menu.cc **** //#undef printf
  64:dm/dm42_menu.cc **** #endif
  65:dm/dm42_menu.cc **** 
  66:dm/dm42_menu.cc **** 
  67:dm/dm42_menu.cc **** void after_fat_format_dm42() {
  68:dm/dm42_menu.cc ****   if ( sys_disk_ok() ) {
  69:dm/dm42_menu.cc ****     set_fat_label("DM42");
  70:dm/dm42_menu.cc ****     check_create_dir(PGM_DIR);   // Create /PROGRAMS directory
  71:dm/dm42_menu.cc ****     check_create_dir(STATE_DIR); // Create /STATE    directory
  72:dm/dm42_menu.cc ****   }
  73:dm/dm42_menu.cc **** }
  74:dm/dm42_menu.cc **** 
  75:dm/dm42_menu.cc **** 
  76:dm/dm42_menu.cc **** 
  77:dm/dm42_menu.cc **** /*
  78:dm/dm42_menu.cc ****  ▄    ▄                               ▄▀▀                         ▄      ▀           
  79:dm/dm42_menu.cc ****  ██  ██  ▄▄▄   ▄ ▄▄   ▄   ▄         ▄▄█▄▄  ▄   ▄  ▄ ▄▄ 
  80:dm/dm42_menu.cc ****  █ ██ █ █▀  █  █▀  █  █   █           █    █   █  █▀  █  █▀
  81:dm/dm42_menu.cc ****  █ ▀▀ █ █▀▀▀▀  █   █  █   █           █    █   █  █   █  █   
  82:dm/dm42_menu.cc ****  █    █ ▀█▄▄▀  █   █  ▀▄▄▀█           █    ▀▄▄▀█  █   █
  83:dm/dm42_menu.cc **** 
  84:dm/dm42_menu.cc **** 
  85:dm/dm42_menu.cc **** 
  86:dm/dm42_menu.cc **** 
  87:dm/dm42_menu.cc **** int lcd_for_dm42(int what) {
ARM GAS  /tmp/ccT5mNbt.s 			page 3


  88:dm/dm42_menu.cc ****   int refresh = 1;
  89:dm/dm42_menu.cc **** 
  90:dm/dm42_menu.cc ****   lcd_clear_buf();
  91:dm/dm42_menu.cc ****   lcd_writeClr(t24);
  92:dm/dm42_menu.cc **** 
  93:dm/dm42_menu.cc ****   switch ( what ) {
  94:dm/dm42_menu.cc ****     case DISP_CALC:
  95:dm/dm42_menu.cc ****       refresh = 0; // Just empty screen
  96:dm/dm42_menu.cc ****       break;
  97:dm/dm42_menu.cc **** 
  98:dm/dm42_menu.cc ****     case DISP_ALLOC_FAIL:
  99:dm/dm42_menu.cc ****       lcd_putsR(t24, "Free42 Memory Allocation Fail");
 100:dm/dm42_menu.cc ****       t24->y += 4;
 101:dm/dm42_menu.cc ****       lcd_puts(t24, "Unhandled memory allocation:");
 102:dm/dm42_menu.cc ****       break;
 103:dm/dm42_menu.cc **** 
 104:dm/dm42_menu.cc ****     case DISP_PRBUF_ALLOC_FAIL:
 105:dm/dm42_menu.cc ****       lcd_putsR(t24, "Print Buffer Fail");
 106:dm/dm42_menu.cc ****       t24->y += 4;
 107:dm/dm42_menu.cc ****       lcd_puts(t24, "Cannot prepare buffer for");
 108:dm/dm42_menu.cc ****       lcd_puts(t24, "printing to file.");
 109:dm/dm42_menu.cc ****       lcd_puts(t24, "ERROR:");
 110:dm/dm42_menu.cc ****       break;
 111:dm/dm42_menu.cc ****       
 112:dm/dm42_menu.cc **** 
 113:dm/dm42_menu.cc ****     case DISP_NO_PGM_SEL:
 114:dm/dm42_menu.cc ****       lcd_putsR(t24, "Select Programs");
 115:dm/dm42_menu.cc ****       t24->y += 4;
 116:dm/dm42_menu.cc ****       lcd_putsAt(t24, 3, "No program selected");
 117:dm/dm42_menu.cc ****       lcd_putsAt(t24, 7, "Press a key to continue...");
 118:dm/dm42_menu.cc ****     break;
 119:dm/dm42_menu.cc **** 
 120:dm/dm42_menu.cc ****     case DISP_LOADING_STATE:
 121:dm/dm42_menu.cc ****       lcd_putsR(t24, "Loading from File");
 122:dm/dm42_menu.cc ****       lcd_putsAt(t24, 3, "Loading calculator state ...");
 123:dm/dm42_menu.cc ****       break;
 124:dm/dm42_menu.cc **** 
 125:dm/dm42_menu.cc ****     case DISP_SAVING_STATE:
 126:dm/dm42_menu.cc ****       lcd_putsR(t24, "Saving to File");
 127:dm/dm42_menu.cc ****       lcd_putsAt(t24, 3, "Saving calculator state ...");
 128:dm/dm42_menu.cc ****       break;
 129:dm/dm42_menu.cc **** 
 130:dm/dm42_menu.cc ****     case DISP_SAVE_FAILED:
 131:dm/dm42_menu.cc ****       lcd_putsR(t24, "Save State Error");
 132:dm/dm42_menu.cc ****       lcd_putsAt(t24, 2,"Calculator state save failed.");
 133:dm/dm42_menu.cc ****       lcd_putsAt(t24, 3,"Check the FAT filesystem.");
 134:dm/dm42_menu.cc ****       lcd_putsAt(t24, 4,"Disk full or too many");
 135:dm/dm42_menu.cc ****       lcd_putsAt(t24, 5,"root directory items?");
 136:dm/dm42_menu.cc ****       lcd_putsAt(t24, 7,"    Press EXIT key to continue...");
 137:dm/dm42_menu.cc ****       break;
 138:dm/dm42_menu.cc **** 
 139:dm/dm42_menu.cc ****     case DISP_ABOUT:
 140:dm/dm42_menu.cc ****       // Just base of original system about
 141:dm/dm42_menu.cc ****       lcd_for_calc(DISP_ABOUT);
 142:dm/dm42_menu.cc ****       lcd_putsAt(t24,4,"");
 143:dm/dm42_menu.cc ****       lcd_prevLn(t24);
 144:dm/dm42_menu.cc ****       // --
ARM GAS  /tmp/ccT5mNbt.s 			page 4


 145:dm/dm42_menu.cc ****       
 146:dm/dm42_menu.cc ****       int h2 = lcd_lineHeight(t20)/2;
 147:dm/dm42_menu.cc ****       lcd_setXY(t20, t24->x, t24->y);
 148:dm/dm42_menu.cc ****       t20->y += h2;
 149:dm/dm42_menu.cc ****       lcd_print(t20, "DM42 v" DM42_VERSION " (C) SwissMicros GmbH");
 150:dm/dm42_menu.cc ****       t20->y += h2;
 151:dm/dm42_menu.cc ****       lcd_print(t20, "%s (C) 2004-2018, Thomas Okken", free42_version_str());
 152:dm/dm42_menu.cc ****       t20->y += h2;
 153:dm/dm42_menu.cc ****       lcd_puts(t20, "Intel Decimal Floating-Point Math Lib v2.0");
 154:dm/dm42_menu.cc ****       lcd_puts(t20, "  (C) 2007-2011, Intel Corp.");
 155:dm/dm42_menu.cc **** 
 156:dm/dm42_menu.cc ****       t20->y = LCD_Y - lcd_lineHeight(t20);
 157:dm/dm42_menu.cc ****       lcd_putsR(t20, "    Press EXIT key to continue...");
 158:dm/dm42_menu.cc ****       break;
 159:dm/dm42_menu.cc **** 
 160:dm/dm42_menu.cc ****   }
 161:dm/dm42_menu.cc **** 
 162:dm/dm42_menu.cc ****   if (refresh)
 163:dm/dm42_menu.cc ****     lcd_refresh();
 164:dm/dm42_menu.cc **** 
 165:dm/dm42_menu.cc ****   return t24->y;
 166:dm/dm42_menu.cc **** }
 167:dm/dm42_menu.cc **** 
 168:dm/dm42_menu.cc **** 
 169:dm/dm42_menu.cc **** 
 170:dm/dm42_menu.cc **** #if 0 // Template screen
 171:dm/dm42_menu.cc **** void template_screen() {
 172:dm/dm42_menu.cc ****   char bb[32];
 173:dm/dm42_menu.cc ****   font_t *f=font_lm18;;
 174:dm/dm42_menu.cc ****   int k1,y=0;
 175:dm/dm42_menu.cc **** 
 176:dm/dm42_menu.cc ****   lcd_offset = 0;
 177:dm/dm42_menu.cc ****   lcd_clear_buf();
 178:dm/dm42_menu.cc ****   lcdPutsR("Screen title");
 179:dm/dm42_menu.cc ****   
 180:dm/dm42_menu.cc ****   for(;;) {
 181:dm/dm42_menu.cc ****     k1 = runner_get_key(NULL);
 182:dm/dm42_menu.cc ****     if ( k1 == KEY_EXIT ) break;
 183:dm/dm42_menu.cc ****     if ( is_menu_auto_off() ) break;
 184:dm/dm42_menu.cc **** 
 185:dm/dm42_menu.cc ****     nr=-1;
 186:dm/dm42_menu.cc ****     switch (k1) {
 187:dm/dm42_menu.cc ****       case KEY_F1: // A - 
 188:dm/dm42_menu.cc ****         break;
 189:dm/dm42_menu.cc ****       case KEY_F2: // B - 
 190:dm/dm42_menu.cc ****         break;
 191:dm/dm42_menu.cc ****       case KEY_F3: // C - 
 192:dm/dm42_menu.cc ****         break;
 193:dm/dm42_menu.cc ****       case KEY_F4: // D - 
 194:dm/dm42_menu.cc ****         break;
 195:dm/dm42_menu.cc ****       case KEY_F5: // E - 
 196:dm/dm42_menu.cc ****         break;
 197:dm/dm42_menu.cc ****       case KEY_F6: // F - 
 198:dm/dm42_menu.cc ****         break;
 199:dm/dm42_menu.cc ****       case KEY_BSP: nr=10; break;
 200:dm/dm42_menu.cc ****     }
 201:dm/dm42_menu.cc **** 
ARM GAS  /tmp/ccT5mNbt.s 			page 5


 202:dm/dm42_menu.cc **** 
 203:dm/dm42_menu.cc ****     {
 204:dm/dm42_menu.cc ****       
 205:dm/dm42_menu.cc ****       // Menu line
 206:dm/dm42_menu.cc ****       lcd_offset = 16;
 207:dm/dm42_menu.cc ****       lcdPutsRAt(8, " xx | xx | xxx | xxx  | xxx | xx ");
 208:dm/dm42_menu.cc ****       lcd_offset = 0;
 209:dm/dm42_menu.cc **** 
 210:dm/dm42_menu.cc ****       // display
 211:dm/dm42_menu.cc ****       lcd_refresh();
 212:dm/dm42_menu.cc ****     }
 213:dm/dm42_menu.cc ****   }
 214:dm/dm42_menu.cc **** }
 215:dm/dm42_menu.cc **** #endif
 216:dm/dm42_menu.cc **** 
 217:dm/dm42_menu.cc **** 
 218:dm/dm42_menu.cc **** 
 219:dm/dm42_menu.cc **** 
 220:dm/dm42_menu.cc **** 
 221:dm/dm42_menu.cc **** 
 222:dm/dm42_menu.cc **** 
 223:dm/dm42_menu.cc **** 
 224:dm/dm42_menu.cc **** 
 225:dm/dm42_menu.cc **** int pgm_import_enter(const char * fpath, const char * fname, void * data) {
 226:dm/dm42_menu.cc ****   FRESULT res;
 227:dm/dm42_menu.cc **** 
 228:dm/dm42_menu.cc ****   lcd_puts(t24,"Loading ...");
 229:dm/dm42_menu.cc ****   lcd_puts(t24, fname);  lcd_refresh();
 230:dm/dm42_menu.cc ****   res = f_open(ppgm_fp, fpath, FA_READ);
 231:dm/dm42_menu.cc ****   if ( res != FR_OK ) {
 232:dm/dm42_menu.cc ****     // Print fail
 233:dm/dm42_menu.cc ****     lcd_puts(t24,"Fail to open."); lcd_refresh();
 234:dm/dm42_menu.cc ****     lcd_refresh();
 235:dm/dm42_menu.cc ****     wait_for_key_press();
 236:dm/dm42_menu.cc ****   } else {
 237:dm/dm42_menu.cc **** 
 238:dm/dm42_menu.cc **** #ifdef FREE42_PRE_2016_IFC
 239:dm/dm42_menu.cc ****     core_import_programs(NULL);
 240:dm/dm42_menu.cc **** #else
 241:dm/dm42_menu.cc ****     core_import_programs();
 242:dm/dm42_menu.cc **** #endif
 243:dm/dm42_menu.cc **** 
 244:dm/dm42_menu.cc ****     f_close(ppgm_fp);
 245:dm/dm42_menu.cc ****     if (pgm_res) {
 246:dm/dm42_menu.cc ****       lcd_print(t24, "Fail - %i", pgm_res);
 247:dm/dm42_menu.cc ****       lcd_refresh();
 248:dm/dm42_menu.cc ****       wait_for_key_press();
 249:dm/dm42_menu.cc ****     } else {
 250:dm/dm42_menu.cc ****       lcd_puts(t24, "Success"); 
 251:dm/dm42_menu.cc ****       lcd_refresh();
 252:dm/dm42_menu.cc ****       sys_delay(1500);
 253:dm/dm42_menu.cc ****     }
 254:dm/dm42_menu.cc ****   }
 255:dm/dm42_menu.cc **** 
 256:dm/dm42_menu.cc ****   return 0; // Continue in the file list
 257:dm/dm42_menu.cc **** }
 258:dm/dm42_menu.cc **** 
ARM GAS  /tmp/ccT5mNbt.s 			page 6


 259:dm/dm42_menu.cc **** 
 260:dm/dm42_menu.cc **** typedef struct {
 261:dm/dm42_menu.cc ****   int pgm_cnt;
 262:dm/dm42_menu.cc ****   int pgm_indices[MAX_PGM_SEL];
 263:dm/dm42_menu.cc **** } pgm_import_sel_t;
 264:dm/dm42_menu.cc **** 
 265:dm/dm42_menu.cc **** 
 266:dm/dm42_menu.cc **** int pgm_export_enter(const char * fpath, const char * fname, void * data) {
 267:dm/dm42_menu.cc ****   
 268:dm/dm42_menu.cc ****   pgm_import_sel_t * pgm_sel = (pgm_import_sel_t*)data;
 269:dm/dm42_menu.cc ****   int res;
 270:dm/dm42_menu.cc **** 
 271:dm/dm42_menu.cc ****   lcd_writeClr(t24);
 272:dm/dm42_menu.cc ****   lcd_clear_buf();
 273:dm/dm42_menu.cc ****   lcd_putsR(t24,"Program Export");
 274:dm/dm42_menu.cc ****   t24->ln_offs = 8;
 275:dm/dm42_menu.cc **** 
 276:dm/dm42_menu.cc ****   lcd_putsAt(t24,3,"Saving ...");
 277:dm/dm42_menu.cc ****   lcd_puts(t24, fpath);
 278:dm/dm42_menu.cc ****   lcd_refresh();
 279:dm/dm42_menu.cc **** 
 280:dm/dm42_menu.cc ****   sys_disk_write_enable(1);
 281:dm/dm42_menu.cc ****   res = f_open(ppgm_fp, fpath, FA_WRITE|FA_CREATE_ALWAYS);
 282:dm/dm42_menu.cc ****   if ( res != FR_OK ) {
 283:dm/dm42_menu.cc ****     sys_disk_write_enable(0);
 284:dm/dm42_menu.cc ****     lcd_puts(t24,"Fail to open."); lcd_refresh();
 285:dm/dm42_menu.cc ****     lcd_refresh();
 286:dm/dm42_menu.cc ****     if ( sys_disk_ok() )
 287:dm/dm42_menu.cc ****       wait_for_key_press();
 288:dm/dm42_menu.cc ****   } else {
 289:dm/dm42_menu.cc **** #ifdef FREE42_PRE_2016_IFC
 290:dm/dm42_menu.cc ****     res = core_export_programs(pgm_sel->pgm_cnt, pgm_sel->pgm_indices, NULL);
 291:dm/dm42_menu.cc **** #else
 292:dm/dm42_menu.cc ****     core_export_programs(pgm_sel->pgm_cnt, pgm_sel->pgm_indices);
 293:dm/dm42_menu.cc ****     res = 0;
 294:dm/dm42_menu.cc **** #endif
 295:dm/dm42_menu.cc ****     f_close(ppgm_fp);
 296:dm/dm42_menu.cc ****     sys_disk_write_enable(0);
 297:dm/dm42_menu.cc ****     if (res || pgm_res) {
 298:dm/dm42_menu.cc ****       lcd_print(t24, "Fail - %i", pgm_res);
 299:dm/dm42_menu.cc ****       lcd_refresh();
 300:dm/dm42_menu.cc ****       if ( sys_disk_ok() )
 301:dm/dm42_menu.cc ****         wait_for_key_press();
 302:dm/dm42_menu.cc ****     } else {
 303:dm/dm42_menu.cc ****       lcd_puts(t24,"Success"); 
 304:dm/dm42_menu.cc ****       lcd_refresh();
 305:dm/dm42_menu.cc ****       sys_delay(1000);
 306:dm/dm42_menu.cc ****     }
 307:dm/dm42_menu.cc ****   }
 308:dm/dm42_menu.cc **** 
 309:dm/dm42_menu.cc ****   return MRET_EXIT;
 310:dm/dm42_menu.cc **** }
 311:dm/dm42_menu.cc **** 
 312:dm/dm42_menu.cc **** 
 313:dm/dm42_menu.cc **** void run_reset_state_file() {
 314:dm/dm42_menu.cc ****   lcd_writeClr(t24);
 315:dm/dm42_menu.cc ****   lcd_clear_buf();
ARM GAS  /tmp/ccT5mNbt.s 			page 7


 316:dm/dm42_menu.cc ****   lcd_putsR(t24,"Calculator State");
 317:dm/dm42_menu.cc ****   t24->ln_offs = 8;
 318:dm/dm42_menu.cc **** 
 319:dm/dm42_menu.cc ****   lcd_puts(t24, "You are about to reset calculator");
 320:dm/dm42_menu.cc ****   lcd_puts(t24, "state.");
 321:dm/dm42_menu.cc ****   lcd_puts(t24, "");
 322:dm/dm42_menu.cc ****   lcd_puts(t24, "WARNING: Current calculator state");
 323:dm/dm42_menu.cc ****   lcd_puts(t24, "will be lost.");
 324:dm/dm42_menu.cc ****   lcd_puts(t24, "");
 325:dm/dm42_menu.cc ****   lcd_puts(t24, "");
 326:dm/dm42_menu.cc ****   //lcd_puts(t24, "Are you sure to proceed?");
 327:dm/dm42_menu.cc ****   lcd_puts(t24, "Press [ENTER] to confirm.");
 328:dm/dm42_menu.cc ****   lcd_refresh();
 329:dm/dm42_menu.cc ****   
 330:dm/dm42_menu.cc ****   wait_for_key_release(-1);
 331:dm/dm42_menu.cc **** 
 332:dm/dm42_menu.cc ****   for(;;) {
 333:dm/dm42_menu.cc ****     int k1 = runner_get_key(NULL);
 334:dm/dm42_menu.cc ****     if ( k1 == KEY_EXIT )
 335:dm/dm42_menu.cc ****       return;
 336:dm/dm42_menu.cc ****     if ( is_menu_auto_off() )
 337:dm/dm42_menu.cc ****       return;
 338:dm/dm42_menu.cc ****     if ( k1 == KEY_ENTER )
 339:dm/dm42_menu.cc ****       break; // Proceed with reset
 340:dm/dm42_menu.cc ****   }
 341:dm/dm42_menu.cc **** 
 342:dm/dm42_menu.cc ****   // Reset statefile name for next load
 343:dm/dm42_menu.cc ****   set_reset_state_file("");
 344:dm/dm42_menu.cc **** 
 345:dm/dm42_menu.cc ****   // Reset the system to force new statefile load
 346:dm/dm42_menu.cc ****   set_reset_magic(NO_SPLASH_MAGIC);
 347:dm/dm42_menu.cc ****   sys_reset();
 348:dm/dm42_menu.cc **** }
 349:dm/dm42_menu.cc **** 
 350:dm/dm42_menu.cc **** 
 351:dm/dm42_menu.cc **** int load_statefile(const char * fpath, const char * fname, void * data) {
  29              		.loc 1 351 0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              	.LVL0:
  34 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
  35              		.cfi_def_cfa_offset 32
  36              		.cfi_offset 3, -32
  37              		.cfi_offset 4, -28
  38              		.cfi_offset 5, -24
  39              		.cfi_offset 6, -20
  40              		.cfi_offset 7, -16
  41              		.cfi_offset 8, -12
  42              		.cfi_offset 9, -8
  43              		.cfi_offset 14, -4
 352:dm/dm42_menu.cc **** 
 353:dm/dm42_menu.cc ****   lcd_puts(t24, "Calculator state file:");
  44              		.loc 1 353 0
  45 0004 214D     		ldr	r5, .L11
  46 0006 224C     		ldr	r4, .L11+4
  47              	.LBB16:
ARM GAS  /tmp/ccT5mNbt.s 			page 8


  48              	.LBB17:
 354:dm/dm42_menu.cc ****   lcd_puts(t24, fname);
 355:dm/dm42_menu.cc **** 
 356:dm/dm42_menu.cc ****   // 'Sure' dialog
 357:dm/dm42_menu.cc ****   lcd_puts(t24, "");
 358:dm/dm42_menu.cc ****   lcd_puts(t24, "WARNING: Current calculator state");
 359:dm/dm42_menu.cc ****   lcd_puts(t24, "will be lost.");
 360:dm/dm42_menu.cc ****   lcd_puts(t24, "");
 361:dm/dm42_menu.cc ****   lcd_puts(t24, "");
 362:dm/dm42_menu.cc ****   //lcd_puts(t24, "Are you sure to load this file?");
 363:dm/dm42_menu.cc ****   lcd_puts(t24, "Press [ENTER] to confirm.");
 364:dm/dm42_menu.cc ****   lcd_refresh();
 365:dm/dm42_menu.cc ****   
 366:dm/dm42_menu.cc ****   wait_for_key_release(-1);
 367:dm/dm42_menu.cc **** 
 368:dm/dm42_menu.cc ****   for(;;) {
 369:dm/dm42_menu.cc ****     int k1 = runner_get_key(NULL);
  49              		.loc 1 369 0
  50 0008 224E     		ldr	r6, .L11+8
 370:dm/dm42_menu.cc ****     if ( k1 == KEY_EXIT )
 371:dm/dm42_menu.cc ****       return 0; // Continue the selection screen
 372:dm/dm42_menu.cc ****     if ( is_menu_auto_off() )
  51              		.loc 1 372 0
  52 000a 234F     		ldr	r7, .L11+12
  53              	.LBE17:
  54              	.LBE16:
 351:dm/dm42_menu.cc **** 
  55              		.loc 1 351 0
  56 000c 8946     		mov	r9, r1
  57 000e 8046     		mov	r8, r0
 353:dm/dm42_menu.cc ****   lcd_puts(t24, fname);
  58              		.loc 1 353 0
  59 0010 2249     		ldr	r1, .L11+16
  60              	.LVL1:
  61 0012 686B     		ldr	r0, [r5, #52]
  62              	.LVL2:
  63 0014 A047     		blx	r4
  64              	.LVL3:
 354:dm/dm42_menu.cc **** 
  65              		.loc 1 354 0
  66 0016 4946     		mov	r1, r9
  67 0018 686B     		ldr	r0, [r5, #52]
  68 001a A047     		blx	r4
  69              	.LVL4:
 357:dm/dm42_menu.cc ****   lcd_puts(t24, "WARNING: Current calculator state");
  70              		.loc 1 357 0
  71 001c 686B     		ldr	r0, [r5, #52]
  72 001e 2049     		ldr	r1, .L11+20
  73 0020 A047     		blx	r4
  74              	.LVL5:
 358:dm/dm42_menu.cc ****   lcd_puts(t24, "will be lost.");
  75              		.loc 1 358 0
  76 0022 686B     		ldr	r0, [r5, #52]
  77 0024 1F49     		ldr	r1, .L11+24
  78 0026 A047     		blx	r4
  79              	.LVL6:
 359:dm/dm42_menu.cc ****   lcd_puts(t24, "");
ARM GAS  /tmp/ccT5mNbt.s 			page 9


  80              		.loc 1 359 0
  81 0028 686B     		ldr	r0, [r5, #52]
  82 002a 1F49     		ldr	r1, .L11+28
  83 002c A047     		blx	r4
  84              	.LVL7:
 360:dm/dm42_menu.cc ****   lcd_puts(t24, "");
  85              		.loc 1 360 0
  86 002e 686B     		ldr	r0, [r5, #52]
  87 0030 1B49     		ldr	r1, .L11+20
  88 0032 A047     		blx	r4
  89              	.LVL8:
 361:dm/dm42_menu.cc ****   //lcd_puts(t24, "Are you sure to load this file?");
  90              		.loc 1 361 0
  91 0034 686B     		ldr	r0, [r5, #52]
  92 0036 1A49     		ldr	r1, .L11+20
  93 0038 A047     		blx	r4
  94              	.LVL9:
 363:dm/dm42_menu.cc ****   lcd_refresh();
  95              		.loc 1 363 0
  96 003a 686B     		ldr	r0, [r5, #52]
  97 003c 1B49     		ldr	r1, .L11+32
  98 003e A047     		blx	r4
  99              	.LVL10:
 364:dm/dm42_menu.cc ****   
 100              		.loc 1 364 0
 101 0040 1B4B     		ldr	r3, .L11+36
 102 0042 9847     		blx	r3
 103              	.LVL11:
 366:dm/dm42_menu.cc **** 
 104              		.loc 1 366 0
 105 0044 1B4B     		ldr	r3, .L11+40
 106 0046 4FF0FF30 		mov	r0, #-1
 107 004a 9847     		blx	r3
 108              	.LVL12:
 109 004c 04E0     		b	.L3
 110              	.LVL13:
 111              	.L10:
 112              	.LBB20:
 113              	.LBB18:
 114              		.loc 1 372 0
 115 004e B847     		blx	r7
 116              	.LVL14:
 117 0050 0546     		mov	r5, r0
 118 0052 50B9     		cbnz	r0, .L5
 373:dm/dm42_menu.cc ****       return MRET_EXIT; // Leave selection screen
 374:dm/dm42_menu.cc ****     if ( k1 == KEY_ENTER )
 119              		.loc 1 374 0
 120 0054 0D2C     		cmp	r4, #13
 121 0056 0DD0     		beq	.L9
 122              	.LVL15:
 123              	.L3:
 369:dm/dm42_menu.cc ****     if ( k1 == KEY_EXIT )
 124              		.loc 1 369 0
 125 0058 0020     		movs	r0, #0
 126 005a B047     		blx	r6
 127              	.LVL16:
 370:dm/dm42_menu.cc ****       return 0; // Continue the selection screen
ARM GAS  /tmp/ccT5mNbt.s 			page 10


 128              		.loc 1 370 0
 129 005c 2128     		cmp	r0, #33
 369:dm/dm42_menu.cc ****     if ( k1 == KEY_EXIT )
 130              		.loc 1 369 0
 131 005e 0446     		mov	r4, r0
 132              	.LVL17:
 370:dm/dm42_menu.cc ****       return 0; // Continue the selection screen
 133              		.loc 1 370 0
 134 0060 F5D1     		bne	.L10
 371:dm/dm42_menu.cc ****     if ( is_menu_auto_off() )
 135              		.loc 1 371 0
 136 0062 0025     		movs	r5, #0
 137              	.LBE18:
 138              	.LBE20:
 375:dm/dm42_menu.cc ****       break; // Proceed with load
 376:dm/dm42_menu.cc ****   }
 377:dm/dm42_menu.cc **** 
 378:dm/dm42_menu.cc ****   // Store statefile name for next load
 379:dm/dm42_menu.cc ****   set_reset_state_file(fpath);
 380:dm/dm42_menu.cc **** 
 381:dm/dm42_menu.cc ****   // Reset the system to force new statefile load
 382:dm/dm42_menu.cc ****   set_reset_magic(NO_SPLASH_MAGIC);
 383:dm/dm42_menu.cc ****   sys_reset();
 384:dm/dm42_menu.cc **** 
 385:dm/dm42_menu.cc ****   // Never return here...
 386:dm/dm42_menu.cc ****   return 0;
 387:dm/dm42_menu.cc **** }
 139              		.loc 1 387 0
 140 0064 2846     		mov	r0, r5
 141              	.LVL18:
 142 0066 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 143              	.LVL19:
 144              	.L5:
 145              	.LBB21:
 146              	.LBB19:
 373:dm/dm42_menu.cc ****     if ( k1 == KEY_ENTER )
 147              		.loc 1 373 0
 148 006a 6FF00105 		mvn	r5, #1
 149              	.LBE19:
 150              	.LBE21:
 151              		.loc 1 387 0
 152 006e 2846     		mov	r0, r5
 153 0070 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 154              	.LVL20:
 155              	.L9:
 379:dm/dm42_menu.cc **** 
 156              		.loc 1 379 0
 157 0074 4046     		mov	r0, r8
 158 0076 104B     		ldr	r3, .L11+44
 159 0078 9847     		blx	r3
 160              	.LVL21:
 382:dm/dm42_menu.cc ****   sys_reset();
 161              		.loc 1 382 0
 162 007a 1048     		ldr	r0, .L11+48
 163 007c 104B     		ldr	r3, .L11+52
 164 007e 9847     		blx	r3
 165              	.LVL22:
ARM GAS  /tmp/ccT5mNbt.s 			page 11


 383:dm/dm42_menu.cc **** 
 166              		.loc 1 383 0
 167 0080 104B     		ldr	r3, .L11+56
 168 0082 9847     		blx	r3
 169              	.LVL23:
 170              		.loc 1 387 0
 171 0084 2846     		mov	r0, r5
 172 0086 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 173              	.LVL24:
 174              	.L12:
 175 008a 00BF     		.align	2
 176              	.L11:
 177 008c 00200010 		.word	268443648
 178 0090 7D020008 		.word	134218365
 179 0094 9D030008 		.word	134218653
 180 0098 C1030008 		.word	134218689
 181 009c 00000000 		.word	.LC7
 182 00a0 00000000 		.word	.LC1
 183 00a4 18000000 		.word	.LC8
 184 00a8 3C000000 		.word	.LC9
 185 00ac 4C000000 		.word	.LC10
 186 00b0 31020008 		.word	134218289
 187 00b4 A5030008 		.word	134218661
 188 00b8 1D030008 		.word	134218525
 189 00bc 6273CEEA 		.word	-355568798
 190 00c0 11030008 		.word	134218513
 191 00c4 21040008 		.word	134218785
 192              		.cfi_endproc
 193              	.LFE10:
 195              		.section	.text.save_statefile,"ax",%progbits
 196              		.align	1
 197              		.p2align 2,,3
 198              		.global	save_statefile
 199              		.syntax unified
 200              		.thumb
 201              		.thumb_func
 202              		.fpu fpv4-sp-d16
 204              	save_statefile:
 205              	.LFB11:
 388:dm/dm42_menu.cc **** 
 389:dm/dm42_menu.cc **** 
 390:dm/dm42_menu.cc **** int save_statefile(const char * fpath, const char * fname, void * data) {
 206              		.loc 1 390 0
 207              		.cfi_startproc
 208              		@ args = 0, pretend = 0, frame = 0
 209              		@ frame_needed = 0, uses_anonymous_args = 0
 210              	.LVL25:
 211 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 212              		.cfi_def_cfa_offset 24
 213              		.cfi_offset 3, -24
 214              		.cfi_offset 4, -20
 215              		.cfi_offset 5, -16
 216              		.cfi_offset 6, -12
 217              		.cfi_offset 7, -8
 218              		.cfi_offset 14, -4
 391:dm/dm42_menu.cc **** 
 392:dm/dm42_menu.cc ****   lcd_puts(t24,"Saving state ...");
ARM GAS  /tmp/ccT5mNbt.s 			page 12


 219              		.loc 1 392 0
 220 0002 094D     		ldr	r5, .L15
 221 0004 094C     		ldr	r4, .L15+4
 390:dm/dm42_menu.cc **** 
 222              		.loc 1 390 0
 223 0006 0646     		mov	r6, r0
 224 0008 0F46     		mov	r7, r1
 225              		.loc 1 392 0
 226 000a 686B     		ldr	r0, [r5, #52]
 227              	.LVL26:
 228 000c 0849     		ldr	r1, .L15+8
 229              	.LVL27:
 230 000e A047     		blx	r4
 231              	.LVL28:
 393:dm/dm42_menu.cc ****   lcd_puts(t24, fname);  lcd_refresh();
 232              		.loc 1 393 0
 233 0010 3946     		mov	r1, r7
 234 0012 686B     		ldr	r0, [r5, #52]
 235 0014 A047     		blx	r4
 236              	.LVL29:
 237 0016 074B     		ldr	r3, .L15+12
 238 0018 9847     		blx	r3
 239              	.LVL30:
 394:dm/dm42_menu.cc **** 
 395:dm/dm42_menu.cc ****   // Store the state file name
 396:dm/dm42_menu.cc ****   set_reset_state_file(fpath);
 240              		.loc 1 396 0
 241 001a 3046     		mov	r0, r6
 242 001c 064B     		ldr	r3, .L15+16
 243 001e 9847     		blx	r3
 244              	.LVL31:
 397:dm/dm42_menu.cc **** 
 398:dm/dm42_menu.cc ****   // Exit with appropriate code to force statefile save
 399:dm/dm42_menu.cc ****   return MRET_SAVESTATE;
 400:dm/dm42_menu.cc **** }
 245              		.loc 1 400 0
 246 0020 40F20930 		movw	r0, #777
 247 0024 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 248              	.LVL32:
 249              	.L16:
 250 0026 00BF     		.align	2
 251              	.L15:
 252 0028 00200010 		.word	268443648
 253 002c 7D020008 		.word	134218365
 254 0030 00000000 		.word	.LC11
 255 0034 31020008 		.word	134218289
 256 0038 1D030008 		.word	134218525
 257              		.cfi_endproc
 258              	.LFE11:
 260              		.section	.text.pgm_import_enter,"ax",%progbits
 261              		.align	1
 262              		.p2align 2,,3
 263              		.global	pgm_import_enter
 264              		.syntax unified
 265              		.thumb
 266              		.thumb_func
 267              		.fpu fpv4-sp-d16
ARM GAS  /tmp/ccT5mNbt.s 			page 13


 269              	pgm_import_enter:
 270              	.LFB7:
 225:dm/dm42_menu.cc ****   FRESULT res;
 271              		.loc 1 225 0
 272              		.cfi_startproc
 273              		@ args = 0, pretend = 0, frame = 0
 274              		@ frame_needed = 0, uses_anonymous_args = 0
 275              	.LVL33:
 276 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 277              		.cfi_def_cfa_offset 24
 278              		.cfi_offset 4, -24
 279              		.cfi_offset 5, -20
 280              		.cfi_offset 6, -16
 281              		.cfi_offset 7, -12
 282              		.cfi_offset 8, -8
 283              		.cfi_offset 14, -4
 228:dm/dm42_menu.cc ****   lcd_puts(t24, fname);  lcd_refresh();
 284              		.loc 1 228 0
 285 0004 1B4C     		ldr	r4, .L24
 286 0006 1C4D     		ldr	r5, .L24+4
 229:dm/dm42_menu.cc ****   res = f_open(ppgm_fp, fpath, FA_READ);
 287              		.loc 1 229 0
 288 0008 1C4E     		ldr	r6, .L24+8
 225:dm/dm42_menu.cc ****   FRESULT res;
 289              		.loc 1 225 0
 290 000a 0746     		mov	r7, r0
 291 000c 8846     		mov	r8, r1
 228:dm/dm42_menu.cc ****   lcd_puts(t24, fname);  lcd_refresh();
 292              		.loc 1 228 0
 293 000e 606B     		ldr	r0, [r4, #52]
 294              	.LVL34:
 295 0010 1B49     		ldr	r1, .L24+12
 296              	.LVL35:
 297 0012 A847     		blx	r5
 298              	.LVL36:
 229:dm/dm42_menu.cc ****   res = f_open(ppgm_fp, fpath, FA_READ);
 299              		.loc 1 229 0
 300 0014 4146     		mov	r1, r8
 301 0016 606B     		ldr	r0, [r4, #52]
 302 0018 A847     		blx	r5
 303              	.LVL37:
 304 001a B047     		blx	r6
 305              	.LVL38:
 230:dm/dm42_menu.cc ****   if ( res != FR_OK ) {
 306              		.loc 1 230 0
 307 001c 3946     		mov	r1, r7
 308 001e 6068     		ldr	r0, [r4, #4]
 309 0020 184B     		ldr	r3, .L24+16
 310 0022 0122     		movs	r2, #1
 311 0024 9847     		blx	r3
 312              	.LVL39:
 231:dm/dm42_menu.cc ****     // Print fail
 313              		.loc 1 231 0
 314 0026 D8B9     		cbnz	r0, .L22
 241:dm/dm42_menu.cc **** #endif
 315              		.loc 1 241 0
 316 0028 FFF7FEFF 		bl	_Z20core_import_programsv
ARM GAS  /tmp/ccT5mNbt.s 			page 14


 317              	.LVL40:
 244:dm/dm42_menu.cc ****     if (pgm_res) {
 318              		.loc 1 244 0
 319 002c 164B     		ldr	r3, .L24+20
 320 002e 6068     		ldr	r0, [r4, #4]
 321 0030 9847     		blx	r3
 322              	.LVL41:
 245:dm/dm42_menu.cc ****       lcd_print(t24, "Fail - %i", pgm_res);
 323              		.loc 1 245 0
 324 0032 164B     		ldr	r3, .L24+24
 246:dm/dm42_menu.cc ****       lcd_refresh();
 325              		.loc 1 246 0
 326 0034 606B     		ldr	r0, [r4, #52]
 245:dm/dm42_menu.cc ****       lcd_print(t24, "Fail - %i", pgm_res);
 327              		.loc 1 245 0
 328 0036 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 329 0038 4AB9     		cbnz	r2, .L23
 250:dm/dm42_menu.cc ****       lcd_refresh();
 330              		.loc 1 250 0
 331 003a 1549     		ldr	r1, .L24+28
 332 003c A847     		blx	r5
 333              	.LVL42:
 251:dm/dm42_menu.cc ****       sys_delay(1500);
 334              		.loc 1 251 0
 335 003e B047     		blx	r6
 336              	.LVL43:
 252:dm/dm42_menu.cc ****     }
 337              		.loc 1 252 0
 338 0040 144B     		ldr	r3, .L24+32
 339 0042 40F2DC50 		movw	r0, #1500
 340 0046 9847     		blx	r3
 341              	.LVL44:
 257:dm/dm42_menu.cc **** 
 342              		.loc 1 257 0
 343 0048 0020     		movs	r0, #0
 344 004a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 345              	.LVL45:
 346              	.L23:
 246:dm/dm42_menu.cc ****       lcd_refresh();
 347              		.loc 1 246 0
 348 004e 1249     		ldr	r1, .L24+36
 349 0050 124B     		ldr	r3, .L24+40
 350 0052 9847     		blx	r3
 351              	.LVL46:
 247:dm/dm42_menu.cc ****       wait_for_key_press();
 352              		.loc 1 247 0
 353 0054 B047     		blx	r6
 354              	.LVL47:
 248:dm/dm42_menu.cc ****     } else {
 355              		.loc 1 248 0
 356 0056 124B     		ldr	r3, .L24+44
 357 0058 9847     		blx	r3
 358              	.LVL48:
 257:dm/dm42_menu.cc **** 
 359              		.loc 1 257 0
 360 005a 0020     		movs	r0, #0
 361 005c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
ARM GAS  /tmp/ccT5mNbt.s 			page 15


 362              	.LVL49:
 363              	.L22:
 233:dm/dm42_menu.cc ****     lcd_refresh();
 364              		.loc 1 233 0
 365 0060 606B     		ldr	r0, [r4, #52]
 366              	.LVL50:
 367 0062 1049     		ldr	r1, .L24+48
 368 0064 A847     		blx	r5
 369              	.LVL51:
 370 0066 B047     		blx	r6
 371              	.LVL52:
 234:dm/dm42_menu.cc ****     wait_for_key_press();
 372              		.loc 1 234 0
 373 0068 B047     		blx	r6
 374              	.LVL53:
 235:dm/dm42_menu.cc ****   } else {
 375              		.loc 1 235 0
 376 006a 0D4B     		ldr	r3, .L24+44
 377 006c 9847     		blx	r3
 378              	.LVL54:
 257:dm/dm42_menu.cc **** 
 379              		.loc 1 257 0
 380 006e 0020     		movs	r0, #0
 381 0070 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 382              	.LVL55:
 383              	.L25:
 384              		.align	2
 385              	.L24:
 386 0074 00200010 		.word	268443648
 387 0078 7D020008 		.word	134218365
 388 007c 31020008 		.word	134218289
 389 0080 00000000 		.word	.LC12
 390 0084 35040008 		.word	134218805
 391 0088 39040008 		.word	134218809
 392 008c 00000000 		.word	pgm_res
 393 0090 28000000 		.word	.LC15
 394 0094 05040008 		.word	134218757
 395 0098 1C000000 		.word	.LC14
 396 009c B1020008 		.word	134218417
 397 00a0 99030008 		.word	134218649
 398 00a4 0C000000 		.word	.LC13
 399              		.cfi_endproc
 400              	.LFE7:
 402              		.section	.text.pgm_export_enter,"ax",%progbits
 403              		.align	1
 404              		.p2align 2,,3
 405              		.global	pgm_export_enter
 406              		.syntax unified
 407              		.thumb
 408              		.thumb_func
 409              		.fpu fpv4-sp-d16
 411              	pgm_export_enter:
 412              	.LFB8:
 266:dm/dm42_menu.cc ****   
 413              		.loc 1 266 0
 414              		.cfi_startproc
 415              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccT5mNbt.s 			page 16


 416              		@ frame_needed = 0, uses_anonymous_args = 0
 417              	.LVL56:
 418 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 419              		.cfi_def_cfa_offset 40
 420              		.cfi_offset 3, -40
 421              		.cfi_offset 4, -36
 422              		.cfi_offset 5, -32
 423              		.cfi_offset 6, -28
 424              		.cfi_offset 7, -24
 425              		.cfi_offset 8, -20
 426              		.cfi_offset 9, -16
 427              		.cfi_offset 10, -12
 428              		.cfi_offset 11, -8
 429              		.cfi_offset 14, -4
 271:dm/dm42_menu.cc ****   lcd_clear_buf();
 430              		.loc 1 271 0
 431 0004 304C     		ldr	r4, .L33
 432 0006 314B     		ldr	r3, .L33+4
 273:dm/dm42_menu.cc ****   t24->ln_offs = 8;
 433              		.loc 1 273 0
 434 0008 314D     		ldr	r5, .L33+8
 278:dm/dm42_menu.cc **** 
 435              		.loc 1 278 0
 436 000a 324E     		ldr	r6, .L33+12
 280:dm/dm42_menu.cc ****   res = f_open(ppgm_fp, fpath, FA_WRITE|FA_CREATE_ALWAYS);
 437              		.loc 1 280 0
 438 000c 324F     		ldr	r7, .L33+16
 266:dm/dm42_menu.cc ****   
 439              		.loc 1 266 0
 440 000e 8046     		mov	r8, r0
 271:dm/dm42_menu.cc ****   lcd_clear_buf();
 441              		.loc 1 271 0
 442 0010 606B     		ldr	r0, [r4, #52]
 443              	.LVL57:
 266:dm/dm42_menu.cc ****   
 444              		.loc 1 266 0
 445 0012 9246     		mov	r10, r2
 446              	.LVL58:
 271:dm/dm42_menu.cc ****   lcd_clear_buf();
 447              		.loc 1 271 0
 448 0014 9847     		blx	r3
 449              	.LVL59:
 272:dm/dm42_menu.cc ****   lcd_putsR(t24,"Program Export");
 450              		.loc 1 272 0
 451 0016 314B     		ldr	r3, .L33+20
 452 0018 9847     		blx	r3
 453              	.LVL60:
 273:dm/dm42_menu.cc ****   t24->ln_offs = 8;
 454              		.loc 1 273 0
 455 001a 606B     		ldr	r0, [r4, #52]
 456 001c 3049     		ldr	r1, .L33+24
 457 001e 4FF00109 		mov	r9, #1
 458 0022 80F81190 		strb	r9, [r0, #17]
 459 0026 A847     		blx	r5
 460              	.LVL61:
 461 0028 606B     		ldr	r0, [r4, #52]
 276:dm/dm42_menu.cc ****   lcd_puts(t24, fpath);
ARM GAS  /tmp/ccT5mNbt.s 			page 17


 462              		.loc 1 276 0
 463 002a 2E4B     		ldr	r3, .L33+28
 274:dm/dm42_menu.cc **** 
 464              		.loc 1 274 0
 465 002c 0822     		movs	r2, #8
 273:dm/dm42_menu.cc ****   t24->ln_offs = 8;
 466              		.loc 1 273 0
 467 002e 4FF0000B 		mov	fp, #0
 274:dm/dm42_menu.cc **** 
 468              		.loc 1 274 0
 469 0032 0281     		strh	r2, [r0, #8]	@ movhi
 273:dm/dm42_menu.cc ****   t24->ln_offs = 8;
 470              		.loc 1 273 0
 471 0034 80F811B0 		strb	fp, [r0, #17]
 276:dm/dm42_menu.cc ****   lcd_puts(t24, fpath);
 472              		.loc 1 276 0
 473 0038 0321     		movs	r1, #3
 474 003a 9847     		blx	r3
 475              	.LVL62:
 476 003c 606B     		ldr	r0, [r4, #52]
 477 003e 2A49     		ldr	r1, .L33+32
 478 0040 A847     		blx	r5
 479              	.LVL63:
 277:dm/dm42_menu.cc ****   lcd_refresh();
 480              		.loc 1 277 0
 481 0042 4146     		mov	r1, r8
 482 0044 606B     		ldr	r0, [r4, #52]
 483 0046 A847     		blx	r5
 484              	.LVL64:
 278:dm/dm42_menu.cc **** 
 485              		.loc 1 278 0
 486 0048 B047     		blx	r6
 487              	.LVL65:
 280:dm/dm42_menu.cc ****   res = f_open(ppgm_fp, fpath, FA_WRITE|FA_CREATE_ALWAYS);
 488              		.loc 1 280 0
 489 004a 4846     		mov	r0, r9
 490 004c B847     		blx	r7
 491              	.LVL66:
 281:dm/dm42_menu.cc ****   if ( res != FR_OK ) {
 492              		.loc 1 281 0
 493 004e 4146     		mov	r1, r8
 494 0050 6068     		ldr	r0, [r4, #4]
 495 0052 264B     		ldr	r3, .L33+36
 496 0054 0A22     		movs	r2, #10
 497 0056 9847     		blx	r3
 498              	.LVL67:
 282:dm/dm42_menu.cc ****     sys_disk_write_enable(0);
 499              		.loc 1 282 0
 500 0058 68B1     		cbz	r0, .L27
 283:dm/dm42_menu.cc ****     lcd_puts(t24,"Fail to open."); lcd_refresh();
 501              		.loc 1 283 0
 502 005a 5846     		mov	r0, fp
 503              	.LVL68:
 504 005c B847     		blx	r7
 505              	.LVL69:
 284:dm/dm42_menu.cc ****     lcd_refresh();
 506              		.loc 1 284 0
ARM GAS  /tmp/ccT5mNbt.s 			page 18


 507 005e 606B     		ldr	r0, [r4, #52]
 508 0060 2349     		ldr	r1, .L33+40
 509 0062 A847     		blx	r5
 510              	.LVL70:
 511 0064 B047     		blx	r6
 512              	.LVL71:
 285:dm/dm42_menu.cc ****     if ( sys_disk_ok() )
 513              		.loc 1 285 0
 514 0066 B047     		blx	r6
 515              	.LVL72:
 286:dm/dm42_menu.cc ****       wait_for_key_press();
 516              		.loc 1 286 0
 517 0068 224B     		ldr	r3, .L33+44
 518 006a 9847     		blx	r3
 519              	.LVL73:
 520 006c D8B9     		cbnz	r0, .L28
 521              	.LVL74:
 522              	.L29:
 310:dm/dm42_menu.cc **** 
 523              		.loc 1 310 0
 524 006e 6FF00100 		mvn	r0, #1
 525 0072 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 526              	.LVL75:
 527              	.L27:
 292:dm/dm42_menu.cc ****     res = 0;
 528              		.loc 1 292 0
 529 0076 0AF10401 		add	r1, r10, #4
 530 007a 8046     		mov	r8, r0
 531              	.LVL76:
 532 007c DAF80000 		ldr	r0, [r10]
 533              	.LVL77:
 534 0080 FFF7FEFF 		bl	_Z20core_export_programsiPKi
 535              	.LVL78:
 295:dm/dm42_menu.cc ****     sys_disk_write_enable(0);
 536              		.loc 1 295 0
 537 0084 1C4B     		ldr	r3, .L33+48
 538 0086 6068     		ldr	r0, [r4, #4]
 539 0088 9847     		blx	r3
 540              	.LVL79:
 296:dm/dm42_menu.cc ****     if (res || pgm_res) {
 541              		.loc 1 296 0
 542 008a 4046     		mov	r0, r8
 543 008c B847     		blx	r7
 544              	.LVL80:
 297:dm/dm42_menu.cc ****       lcd_print(t24, "Fail - %i", pgm_res);
 545              		.loc 1 297 0
 546 008e 1B4B     		ldr	r3, .L33+52
 298:dm/dm42_menu.cc ****       lcd_refresh();
 547              		.loc 1 298 0
 548 0090 606B     		ldr	r0, [r4, #52]
 297:dm/dm42_menu.cc ****       lcd_print(t24, "Fail - %i", pgm_res);
 549              		.loc 1 297 0
 550 0092 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 551 0094 6AB1     		cbz	r2, .L30
 298:dm/dm42_menu.cc ****       lcd_refresh();
 552              		.loc 1 298 0
 553 0096 1A4B     		ldr	r3, .L33+56
ARM GAS  /tmp/ccT5mNbt.s 			page 19


 554 0098 1A49     		ldr	r1, .L33+60
 555 009a 9847     		blx	r3
 556              	.LVL81:
 299:dm/dm42_menu.cc ****       if ( sys_disk_ok() )
 557              		.loc 1 299 0
 558 009c B047     		blx	r6
 559              	.LVL82:
 300:dm/dm42_menu.cc ****         wait_for_key_press();
 560              		.loc 1 300 0
 561 009e 154B     		ldr	r3, .L33+44
 562 00a0 9847     		blx	r3
 563              	.LVL83:
 564 00a2 0028     		cmp	r0, #0
 565 00a4 E3D0     		beq	.L29
 566              	.LVL84:
 567              	.L28:
 287:dm/dm42_menu.cc ****   } else {
 568              		.loc 1 287 0
 569 00a6 184B     		ldr	r3, .L33+64
 570 00a8 9847     		blx	r3
 571              	.LVL85:
 310:dm/dm42_menu.cc **** 
 572              		.loc 1 310 0
 573 00aa 6FF00100 		mvn	r0, #1
 574 00ae BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 575              	.LVL86:
 576              	.L30:
 303:dm/dm42_menu.cc ****       lcd_refresh();
 577              		.loc 1 303 0
 578 00b2 1649     		ldr	r1, .L33+68
 579 00b4 A847     		blx	r5
 580              	.LVL87:
 304:dm/dm42_menu.cc ****       sys_delay(1000);
 581              		.loc 1 304 0
 582 00b6 B047     		blx	r6
 583              	.LVL88:
 305:dm/dm42_menu.cc ****     }
 584              		.loc 1 305 0
 585 00b8 154B     		ldr	r3, .L33+72
 586 00ba 4FF47A70 		mov	r0, #1000
 587 00be 9847     		blx	r3
 588              	.LVL89:
 310:dm/dm42_menu.cc **** 
 589              		.loc 1 310 0
 590 00c0 6FF00100 		mvn	r0, #1
 591 00c4 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 592              	.LVL90:
 593              	.L34:
 594              		.align	2
 595              	.L33:
 596 00c8 00200010 		.word	268443648
 597 00cc 65020008 		.word	134218341
 598 00d0 7D020008 		.word	134218365
 599 00d4 31020008 		.word	134218289
 600 00d8 E1030008 		.word	134218721
 601 00dc 2D020008 		.word	134218285
 602 00e0 00000000 		.word	.LC16
ARM GAS  /tmp/ccT5mNbt.s 			page 20


 603 00e4 69020008 		.word	134218345
 604 00e8 10000000 		.word	.LC17
 605 00ec 35040008 		.word	134218805
 606 00f0 0C000000 		.word	.LC13
 607 00f4 DD030008 		.word	134218717
 608 00f8 39040008 		.word	134218809
 609 00fc 00000000 		.word	pgm_res
 610 0100 B1020008 		.word	134218417
 611 0104 1C000000 		.word	.LC14
 612 0108 99030008 		.word	134218649
 613 010c 28000000 		.word	.LC15
 614 0110 05040008 		.word	134218757
 615              		.cfi_endproc
 616              	.LFE8:
 618              		.section	.text.after_fat_format_dm42,"ax",%progbits
 619              		.align	1
 620              		.p2align 2,,3
 621              		.global	after_fat_format_dm42
 622              		.syntax unified
 623              		.thumb
 624              		.thumb_func
 625              		.fpu fpv4-sp-d16
 627              	after_fat_format_dm42:
 628              	.LFB5:
  67:dm/dm42_menu.cc ****   if ( sys_disk_ok() ) {
 629              		.loc 1 67 0
 630              		.cfi_startproc
 631              		@ args = 0, pretend = 0, frame = 0
 632              		@ frame_needed = 0, uses_anonymous_args = 0
 633 0000 10B5     		push	{r4, lr}
 634              		.cfi_def_cfa_offset 8
 635              		.cfi_offset 4, -8
 636              		.cfi_offset 14, -4
  68:dm/dm42_menu.cc ****     set_fat_label("DM42");
 637              		.loc 1 68 0
 638 0002 074B     		ldr	r3, .L39
 639 0004 9847     		blx	r3
 640              	.LVL91:
 641 0006 00B9     		cbnz	r0, .L38
 642 0008 10BD     		pop	{r4, pc}
 643              	.L38:
  69:dm/dm42_menu.cc ****     check_create_dir(PGM_DIR);   // Create /PROGRAMS directory
 644              		.loc 1 69 0
 645 000a 064B     		ldr	r3, .L39+4
  70:dm/dm42_menu.cc ****     check_create_dir(STATE_DIR); // Create /STATE    directory
 646              		.loc 1 70 0
 647 000c 064C     		ldr	r4, .L39+8
  69:dm/dm42_menu.cc ****     check_create_dir(PGM_DIR);   // Create /PROGRAMS directory
 648              		.loc 1 69 0
 649 000e 0748     		ldr	r0, .L39+12
 650 0010 9847     		blx	r3
 651              	.LVL92:
  70:dm/dm42_menu.cc ****     check_create_dir(STATE_DIR); // Create /STATE    directory
 652              		.loc 1 70 0
 653 0012 0748     		ldr	r0, .L39+16
 654 0014 A047     		blx	r4
 655              	.LVL93:
ARM GAS  /tmp/ccT5mNbt.s 			page 21


  71:dm/dm42_menu.cc ****   }
 656              		.loc 1 71 0
 657 0016 2346     		mov	r3, r4
 658 0018 0648     		ldr	r0, .L39+20
  73:dm/dm42_menu.cc **** 
 659              		.loc 1 73 0
 660 001a BDE81040 		pop	{r4, lr}
 661              		.cfi_restore 14
 662              		.cfi_restore 4
 663              		.cfi_def_cfa_offset 0
  71:dm/dm42_menu.cc ****   }
 664              		.loc 1 71 0
 665 001e 1847     		bx	r3
 666              	.LVL94:
 667              	.L40:
 668              		.align	2
 669              	.L39:
 670 0020 DD030008 		.word	134218717
 671 0024 D5030008 		.word	134218709
 672 0028 D1030008 		.word	134218705
 673 002c 00000000 		.word	.LC18
 674 0030 08000000 		.word	.LC19
 675 0034 14000000 		.word	.LC20
 676              		.cfi_endproc
 677              	.LFE5:
 679              		.section	.text.lcd_for_dm42,"ax",%progbits
 680              		.align	1
 681              		.p2align 2,,3
 682              		.global	lcd_for_dm42
 683              		.syntax unified
 684              		.thumb
 685              		.thumb_func
 686              		.fpu fpv4-sp-d16
 688              	lcd_for_dm42:
 689              	.LFB6:
  87:dm/dm42_menu.cc ****   int refresh = 1;
 690              		.loc 1 87 0
 691              		.cfi_startproc
 692              		@ args = 0, pretend = 0, frame = 0
 693              		@ frame_needed = 0, uses_anonymous_args = 0
 694              	.LVL95:
 695 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 696              		.cfi_def_cfa_offset 32
 697              		.cfi_offset 3, -32
 698              		.cfi_offset 4, -28
 699              		.cfi_offset 5, -24
 700              		.cfi_offset 6, -20
 701              		.cfi_offset 7, -16
 702              		.cfi_offset 8, -12
 703              		.cfi_offset 9, -8
 704              		.cfi_offset 14, -4
  91:dm/dm42_menu.cc **** 
 705              		.loc 1 91 0
 706 0004 794C     		ldr	r4, .L58
  90:dm/dm42_menu.cc ****   lcd_writeClr(t24);
 707              		.loc 1 90 0
 708 0006 7A4B     		ldr	r3, .L58+4
ARM GAS  /tmp/ccT5mNbt.s 			page 22


  87:dm/dm42_menu.cc ****   int refresh = 1;
 709              		.loc 1 87 0
 710 0008 0546     		mov	r5, r0
  90:dm/dm42_menu.cc ****   lcd_writeClr(t24);
 711              		.loc 1 90 0
 712 000a 9847     		blx	r3
 713              	.LVL96:
  91:dm/dm42_menu.cc **** 
 714              		.loc 1 91 0
 715 000c 606B     		ldr	r0, [r4, #52]
 716 000e 794B     		ldr	r3, .L58+8
 717 0010 9847     		blx	r3
 718              	.LVL97:
 719              	.LBB22:
  93:dm/dm42_menu.cc ****     case DISP_CALC:
 720              		.loc 1 93 0
 721 0012 652D     		cmp	r5, #101
 722 0014 00F0D980 		beq	.L43
 723 0018 1DDD     		ble	.L57
 724 001a 672D     		cmp	r5, #103
 725 001c 00F0C680 		beq	.L48
 726 0020 C0F29C80 		blt	.L49
 727 0024 682D     		cmp	r5, #104
 728 0026 33D0     		beq	.L50
 729 0028 692D     		cmp	r5, #105
 730 002a 19D1     		bne	.L42
 731              	.LBB23:
 105:dm/dm42_menu.cc ****       t24->y += 4;
 732              		.loc 1 105 0
 733 002c 606B     		ldr	r0, [r4, #52]
 734 002e 724D     		ldr	r5, .L58+12
 735              	.LVL98:
 736 0030 7249     		ldr	r1, .L58+16
 737 0032 0123     		movs	r3, #1
 738 0034 4374     		strb	r3, [r0, #17]
 739 0036 A847     		blx	r5
 740              	.LVL99:
 741 0038 606B     		ldr	r0, [r4, #52]
 107:dm/dm42_menu.cc ****       lcd_puts(t24, "printing to file.");
 742              		.loc 1 107 0
 743 003a 7149     		ldr	r1, .L58+20
 106:dm/dm42_menu.cc ****       lcd_puts(t24, "Cannot prepare buffer for");
 744              		.loc 1 106 0
 745 003c C388     		ldrh	r3, [r0, #6]
 105:dm/dm42_menu.cc ****       t24->y += 4;
 746              		.loc 1 105 0
 747 003e 0022     		movs	r2, #0
 106:dm/dm42_menu.cc ****       lcd_puts(t24, "Cannot prepare buffer for");
 748              		.loc 1 106 0
 749 0040 0433     		adds	r3, r3, #4
 105:dm/dm42_menu.cc ****       t24->y += 4;
 750              		.loc 1 105 0
 751 0042 4274     		strb	r2, [r0, #17]
 106:dm/dm42_menu.cc ****       lcd_puts(t24, "Cannot prepare buffer for");
 752              		.loc 1 106 0
 753 0044 C380     		strh	r3, [r0, #6]	@ movhi
 107:dm/dm42_menu.cc ****       lcd_puts(t24, "printing to file.");
ARM GAS  /tmp/ccT5mNbt.s 			page 23


 754              		.loc 1 107 0
 755 0046 A847     		blx	r5
 756              	.LVL100:
 108:dm/dm42_menu.cc ****       lcd_puts(t24, "ERROR:");
 757              		.loc 1 108 0
 758 0048 606B     		ldr	r0, [r4, #52]
 759 004a 6E49     		ldr	r1, .L58+24
 760 004c A847     		blx	r5
 761              	.LVL101:
 109:dm/dm42_menu.cc ****       break;
 762              		.loc 1 109 0
 763 004e 606B     		ldr	r0, [r4, #52]
 764 0050 6D49     		ldr	r1, .L58+28
 765 0052 A847     		blx	r5
 766              	.LVL102:
 110:dm/dm42_menu.cc ****       
 767              		.loc 1 110 0
 768 0054 04E0     		b	.L42
 769              	.LVL103:
 770              	.L57:
 771              	.LBE23:
  93:dm/dm42_menu.cc ****     case DISP_CALC:
 772              		.loc 1 93 0
 773 0056 082D     		cmp	r5, #8
 774 0058 33D0     		beq	.L45
 775 005a 642D     		cmp	r5, #100
 776 005c 08D0     		beq	.L46
 777 005e 0DB1     		cbz	r5, .L47
 778              	.LVL104:
 779              	.L42:
 780              	.LBE22:
 163:dm/dm42_menu.cc **** 
 781              		.loc 1 163 0
 782 0060 6A4B     		ldr	r3, .L58+32
 783 0062 9847     		blx	r3
 784              	.LVL105:
 785              	.L47:
 165:dm/dm42_menu.cc **** }
 786              		.loc 1 165 0
 787 0064 614B     		ldr	r3, .L58
 788 0066 5B6B     		ldr	r3, [r3, #52]
 789 0068 B3F90600 		ldrsh	r0, [r3, #6]
 166:dm/dm42_menu.cc **** 
 790              		.loc 1 166 0
 791 006c BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 792              	.LVL106:
 793              	.L46:
 794              	.LBB25:
 795              	.LBB24:
 121:dm/dm42_menu.cc ****       lcd_putsAt(t24, 3, "Loading calculator state ...");
 796              		.loc 1 121 0
 797 0070 606B     		ldr	r0, [r4, #52]
 798 0072 614D     		ldr	r5, .L58+12
 799              	.LVL107:
 800 0074 6649     		ldr	r1, .L58+36
 801 0076 0123     		movs	r3, #1
 802 0078 4374     		strb	r3, [r0, #17]
ARM GAS  /tmp/ccT5mNbt.s 			page 24


 803 007a A847     		blx	r5
 804              	.LVL108:
 805 007c 606B     		ldr	r0, [r4, #52]
 122:dm/dm42_menu.cc ****       break;
 806              		.loc 1 122 0
 807 007e 654B     		ldr	r3, .L58+40
 121:dm/dm42_menu.cc ****       lcd_putsAt(t24, 3, "Loading calculator state ...");
 808              		.loc 1 121 0
 809 0080 0022     		movs	r2, #0
 810 0082 4274     		strb	r2, [r0, #17]
 122:dm/dm42_menu.cc ****       break;
 811              		.loc 1 122 0
 812 0084 0321     		movs	r1, #3
 813 0086 9847     		blx	r3
 814              	.LVL109:
 815 0088 606B     		ldr	r0, [r4, #52]
 816 008a 6349     		ldr	r1, .L58+44
 817 008c A847     		blx	r5
 818              	.LVL110:
 123:dm/dm42_menu.cc **** 
 819              		.loc 1 123 0
 820 008e E7E7     		b	.L42
 821              	.LVL111:
 822              	.L50:
 114:dm/dm42_menu.cc ****       t24->y += 4;
 823              		.loc 1 114 0
 824 0090 606B     		ldr	r0, [r4, #52]
 825 0092 594D     		ldr	r5, .L58+12
 826              	.LVL112:
 827 0094 6149     		ldr	r1, .L58+48
 116:dm/dm42_menu.cc ****       lcd_putsAt(t24, 7, "Press a key to continue...");
 828              		.loc 1 116 0
 829 0096 5F4E     		ldr	r6, .L58+40
 114:dm/dm42_menu.cc ****       t24->y += 4;
 830              		.loc 1 114 0
 831 0098 0123     		movs	r3, #1
 832 009a 4374     		strb	r3, [r0, #17]
 833 009c A847     		blx	r5
 834              	.LVL113:
 835 009e 606B     		ldr	r0, [r4, #52]
 115:dm/dm42_menu.cc ****       lcd_putsAt(t24, 3, "No program selected");
 836              		.loc 1 115 0
 837 00a0 C388     		ldrh	r3, [r0, #6]
 114:dm/dm42_menu.cc ****       t24->y += 4;
 838              		.loc 1 114 0
 839 00a2 0022     		movs	r2, #0
 115:dm/dm42_menu.cc ****       lcd_putsAt(t24, 3, "No program selected");
 840              		.loc 1 115 0
 841 00a4 0433     		adds	r3, r3, #4
 114:dm/dm42_menu.cc ****       t24->y += 4;
 842              		.loc 1 114 0
 843 00a6 4274     		strb	r2, [r0, #17]
 115:dm/dm42_menu.cc ****       lcd_putsAt(t24, 3, "No program selected");
 844              		.loc 1 115 0
 845 00a8 C380     		strh	r3, [r0, #6]	@ movhi
 116:dm/dm42_menu.cc ****       lcd_putsAt(t24, 7, "Press a key to continue...");
 846              		.loc 1 116 0
ARM GAS  /tmp/ccT5mNbt.s 			page 25


 847 00aa 0321     		movs	r1, #3
 848 00ac B047     		blx	r6
 849              	.LVL114:
 850 00ae 606B     		ldr	r0, [r4, #52]
 851 00b0 5B49     		ldr	r1, .L58+52
 852 00b2 A847     		blx	r5
 853              	.LVL115:
 117:dm/dm42_menu.cc ****     break;
 854              		.loc 1 117 0
 855 00b4 606B     		ldr	r0, [r4, #52]
 856 00b6 0721     		movs	r1, #7
 857 00b8 B047     		blx	r6
 858              	.LVL116:
 859 00ba 606B     		ldr	r0, [r4, #52]
 860 00bc 5949     		ldr	r1, .L58+56
 861 00be A847     		blx	r5
 862              	.LVL117:
 118:dm/dm42_menu.cc **** 
 863              		.loc 1 118 0
 864 00c0 CEE7     		b	.L42
 865              	.LVL118:
 866              	.L45:
 141:dm/dm42_menu.cc ****       lcd_putsAt(t24,4,"");
 867              		.loc 1 141 0
 868 00c2 2846     		mov	r0, r5
 869 00c4 584B     		ldr	r3, .L58+60
 142:dm/dm42_menu.cc ****       lcd_prevLn(t24);
 870              		.loc 1 142 0
 871 00c6 4C4E     		ldr	r6, .L58+12
 146:dm/dm42_menu.cc ****       lcd_setXY(t20, t24->x, t24->y);
 872              		.loc 1 146 0
 873 00c8 584F     		ldr	r7, .L58+64
 147:dm/dm42_menu.cc ****       t20->y += h2;
 874              		.loc 1 147 0
 875 00ca DFF8A481 		ldr	r8, .L58+132
 149:dm/dm42_menu.cc ****       t20->y += h2;
 876              		.loc 1 149 0
 877 00ce DFF8A491 		ldr	r9, .L58+136
 141:dm/dm42_menu.cc ****       lcd_putsAt(t24,4,"");
 878              		.loc 1 141 0
 879 00d2 9847     		blx	r3
 880              	.LVL119:
 142:dm/dm42_menu.cc ****       lcd_prevLn(t24);
 881              		.loc 1 142 0
 882 00d4 4F4B     		ldr	r3, .L58+40
 883 00d6 606B     		ldr	r0, [r4, #52]
 884 00d8 0421     		movs	r1, #4
 885 00da 9847     		blx	r3
 886              	.LVL120:
 887 00dc 5449     		ldr	r1, .L58+68
 888 00de 606B     		ldr	r0, [r4, #52]
 889 00e0 B047     		blx	r6
 890              	.LVL121:
 143:dm/dm42_menu.cc ****       // --
 891              		.loc 1 143 0
 892 00e2 544B     		ldr	r3, .L58+72
 893 00e4 606B     		ldr	r0, [r4, #52]
ARM GAS  /tmp/ccT5mNbt.s 			page 26


 894 00e6 9847     		blx	r3
 895              	.LVL122:
 146:dm/dm42_menu.cc ****       lcd_setXY(t20, t24->x, t24->y);
 896              		.loc 1 146 0
 897 00e8 206B     		ldr	r0, [r4, #48]
 898 00ea B847     		blx	r7
 899              	.LVL123:
 147:dm/dm42_menu.cc ****       t20->y += h2;
 900              		.loc 1 147 0
 901 00ec 636B     		ldr	r3, [r4, #52]
 146:dm/dm42_menu.cc ****       lcd_setXY(t20, t24->x, t24->y);
 902              		.loc 1 146 0
 903 00ee 0546     		mov	r5, r0
 904              	.LVL124:
 147:dm/dm42_menu.cc ****       t20->y += h2;
 905              		.loc 1 147 0
 906 00f0 B3F90620 		ldrsh	r2, [r3, #6]
 907 00f4 B3F90410 		ldrsh	r1, [r3, #4]
 908 00f8 206B     		ldr	r0, [r4, #48]
 909              	.LVL125:
 910 00fa C047     		blx	r8
 911              	.LVL126:
 148:dm/dm42_menu.cc ****       lcd_print(t20, "DM42 v" DM42_VERSION " (C) SwissMicros GmbH");
 912              		.loc 1 148 0
 913 00fc 206B     		ldr	r0, [r4, #48]
 149:dm/dm42_menu.cc ****       t20->y += h2;
 914              		.loc 1 149 0
 915 00fe 4E49     		ldr	r1, .L58+76
 148:dm/dm42_menu.cc ****       lcd_print(t20, "DM42 v" DM42_VERSION " (C) SwissMicros GmbH");
 916              		.loc 1 148 0
 917 0100 C388     		ldrh	r3, [r0, #6]
 146:dm/dm42_menu.cc ****       lcd_setXY(t20, t24->x, t24->y);
 918              		.loc 1 146 0
 919 0102 05EBD575 		add	r5, r5, r5, lsr #31
 920              	.LVL127:
 148:dm/dm42_menu.cc ****       lcd_print(t20, "DM42 v" DM42_VERSION " (C) SwissMicros GmbH");
 921              		.loc 1 148 0
 922 0106 C5F34F05 		ubfx	r5, r5, #1, #16
 923 010a 2B44     		add	r3, r3, r5
 924 010c C380     		strh	r3, [r0, #6]	@ movhi
 149:dm/dm42_menu.cc ****       t20->y += h2;
 925              		.loc 1 149 0
 926 010e C847     		blx	r9
 927              	.LVL128:
 150:dm/dm42_menu.cc ****       lcd_print(t20, "%s (C) 2004-2018, Thomas Okken", free42_version_str());
 928              		.loc 1 150 0
 929 0110 D4F83080 		ldr	r8, [r4, #48]
 930 0114 B8F80630 		ldrh	r3, [r8, #6]
 931 0118 2B44     		add	r3, r3, r5
 932 011a A8F80630 		strh	r3, [r8, #6]	@ movhi
 151:dm/dm42_menu.cc ****       t20->y += h2;
 933              		.loc 1 151 0
 934 011e FFF7FEFF 		bl	free42_version_str
 935              	.LVL129:
 936 0122 4649     		ldr	r1, .L58+80
 937 0124 0246     		mov	r2, r0
 938 0126 4046     		mov	r0, r8
ARM GAS  /tmp/ccT5mNbt.s 			page 27


 939 0128 C847     		blx	r9
 940              	.LVL130:
 152:dm/dm42_menu.cc ****       lcd_puts(t20, "Intel Decimal Floating-Point Math Lib v2.0");
 941              		.loc 1 152 0
 942 012a 206B     		ldr	r0, [r4, #48]
 153:dm/dm42_menu.cc ****       lcd_puts(t20, "  (C) 2007-2011, Intel Corp.");
 943              		.loc 1 153 0
 944 012c 4449     		ldr	r1, .L58+84
 152:dm/dm42_menu.cc ****       lcd_puts(t20, "Intel Decimal Floating-Point Math Lib v2.0");
 945              		.loc 1 152 0
 946 012e C388     		ldrh	r3, [r0, #6]
 947 0130 1D44     		add	r5, r5, r3
 948 0132 C580     		strh	r5, [r0, #6]	@ movhi
 153:dm/dm42_menu.cc ****       lcd_puts(t20, "  (C) 2007-2011, Intel Corp.");
 949              		.loc 1 153 0
 950 0134 B047     		blx	r6
 951              	.LVL131:
 154:dm/dm42_menu.cc **** 
 952              		.loc 1 154 0
 953 0136 4349     		ldr	r1, .L58+88
 954 0138 206B     		ldr	r0, [r4, #48]
 955 013a B047     		blx	r6
 956              	.LVL132:
 156:dm/dm42_menu.cc ****       lcd_putsR(t20, "    Press EXIT key to continue...");
 957              		.loc 1 156 0
 958 013c 256B     		ldr	r5, [r4, #48]
 959 013e 2846     		mov	r0, r5
 960 0140 B847     		blx	r7
 961              	.LVL133:
 157:dm/dm42_menu.cc ****       break;
 962              		.loc 1 157 0
 963 0142 236B     		ldr	r3, [r4, #48]
 964 0144 4049     		ldr	r1, .L58+92
 965 0146 0122     		movs	r2, #1
 156:dm/dm42_menu.cc ****       lcd_putsR(t20, "    Press EXIT key to continue...");
 966              		.loc 1 156 0
 967 0148 C0F1F000 		rsb	r0, r0, #240
 968 014c E880     		strh	r0, [r5, #6]	@ movhi
 157:dm/dm42_menu.cc ****       break;
 969              		.loc 1 157 0
 970 014e 5A74     		strb	r2, [r3, #17]
 971 0150 1846     		mov	r0, r3
 972 0152 B047     		blx	r6
 973              	.LVL134:
 974 0154 236B     		ldr	r3, [r4, #48]
 975 0156 0022     		movs	r2, #0
 976 0158 5A74     		strb	r2, [r3, #17]
 158:dm/dm42_menu.cc **** 
 977              		.loc 1 158 0
 978 015a 81E7     		b	.L42
 979              	.LVL135:
 980              	.L49:
 131:dm/dm42_menu.cc ****       lcd_putsAt(t24, 2,"Calculator state save failed.");
 981              		.loc 1 131 0
 982 015c 606B     		ldr	r0, [r4, #52]
 983 015e 264D     		ldr	r5, .L58+12
 984              	.LVL136:
ARM GAS  /tmp/ccT5mNbt.s 			page 28


 985 0160 3A49     		ldr	r1, .L58+96
 132:dm/dm42_menu.cc ****       lcd_putsAt(t24, 3,"Check the FAT filesystem.");
 986              		.loc 1 132 0
 987 0162 2C4E     		ldr	r6, .L58+40
 131:dm/dm42_menu.cc ****       lcd_putsAt(t24, 2,"Calculator state save failed.");
 988              		.loc 1 131 0
 989 0164 0123     		movs	r3, #1
 990 0166 4374     		strb	r3, [r0, #17]
 991 0168 A847     		blx	r5
 992              	.LVL137:
 993 016a 606B     		ldr	r0, [r4, #52]
 994 016c 0023     		movs	r3, #0
 995 016e 4374     		strb	r3, [r0, #17]
 132:dm/dm42_menu.cc ****       lcd_putsAt(t24, 3,"Check the FAT filesystem.");
 996              		.loc 1 132 0
 997 0170 0221     		movs	r1, #2
 998 0172 B047     		blx	r6
 999              	.LVL138:
 1000 0174 606B     		ldr	r0, [r4, #52]
 1001 0176 3649     		ldr	r1, .L58+100
 1002 0178 A847     		blx	r5
 1003              	.LVL139:
 133:dm/dm42_menu.cc ****       lcd_putsAt(t24, 4,"Disk full or too many");
 1004              		.loc 1 133 0
 1005 017a 606B     		ldr	r0, [r4, #52]
 1006 017c 0321     		movs	r1, #3
 1007 017e B047     		blx	r6
 1008              	.LVL140:
 1009 0180 606B     		ldr	r0, [r4, #52]
 1010 0182 3449     		ldr	r1, .L58+104
 1011 0184 A847     		blx	r5
 1012              	.LVL141:
 134:dm/dm42_menu.cc ****       lcd_putsAt(t24, 5,"root directory items?");
 1013              		.loc 1 134 0
 1014 0186 606B     		ldr	r0, [r4, #52]
 1015 0188 0421     		movs	r1, #4
 1016 018a B047     		blx	r6
 1017              	.LVL142:
 1018 018c 606B     		ldr	r0, [r4, #52]
 1019 018e 3249     		ldr	r1, .L58+108
 1020 0190 A847     		blx	r5
 1021              	.LVL143:
 135:dm/dm42_menu.cc ****       lcd_putsAt(t24, 7,"    Press EXIT key to continue...");
 1022              		.loc 1 135 0
 1023 0192 606B     		ldr	r0, [r4, #52]
 1024 0194 0521     		movs	r1, #5
 1025 0196 B047     		blx	r6
 1026              	.LVL144:
 1027 0198 606B     		ldr	r0, [r4, #52]
 1028 019a 3049     		ldr	r1, .L58+112
 1029 019c A847     		blx	r5
 1030              	.LVL145:
 136:dm/dm42_menu.cc ****       break;
 1031              		.loc 1 136 0
 1032 019e 606B     		ldr	r0, [r4, #52]
 1033 01a0 0721     		movs	r1, #7
 1034 01a2 B047     		blx	r6
ARM GAS  /tmp/ccT5mNbt.s 			page 29


 1035              	.LVL146:
 1036 01a4 606B     		ldr	r0, [r4, #52]
 1037 01a6 2849     		ldr	r1, .L58+92
 1038 01a8 A847     		blx	r5
 1039              	.LVL147:
 137:dm/dm42_menu.cc **** 
 1040              		.loc 1 137 0
 1041 01aa 59E7     		b	.L42
 1042              	.LVL148:
 1043              	.L48:
  99:dm/dm42_menu.cc ****       t24->y += 4;
 1044              		.loc 1 99 0
 1045 01ac 606B     		ldr	r0, [r4, #52]
 1046 01ae 124D     		ldr	r5, .L58+12
 1047              	.LVL149:
 1048 01b0 2B49     		ldr	r1, .L58+116
 1049 01b2 0123     		movs	r3, #1
 1050 01b4 4374     		strb	r3, [r0, #17]
 1051 01b6 A847     		blx	r5
 1052              	.LVL150:
 1053 01b8 606B     		ldr	r0, [r4, #52]
 101:dm/dm42_menu.cc ****       break;
 1054              		.loc 1 101 0
 1055 01ba 2A49     		ldr	r1, .L58+120
 100:dm/dm42_menu.cc ****       lcd_puts(t24, "Unhandled memory allocation:");
 1056              		.loc 1 100 0
 1057 01bc C388     		ldrh	r3, [r0, #6]
  99:dm/dm42_menu.cc ****       t24->y += 4;
 1058              		.loc 1 99 0
 1059 01be 0022     		movs	r2, #0
 100:dm/dm42_menu.cc ****       lcd_puts(t24, "Unhandled memory allocation:");
 1060              		.loc 1 100 0
 1061 01c0 0433     		adds	r3, r3, #4
  99:dm/dm42_menu.cc ****       t24->y += 4;
 1062              		.loc 1 99 0
 1063 01c2 4274     		strb	r2, [r0, #17]
 100:dm/dm42_menu.cc ****       lcd_puts(t24, "Unhandled memory allocation:");
 1064              		.loc 1 100 0
 1065 01c4 C380     		strh	r3, [r0, #6]	@ movhi
 101:dm/dm42_menu.cc ****       break;
 1066              		.loc 1 101 0
 1067 01c6 A847     		blx	r5
 1068              	.LVL151:
 102:dm/dm42_menu.cc **** 
 1069              		.loc 1 102 0
 1070 01c8 4AE7     		b	.L42
 1071              	.LVL152:
 1072              	.L43:
 126:dm/dm42_menu.cc ****       lcd_putsAt(t24, 3, "Saving calculator state ...");
 1073              		.loc 1 126 0
 1074 01ca 606B     		ldr	r0, [r4, #52]
 1075 01cc 0A4D     		ldr	r5, .L58+12
 1076              	.LVL153:
 1077 01ce 2649     		ldr	r1, .L58+124
 1078 01d0 0123     		movs	r3, #1
 1079 01d2 4374     		strb	r3, [r0, #17]
 1080 01d4 A847     		blx	r5
ARM GAS  /tmp/ccT5mNbt.s 			page 30


 1081              	.LVL154:
 1082 01d6 606B     		ldr	r0, [r4, #52]
 127:dm/dm42_menu.cc ****       break;
 1083              		.loc 1 127 0
 1084 01d8 0E4B     		ldr	r3, .L58+40
 126:dm/dm42_menu.cc ****       lcd_putsAt(t24, 3, "Saving calculator state ...");
 1085              		.loc 1 126 0
 1086 01da 0022     		movs	r2, #0
 1087 01dc 4274     		strb	r2, [r0, #17]
 127:dm/dm42_menu.cc ****       break;
 1088              		.loc 1 127 0
 1089 01de 0321     		movs	r1, #3
 1090 01e0 9847     		blx	r3
 1091              	.LVL155:
 1092 01e2 606B     		ldr	r0, [r4, #52]
 1093 01e4 2149     		ldr	r1, .L58+128
 1094 01e6 A847     		blx	r5
 1095              	.LVL156:
 128:dm/dm42_menu.cc **** 
 1096              		.loc 1 128 0
 1097 01e8 3AE7     		b	.L42
 1098              	.L59:
 1099 01ea 00BF     		.align	2
 1100              	.L58:
 1101 01ec 00200010 		.word	268443648
 1102 01f0 2D020008 		.word	134218285
 1103 01f4 65020008 		.word	134218341
 1104 01f8 7D020008 		.word	134218365
 1105 01fc 40000000 		.word	.LC23
 1106 0200 54000000 		.word	.LC24
 1107 0204 70000000 		.word	.LC25
 1108 0208 84000000 		.word	.LC26
 1109 020c 31020008 		.word	134218289
 1110 0210 CC000000 		.word	.LC30
 1111 0214 69020008 		.word	134218345
 1112 0218 E0000000 		.word	.LC31
 1113 021c 8C000000 		.word	.LC27
 1114 0220 9C000000 		.word	.LC28
 1115 0224 B0000000 		.word	.LC29
 1116 0228 B5020008 		.word	134218421
 1117 022c 71020008 		.word	134218353
 1118 0230 00000000 		.word	.LC1
 1119 0234 61020008 		.word	134218337
 1120 0238 D0010000 		.word	.LC40
 1121 023c F0010000 		.word	.LC41
 1122 0240 10020000 		.word	.LC42
 1123 0244 3C020000 		.word	.LC43
 1124 0248 AC010000 		.word	.LC39
 1125 024c 2C010000 		.word	.LC34
 1126 0250 40010000 		.word	.LC35
 1127 0254 60010000 		.word	.LC36
 1128 0258 7C010000 		.word	.LC37
 1129 025c 94010000 		.word	.LC38
 1130 0260 00000000 		.word	.LC21
 1131 0264 20000000 		.word	.LC22
 1132 0268 00010000 		.word	.LC32
 1133 026c 10010000 		.word	.LC33
ARM GAS  /tmp/ccT5mNbt.s 			page 31


 1134 0270 6D020008 		.word	134218349
 1135 0274 B1020008 		.word	134218417
 1136              	.LBE24:
 1137              	.LBE25:
 1138              		.cfi_endproc
 1139              	.LFE6:
 1141              		.section	.text.run_reset_state_file,"ax",%progbits
 1142              		.align	1
 1143              		.p2align 2,,3
 1144              		.global	run_reset_state_file
 1145              		.syntax unified
 1146              		.thumb
 1147              		.thumb_func
 1148              		.fpu fpv4-sp-d16
 1150              	run_reset_state_file:
 1151              	.LFB9:
 313:dm/dm42_menu.cc ****   lcd_writeClr(t24);
 1152              		.loc 1 313 0
 1153              		.cfi_startproc
 1154              		@ args = 0, pretend = 0, frame = 0
 1155              		@ frame_needed = 0, uses_anonymous_args = 0
 1156 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1157              		.cfi_def_cfa_offset 24
 1158              		.cfi_offset 4, -24
 1159              		.cfi_offset 5, -20
 1160              		.cfi_offset 6, -16
 1161              		.cfi_offset 7, -12
 1162              		.cfi_offset 8, -8
 1163              		.cfi_offset 14, -4
 314:dm/dm42_menu.cc ****   lcd_clear_buf();
 1164              		.loc 1 314 0
 1165 0004 224C     		ldr	r4, .L69
 1166 0006 234B     		ldr	r3, .L69+4
 1167 0008 606B     		ldr	r0, [r4, #52]
 316:dm/dm42_menu.cc ****   t24->ln_offs = 8;
 1168              		.loc 1 316 0
 1169 000a 234F     		ldr	r7, .L69+8
 1170              	.LBB26:
 1171              	.LBB27:
 333:dm/dm42_menu.cc ****     if ( k1 == KEY_EXIT )
 1172              		.loc 1 333 0
 1173 000c 234D     		ldr	r5, .L69+12
 336:dm/dm42_menu.cc ****       return;
 1174              		.loc 1 336 0
 1175 000e 244E     		ldr	r6, .L69+16
 1176              	.LBE27:
 1177              	.LBE26:
 314:dm/dm42_menu.cc ****   lcd_clear_buf();
 1178              		.loc 1 314 0
 1179 0010 9847     		blx	r3
 1180              	.LVL157:
 315:dm/dm42_menu.cc ****   lcd_putsR(t24,"Calculator State");
 1181              		.loc 1 315 0
 1182 0012 244B     		ldr	r3, .L69+20
 1183 0014 9847     		blx	r3
 1184              	.LVL158:
 316:dm/dm42_menu.cc ****   t24->ln_offs = 8;
ARM GAS  /tmp/ccT5mNbt.s 			page 32


 1185              		.loc 1 316 0
 1186 0016 606B     		ldr	r0, [r4, #52]
 1187 0018 2349     		ldr	r1, .L69+24
 1188 001a 0123     		movs	r3, #1
 1189 001c 4374     		strb	r3, [r0, #17]
 1190 001e B847     		blx	r7
 1191              	.LVL159:
 1192 0020 606B     		ldr	r0, [r4, #52]
 319:dm/dm42_menu.cc ****   lcd_puts(t24, "state.");
 1193              		.loc 1 319 0
 1194 0022 2249     		ldr	r1, .L69+28
 316:dm/dm42_menu.cc ****   t24->ln_offs = 8;
 1195              		.loc 1 316 0
 1196 0024 0022     		movs	r2, #0
 317:dm/dm42_menu.cc **** 
 1197              		.loc 1 317 0
 1198 0026 0823     		movs	r3, #8
 316:dm/dm42_menu.cc ****   t24->ln_offs = 8;
 1199              		.loc 1 316 0
 1200 0028 4274     		strb	r2, [r0, #17]
 317:dm/dm42_menu.cc **** 
 1201              		.loc 1 317 0
 1202 002a 0381     		strh	r3, [r0, #8]	@ movhi
 319:dm/dm42_menu.cc ****   lcd_puts(t24, "state.");
 1203              		.loc 1 319 0
 1204 002c B847     		blx	r7
 1205              	.LVL160:
 320:dm/dm42_menu.cc ****   lcd_puts(t24, "");
 1206              		.loc 1 320 0
 1207 002e 606B     		ldr	r0, [r4, #52]
 1208 0030 1F49     		ldr	r1, .L69+32
 1209 0032 B847     		blx	r7
 1210              	.LVL161:
 321:dm/dm42_menu.cc ****   lcd_puts(t24, "WARNING: Current calculator state");
 1211              		.loc 1 321 0
 1212 0034 606B     		ldr	r0, [r4, #52]
 1213 0036 1F49     		ldr	r1, .L69+36
 1214 0038 B847     		blx	r7
 1215              	.LVL162:
 322:dm/dm42_menu.cc ****   lcd_puts(t24, "will be lost.");
 1216              		.loc 1 322 0
 1217 003a 606B     		ldr	r0, [r4, #52]
 1218 003c 1E49     		ldr	r1, .L69+40
 1219 003e B847     		blx	r7
 1220              	.LVL163:
 323:dm/dm42_menu.cc ****   lcd_puts(t24, "");
 1221              		.loc 1 323 0
 1222 0040 606B     		ldr	r0, [r4, #52]
 1223 0042 1E49     		ldr	r1, .L69+44
 1224 0044 B847     		blx	r7
 1225              	.LVL164:
 324:dm/dm42_menu.cc ****   lcd_puts(t24, "");
 1226              		.loc 1 324 0
 1227 0046 606B     		ldr	r0, [r4, #52]
 1228 0048 1A49     		ldr	r1, .L69+36
 1229 004a B847     		blx	r7
 1230              	.LVL165:
ARM GAS  /tmp/ccT5mNbt.s 			page 33


 325:dm/dm42_menu.cc ****   //lcd_puts(t24, "Are you sure to proceed?");
 1231              		.loc 1 325 0
 1232 004c 606B     		ldr	r0, [r4, #52]
 1233 004e 1949     		ldr	r1, .L69+36
 1234 0050 B847     		blx	r7
 1235              	.LVL166:
 327:dm/dm42_menu.cc ****   lcd_refresh();
 1236              		.loc 1 327 0
 1237 0052 606B     		ldr	r0, [r4, #52]
 1238 0054 1A49     		ldr	r1, .L69+48
 1239 0056 B847     		blx	r7
 1240              	.LVL167:
 328:dm/dm42_menu.cc ****   
 1241              		.loc 1 328 0
 1242 0058 1A4B     		ldr	r3, .L69+52
 1243 005a 9847     		blx	r3
 1244              	.LVL168:
 330:dm/dm42_menu.cc **** 
 1245              		.loc 1 330 0
 1246 005c 1A4B     		ldr	r3, .L69+56
 1247 005e 4FF0FF30 		mov	r0, #-1
 1248 0062 9847     		blx	r3
 1249              	.LVL169:
 1250 0064 03E0     		b	.L64
 1251              	.LVL170:
 1252              	.L68:
 1253              	.LBB29:
 1254              	.LBB28:
 336:dm/dm42_menu.cc ****       return;
 1255              		.loc 1 336 0
 1256 0066 B047     		blx	r6
 1257              	.LVL171:
 1258 0068 30B9     		cbnz	r0, .L60
 338:dm/dm42_menu.cc ****       break; // Proceed with reset
 1259              		.loc 1 338 0
 1260 006a 0D2C     		cmp	r4, #13
 1261 006c 06D0     		beq	.L67
 1262              	.LVL172:
 1263              	.L64:
 333:dm/dm42_menu.cc ****     if ( k1 == KEY_EXIT )
 1264              		.loc 1 333 0
 1265 006e 0020     		movs	r0, #0
 1266 0070 A847     		blx	r5
 1267              	.LVL173:
 334:dm/dm42_menu.cc ****       return;
 1268              		.loc 1 334 0
 1269 0072 2128     		cmp	r0, #33
 333:dm/dm42_menu.cc ****     if ( k1 == KEY_EXIT )
 1270              		.loc 1 333 0
 1271 0074 0446     		mov	r4, r0
 1272              	.LVL174:
 334:dm/dm42_menu.cc ****       return;
 1273              		.loc 1 334 0
 1274 0076 F6D1     		bne	.L68
 1275              	.LVL175:
 1276              	.L60:
 1277 0078 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
ARM GAS  /tmp/ccT5mNbt.s 			page 34


 1278              	.LVL176:
 1279              	.L67:
 1280              	.LBE28:
 1281              	.LBE29:
 343:dm/dm42_menu.cc **** 
 1282              		.loc 1 343 0
 1283 007c 134B     		ldr	r3, .L69+60
 1284 007e 0D48     		ldr	r0, .L69+36
 1285 0080 9847     		blx	r3
 1286              	.LVL177:
 346:dm/dm42_menu.cc ****   sys_reset();
 1287              		.loc 1 346 0
 1288 0082 134B     		ldr	r3, .L69+64
 1289 0084 1348     		ldr	r0, .L69+68
 1290 0086 9847     		blx	r3
 1291              	.LVL178:
 347:dm/dm42_menu.cc **** }
 1292              		.loc 1 347 0
 1293 0088 134B     		ldr	r3, .L69+72
 348:dm/dm42_menu.cc **** 
 1294              		.loc 1 348 0
 1295 008a BDE8F041 		pop	{r4, r5, r6, r7, r8, lr}
 1296              		.cfi_restore 14
 1297              		.cfi_restore 8
 1298              		.cfi_restore 7
 1299              		.cfi_restore 6
 1300              		.cfi_restore 5
 1301              		.cfi_restore 4
 1302              		.cfi_def_cfa_offset 0
 1303              	.LVL179:
 347:dm/dm42_menu.cc **** }
 1304              		.loc 1 347 0
 1305 008e 1847     		bx	r3	@ indirect register sibling call
 1306              	.LVL180:
 1307              	.L70:
 1308              		.align	2
 1309              	.L69:
 1310 0090 00200010 		.word	268443648
 1311 0094 65020008 		.word	134218341
 1312 0098 7D020008 		.word	134218365
 1313 009c 9D030008 		.word	134218653
 1314 00a0 C1030008 		.word	134218689
 1315 00a4 2D020008 		.word	134218285
 1316 00a8 00000000 		.word	.LC44
 1317 00ac 14000000 		.word	.LC45
 1318 00b0 38000000 		.word	.LC46
 1319 00b4 00000000 		.word	.LC1
 1320 00b8 18000000 		.word	.LC8
 1321 00bc 3C000000 		.word	.LC9
 1322 00c0 4C000000 		.word	.LC10
 1323 00c4 31020008 		.word	134218289
 1324 00c8 A5030008 		.word	134218661
 1325 00cc 1D030008 		.word	134218525
 1326 00d0 11030008 		.word	134218513
 1327 00d4 6273CEEA 		.word	-355568798
 1328 00d8 21040008 		.word	134218785
 1329              		.cfi_endproc
ARM GAS  /tmp/ccT5mNbt.s 			page 35


 1330              	.LFE9:
 1332              		.section	.text.select_programs,"ax",%progbits
 1333              		.align	1
 1334              		.p2align 2,,3
 1335              		.global	select_programs
 1336              		.syntax unified
 1337              		.thumb
 1338              		.thumb_func
 1339              		.fpu fpv4-sp-d16
 1341              	select_programs:
 1342              	.LFB12:
 401:dm/dm42_menu.cc **** 
 402:dm/dm42_menu.cc **** 
 403:dm/dm42_menu.cc **** /*
 404:dm/dm42_menu.cc **** int show_textfile(const char * fpath, const char * fname){
 405:dm/dm42_menu.cc ****     lcd_puts(t24, "Loading file:");
 406:dm/dm42_menu.cc ****     lcd_puts(t24, fname);
 407:dm/dm42_menu.cc ****     FIL* to_read;
 408:dm/dm42_menu.cc ****     f_open(to_read, fpath, FA_READ);
 409:dm/dm42_menu.cc ****     if ( to_read == nullptr){
 410:dm/dm42_menu.cc ****         return 1;
 411:dm/dm42_menu.cc ****     }
 412:dm/dm42_menu.cc **** 
 413:dm/dm42_menu.cc ****     // Exit
 414:dm/dm42_menu.cc ****     return  0;
 415:dm/dm42_menu.cc **** }
 416:dm/dm42_menu.cc **** */
 417:dm/dm42_menu.cc **** 
 418:dm/dm42_menu.cc **** 
 419:dm/dm42_menu.cc **** 
 420:dm/dm42_menu.cc **** STATIC_ASSERT( (AUX_BUF_PGM_LIST_SIZE+AUX_BUF_SELS_SIZE) <= AUX_BUF_SIZE, "(AUX_BUF_PGM_LIST_SIZE+A
 421:dm/dm42_menu.cc **** 
 422:dm/dm42_menu.cc **** 
 423:dm/dm42_menu.cc **** int select_programs(const char * title, int * pgm_indices, int * pgm_cnt) {
 1343              		.loc 1 423 0
 1344              		.cfi_startproc
 1345              		@ args = 0, pretend = 0, frame = 80
 1346              		@ frame_needed = 0, uses_anonymous_args = 0
 1347              	.LVL181:
 1348 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1349              		.cfi_def_cfa_offset 36
 1350              		.cfi_offset 4, -36
 1351              		.cfi_offset 5, -32
 1352              		.cfi_offset 6, -28
 1353              		.cfi_offset 7, -24
 1354              		.cfi_offset 8, -20
 1355              		.cfi_offset 9, -16
 1356              		.cfi_offset 10, -12
 1357              		.cfi_offset 11, -8
 1358              		.cfi_offset 14, -4
 1359 0004 95B0     		sub	sp, sp, #84
 1360              		.cfi_def_cfa_offset 120
 424:dm/dm42_menu.cc ****   char bb[32];
 425:dm/dm42_menu.cc ****   int k1;
 426:dm/dm42_menu.cc ****   int upd = 1; // Repaint at first pass
 427:dm/dm42_menu.cc **** 
 428:dm/dm42_menu.cc ****   // Disp state
ARM GAS  /tmp/ccT5mNbt.s 			page 36


 429:dm/dm42_menu.cc ****   int first_ix = 0, cur_ix = 0, a, ix;
 430:dm/dm42_menu.cc ****   int pix;  // Program index in display loop
 431:dm/dm42_menu.cc ****   char * p; // Program name in display loop
 432:dm/dm42_menu.cc ****   int sel_ln = 0;
 433:dm/dm42_menu.cc **** 
 434:dm/dm42_menu.cc ****   // We need rather big buffer ... use aux memory buffer for that
 435:dm/dm42_menu.cc ****   const uint pgm_list_size = AUX_BUF_PGM_LIST_SIZE;
 436:dm/dm42_menu.cc ****   const uint sels_size = AUX_BUF_SELS_SIZE;
 437:dm/dm42_menu.cc ****   const uint max_disp_pgm_char = 24;
 438:dm/dm42_menu.cc ****   const int pgm_lines = 7;
 439:dm/dm42_menu.cc ****   
 440:dm/dm42_menu.cc ****   char * buf = aux_buf_ptr();
 1361              		.loc 1 440 0
 1362 0006 B94B     		ldr	r3, .L129
 423:dm/dm42_menu.cc ****   char bb[32];
 1363              		.loc 1 423 0
 1364 0008 0392     		str	r2, [sp, #12]
 1365 000a 0591     		str	r1, [sp, #20]
 1366 000c 9146     		mov	r9, r2
 1367 000e 0746     		mov	r7, r0
 1368              		.loc 1 440 0
 1369 0010 9847     		blx	r3
 1370              	.LVL182:
 441:dm/dm42_menu.cc ****   char * sels = buf + pgm_list_size;
 442:dm/dm42_menu.cc **** 
 443:dm/dm42_menu.cc ****   // Read program list
 444:dm/dm42_menu.cc ****   int pgm_count = core_list_programs(buf,pgm_list_size);
 1371              		.loc 1 444 0
 1372 0012 4FF4C061 		mov	r1, #1536
 440:dm/dm42_menu.cc ****   char * sels = buf + pgm_list_size;
 1373              		.loc 1 440 0
 1374 0016 0346     		mov	r3, r0
 441:dm/dm42_menu.cc ****   char * sels = buf + pgm_list_size;
 1375              		.loc 1 441 0
 1376 0018 0B44     		add	r3, r3, r1
 1377 001a 1C46     		mov	r4, r3
 1378 001c 0493     		str	r3, [sp, #16]
 440:dm/dm42_menu.cc ****   char * sels = buf + pgm_list_size;
 1379              		.loc 1 440 0
 1380 001e 0190     		str	r0, [sp, #4]
 1381              	.LVL183:
 1382              		.loc 1 444 0
 1383 0020 FFF7FEFF 		bl	_Z18core_list_programsPci
 1384              	.LVL184:
 445:dm/dm42_menu.cc **** 
 446:dm/dm42_menu.cc ****   // Clear selections
 447:dm/dm42_menu.cc ****   *pgm_cnt = 0;
 1385              		.loc 1 447 0
 1386 0024 0025     		movs	r5, #0
 448:dm/dm42_menu.cc ****   bzero(sels, sels_size);
 449:dm/dm42_menu.cc **** 
 450:dm/dm42_menu.cc ****   // Display title
 451:dm/dm42_menu.cc ****   lcd_writeClr(t24);
 1387              		.loc 1 451 0
 1388 0026 B24E     		ldr	r6, .L129+4
 447:dm/dm42_menu.cc ****   bzero(sels, sels_size);
 1389              		.loc 1 447 0
ARM GAS  /tmp/ccT5mNbt.s 			page 37


 1390 0028 C9F80050 		str	r5, [r9]
 448:dm/dm42_menu.cc ****   bzero(sels, sels_size);
 1391              		.loc 1 448 0
 1392 002c 4FF40072 		mov	r2, #512
 1393 0030 2946     		mov	r1, r5
 444:dm/dm42_menu.cc **** 
 1394              		.loc 1 444 0
 1395 0032 8046     		mov	r8, r0
 1396              	.LVL185:
 448:dm/dm42_menu.cc ****   bzero(sels, sels_size);
 1397              		.loc 1 448 0
 1398 0034 2046     		mov	r0, r4
 1399              	.LVL186:
 1400 0036 FFF7FEFF 		bl	memset
 1401              	.LVL187:
 1402              		.loc 1 451 0
 1403 003a 706B     		ldr	r0, [r6, #52]
 1404 003c AD4B     		ldr	r3, .L129+8
 1405 003e 9847     		blx	r3
 1406              	.LVL188:
 452:dm/dm42_menu.cc ****   lcd_clear_buf();
 1407              		.loc 1 452 0
 1408 0040 AD4B     		ldr	r3, .L129+12
 1409 0042 9847     		blx	r3
 1410              	.LVL189:
 453:dm/dm42_menu.cc ****   lcd_putsR(t24,title);
 1411              		.loc 1 453 0
 1412 0044 706B     		ldr	r0, [r6, #52]
 1413 0046 AD4B     		ldr	r3, .L129+16
 1414 0048 0124     		movs	r4, #1
 1415              	.LVL190:
 1416 004a 3946     		mov	r1, r7
 1417 004c 4474     		strb	r4, [r0, #17]
 1418 004e 9847     		blx	r3
 1419              	.LVL191:
 1420 0050 736B     		ldr	r3, [r6, #52]
 432:dm/dm42_menu.cc **** 
 1421              		.loc 1 432 0
 1422 0052 0295     		str	r5, [sp, #8]
 454:dm/dm42_menu.cc ****   t24->ln_offs = 8;
 1423              		.loc 1 454 0
 1424 0054 0822     		movs	r2, #8
 453:dm/dm42_menu.cc ****   lcd_putsR(t24,title);
 1425              		.loc 1 453 0
 1426 0056 5D74     		strb	r5, [r3, #17]
 432:dm/dm42_menu.cc **** 
 1427              		.loc 1 432 0
 1428 0058 AA46     		mov	r10, r5
 1429              		.loc 1 454 0
 1430 005a 1A81     		strh	r2, [r3, #8]	@ movhi
 429:dm/dm42_menu.cc ****   int pix;  // Program index in display loop
 1431              		.loc 1 429 0
 1432 005c A946     		mov	r9, r5
 1433              	.LVL192:
 1434              	.L72:
 1435              	.LBB30:
 1436              	.LBB31:
ARM GAS  /tmp/ccT5mNbt.s 			page 38


 455:dm/dm42_menu.cc **** 
 456:dm/dm42_menu.cc ****   for(;;) {
 457:dm/dm42_menu.cc ****     k1 = runner_get_key(NULL);
 1437              		.loc 1 457 0
 1438 005e 0020     		movs	r0, #0
 1439 0060 A74B     		ldr	r3, .L129+20
 1440 0062 9847     		blx	r3
 1441              	.LVL193:
 458:dm/dm42_menu.cc ****     if ( k1 == KEY_EXIT ) break;
 1442              		.loc 1 458 0
 1443 0064 2128     		cmp	r0, #33
 457:dm/dm42_menu.cc ****     if ( k1 == KEY_EXIT ) break;
 1444              		.loc 1 457 0
 1445 0066 0546     		mov	r5, r0
 1446              	.LVL194:
 1447              		.loc 1 458 0
 1448 0068 00F05E81 		beq	.L73
 459:dm/dm42_menu.cc ****     if ( is_menu_auto_off() ) break;
 1449              		.loc 1 459 0
 1450 006c A54B     		ldr	r3, .L129+24
 1451 006e 9847     		blx	r3
 1452              	.LVL195:
 1453 0070 0028     		cmp	r0, #0
 1454 0072 40F05981 		bne	.L73
 460:dm/dm42_menu.cc **** 
 461:dm/dm42_menu.cc ****     switch (k1) {
 1455              		.loc 1 461 0
 1456 0076 0D3D     		subs	r5, r5, #13
 1457              	.LVL196:
 1458 0078 1E2D     		cmp	r5, #30
 1459 007a 00F20681 		bhi	.L74
 1460 007e DFE815F0 		tbh	[pc, r5, lsl #1]
 1461              	.L76:
 1462 0082 D200     		.2byte	(.L75-.L76)/2
 1463 0084 0401     		.2byte	(.L74-.L76)/2
 1464 0086 0401     		.2byte	(.L74-.L76)/2
 1465 0088 0401     		.2byte	(.L74-.L76)/2
 1466 008a 0401     		.2byte	(.L74-.L76)/2
 1467 008c CC00     		.2byte	(.L77-.L76)/2
 1468 008e 0401     		.2byte	(.L74-.L76)/2
 1469 0090 0401     		.2byte	(.L74-.L76)/2
 1470 0092 0401     		.2byte	(.L74-.L76)/2
 1471 0094 C600     		.2byte	(.L78-.L76)/2
 1472 0096 FA00     		.2byte	(.L79-.L76)/2
 1473 0098 0401     		.2byte	(.L74-.L76)/2
 1474 009a 0401     		.2byte	(.L74-.L76)/2
 1475 009c 0401     		.2byte	(.L74-.L76)/2
 1476 009e E700     		.2byte	(.L80-.L76)/2
 1477 00a0 0401     		.2byte	(.L74-.L76)/2
 1478 00a2 0401     		.2byte	(.L74-.L76)/2
 1479 00a4 0401     		.2byte	(.L74-.L76)/2
 1480 00a6 0401     		.2byte	(.L74-.L76)/2
 1481 00a8 0401     		.2byte	(.L74-.L76)/2
 1482 00aa 0401     		.2byte	(.L74-.L76)/2
 1483 00ac 0401     		.2byte	(.L74-.L76)/2
 1484 00ae 0401     		.2byte	(.L74-.L76)/2
 1485 00b0 0401     		.2byte	(.L74-.L76)/2
ARM GAS  /tmp/ccT5mNbt.s 			page 39


 1486 00b2 0401     		.2byte	(.L74-.L76)/2
 1487 00b4 B100     		.2byte	(.L81-.L76)/2
 1488 00b6 0401     		.2byte	(.L74-.L76)/2
 1489 00b8 1F00     		.2byte	(.L82-.L76)/2
 1490 00ba 9B00     		.2byte	(.L83-.L76)/2
 1491 00bc 0401     		.2byte	(.L74-.L76)/2
 1492 00be B100     		.2byte	(.L81-.L76)/2
 1493              		.p2align 1
 1494              	.L82:
 462:dm/dm42_menu.cc ****       case KEY_F1: // A - Sel
 463:dm/dm42_menu.cc ****       case KEY_F6: // F - Sel
 464:dm/dm42_menu.cc ****         if ( *pgm_cnt == MAX_PGM_SEL && !sels[cur_ix] ) {
 465:dm/dm42_menu.cc ****           // Too much selections
 466:dm/dm42_menu.cc ****           lcd_putsRAt(t24,sel_ln,"Max. nr. of selections is " STR(MAX_PGM_SEL));
 467:dm/dm42_menu.cc ****           lcd_refresh();
 468:dm/dm42_menu.cc ****           sys_delay(1000);
 469:dm/dm42_menu.cc ****         } else {
 470:dm/dm42_menu.cc ****           sels[cur_ix] = !sels[cur_ix];
 471:dm/dm42_menu.cc ****           if(sels[cur_ix]) pgm_cnt[0]++; else pgm_cnt[0]--;
 472:dm/dm42_menu.cc ****         }
 473:dm/dm42_menu.cc ****         upd=1;
 474:dm/dm42_menu.cc ****         break;
 475:dm/dm42_menu.cc ****       case KEY_F2: // B - 
 476:dm/dm42_menu.cc ****         break;
 477:dm/dm42_menu.cc ****       case KEY_F3: // C - C-All
 478:dm/dm42_menu.cc ****         // Clear selections
 479:dm/dm42_menu.cc ****         *pgm_cnt = 0;
 1495              		.loc 1 479 0
 1496 00c0 039B     		ldr	r3, [sp, #12]
 480:dm/dm42_menu.cc ****         bzero(sels,sels_size);
 1497              		.loc 1 480 0
 1498 00c2 0498     		ldr	r0, [sp, #16]
 479:dm/dm42_menu.cc ****         bzero(sels,sels_size);
 1499              		.loc 1 479 0
 1500 00c4 0021     		movs	r1, #0
 1501 00c6 1960     		str	r1, [r3]
 1502              		.loc 1 480 0
 1503 00c8 4FF40072 		mov	r2, #512
 1504 00cc FFF7FEFF 		bl	memset
 1505              	.LVL197:
 1506              	.L88:
 1507 00d0 CA45     		cmp	r10, r9
 1508 00d2 5346     		mov	r3, r10
 1509 00d4 A8BF     		it	ge
 1510 00d6 4B46     		movge	r3, r9
 1511              	.LVL198:
 1512              	.LBB32:
 1513              	.LBB33:
 481:dm/dm42_menu.cc ****         upd=1;
 482:dm/dm42_menu.cc ****         break;
 483:dm/dm42_menu.cc ****       case KEY_F4: // D - S-All
 484:dm/dm42_menu.cc ****         if ( pgm_count > MAX_PGM_SEL ) {
 485:dm/dm42_menu.cc ****           lcd_putsRAt(t24,sel_ln,"Max. nr. of selections is " STR(MAX_PGM_SEL));
 486:dm/dm42_menu.cc ****           lcd_refresh();
 487:dm/dm42_menu.cc ****           sys_delay(1000);
 488:dm/dm42_menu.cc ****         } else {
 489:dm/dm42_menu.cc ****           *pgm_cnt = pgm_count;
ARM GAS  /tmp/ccT5mNbt.s 			page 40


 490:dm/dm42_menu.cc ****           for(a=0; a<pgm_count; a++)
 491:dm/dm42_menu.cc ****             sels[a] = 1;
 492:dm/dm42_menu.cc ****         }
 493:dm/dm42_menu.cc ****         upd=1;
 494:dm/dm42_menu.cc ****         break;
 495:dm/dm42_menu.cc ****       case KEY_F5: // E - 
 496:dm/dm42_menu.cc ****         break;
 497:dm/dm42_menu.cc **** 
 498:dm/dm42_menu.cc ****       case KEY_UP:
 499:dm/dm42_menu.cc ****         if (cur_ix > 0) {
 500:dm/dm42_menu.cc ****           cur_ix--;
 501:dm/dm42_menu.cc ****         } else {
 502:dm/dm42_menu.cc ****           cur_ix = pgm_count-1;
 503:dm/dm42_menu.cc ****         }
 504:dm/dm42_menu.cc ****         upd=1;
 505:dm/dm42_menu.cc ****         break;
 506:dm/dm42_menu.cc **** 
 507:dm/dm42_menu.cc ****       case KEY_DOWN:
 508:dm/dm42_menu.cc ****         if (cur_ix+1 < pgm_count) {
 509:dm/dm42_menu.cc ****           cur_ix++;
 510:dm/dm42_menu.cc ****         } else {
 511:dm/dm42_menu.cc ****           cur_ix = 0;
 512:dm/dm42_menu.cc ****         }
 513:dm/dm42_menu.cc ****         upd=1;
 514:dm/dm42_menu.cc ****         break;
 515:dm/dm42_menu.cc **** 
 516:dm/dm42_menu.cc ****       case KEY_PAGEUP:
 517:dm/dm42_menu.cc ****         if (cur_ix == 0) {
 518:dm/dm42_menu.cc ****           cur_ix = pgm_count-1;
 519:dm/dm42_menu.cc ****         } else {
 520:dm/dm42_menu.cc ****           cur_ix--;
 521:dm/dm42_menu.cc ****           cur_ix -= cur_ix % pgm_lines;
 522:dm/dm42_menu.cc ****         }
 523:dm/dm42_menu.cc ****         upd=1;
 524:dm/dm42_menu.cc ****         break;
 525:dm/dm42_menu.cc **** 
 526:dm/dm42_menu.cc ****       case KEY_PAGEDOWN:
 527:dm/dm42_menu.cc ****         if ( cur_ix == pgm_count-1) {
 528:dm/dm42_menu.cc ****           cur_ix = 0;
 529:dm/dm42_menu.cc ****         } else {
 530:dm/dm42_menu.cc ****           cur_ix += pgm_lines;
 531:dm/dm42_menu.cc ****           cur_ix -= cur_ix % pgm_lines;
 532:dm/dm42_menu.cc ****           if ( cur_ix >= pgm_count )
 533:dm/dm42_menu.cc ****             cur_ix = pgm_count-1;
 534:dm/dm42_menu.cc ****           else
 535:dm/dm42_menu.cc ****             first_ix = cur_ix;
 536:dm/dm42_menu.cc ****         }
 537:dm/dm42_menu.cc ****         upd=1;
 538:dm/dm42_menu.cc ****         break;
 539:dm/dm42_menu.cc **** 
 540:dm/dm42_menu.cc ****       case KEY_ENTER:
 541:dm/dm42_menu.cc ****         // Fill output data
 542:dm/dm42_menu.cc ****         ix=0;
 543:dm/dm42_menu.cc ****         for(a=0; a<pgm_count; a++)
 544:dm/dm42_menu.cc ****           if( sels[a] )
 545:dm/dm42_menu.cc ****             pgm_indices[ix++]=a;
 546:dm/dm42_menu.cc ****         return 0;
ARM GAS  /tmp/ccT5mNbt.s 			page 41


 547:dm/dm42_menu.cc ****     }
 548:dm/dm42_menu.cc **** 
 549:dm/dm42_menu.cc **** 
 550:dm/dm42_menu.cc ****     if (upd) {
 551:dm/dm42_menu.cc ****       upd = 0;
 552:dm/dm42_menu.cc **** 
 553:dm/dm42_menu.cc ****       // Update first_ix
 554:dm/dm42_menu.cc ****       if (cur_ix < first_ix) first_ix = cur_ix;
 555:dm/dm42_menu.cc ****       if (cur_ix - first_ix > (pgm_lines-1)) first_ix = cur_ix - (pgm_lines-1);
 1514              		.loc 1 555 0
 1515 00d8 A9EB0302 		sub	r2, r9, r3
 1516 00dc 062A     		cmp	r2, #6
 1517 00de C8BF     		it	gt
 1518 00e0 A9F10603 		subgt	r3, r9, #6
 1519              	.LVL199:
 1520              	.L95:
 556:dm/dm42_menu.cc ****       if (first_ix + pgm_lines >= pgm_count ) first_ix = pgm_count - pgm_lines;
 1521              		.loc 1 556 0
 1522 00e4 DA1D     		adds	r2, r3, #7
 1523 00e6 9045     		cmp	r8, r2
 1524 00e8 D8BF     		it	le
 1525 00ea A8F10703 		suble	r3, r8, #7
 1526              	.LVL200:
 1527 00ee 23EAE37A 		bic	r10, r3, r3, asr #31
 1528              	.LVL201:
 557:dm/dm42_menu.cc ****       if (first_ix < 0) first_ix = 0;
 558:dm/dm42_menu.cc **** 
 559:dm/dm42_menu.cc ****       p = buf; pix = 0; sel_ln = 0;
 560:dm/dm42_menu.cc ****       for(a=0; a<pgm_lines && pix<pgm_count; pix++,p+=strlen(p)+1) { // Over lines
 1529              		.loc 1 560 0
 1530 00f2 B8F1000F 		cmp	r8, #0
 559:dm/dm42_menu.cc ****       for(a=0; a<pgm_lines && pix<pgm_count; pix++,p+=strlen(p)+1) { // Over lines
 1531              		.loc 1 559 0
 1532 00f6 4FF00003 		mov	r3, #0
 1533 00fa 0293     		str	r3, [sp, #8]
 1534              		.loc 1 560 0
 1535 00fc 40F3CD80 		ble	.L101
 1536 0100 1C46     		mov	r4, r3
 1537 0102 1E46     		mov	r6, r3
 1538 0104 019D     		ldr	r5, [sp, #4]
 1539 0106 0DE0     		b	.L103
 1540              	.LVL202:
 1541              	.L104:
 1542              		.loc 1 560 0 is_stmt 0 discriminator 3
 1543 0108 2846     		mov	r0, r5
 1544 010a FFF7FEFF 		bl	strlen
 1545              	.LVL203:
 1546 010e 062E     		cmp	r6, #6
 1547 0110 00F10100 		add	r0, r0, #1
 1548 0114 04F10104 		add	r4, r4, #1
 1549              	.LVL204:
 1550 0118 0544     		add	r5, r5, r0
 1551              	.LVL205:
 1552 011a 00F3BE80 		bgt	.L101
 1553              		.loc 1 560 0 discriminator 2
 1554 011e A045     		cmp	r8, r4
 1555 0120 00F0BB80 		beq	.L101
ARM GAS  /tmp/ccT5mNbt.s 			page 42


 1556              	.LVL206:
 1557              	.L103:
 561:dm/dm42_menu.cc ****         if ( pix < first_ix ) continue;
 1558              		.loc 1 561 0 is_stmt 1
 1559 0124 A245     		cmp	r10, r4
 1560 0126 EFDC     		bgt	.L104
 562:dm/dm42_menu.cc ****         a++;
 563:dm/dm42_menu.cc **** 
 564:dm/dm42_menu.cc ****         // Selection mark
 565:dm/dm42_menu.cc ****         strcpy(bb, sel_str(sels[pix]));
 1561              		.loc 1 565 0
 1562 0128 019B     		ldr	r3, [sp, #4]
 1563 012a 2344     		add	r3, r3, r4
 1564 012c 0CAF     		add	r7, sp, #48
 1565 012e 93F80006 		ldrb	r0, [r3, #1536]	@ zero_extendqisi2
 1566 0132 754B     		ldr	r3, .L129+28
 1567 0134 9847     		blx	r3
 1568              	.LVL207:
 1569 0136 0146     		mov	r1, r0
 1570 0138 3846     		mov	r0, r7
 1571 013a FFF7FEFF 		bl	stpcpy
 1572              	.LVL208:
 566:dm/dm42_menu.cc ****         //sprintf(bb+strlen(bb), "%02i", pix); // DEBUG :)
 567:dm/dm42_menu.cc ****         strcat(bb, " ");
 1573              		.loc 1 567 0
 1574 013e 734B     		ldr	r3, .L129+32
 1575 0140 1A88     		ldrh	r2, [r3]	@ unaligned
 1576 0142 0280     		strh	r2, [r0]	@ unaligned
 565:dm/dm42_menu.cc ****         //sprintf(bb+strlen(bb), "%02i", pix); // DEBUG :)
 1577              		.loc 1 565 0
 1578 0144 8346     		mov	fp, r0
 568:dm/dm42_menu.cc ****         // Program name (truncated to max_disp_pgm_char)
 569:dm/dm42_menu.cc ****         if ( strlen(p) > max_disp_pgm_char ) {
 1579              		.loc 1 569 0
 1580 0146 2846     		mov	r0, r5
 1581 0148 FFF7FEFF 		bl	strlen
 1582              	.LVL209:
 565:dm/dm42_menu.cc ****         //sprintf(bb+strlen(bb), "%02i", pix); // DEBUG :)
 1583              		.loc 1 565 0
 1584 014c ABEB070B 		sub	fp, fp, r7
 1585              	.LVL210:
 570:dm/dm42_menu.cc ****           ix = strlen(bb);
 1586              		.loc 1 570 0
 1587 0150 0BF1010C 		add	ip, fp, #1
 1588              	.LVL211:
 569:dm/dm42_menu.cc ****           ix = strlen(bb);
 1589              		.loc 1 569 0
 1590 0154 0246     		mov	r2, r0
 571:dm/dm42_menu.cc ****           memcpy(bb+ix,p,max_disp_pgm_char);
 1591              		.loc 1 571 0
 1592 0156 07EB0C0E 		add	lr, r7, ip
 569:dm/dm42_menu.cc ****           ix = strlen(bb);
 1593              		.loc 1 569 0
 1594 015a 1828     		cmp	r0, #24
 572:dm/dm42_menu.cc ****           strcpy(bb+ix+max_disp_pgm_char, "...");
 1595              		.loc 1 572 0
 1596 015c 0BF11903 		add	r3, fp, #25
ARM GAS  /tmp/ccT5mNbt.s 			page 43


 562:dm/dm42_menu.cc **** 
 1597              		.loc 1 562 0
 1598 0160 06F10106 		add	r6, r6, #1
 1599              	.LVL212:
 573:dm/dm42_menu.cc ****         } else {
 574:dm/dm42_menu.cc ****           strcat(bb,p);
 1600              		.loc 1 574 0
 1601 0164 02F10102 		add	r2, r2, #1
 1602 0168 2946     		mov	r1, r5
 1603 016a 7046     		mov	r0, lr
 569:dm/dm42_menu.cc ****           ix = strlen(bb);
 1604              		.loc 1 569 0
 1605 016c 40F29280 		bls	.L105
 571:dm/dm42_menu.cc ****           strcpy(bb+ix+max_disp_pgm_char, "...");
 1606              		.loc 1 571 0
 1607 0170 2A68     		ldr	r2, [r5]	@ unaligned
 1608 0172 6968     		ldr	r1, [r5, #4]	@ unaligned
 1609 0174 E868     		ldr	r0, [r5, #12]	@ unaligned
 1610 0176 D5F808B0 		ldr	fp, [r5, #8]	@ unaligned
 1611 017a 47F80C20 		str	r2, [r7, ip]	@ unaligned
 572:dm/dm42_menu.cc ****         } else {
 1612              		.loc 1 572 0
 1613 017e 644A     		ldr	r2, .L129+36
 571:dm/dm42_menu.cc ****           strcpy(bb+ix+max_disp_pgm_char, "...");
 1614              		.loc 1 571 0
 1615 0180 CEF80C00 		str	r0, [lr, #12]	@ unaligned
 1616 0184 CEF80410 		str	r1, [lr, #4]	@ unaligned
 1617 0188 CEF808B0 		str	fp, [lr, #8]	@ unaligned
 1618 018c 6969     		ldr	r1, [r5, #20]	@ unaligned
 572:dm/dm42_menu.cc ****         } else {
 1619              		.loc 1 572 0
 1620 018e 1068     		ldr	r0, [r2]
 571:dm/dm42_menu.cc ****           strcpy(bb+ix+max_disp_pgm_char, "...");
 1621              		.loc 1 571 0
 1622 0190 2A69     		ldr	r2, [r5, #16]	@ unaligned
 1623 0192 CEF81020 		str	r2, [lr, #16]	@ unaligned
 1624 0196 CEF81410 		str	r1, [lr, #20]	@ unaligned
 572:dm/dm42_menu.cc ****         } else {
 1625              		.loc 1 572 0
 1626 019a F850     		str	r0, [r7, r3]	@ unaligned
 1627              	.LVL213:
 1628              	.L106:
 575:dm/dm42_menu.cc ****         }
 576:dm/dm42_menu.cc **** 
 577:dm/dm42_menu.cc ****         if ( pix == cur_ix ) {
 578:dm/dm42_menu.cc ****           lcd_putsRAt(t24,a,bb);
 1629              		.loc 1 578 0
 1630 019c 544A     		ldr	r2, .L129+4
 579:dm/dm42_menu.cc ****           sel_ln = a;
 580:dm/dm42_menu.cc ****         } else {
 581:dm/dm42_menu.cc ****           lcd_putsAt(t24,a,bb);
 1631              		.loc 1 581 0
 1632 019e 5D4B     		ldr	r3, .L129+40
 578:dm/dm42_menu.cc ****           sel_ln = a;
 1633              		.loc 1 578 0
 1634 01a0 506B     		ldr	r0, [r2, #52]
 577:dm/dm42_menu.cc ****           lcd_putsRAt(t24,a,bb);
ARM GAS  /tmp/ccT5mNbt.s 			page 44


 1635              		.loc 1 577 0
 1636 01a2 A145     		cmp	r9, r4
 1637              		.loc 1 581 0
 1638 01a4 3146     		mov	r1, r6
 577:dm/dm42_menu.cc ****           lcd_putsRAt(t24,a,bb);
 1639              		.loc 1 577 0
 1640 01a6 00F08780 		beq	.L125
 1641              	.LVL214:
 1642              		.loc 1 581 0
 1643 01aa 9847     		blx	r3
 1644              	.LVL215:
 1645 01ac 504A     		ldr	r2, .L129+4
 1646 01ae 534B     		ldr	r3, .L129+16
 1647 01b0 506B     		ldr	r0, [r2, #52]
 1648 01b2 3946     		mov	r1, r7
 1649 01b4 9847     		blx	r3
 1650              	.LVL216:
 1651 01b6 A7E7     		b	.L104
 1652              	.LVL217:
 1653              	.L83:
 1654              	.LBE33:
 1655              	.LBE32:
 484:dm/dm42_menu.cc ****           lcd_putsRAt(t24,sel_ln,"Max. nr. of selections is " STR(MAX_PGM_SEL));
 1656              		.loc 1 484 0
 1657 01b8 B8F1400F 		cmp	r8, #64
 1658 01bc 00F3C780 		bgt	.L126
 489:dm/dm42_menu.cc ****           for(a=0; a<pgm_count; a++)
 1659              		.loc 1 489 0
 1660 01c0 039B     		ldr	r3, [sp, #12]
 490:dm/dm42_menu.cc ****             sels[a] = 1;
 1661              		.loc 1 490 0
 1662 01c2 B8F1000F 		cmp	r8, #0
 489:dm/dm42_menu.cc ****           for(a=0; a<pgm_count; a++)
 1663              		.loc 1 489 0
 1664 01c6 C3F80080 		str	r8, [r3]
 1665              	.LVL218:
 490:dm/dm42_menu.cc ****             sels[a] = 1;
 1666              		.loc 1 490 0
 1667 01ca 81DD     		ble	.L88
 1668 01cc 0199     		ldr	r1, [sp, #4]
 1669 01ce 08F2FF52 		addw	r2, r8, #1535
 1670 01d2 0A44     		add	r2, r2, r1
 1671 01d4 01F2FF53 		addw	r3, r1, #1535
 491:dm/dm42_menu.cc ****         }
 1672              		.loc 1 491 0 discriminator 2
 1673 01d8 0121     		movs	r1, #1
 1674              	.LVL219:
 1675              	.L91:
 1676 01da 03F8011F 		strb	r1, [r3, #1]!
 490:dm/dm42_menu.cc ****             sels[a] = 1;
 1677              		.loc 1 490 0 discriminator 2
 1678 01de 9342     		cmp	r3, r2
 1679 01e0 FBD1     		bne	.L91
 1680 01e2 75E7     		b	.L88
 1681              	.L81:
 464:dm/dm42_menu.cc ****           // Too much selections
 1682              		.loc 1 464 0
ARM GAS  /tmp/ccT5mNbt.s 			page 45


 1683 01e4 039B     		ldr	r3, [sp, #12]
 1684 01e6 1B68     		ldr	r3, [r3]
 1685 01e8 402B     		cmp	r3, #64
 1686 01ea 00F0A180 		beq	.L127
 470:dm/dm42_menu.cc ****           if(sels[cur_ix]) pgm_cnt[0]++; else pgm_cnt[0]--;
 1687              		.loc 1 470 0
 1688 01ee 049A     		ldr	r2, [sp, #16]
 1689 01f0 12F80930 		ldrb	r3, [r2, r9]	@ zero_extendqisi2
 1690 01f4 002B     		cmp	r3, #0
 1691 01f6 0CBF     		ite	eq
 1692 01f8 0123     		moveq	r3, #1
 1693 01fa 0023     		movne	r3, #0
 1694 01fc 02F80930 		strb	r3, [r2, r9]
 471:dm/dm42_menu.cc ****         }
 1695              		.loc 1 471 0
 1696 0200 40F09E80 		bne	.L89
 471:dm/dm42_menu.cc ****         }
 1697              		.loc 1 471 0 is_stmt 0 discriminator 1
 1698 0204 039A     		ldr	r2, [sp, #12]
 1699 0206 1368     		ldr	r3, [r2]
 1700 0208 0133     		adds	r3, r3, #1
 1701 020a 1360     		str	r3, [r2]
 1702              	.LVL220:
 1703 020c 60E7     		b	.L88
 1704              	.LVL221:
 1705              	.L78:
 517:dm/dm42_menu.cc ****           cur_ix = pgm_count-1;
 1706              		.loc 1 517 0 is_stmt 1
 1707 020e B9F1000F 		cmp	r9, #0
 1708 0212 5FD1     		bne	.L94
 1709              	.L124:
 518:dm/dm42_menu.cc ****         } else {
 1710              		.loc 1 518 0
 1711 0214 08F1FF39 		add	r9, r8, #-1
 1712              	.LVL222:
 1713 0218 5AE7     		b	.L88
 1714              	.LVL223:
 1715              	.L77:
 499:dm/dm42_menu.cc ****           cur_ix--;
 1716              		.loc 1 499 0
 1717 021a B9F1000F 		cmp	r9, #0
 1718 021e F9DD     		ble	.L124
 500:dm/dm42_menu.cc ****         } else {
 1719              		.loc 1 500 0
 1720 0220 09F1FF39 		add	r9, r9, #-1
 1721              	.LVL224:
 1722 0224 54E7     		b	.L88
 1723              	.LVL225:
 1724              	.L75:
 543:dm/dm42_menu.cc ****           if( sels[a] )
 1725              		.loc 1 543 0 discriminator 1
 1726 0226 B8F1000F 		cmp	r8, #0
 1727 022a 0EDD     		ble	.L71
 1728 022c 019B     		ldr	r3, [sp, #4]
 543:dm/dm42_menu.cc ****           if( sels[a] )
 1729              		.loc 1 543 0 is_stmt 0
 1730 022e 059D     		ldr	r5, [sp, #20]
ARM GAS  /tmp/ccT5mNbt.s 			page 46


 1731              	.LVL226:
 1732 0230 0024     		movs	r4, #0
 1733              	.LVL227:
 1734 0232 03F2FF53 		addw	r3, r3, #1535
 1735 0236 2246     		mov	r2, r4
 1736              	.LVL228:
 1737              	.L98:
 544:dm/dm42_menu.cc ****             pgm_indices[ix++]=a;
 1738              		.loc 1 544 0 is_stmt 1
 1739 0238 13F8011F 		ldrb	r1, [r3, #1]!	@ zero_extendqisi2
 1740 023c 11B1     		cbz	r1, .L96
 545:dm/dm42_menu.cc ****         return 0;
 1741              		.loc 1 545 0
 1742 023e 45F82420 		str	r2, [r5, r4, lsl #2]
 1743 0242 0134     		adds	r4, r4, #1
 1744              	.LVL229:
 1745              	.L96:
 543:dm/dm42_menu.cc ****           if( sels[a] )
 1746              		.loc 1 543 0 discriminator 2
 1747 0244 0132     		adds	r2, r2, #1
 1748              	.LVL230:
 1749 0246 9045     		cmp	r8, r2
 1750 0248 F6D1     		bne	.L98
 1751              	.LVL231:
 1752              	.L71:
 1753              	.LBE31:
 1754              	.LBE30:
 582:dm/dm42_menu.cc ****         }
 583:dm/dm42_menu.cc **** 
 584:dm/dm42_menu.cc ****       }
 585:dm/dm42_menu.cc **** 
 586:dm/dm42_menu.cc ****       // DEBUG
 587:dm/dm42_menu.cc ****       printf("pgm_cnt=%i  sel_ln=%i\n", *pgm_cnt, sel_ln);
 588:dm/dm42_menu.cc **** 
 589:dm/dm42_menu.cc ****       // Menu line
 590:dm/dm42_menu.cc ****       //t24->y = LCD_Y - lcd_lineHeight(t24);
 591:dm/dm42_menu.cc ****       //lcd_putsR(t24, " Sel |     |C-All|S-All|      | Sel");
 592:dm/dm42_menu.cc ****       const char * menu[] = {" Sel","","C-All","S-All","","Sel"};
 593:dm/dm42_menu.cc ****       lcd_draw_menu_keys(menu);
 594:dm/dm42_menu.cc **** 
 595:dm/dm42_menu.cc ****       // display
 596:dm/dm42_menu.cc ****       lcd_refresh();
 597:dm/dm42_menu.cc ****     }
 598:dm/dm42_menu.cc ****   }
 599:dm/dm42_menu.cc ****   return 1;
 600:dm/dm42_menu.cc **** }
 1755              		.loc 1 600 0
 1756 024a 15B0     		add	sp, sp, #84
 1757              		.cfi_remember_state
 1758              		.cfi_def_cfa_offset 36
 1759              		@ sp needed
 1760 024c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1761              	.LVL232:
 1762              	.L80:
 1763              		.cfi_restore_state
 1764              	.LBB38:
 1765              	.LBB36:
ARM GAS  /tmp/ccT5mNbt.s 			page 47


 527:dm/dm42_menu.cc ****           cur_ix = 0;
 1766              		.loc 1 527 0
 1767 0250 08F1FF31 		add	r1, r8, #-1
 1768 0254 8945     		cmp	r9, r1
 1769 0256 13D0     		beq	.L93
 531:dm/dm42_menu.cc ****           if ( cur_ix >= pgm_count )
 1770              		.loc 1 531 0
 1771 0258 2F4A     		ldr	r2, .L129+44
 530:dm/dm42_menu.cc ****           cur_ix -= cur_ix % pgm_lines;
 1772              		.loc 1 530 0
 1773 025a 09F10703 		add	r3, r9, #7
 1774              	.LVL233:
 531:dm/dm42_menu.cc ****           if ( cur_ix >= pgm_count )
 1775              		.loc 1 531 0
 1776 025e 82FB0302 		smull	r0, r2, r2, r3
 1777 0262 1A44     		add	r2, r2, r3
 1778 0264 DB17     		asrs	r3, r3, #31
 1779              	.LVL234:
 1780 0266 C3EBA203 		rsb	r3, r3, r2, asr #2
 1781 026a C3EBC303 		rsb	r3, r3, r3, lsl #3
 1782              	.LVL235:
 532:dm/dm42_menu.cc ****             cur_ix = pgm_count-1;
 1783              		.loc 1 532 0
 1784 026e 9845     		cmp	r8, r3
 1785 0270 6BDD     		ble	.L109
 1786 0272 9946     		mov	r9, r3
 1787 0274 36E7     		b	.L95
 1788              	.LVL236:
 1789              	.L79:
 508:dm/dm42_menu.cc ****           cur_ix++;
 1790              		.loc 1 508 0
 1791 0276 09F10109 		add	r9, r9, #1
 1792              	.LVL237:
 1793 027a C845     		cmp	r8, r9
 1794 027c 3FF728AF 		bgt	.L88
 1795              	.LVL238:
 1796              	.L93:
 1797 0280 0AEAEA73 		and	r3, r10, r10, asr #31
 1798              	.LVL239:
 1799 0284 4FF00009 		mov	r9, #0
 1800 0288 2CE7     		b	.L95
 1801              	.LVL240:
 1802              	.L74:
 1803              	.LBB35:
 550:dm/dm42_menu.cc ****       upd = 0;
 1804              		.loc 1 550 0
 1805 028a 002C     		cmp	r4, #0
 1806 028c 7FF420AF 		bne	.L88
 1807 0290 0024     		movs	r4, #0
 1808              	.LVL241:
 1809 0292 E4E6     		b	.L72
 1810              	.LVL242:
 1811              	.L105:
 1812              	.LBB34:
 574:dm/dm42_menu.cc ****         }
 1813              		.loc 1 574 0
 1814 0294 FFF7FEFF 		bl	memcpy
ARM GAS  /tmp/ccT5mNbt.s 			page 48


 1815              	.LVL243:
 1816 0298 80E7     		b	.L106
 1817              	.LVL244:
 1818              	.L101:
 592:dm/dm42_menu.cc ****       lcd_draw_menu_keys(menu);
 1819              		.loc 1 592 0
 1820 029a 204E     		ldr	r6, .L129+48
 593:dm/dm42_menu.cc **** 
 1821              		.loc 1 593 0
 1822 029c 204C     		ldr	r4, .L129+52
 592:dm/dm42_menu.cc ****       lcd_draw_menu_keys(menu);
 1823              		.loc 1 592 0
 1824 029e 0FCE     		ldmia	r6!, {r0, r1, r2, r3}
 1825 02a0 06AD     		add	r5, sp, #24
 1826 02a2 0FC5     		stmia	r5!, {r0, r1, r2, r3}
 1827 02a4 96E80300 		ldm	r6, {r0, r1}
 1828 02a8 85E80300 		stm	r5, {r0, r1}
 593:dm/dm42_menu.cc **** 
 1829              		.loc 1 593 0
 1830 02ac 06A8     		add	r0, sp, #24
 1831 02ae A047     		blx	r4
 1832              	.LVL245:
 596:dm/dm42_menu.cc ****     }
 1833              		.loc 1 596 0
 1834 02b0 1C4B     		ldr	r3, .L129+56
 1835 02b2 9847     		blx	r3
 1836              	.LVL246:
 1837 02b4 0024     		movs	r4, #0
 1838 02b6 D2E6     		b	.L72
 1839              	.LVL247:
 1840              	.L125:
 578:dm/dm42_menu.cc ****           sel_ln = a;
 1841              		.loc 1 578 0
 1842 02b8 9847     		blx	r3
 1843              	.LVL248:
 1844 02ba 0D4B     		ldr	r3, .L129+4
 1845 02bc 586B     		ldr	r0, [r3, #52]
 1846 02be 0F4B     		ldr	r3, .L129+16
 1847 02c0 0122     		movs	r2, #1
 1848 02c2 4274     		strb	r2, [r0, #17]
 1849 02c4 3946     		mov	r1, r7
 1850 02c6 9847     		blx	r3
 1851              	.LVL249:
 1852 02c8 094B     		ldr	r3, .L129+4
 1853 02ca 5B6B     		ldr	r3, [r3, #52]
 579:dm/dm42_menu.cc ****         } else {
 1854              		.loc 1 579 0
 1855 02cc 0296     		str	r6, [sp, #8]
 578:dm/dm42_menu.cc ****           sel_ln = a;
 1856              		.loc 1 578 0
 1857 02ce 0022     		movs	r2, #0
 1858 02d0 5A74     		strb	r2, [r3, #17]
 1859              	.LVL250:
 1860 02d2 19E7     		b	.L104
 1861              	.LVL251:
 1862              	.L94:
 1863              	.LBE34:
ARM GAS  /tmp/ccT5mNbt.s 			page 49


 1864              	.LBE35:
 521:dm/dm42_menu.cc ****         }
 1865              		.loc 1 521 0
 1866 02d4 104A     		ldr	r2, .L129+44
 520:dm/dm42_menu.cc ****           cur_ix -= cur_ix % pgm_lines;
 1867              		.loc 1 520 0
 1868 02d6 09F1FF33 		add	r3, r9, #-1
 1869              	.LVL252:
 521:dm/dm42_menu.cc ****         }
 1870              		.loc 1 521 0
 1871 02da 82FB0312 		smull	r1, r2, r2, r3
 1872 02de 1A44     		add	r2, r2, r3
 1873 02e0 DB17     		asrs	r3, r3, #31
 1874              	.LVL253:
 1875 02e2 C3EBA203 		rsb	r3, r3, r2, asr #2
 1876 02e6 C3EBC309 		rsb	r9, r3, r3, lsl #3
 1877              	.LVL254:
 1878 02ea F1E6     		b	.L88
 1879              	.L130:
 1880              		.align	2
 1881              	.L129:
 1882 02ec 25030008 		.word	134218533
 1883 02f0 00200010 		.word	268443648
 1884 02f4 65020008 		.word	134218341
 1885 02f8 2D020008 		.word	134218285
 1886 02fc 7D020008 		.word	134218365
 1887 0300 9D030008 		.word	134218653
 1888 0304 C1030008 		.word	134218689
 1889 0308 61030008 		.word	134218593
 1890 030c 20000000 		.word	.LC48
 1891 0310 24000000 		.word	.LC49
 1892 0314 69020008 		.word	134218345
 1893 0318 93244992 		.word	-1840700269
 1894 031c 00000000 		.word	.LANCHOR0
 1895 0320 AD020008 		.word	134218413
 1896 0324 31020008 		.word	134218289
 1897              	.LVL255:
 1898              	.L73:
 1899              	.LBE36:
 1900              	.LBE38:
 599:dm/dm42_menu.cc **** }
 1901              		.loc 1 599 0
 1902 0328 0120     		movs	r0, #1
 1903              		.loc 1 600 0
 1904 032a 15B0     		add	sp, sp, #84
 1905              		.cfi_remember_state
 1906              		.cfi_def_cfa_offset 36
 1907              		@ sp needed
 1908 032c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1909              	.LVL256:
 1910              	.L127:
 1911              		.cfi_restore_state
 1912              	.LBB39:
 1913              	.LBB37:
 464:dm/dm42_menu.cc ****           // Too much selections
 1914              		.loc 1 464 0 discriminator 1
 1915 0330 049B     		ldr	r3, [sp, #16]
ARM GAS  /tmp/ccT5mNbt.s 			page 50


 1916 0332 13F80940 		ldrb	r4, [r3, r9]	@ zero_extendqisi2
 1917              	.LVL257:
 1918 0336 FCB1     		cbz	r4, .L128
 470:dm/dm42_menu.cc ****           if(sels[cur_ix]) pgm_cnt[0]++; else pgm_cnt[0]--;
 1919              		.loc 1 470 0
 1920 0338 049A     		ldr	r2, [sp, #16]
 1921 033a 0023     		movs	r3, #0
 1922 033c 02F80930 		strb	r3, [r2, r9]
 1923              	.L89:
 471:dm/dm42_menu.cc ****         }
 1924              		.loc 1 471 0 discriminator 2
 1925 0340 039A     		ldr	r2, [sp, #12]
 1926 0342 1368     		ldr	r3, [r2]
 1927 0344 013B     		subs	r3, r3, #1
 1928 0346 1360     		str	r3, [r2]
 1929              	.LVL258:
 1930 0348 C2E6     		b	.L88
 1931              	.LVL259:
 1932              	.L109:
 1933 034a 8946     		mov	r9, r1
 1934 034c C0E6     		b	.L88
 1935              	.LVL260:
 1936              	.L126:
 485:dm/dm42_menu.cc ****           lcd_refresh();
 1937              		.loc 1 485 0
 1938 034e 144C     		ldr	r4, .L131
 1939              	.LVL261:
 1940 0350 0299     		ldr	r1, [sp, #8]
 1941 0352 606B     		ldr	r0, [r4, #52]
 1942 0354 134B     		ldr	r3, .L131+4
 1943 0356 9847     		blx	r3
 1944              	.LVL262:
 1945 0358 606B     		ldr	r0, [r4, #52]
 1946 035a 134B     		ldr	r3, .L131+8
 1947 035c 1349     		ldr	r1, .L131+12
 1948 035e 0122     		movs	r2, #1
 1949 0360 4274     		strb	r2, [r0, #17]
 1950 0362 9847     		blx	r3
 1951              	.LVL263:
 1952 0364 626B     		ldr	r2, [r4, #52]
 486:dm/dm42_menu.cc ****           sys_delay(1000);
 1953              		.loc 1 486 0
 1954 0366 124B     		ldr	r3, .L131+16
 485:dm/dm42_menu.cc ****           lcd_refresh();
 1955              		.loc 1 485 0
 1956 0368 0021     		movs	r1, #0
 1957 036a 5174     		strb	r1, [r2, #17]
 486:dm/dm42_menu.cc ****           sys_delay(1000);
 1958              		.loc 1 486 0
 1959 036c 9847     		blx	r3
 1960              	.LVL264:
 487:dm/dm42_menu.cc ****         } else {
 1961              		.loc 1 487 0
 1962 036e 114B     		ldr	r3, .L131+20
 1963 0370 4FF47A70 		mov	r0, #1000
 1964 0374 9847     		blx	r3
 1965              	.LVL265:
ARM GAS  /tmp/ccT5mNbt.s 			page 51


 1966 0376 ABE6     		b	.L88
 1967              	.LVL266:
 1968              	.L128:
 466:dm/dm42_menu.cc ****           lcd_refresh();
 1969              		.loc 1 466 0
 1970 0378 094D     		ldr	r5, .L131
 1971              	.LVL267:
 1972 037a 0299     		ldr	r1, [sp, #8]
 1973 037c 686B     		ldr	r0, [r5, #52]
 1974 037e 094B     		ldr	r3, .L131+4
 1975 0380 9847     		blx	r3
 1976              	.LVL268:
 1977 0382 686B     		ldr	r0, [r5, #52]
 1978 0384 0949     		ldr	r1, .L131+12
 1979 0386 084B     		ldr	r3, .L131+8
 1980 0388 0122     		movs	r2, #1
 1981 038a 4274     		strb	r2, [r0, #17]
 1982 038c 9847     		blx	r3
 1983              	.LVL269:
 1984 038e 6A6B     		ldr	r2, [r5, #52]
 467:dm/dm42_menu.cc ****           sys_delay(1000);
 1985              		.loc 1 467 0
 1986 0390 074B     		ldr	r3, .L131+16
 466:dm/dm42_menu.cc ****           lcd_refresh();
 1987              		.loc 1 466 0
 1988 0392 5474     		strb	r4, [r2, #17]
 467:dm/dm42_menu.cc ****           sys_delay(1000);
 1989              		.loc 1 467 0
 1990 0394 9847     		blx	r3
 1991              	.LVL270:
 468:dm/dm42_menu.cc ****         } else {
 1992              		.loc 1 468 0
 1993 0396 074B     		ldr	r3, .L131+20
 1994 0398 4FF47A70 		mov	r0, #1000
 1995 039c 9847     		blx	r3
 1996              	.LVL271:
 1997 039e 97E6     		b	.L88
 1998              	.L132:
 1999              		.align	2
 2000              	.L131:
 2001 03a0 00200010 		.word	268443648
 2002 03a4 69020008 		.word	134218345
 2003 03a8 7D020008 		.word	134218365
 2004 03ac 00000000 		.word	.LC47
 2005 03b0 31020008 		.word	134218289
 2006 03b4 05040008 		.word	134218757
 2007              	.LBE37:
 2008              	.LBE39:
 2009              		.cfi_endproc
 2010              	.LFE12:
 2012              		.section	.text.pgm_export,"ax",%progbits
 2013              		.align	1
 2014              		.p2align 2,,3
 2015              		.global	pgm_export
 2016              		.syntax unified
 2017              		.thumb
 2018              		.thumb_func
ARM GAS  /tmp/ccT5mNbt.s 			page 52


 2019              		.fpu fpv4-sp-d16
 2021              	pgm_export:
 2022              	.LFB13:
 601:dm/dm42_menu.cc **** 
 602:dm/dm42_menu.cc **** 
 603:dm/dm42_menu.cc **** void pgm_export() {
 2023              		.loc 1 603 0
 2024              		.cfi_startproc
 2025              		@ args = 0, pretend = 0, frame = 296
 2026              		@ frame_needed = 0, uses_anonymous_args = 0
 2027 0000 10B5     		push	{r4, lr}
 2028              		.cfi_def_cfa_offset 8
 2029              		.cfi_offset 4, -8
 2030              		.cfi_offset 14, -4
 604:dm/dm42_menu.cc ****   int res;
 605:dm/dm42_menu.cc **** 
 606:dm/dm42_menu.cc ****   // Don't pass through if the power is insufficient  
 607:dm/dm42_menu.cc ****   if ( power_check_screen() )
 2031              		.loc 1 607 0
 2032 0002 264B     		ldr	r3, .L146
 603:dm/dm42_menu.cc ****   int res;
 2033              		.loc 1 603 0
 2034 0004 CEB0     		sub	sp, sp, #312
 2035              		.cfi_def_cfa_offset 320
 2036              		.loc 1 607 0
 2037 0006 9847     		blx	r3
 2038              	.LVL272:
 2039 0008 08B1     		cbz	r0, .L144
 2040              	.L133:
 608:dm/dm42_menu.cc ****     return;
 609:dm/dm42_menu.cc **** 
 610:dm/dm42_menu.cc ****   wait_for_key_release(-1);
 611:dm/dm42_menu.cc **** 
 612:dm/dm42_menu.cc ****   if ( check_create_dir(PGM_DIR) ) {
 613:dm/dm42_menu.cc ****     lcd_puts(t24,"Cannot access " PGM_DIR); lcd_refresh();
 614:dm/dm42_menu.cc ****     wait_for_key_press();
 615:dm/dm42_menu.cc ****     return;
 616:dm/dm42_menu.cc ****   }
 617:dm/dm42_menu.cc **** 
 618:dm/dm42_menu.cc ****   if ( !sys_disk_ok() ) goto pgm_exp_fail;
 619:dm/dm42_menu.cc **** 
 620:dm/dm42_menu.cc ****   char pgm_fn[11+MAX_PGM_FN_LEN+1];
 621:dm/dm42_menu.cc ****   pgm_import_sel_t pgm_sel;
 622:dm/dm42_menu.cc **** 
 623:dm/dm42_menu.cc ****   strcpy(pgm_fn,PGM_DIR);
 624:dm/dm42_menu.cc ****   strcat(pgm_fn,"/");
 625:dm/dm42_menu.cc **** 
 626:dm/dm42_menu.cc ****   res = select_programs("Select Programs", pgm_sel.pgm_indices, &pgm_sel.pgm_cnt);
 627:dm/dm42_menu.cc ****   if ( res != 0 || pgm_sel.pgm_cnt == 0 ) {
 628:dm/dm42_menu.cc ****     lcd_for_dm42(DISP_NO_PGM_SEL);
 629:dm/dm42_menu.cc ****     wait_for_key_press();
 630:dm/dm42_menu.cc ****     return;
 631:dm/dm42_menu.cc ****   }
 632:dm/dm42_menu.cc ****   
 633:dm/dm42_menu.cc ****   //void file_selection_screen(const char * title, const char * base_dir, const char * ext, file_se
 634:dm/dm42_menu.cc ****   file_selection_screen("Program Export Filename", PGM_DIR, PGM_EXT, pgm_export_enter, 1, 1, &pgm_s
 635:dm/dm42_menu.cc **** 
ARM GAS  /tmp/ccT5mNbt.s 			page 53


 636:dm/dm42_menu.cc **** pgm_exp_fail:
 637:dm/dm42_menu.cc ****   sys_disk_check_valid(); // Unmount drive if disk is invalid
 638:dm/dm42_menu.cc ****   if ( !sys_disk_ok() ) {
 639:dm/dm42_menu.cc ****     disp_disk_info("Program Export");
 640:dm/dm42_menu.cc ****     wait_for_key_press();
 641:dm/dm42_menu.cc ****   }
 642:dm/dm42_menu.cc **** }
 2041              		.loc 1 642 0
 2042 000a 4EB0     		add	sp, sp, #312
 2043              		.cfi_remember_state
 2044              		.cfi_def_cfa_offset 8
 2045              		@ sp needed
 2046 000c 10BD     		pop	{r4, pc}
 2047              	.L144:
 2048              		.cfi_restore_state
 612:dm/dm42_menu.cc ****     lcd_puts(t24,"Cannot access " PGM_DIR); lcd_refresh();
 2049              		.loc 1 612 0
 2050 000e 244C     		ldr	r4, .L146+4
 610:dm/dm42_menu.cc **** 
 2051              		.loc 1 610 0
 2052 0010 244B     		ldr	r3, .L146+8
 2053 0012 4FF0FF30 		mov	r0, #-1
 2054 0016 9847     		blx	r3
 2055              	.LVL273:
 612:dm/dm42_menu.cc ****     lcd_puts(t24,"Cannot access " PGM_DIR); lcd_refresh();
 2056              		.loc 1 612 0
 2057 0018 2046     		mov	r0, r4
 2058 001a 234B     		ldr	r3, .L146+12
 2059 001c 9847     		blx	r3
 2060              	.LVL274:
 2061 001e D0B9     		cbnz	r0, .L145
 618:dm/dm42_menu.cc **** 
 2062              		.loc 1 618 0
 2063 0020 224B     		ldr	r3, .L146+16
 2064 0022 9847     		blx	r3
 2065              	.LVL275:
 2066 0024 0028     		cmp	r0, #0
 2067 0026 2CD0     		beq	.L137
 623:dm/dm42_menu.cc ****   strcat(pgm_fn,"/");
 2068              		.loc 1 623 0
 2069 0028 94E80700 		ldm	r4, {r0, r1, r2}
 2070 002c 04AB     		add	r3, sp, #16
 2071 002e 03C3     		stmia	r3!, {r0, r1}
 624:dm/dm42_menu.cc **** 
 2072              		.loc 1 624 0
 2073 0030 1F49     		ldr	r1, .L146+20
 623:dm/dm42_menu.cc ****   strcat(pgm_fn,"/");
 2074              		.loc 1 623 0
 2075 0032 1A70     		strb	r2, [r3]
 626:dm/dm42_menu.cc ****   if ( res != 0 || pgm_sel.pgm_cnt == 0 ) {
 2076              		.loc 1 626 0
 2077 0034 1F48     		ldr	r0, .L146+24
 624:dm/dm42_menu.cc **** 
 2078              		.loc 1 624 0
 2079 0036 0B88     		ldrh	r3, [r1]	@ unaligned
 2080 0038 ADF81930 		strh	r3, [sp, #25]	@ unaligned
 626:dm/dm42_menu.cc ****   if ( res != 0 || pgm_sel.pgm_cnt == 0 ) {
ARM GAS  /tmp/ccT5mNbt.s 			page 54


 2081              		.loc 1 626 0
 2082 003c 0DAA     		add	r2, sp, #52
 2083 003e 0EA9     		add	r1, sp, #56
 2084 0040 FFF7FEFF 		bl	select_programs
 2085              	.LVL276:
 627:dm/dm42_menu.cc ****     lcd_for_dm42(DISP_NO_PGM_SEL);
 2086              		.loc 1 627 0
 2087 0044 08B9     		cbnz	r0, .L138
 627:dm/dm42_menu.cc ****     lcd_for_dm42(DISP_NO_PGM_SEL);
 2088              		.loc 1 627 0 is_stmt 0 discriminator 1
 2089 0046 0D9B     		ldr	r3, [sp, #52]
 2090 0048 83B9     		cbnz	r3, .L139
 2091              	.L138:
 628:dm/dm42_menu.cc ****     wait_for_key_press();
 2092              		.loc 1 628 0 is_stmt 1
 2093 004a 6820     		movs	r0, #104
 2094              	.LVL277:
 2095 004c FFF7FEFF 		bl	lcd_for_dm42
 2096              	.LVL278:
 629:dm/dm42_menu.cc ****     return;
 2097              		.loc 1 629 0
 2098 0050 194B     		ldr	r3, .L146+28
 2099 0052 9847     		blx	r3
 2100              	.LVL279:
 630:dm/dm42_menu.cc ****   }
 2101              		.loc 1 630 0
 2102 0054 D9E7     		b	.L133
 2103              	.L145:
 613:dm/dm42_menu.cc ****     wait_for_key_press();
 2104              		.loc 1 613 0
 2105 0056 194A     		ldr	r2, .L146+32
 2106 0058 1949     		ldr	r1, .L146+36
 2107 005a 506B     		ldr	r0, [r2, #52]
 2108 005c 194B     		ldr	r3, .L146+40
 2109 005e 9847     		blx	r3
 2110              	.LVL280:
 2111 0060 194B     		ldr	r3, .L146+44
 2112 0062 9847     		blx	r3
 2113              	.LVL281:
 614:dm/dm42_menu.cc ****     return;
 2114              		.loc 1 614 0
 2115 0064 144B     		ldr	r3, .L146+28
 2116 0066 9847     		blx	r3
 2117              	.LVL282:
 2118              		.loc 1 642 0
 2119 0068 4EB0     		add	sp, sp, #312
 2120              		.cfi_remember_state
 2121              		.cfi_def_cfa_offset 8
 2122              		@ sp needed
 2123 006a 10BD     		pop	{r4, pc}
 2124              	.LVL283:
 2125              	.L139:
 2126              		.cfi_restore_state
 634:dm/dm42_menu.cc **** 
 2127              		.loc 1 634 0
 2128 006c 0123     		movs	r3, #1
 2129 006e 0DAA     		add	r2, sp, #52
ARM GAS  /tmp/ccT5mNbt.s 			page 55


 2130 0070 0292     		str	r2, [sp, #8]
 2131 0072 2146     		mov	r1, r4
 2132 0074 0193     		str	r3, [sp, #4]
 2133 0076 0093     		str	r3, [sp]
 2134 0078 144C     		ldr	r4, .L146+48
 2135 007a 154B     		ldr	r3, .L146+52
 2136 007c 154A     		ldr	r2, .L146+56
 2137 007e 1648     		ldr	r0, .L146+60
 2138              	.LVL284:
 2139 0080 A047     		blx	r4
 2140              	.LVL285:
 2141              	.L137:
 637:dm/dm42_menu.cc ****   if ( !sys_disk_ok() ) {
 2142              		.loc 1 637 0
 2143 0082 164B     		ldr	r3, .L146+64
 2144 0084 9847     		blx	r3
 2145              	.LVL286:
 638:dm/dm42_menu.cc ****     disp_disk_info("Program Export");
 2146              		.loc 1 638 0
 2147 0086 094B     		ldr	r3, .L146+16
 2148 0088 9847     		blx	r3
 2149              	.LVL287:
 2150 008a 0028     		cmp	r0, #0
 2151 008c BDD1     		bne	.L133
 639:dm/dm42_menu.cc ****     wait_for_key_press();
 2152              		.loc 1 639 0
 2153 008e 144B     		ldr	r3, .L146+68
 2154 0090 1448     		ldr	r0, .L146+72
 2155 0092 9847     		blx	r3
 2156              	.LVL288:
 640:dm/dm42_menu.cc ****   }
 2157              		.loc 1 640 0
 2158 0094 084B     		ldr	r3, .L146+28
 2159 0096 9847     		blx	r3
 2160              	.LVL289:
 2161 0098 B7E7     		b	.L133
 2162              	.L147:
 2163 009a 00BF     		.align	2
 2164              	.L146:
 2165 009c 55030008 		.word	134218581
 2166 00a0 08000000 		.word	.LC19
 2167 00a4 A5030008 		.word	134218661
 2168 00a8 D1030008 		.word	134218705
 2169 00ac DD030008 		.word	134218717
 2170 00b0 18000000 		.word	.LC52
 2171 00b4 8C000000 		.word	.LC27
 2172 00b8 99030008 		.word	134218649
 2173 00bc 00200010 		.word	268443648
 2174 00c0 00000000 		.word	.LC51
 2175 00c4 7D020008 		.word	134218365
 2176 00c8 31020008 		.word	134218289
 2177 00cc 51030008 		.word	134218577
 2178 00d0 00000000 		.word	pgm_export_enter
 2179 00d4 1C000000 		.word	.LC53
 2180 00d8 24000000 		.word	.LC54
 2181 00dc E5030008 		.word	134218725
 2182 00e0 4D030008 		.word	134218573
ARM GAS  /tmp/ccT5mNbt.s 			page 56


 2183 00e4 00000000 		.word	.LC16
 2184              		.cfi_endproc
 2185              	.LFE13:
 2187              		.section	.text.stack_menu_index,"ax",%progbits
 2188              		.align	1
 2189              		.p2align 2,,3
 2190              		.global	stack_menu_index
 2191              		.syntax unified
 2192              		.thumb
 2193              		.thumb_func
 2194              		.fpu fpv4-sp-d16
 2196              	stack_menu_index:
 2197              	.LFB14:
 643:dm/dm42_menu.cc **** 
 644:dm/dm42_menu.cc **** 
 645:dm/dm42_menu.cc **** 
 646:dm/dm42_menu.cc **** 
 647:dm/dm42_menu.cc **** 
 648:dm/dm42_menu.cc **** 
 649:dm/dm42_menu.cc **** 
 650:dm/dm42_menu.cc **** 
 651:dm/dm42_menu.cc **** 
 652:dm/dm42_menu.cc **** 
 653:dm/dm42_menu.cc **** /*
 654:dm/dm42_menu.cc ****  ▄    ▄                                                    ▄                 
 655:dm/dm42_menu.cc ****  ██  ██  ▄▄▄   ▄ ▄▄   ▄   ▄          ▄▄▄   ▄   ▄   ▄▄▄   
 656:dm/dm42_menu.cc ****  █ ██ █ █▀  █  █▀  █  █   █         █   ▀  ▀▄ ▄▀  █   ▀    
 657:dm/dm42_menu.cc ****  █ ▀▀ █ █▀▀▀▀  █   █  █   █          ▀▀▀▄   █▄█    ▀▀
 658:dm/dm42_menu.cc ****  █    █ ▀█▄▄▀  █   █  ▀▄▄▀█         ▀▄▄▄▀   ▀█    ▀▄
 659:dm/dm42_menu.cc ****                                             ▄▀                               
 660:dm/dm42_menu.cc ****                                            ▀▀                                */
 661:dm/dm42_menu.cc **** 
 662:dm/dm42_menu.cc **** 
 663:dm/dm42_menu.cc **** 
 664:dm/dm42_menu.cc **** 
 665:dm/dm42_menu.cc **** const uint8_t mid_menu[] = {
 666:dm/dm42_menu.cc ****     MI_FILE,
 667:dm/dm42_menu.cc ****     MI_STATEFILE,
 668:dm/dm42_menu.cc ****     MI_PRINT_MENU,
 669:dm/dm42_menu.cc ****     MI_SETTINGS,
 670:dm/dm42_menu.cc ****     MI_SYSTEM_ENTER,
 671:dm/dm42_menu.cc ****     MI_ABOUT_PGM,
 672:dm/dm42_menu.cc ****     0 }; // Terminator
 673:dm/dm42_menu.cc **** 
 674:dm/dm42_menu.cc **** 
 675:dm/dm42_menu.cc **** const uint8_t mid_file[] = {
 676:dm/dm42_menu.cc ****     MI_LOAD_PGM,
 677:dm/dm42_menu.cc ****     MI_SAVE_PGM,
 678:dm/dm42_menu.cc ****     MI_MSC,
 679:dm/dm42_menu.cc ****     MI_DISK_INFO,
 680:dm/dm42_menu.cc ****     0 }; // Terminator
 681:dm/dm42_menu.cc **** 
 682:dm/dm42_menu.cc **** 
 683:dm/dm42_menu.cc **** const uint8_t mid_print[] = {
 684:dm/dm42_menu.cc ****     MI_PRTOF_GRAPH,
 685:dm/dm42_menu.cc ****     MI_PRTOF_TEXT,
 686:dm/dm42_menu.cc ****     MI_PRTOF_GR_IN_TXT,
ARM GAS  /tmp/ccT5mNbt.s 			page 57


 687:dm/dm42_menu.cc ****     MI_PRTOF_NOIR,
 688:dm/dm42_menu.cc ****     0 }; // Terminator
 689:dm/dm42_menu.cc **** 
 690:dm/dm42_menu.cc **** 
 691:dm/dm42_menu.cc **** const uint8_t mid_statefile[] = {
 692:dm/dm42_menu.cc ****     MI_LOAD_STATE,
 693:dm/dm42_menu.cc ****     MI_SAVE_STATE,
 694:dm/dm42_menu.cc ****     MI_CLEAN_RESET,
 695:dm/dm42_menu.cc ****     0 }; // Terminator
 696:dm/dm42_menu.cc **** 
 697:dm/dm42_menu.cc **** 
 698:dm/dm42_menu.cc **** 
 699:dm/dm42_menu.cc **** 
 700:dm/dm42_menu.cc **** const uint8_t mid_settings[] = {
 701:dm/dm42_menu.cc ****     MI_SET_TIME,
 702:dm/dm42_menu.cc ****     MI_SET_DATE,
 703:dm/dm42_menu.cc ****     MI_TOPBAR_MENU,
 704:dm/dm42_menu.cc ****     MI_STACK_AREA,
 705:dm/dm42_menu.cc ****     MI_BEEP_MUTE,
 706:dm/dm42_menu.cc ****     MI_SLOW_AUTOREP,
 707:dm/dm42_menu.cc ****     MI_STACK_CONFIG,
 708:dm/dm42_menu.cc ****     0 }; // Terminator
 709:dm/dm42_menu.cc **** 
 710:dm/dm42_menu.cc **** 
 711:dm/dm42_menu.cc **** const uint8_t mid_topbar[] = {
 712:dm/dm42_menu.cc ****     MI_DISP_STATFN,
 713:dm/dm42_menu.cc ****     MI_DISP_DOW,
 714:dm/dm42_menu.cc ****     MI_DISP_DATE,
 715:dm/dm42_menu.cc ****     MI_DISP_DATE_SEP,
 716:dm/dm42_menu.cc ****     MI_DISP_SHORTMON,
 717:dm/dm42_menu.cc ****     MI_DISP_TIME,
 718:dm/dm42_menu.cc ****     MI_DISP_VOLTAGE,
 719:dm/dm42_menu.cc ****     0 }; // Terminator
 720:dm/dm42_menu.cc **** 
 721:dm/dm42_menu.cc **** 
 722:dm/dm42_menu.cc **** const uint8_t mid_stack_area[] = {
 723:dm/dm42_menu.cc ****     MI_SA_REG_X,
 724:dm/dm42_menu.cc ****     MI_SA_REG_Y,
 725:dm/dm42_menu.cc ****     MI_SA_REG_Z,
 726:dm/dm42_menu.cc ****     MI_SA_REG_T,
 727:dm/dm42_menu.cc ****     MI_SA_REG_L,
 728:dm/dm42_menu.cc ****     MI_SA_REG_A,
 729:dm/dm42_menu.cc ****     0 }; // Terminator
 730:dm/dm42_menu.cc **** 
 731:dm/dm42_menu.cc **** 
 732:dm/dm42_menu.cc **** const uint8_t mid_stack[] = {
 733:dm/dm42_menu.cc ****     MI_STACK_XYZTL,
 734:dm/dm42_menu.cc ****     MI_STACK_XYZTA,
 735:dm/dm42_menu.cc ****     MI_STACK_XYZT,
 736:dm/dm42_menu.cc ****     MI_STACK_XYL,
 737:dm/dm42_menu.cc ****     MI_STACK_XYA,
 738:dm/dm42_menu.cc ****     MI_STACK_XY,
 739:dm/dm42_menu.cc ****     MI_STACK_LXYZT,
 740:dm/dm42_menu.cc ****     0 }; // Terminator
 741:dm/dm42_menu.cc **** 
 742:dm/dm42_menu.cc **** 
 743:dm/dm42_menu.cc **** 
ARM GAS  /tmp/ccT5mNbt.s 			page 58


 744:dm/dm42_menu.cc **** 
 745:dm/dm42_menu.cc **** int stack_menu_index() {
 2198              		.loc 1 745 0
 2199              		.cfi_startproc
 2200              		@ args = 0, pretend = 0, frame = 8
 2201              		@ frame_needed = 0, uses_anonymous_args = 0
 2202 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 2203              		.cfi_def_cfa_offset 20
 2204              		.cfi_offset 4, -20
 2205              		.cfi_offset 5, -16
 2206              		.cfi_offset 6, -12
 2207              		.cfi_offset 7, -8
 2208              		.cfi_offset 14, -4
 2209 0002 83B0     		sub	sp, sp, #12
 2210              		.cfi_def_cfa_offset 32
 746:dm/dm42_menu.cc ****   const uint8_t ixs[] = {
 747:dm/dm42_menu.cc ****     STACK_XYZTL,
 748:dm/dm42_menu.cc ****     STACK_XYZTA,
 749:dm/dm42_menu.cc ****     STACK_XYZT,
 750:dm/dm42_menu.cc ****     STACK_XYL,
 751:dm/dm42_menu.cc ****     STACK_XYA,
 752:dm/dm42_menu.cc ****     STACK_XY,
 753:dm/dm42_menu.cc ****     STACK_LXYZT,
 754:dm/dm42_menu.cc ****     0 }; // Terminator
 2211              		.loc 1 754 0
 2212 0004 1E27     		movs	r7, #30
 2213 0006 1220     		movs	r0, #18
 2214 0008 2221     		movs	r1, #34
 2215 000a 0222     		movs	r2, #2
 2216 000c 0F23     		movs	r3, #15
 2217 000e 2E24     		movs	r4, #46
 2218 0010 0E26     		movs	r6, #14
 2219 0012 0025     		movs	r5, #0
 2220 0014 8DF80070 		strb	r7, [sp]
 2221 0018 8DF80140 		strb	r4, [sp, #1]
 2222 001c 8DF80260 		strb	r6, [sp, #2]
 2223 0020 8DF80300 		strb	r0, [sp, #3]
 2224 0024 8DF80410 		strb	r1, [sp, #4]
 2225 0028 8DF80520 		strb	r2, [sp, #5]
 2226 002c 8DF80630 		strb	r3, [sp, #6]
 2227 0030 8DF80750 		strb	r5, [sp, #7]
 2228              	.LVL290:
 755:dm/dm42_menu.cc ****   int ix = 0;
 756:dm/dm42_menu.cc ****   int sl = get_stack_layout();
 2229              		.loc 1 756 0
 2230 0034 FFF7FEFF 		bl	get_stack_layout
 2231              	.LVL291:
 757:dm/dm42_menu.cc **** 
 758:dm/dm42_menu.cc ****   for(ix=0; ixs[ix]; ix++)
 759:dm/dm42_menu.cc ****     if (ixs[ix] == sl)
 2232              		.loc 1 759 0
 2233 0038 B842     		cmp	r0, r7
 2234 003a 0AD0     		beq	.L148
 2235 003c 0DF10201 		add	r1, sp, #2
 2236 0040 0125     		movs	r5, #1
 2237              	.LVL292:
 2238              	.L150:
ARM GAS  /tmp/ccT5mNbt.s 			page 59


 2239 0042 A042     		cmp	r0, r4
 2240 0044 05D0     		beq	.L148
 758:dm/dm42_menu.cc ****     if (ixs[ix] == sl)
 2241              		.loc 1 758 0 discriminator 2
 2242 0046 11F8014B 		ldrb	r4, [r1], #1	@ zero_extendqisi2
 2243 004a 0135     		adds	r5, r5, #1
 2244              	.LVL293:
 2245 004c 002C     		cmp	r4, #0
 2246 004e F8D1     		bne	.L150
 758:dm/dm42_menu.cc ****     if (ixs[ix] == sl)
 2247              		.loc 1 758 0 is_stmt 0
 2248 0050 2546     		mov	r5, r4
 2249              	.LVL294:
 2250              	.L148:
 760:dm/dm42_menu.cc ****       return ix;
 761:dm/dm42_menu.cc **** 
 762:dm/dm42_menu.cc ****   return 0;
 763:dm/dm42_menu.cc **** }
 2251              		.loc 1 763 0 is_stmt 1
 2252 0052 2846     		mov	r0, r5
 2253              	.LVL295:
 2254 0054 03B0     		add	sp, sp, #12
 2255              		.cfi_def_cfa_offset 20
 2256              		@ sp needed
 2257 0056 F0BD     		pop	{r4, r5, r6, r7, pc}
 2258              		.cfi_endproc
 2259              	.LFE14:
 2261              		.section	.text.run_menu_item,"ax",%progbits
 2262              		.align	1
 2263              		.p2align 2,,3
 2264              		.global	run_menu_item
 2265              		.syntax unified
 2266              		.thumb
 2267              		.thumb_func
 2268              		.fpu fpv4-sp-d16
 2270              	run_menu_item:
 2271              	.LFB15:
 764:dm/dm42_menu.cc **** 
 765:dm/dm42_menu.cc **** 
 766:dm/dm42_menu.cc **** 
 767:dm/dm42_menu.cc **** const smenu_t         MID_MENU = { "Setup",  mid_menu,   NULL, NULL };
 768:dm/dm42_menu.cc **** const smenu_t         MID_FILE = { "File",   mid_file,   NULL, NULL };
 769:dm/dm42_menu.cc **** const smenu_t        MID_PRINT = { "Print to File", mid_print, NULL, NULL };
 770:dm/dm42_menu.cc **** const smenu_t     MID_SETTINGS = { "Settings",  mid_settings,  NULL, NULL};
 771:dm/dm42_menu.cc **** const smenu_t MID_STACK_CONFIG = { "Stack Layout", mid_stack, NULL, NULL};
 772:dm/dm42_menu.cc **** const smenu_t    MID_STATEFILE = { "Calculator State", mid_statefile, NULL, NULL};
 773:dm/dm42_menu.cc **** const smenu_t       MID_TOPBAR = { "Status Bar", mid_topbar, NULL, NULL};
 774:dm/dm42_menu.cc **** const smenu_t   MID_STACK_AREA = { "Stack Area", mid_stack_area, NULL, NULL};
 775:dm/dm42_menu.cc **** 
 776:dm/dm42_menu.cc **** 
 777:dm/dm42_menu.cc **** // ----------------------------------------------------------------------------------
 778:dm/dm42_menu.cc **** 
 779:dm/dm42_menu.cc **** 
 780:dm/dm42_menu.cc **** 
 781:dm/dm42_menu.cc **** 
 782:dm/dm42_menu.cc **** 
 783:dm/dm42_menu.cc **** // Prototypes
ARM GAS  /tmp/ccT5mNbt.s 			page 60


 784:dm/dm42_menu.cc **** 
 785:dm/dm42_menu.cc **** 
 786:dm/dm42_menu.cc **** 
 787:dm/dm42_menu.cc **** 
 788:dm/dm42_menu.cc **** int run_menu_item(uint8_t line_id) {
 2272              		.loc 1 788 0
 2273              		.cfi_startproc
 2274              		@ args = 0, pretend = 0, frame = 0
 2275              		@ frame_needed = 0, uses_anonymous_args = 0
 2276              	.LVL296:
 2277 0000 10B5     		push	{r4, lr}
 2278              		.cfi_def_cfa_offset 8
 2279              		.cfi_offset 4, -8
 2280              		.cfi_offset 14, -4
 789:dm/dm42_menu.cc ****   int ret = 0;
 790:dm/dm42_menu.cc **** 
 791:dm/dm42_menu.cc ****   switch(line_id) {
 2281              		.loc 1 791 0
 2282 0002 1C38     		subs	r0, r0, #28
 2283              	.LVL297:
 788:dm/dm42_menu.cc ****   int ret = 0;
 2284              		.loc 1 788 0
 2285 0004 84B0     		sub	sp, sp, #16
 2286              		.cfi_def_cfa_offset 24
 2287              		.loc 1 791 0
 2288 0006 A828     		cmp	r0, #168
 2289 0008 00F2AF81 		bhi	.L196
 2290 000c DFE810F0 		tbh	[pc, r0, lsl #1]
 2291              	.L157:
 2292 0010 9F01     		.2byte	(.L156-.L157)/2
 2293 0012 9B01     		.2byte	(.L158-.L157)/2
 2294 0014 AD01     		.2byte	(.L196-.L157)/2
 2295 0016 9801     		.2byte	(.L159-.L157)/2
 2296 0018 9401     		.2byte	(.L160-.L157)/2
 2297 001a 8B01     		.2byte	(.L161-.L157)/2
 2298 001c 8501     		.2byte	(.L162-.L157)/2
 2299 001e 7F01     		.2byte	(.L163-.L157)/2
 2300 0020 7901     		.2byte	(.L164-.L157)/2
 2301 0022 7301     		.2byte	(.L165-.L157)/2
 2302 0024 6D01     		.2byte	(.L166-.L157)/2
 2303 0026 6701     		.2byte	(.L167-.L157)/2
 2304 0028 6101     		.2byte	(.L168-.L157)/2
 2305 002a 5E01     		.2byte	(.L169-.L157)/2
 2306 002c 5001     		.2byte	(.L170-.L157)/2
 2307 002e 3E01     		.2byte	(.L171-.L157)/2
 2308 0030 3901     		.2byte	(.L172-.L157)/2
 2309 0032 3401     		.2byte	(.L173-.L157)/2
 2310 0034 2F01     		.2byte	(.L174-.L157)/2
 2311 0036 2A01     		.2byte	(.L175-.L157)/2
 2312 0038 2501     		.2byte	(.L176-.L157)/2
 2313 003a 2001     		.2byte	(.L177-.L157)/2
 2314 003c 1B01     		.2byte	(.L178-.L157)/2
 2315 003e 1801     		.2byte	(.L179-.L157)/2
 2316 0040 1101     		.2byte	(.L180-.L157)/2
 2317 0042 0E01     		.2byte	(.L181-.L157)/2
 2318 0044 0901     		.2byte	(.L182-.L157)/2
 2319 0046 0401     		.2byte	(.L183-.L157)/2
ARM GAS  /tmp/ccT5mNbt.s 			page 61


 2320 0048 FF00     		.2byte	(.L184-.L157)/2
 2321 004a FA00     		.2byte	(.L185-.L157)/2
 2322 004c F500     		.2byte	(.L186-.L157)/2
 2323 004e F000     		.2byte	(.L187-.L157)/2
 2324 0050 ED00     		.2byte	(.L188-.L157)/2
 2325 0052 E500     		.2byte	(.L189-.L157)/2
 2326 0054 D900     		.2byte	(.L190-.L157)/2
 2327 0056 CD00     		.2byte	(.L191-.L157)/2
 2328 0058 C100     		.2byte	(.L192-.L157)/2
 2329 005a B500     		.2byte	(.L193-.L157)/2
 2330 005c AD01     		.2byte	(.L196-.L157)/2
 2331 005e AD01     		.2byte	(.L196-.L157)/2
 2332 0060 AD01     		.2byte	(.L196-.L157)/2
 2333 0062 AD01     		.2byte	(.L196-.L157)/2
 2334 0064 AD01     		.2byte	(.L196-.L157)/2
 2335 0066 AD01     		.2byte	(.L196-.L157)/2
 2336 0068 AD01     		.2byte	(.L196-.L157)/2
 2337 006a AD01     		.2byte	(.L196-.L157)/2
 2338 006c AD01     		.2byte	(.L196-.L157)/2
 2339 006e AD01     		.2byte	(.L196-.L157)/2
 2340 0070 AD01     		.2byte	(.L196-.L157)/2
 2341 0072 AD01     		.2byte	(.L196-.L157)/2
 2342 0074 AD01     		.2byte	(.L196-.L157)/2
 2343 0076 AD01     		.2byte	(.L196-.L157)/2
 2344 0078 AD01     		.2byte	(.L196-.L157)/2
 2345 007a AD01     		.2byte	(.L196-.L157)/2
 2346 007c AD01     		.2byte	(.L196-.L157)/2
 2347 007e AD01     		.2byte	(.L196-.L157)/2
 2348 0080 AD01     		.2byte	(.L196-.L157)/2
 2349 0082 AD01     		.2byte	(.L196-.L157)/2
 2350 0084 AD01     		.2byte	(.L196-.L157)/2
 2351 0086 AD01     		.2byte	(.L196-.L157)/2
 2352 0088 AD01     		.2byte	(.L196-.L157)/2
 2353 008a AD01     		.2byte	(.L196-.L157)/2
 2354 008c AD01     		.2byte	(.L196-.L157)/2
 2355 008e AD01     		.2byte	(.L196-.L157)/2
 2356 0090 AD01     		.2byte	(.L196-.L157)/2
 2357 0092 AD01     		.2byte	(.L196-.L157)/2
 2358 0094 AD01     		.2byte	(.L196-.L157)/2
 2359 0096 AD01     		.2byte	(.L196-.L157)/2
 2360 0098 AD01     		.2byte	(.L196-.L157)/2
 2361 009a AD01     		.2byte	(.L196-.L157)/2
 2362 009c AD01     		.2byte	(.L196-.L157)/2
 2363 009e AD01     		.2byte	(.L196-.L157)/2
 2364 00a0 AD01     		.2byte	(.L196-.L157)/2
 2365 00a2 AD01     		.2byte	(.L196-.L157)/2
 2366 00a4 AD01     		.2byte	(.L196-.L157)/2
 2367 00a6 AD01     		.2byte	(.L196-.L157)/2
 2368 00a8 AD01     		.2byte	(.L196-.L157)/2
 2369 00aa AD01     		.2byte	(.L196-.L157)/2
 2370 00ac AD01     		.2byte	(.L196-.L157)/2
 2371 00ae AD01     		.2byte	(.L196-.L157)/2
 2372 00b0 AD01     		.2byte	(.L196-.L157)/2
 2373 00b2 AD01     		.2byte	(.L196-.L157)/2
 2374 00b4 AD01     		.2byte	(.L196-.L157)/2
 2375 00b6 AD01     		.2byte	(.L196-.L157)/2
 2376 00b8 AD01     		.2byte	(.L196-.L157)/2
ARM GAS  /tmp/ccT5mNbt.s 			page 62


 2377 00ba AD01     		.2byte	(.L196-.L157)/2
 2378 00bc AD01     		.2byte	(.L196-.L157)/2
 2379 00be AD01     		.2byte	(.L196-.L157)/2
 2380 00c0 AD01     		.2byte	(.L196-.L157)/2
 2381 00c2 AD01     		.2byte	(.L196-.L157)/2
 2382 00c4 AD01     		.2byte	(.L196-.L157)/2
 2383 00c6 AD01     		.2byte	(.L196-.L157)/2
 2384 00c8 AD01     		.2byte	(.L196-.L157)/2
 2385 00ca AD01     		.2byte	(.L196-.L157)/2
 2386 00cc AD01     		.2byte	(.L196-.L157)/2
 2387 00ce AD01     		.2byte	(.L196-.L157)/2
 2388 00d0 AD01     		.2byte	(.L196-.L157)/2
 2389 00d2 AD01     		.2byte	(.L196-.L157)/2
 2390 00d4 AD01     		.2byte	(.L196-.L157)/2
 2391 00d6 AD01     		.2byte	(.L196-.L157)/2
 2392 00d8 AD01     		.2byte	(.L196-.L157)/2
 2393 00da AD01     		.2byte	(.L196-.L157)/2
 2394 00dc AD01     		.2byte	(.L196-.L157)/2
 2395 00de AD01     		.2byte	(.L196-.L157)/2
 2396 00e0 AD01     		.2byte	(.L196-.L157)/2
 2397 00e2 AD01     		.2byte	(.L196-.L157)/2
 2398 00e4 AD01     		.2byte	(.L196-.L157)/2
 2399 00e6 AD01     		.2byte	(.L196-.L157)/2
 2400 00e8 AD01     		.2byte	(.L196-.L157)/2
 2401 00ea AD01     		.2byte	(.L196-.L157)/2
 2402 00ec AD01     		.2byte	(.L196-.L157)/2
 2403 00ee AD01     		.2byte	(.L196-.L157)/2
 2404 00f0 AD01     		.2byte	(.L196-.L157)/2
 2405 00f2 AD01     		.2byte	(.L196-.L157)/2
 2406 00f4 AD01     		.2byte	(.L196-.L157)/2
 2407 00f6 AD01     		.2byte	(.L196-.L157)/2
 2408 00f8 AD01     		.2byte	(.L196-.L157)/2
 2409 00fa AD01     		.2byte	(.L196-.L157)/2
 2410 00fc AD01     		.2byte	(.L196-.L157)/2
 2411 00fe AD01     		.2byte	(.L196-.L157)/2
 2412 0100 AD01     		.2byte	(.L196-.L157)/2
 2413 0102 AD01     		.2byte	(.L196-.L157)/2
 2414 0104 AD01     		.2byte	(.L196-.L157)/2
 2415 0106 AD01     		.2byte	(.L196-.L157)/2
 2416 0108 AD01     		.2byte	(.L196-.L157)/2
 2417 010a AD01     		.2byte	(.L196-.L157)/2
 2418 010c AD01     		.2byte	(.L196-.L157)/2
 2419 010e AD01     		.2byte	(.L196-.L157)/2
 2420 0110 AD01     		.2byte	(.L196-.L157)/2
 2421 0112 AD01     		.2byte	(.L196-.L157)/2
 2422 0114 AD01     		.2byte	(.L196-.L157)/2
 2423 0116 AD01     		.2byte	(.L196-.L157)/2
 2424 0118 AD01     		.2byte	(.L196-.L157)/2
 2425 011a AD01     		.2byte	(.L196-.L157)/2
 2426 011c AD01     		.2byte	(.L196-.L157)/2
 2427 011e AD01     		.2byte	(.L196-.L157)/2
 2428 0120 AD01     		.2byte	(.L196-.L157)/2
 2429 0122 AD01     		.2byte	(.L196-.L157)/2
 2430 0124 AD01     		.2byte	(.L196-.L157)/2
 2431 0126 AD01     		.2byte	(.L196-.L157)/2
 2432 0128 AD01     		.2byte	(.L196-.L157)/2
 2433 012a AD01     		.2byte	(.L196-.L157)/2
ARM GAS  /tmp/ccT5mNbt.s 			page 63


 2434 012c AD01     		.2byte	(.L196-.L157)/2
 2435 012e AD01     		.2byte	(.L196-.L157)/2
 2436 0130 AD01     		.2byte	(.L196-.L157)/2
 2437 0132 AD01     		.2byte	(.L196-.L157)/2
 2438 0134 AD01     		.2byte	(.L196-.L157)/2
 2439 0136 AD01     		.2byte	(.L196-.L157)/2
 2440 0138 AD01     		.2byte	(.L196-.L157)/2
 2441 013a AD01     		.2byte	(.L196-.L157)/2
 2442 013c AD01     		.2byte	(.L196-.L157)/2
 2443 013e AD01     		.2byte	(.L196-.L157)/2
 2444 0140 AD01     		.2byte	(.L196-.L157)/2
 2445 0142 AD01     		.2byte	(.L196-.L157)/2
 2446 0144 AD01     		.2byte	(.L196-.L157)/2
 2447 0146 AD01     		.2byte	(.L196-.L157)/2
 2448 0148 AD01     		.2byte	(.L196-.L157)/2
 2449 014a AD01     		.2byte	(.L196-.L157)/2
 2450 014c AD01     		.2byte	(.L196-.L157)/2
 2451 014e AD01     		.2byte	(.L196-.L157)/2
 2452 0150 AD01     		.2byte	(.L196-.L157)/2
 2453 0152 AD01     		.2byte	(.L196-.L157)/2
 2454 0154 AD01     		.2byte	(.L196-.L157)/2
 2455 0156 AD01     		.2byte	(.L196-.L157)/2
 2456 0158 AD01     		.2byte	(.L196-.L157)/2
 2457 015a AD01     		.2byte	(.L196-.L157)/2
 2458 015c AD01     		.2byte	(.L196-.L157)/2
 2459 015e AD01     		.2byte	(.L196-.L157)/2
 2460 0160 A900     		.2byte	(.L194-.L157)/2
 2461              		.p2align 1
 2462              	.L194:
 792:dm/dm42_menu.cc ****   //void file_selection_screen(const char * title, const char * base_dir, const char * ext, file_se
 793:dm/dm42_menu.cc ****   case MI_LOAD_PGM:
 794:dm/dm42_menu.cc ****     //pgm_import();
 795:dm/dm42_menu.cc ****     ret = file_selection_screen("Program Import", PGM_DIR, PGM_EXT, pgm_import_enter, 0, 0, NULL);
 796:dm/dm42_menu.cc ****     if (ret == MRET_EXIT) ret = 0;
 797:dm/dm42_menu.cc ****     break;
 798:dm/dm42_menu.cc ****   case MI_SAVE_PGM:
 799:dm/dm42_menu.cc ****     pgm_export();
 800:dm/dm42_menu.cc ****     break;
 801:dm/dm42_menu.cc ****   case MI_LOAD_STATE:
 802:dm/dm42_menu.cc ****     ret = file_selection_screen("Load Calculator State", STATE_DIR, STATE_EXT, load_statefile, 0, 0
 803:dm/dm42_menu.cc ****     if (ret == MRET_EXIT) ret = 0;
 804:dm/dm42_menu.cc ****     break;
 805:dm/dm42_menu.cc ****   case MI_SAVE_STATE:
 806:dm/dm42_menu.cc ****     // Don't pass through if the power is insufficient  
 807:dm/dm42_menu.cc ****     if ( power_check_screen() ) break;
 808:dm/dm42_menu.cc ****     ret = file_selection_screen("Save Calculator State", STATE_DIR, STATE_EXT, save_statefile, 1, 1
 809:dm/dm42_menu.cc ****     if (ret == MRET_EXIT) ret = 0;
 810:dm/dm42_menu.cc ****     break;
 811:dm/dm42_menu.cc **** 
 812:dm/dm42_menu.cc ****   case MI_CLEAN_RESET:
 813:dm/dm42_menu.cc ****     run_reset_state_file();
 814:dm/dm42_menu.cc ****     //ret = MRET_EXIT;
 815:dm/dm42_menu.cc ****     break;
 816:dm/dm42_menu.cc **** 
 817:dm/dm42_menu.cc ****   //case MI_SAVE_STAT:
 818:dm/dm42_menu.cc ****   //  ret = MRET_SAVESTATE;
 819:dm/dm42_menu.cc ****   //  break;
ARM GAS  /tmp/ccT5mNbt.s 			page 64


 820:dm/dm42_menu.cc **** 
 821:dm/dm42_menu.cc **** 
 822:dm/dm42_menu.cc ****   case MI_FILE:
 823:dm/dm42_menu.cc ****     ret = handle_menu(&MID_FILE,MENU_ADD, 0);
 824:dm/dm42_menu.cc ****     break;
 825:dm/dm42_menu.cc ****   case MI_STATEFILE:
 826:dm/dm42_menu.cc ****     ret = handle_menu(&MID_STATEFILE,MENU_ADD, 0);
 827:dm/dm42_menu.cc ****     break;
 828:dm/dm42_menu.cc **** 
 829:dm/dm42_menu.cc ****   case MI_MSC:
 830:dm/dm42_menu.cc ****     // Flush printer buffers before entering MSC
 831:dm/dm42_menu.cc ****     prtof_buf_flush(PRTOF_GRAPHICS, PRTOF_FULL_FLUSH);
 2463              		.loc 1 831 0
 2464 0162 0121     		movs	r1, #1
 2465 0164 0846     		mov	r0, r1
 2466 0166 FFF7FEFF 		bl	prtof_buf_flush
 2467              	.LVL298:
 832:dm/dm42_menu.cc ****     prtof_buf_flush(PRTOF_TEXT, PRTOF_FULL_FLUSH);
 2468              		.loc 1 832 0
 2469 016a 0020     		movs	r0, #0
 2470 016c 0121     		movs	r1, #1
 2471 016e FFF7FEFF 		bl	prtof_buf_flush
 2472              	.LVL299:
 833:dm/dm42_menu.cc ****     ret = MRET_UNIMPL; // Leave the action to core
 2473              		.loc 1 833 0
 2474 0172 4FF0FF30 		mov	r0, #-1
 2475              	.LVL300:
 2476              	.L154:
 834:dm/dm42_menu.cc ****     break;
 835:dm/dm42_menu.cc **** 
 836:dm/dm42_menu.cc ****   case MI_PRINT_MENU:
 837:dm/dm42_menu.cc ****     ret = handle_menu(&MID_PRINT,MENU_ADD, 0);
 838:dm/dm42_menu.cc ****     break;
 839:dm/dm42_menu.cc **** 
 840:dm/dm42_menu.cc ****   case MI_PRTOF_GRAPH:
 841:dm/dm42_menu.cc ****     set_print_to_file(PRTOF_GRAPHICS, !is_print_to_file(PRTOF_GRAPHICS), 1);
 842:dm/dm42_menu.cc ****     break;
 843:dm/dm42_menu.cc ****   case MI_PRTOF_TEXT:
 844:dm/dm42_menu.cc ****     set_print_to_file(PRTOF_TEXT, !is_print_to_file(PRTOF_TEXT), 1);
 845:dm/dm42_menu.cc ****     break;
 846:dm/dm42_menu.cc ****   case MI_PRTOF_NOIR:
 847:dm/dm42_menu.cc ****     set_print_to_file(PRTOF_NOIR, !is_print_to_file(PRTOF_NOIR), 1);
 848:dm/dm42_menu.cc ****     break;
 849:dm/dm42_menu.cc ****   case MI_PRTOF_GR_IN_TXT:
 850:dm/dm42_menu.cc ****     set_print_to_file(PRTOF_GR_IN_TXT, !is_print_to_file(PRTOF_GR_IN_TXT), 1);
 851:dm/dm42_menu.cc ****     break;
 852:dm/dm42_menu.cc **** 
 853:dm/dm42_menu.cc ****   /* Stack */
 854:dm/dm42_menu.cc ****   case MI_STACK_CONFIG:
 855:dm/dm42_menu.cc ****     handle_menu(&MID_STACK_CONFIG,MENU_ADD,stack_menu_index());
 856:dm/dm42_menu.cc ****     break;
 857:dm/dm42_menu.cc ****   case MI_STACK_XYZTL:
 858:dm/dm42_menu.cc ****     set_stack_layout(STACK_XYZTL);
 859:dm/dm42_menu.cc ****     ret = MRET_EXIT;
 860:dm/dm42_menu.cc ****     break;
 861:dm/dm42_menu.cc ****   case MI_STACK_XYZTA:
 862:dm/dm42_menu.cc ****     set_stack_layout(STACK_XYZTA);
ARM GAS  /tmp/ccT5mNbt.s 			page 65


 863:dm/dm42_menu.cc ****     ret = MRET_EXIT;
 864:dm/dm42_menu.cc ****     break;
 865:dm/dm42_menu.cc ****   case MI_STACK_XYZT:
 866:dm/dm42_menu.cc ****     set_stack_layout(STACK_XYZT);
 867:dm/dm42_menu.cc ****     ret = MRET_EXIT;
 868:dm/dm42_menu.cc ****     break;
 869:dm/dm42_menu.cc ****   case MI_STACK_XYL:
 870:dm/dm42_menu.cc ****     set_stack_layout(STACK_XYL);
 871:dm/dm42_menu.cc ****     ret = MRET_EXIT;
 872:dm/dm42_menu.cc ****     break;
 873:dm/dm42_menu.cc ****   case MI_STACK_XYA:
 874:dm/dm42_menu.cc ****     set_stack_layout(STACK_XYA);
 875:dm/dm42_menu.cc ****     ret = MRET_EXIT;
 876:dm/dm42_menu.cc ****     break;
 877:dm/dm42_menu.cc ****   case MI_STACK_XY:
 878:dm/dm42_menu.cc ****     set_stack_layout(STACK_XY);
 879:dm/dm42_menu.cc ****     ret = MRET_EXIT;
 880:dm/dm42_menu.cc ****     break;
 881:dm/dm42_menu.cc ****   case MI_STACK_LXYZT:
 882:dm/dm42_menu.cc ****     set_stack_layout(STACK_LXYZT);
 883:dm/dm42_menu.cc ****     ret = MRET_EXIT;
 884:dm/dm42_menu.cc ****     break;
 885:dm/dm42_menu.cc **** 
 886:dm/dm42_menu.cc ****   /* Top Bar */
 887:dm/dm42_menu.cc ****   case MI_TOPBAR_MENU:
 888:dm/dm42_menu.cc ****     ret = handle_menu(&MID_TOPBAR, MENU_ADD, 0);
 889:dm/dm42_menu.cc ****     break;
 890:dm/dm42_menu.cc ****   case MI_DISP_STATFN:   toggle_disp(DISP_STATFN);   break;
 891:dm/dm42_menu.cc ****   case MI_DISP_DOW:      toggle_disp(DISP_DOW);      break;
 892:dm/dm42_menu.cc ****   case MI_DISP_DATE:     toggle_disp(DISP_DATE);     break;
 893:dm/dm42_menu.cc ****   case MI_DISP_DATE_SEP: toggle_disp(DISP_DATE_SEP); break;
 894:dm/dm42_menu.cc ****   case MI_DISP_SHORTMON: toggle_disp(DISP_SHORTMON); break;
 895:dm/dm42_menu.cc ****   case MI_DISP_TIME:     toggle_disp(DISP_TIME);     break;
 896:dm/dm42_menu.cc ****   case MI_DISP_VOLTAGE:  toggle_disp(DISP_VOLTAGE);  break;
 897:dm/dm42_menu.cc **** 
 898:dm/dm42_menu.cc ****   case MI_SETTINGS:
 899:dm/dm42_menu.cc ****     ret = handle_menu(&MID_SETTINGS,MENU_ADD, 0);
 900:dm/dm42_menu.cc ****     break;
 901:dm/dm42_menu.cc **** 
 902:dm/dm42_menu.cc ****   case MI_STACK_AREA:
 903:dm/dm42_menu.cc ****     ret = handle_menu(&MID_STACK_AREA,MENU_ADD, 0);
 904:dm/dm42_menu.cc ****     break;
 905:dm/dm42_menu.cc **** 
 906:dm/dm42_menu.cc ****   case MI_SA_REG_X:  inc_reg_font_offset(LINE_REG_X); break;
 907:dm/dm42_menu.cc ****   case MI_SA_REG_Y:  inc_reg_font_offset(LINE_REG_Y); break;
 908:dm/dm42_menu.cc ****   case MI_SA_REG_Z:  inc_reg_font_offset(LINE_REG_Z); break;
 909:dm/dm42_menu.cc ****   case MI_SA_REG_T:  inc_reg_font_offset(LINE_REG_T); break;
 910:dm/dm42_menu.cc ****   case MI_SA_REG_L:  inc_reg_font_offset(LINE_REG_L); break;
 911:dm/dm42_menu.cc ****   case MI_SA_REG_A:  inc_reg_font_offset(LINE_REG_A); break;
 912:dm/dm42_menu.cc **** 
 913:dm/dm42_menu.cc **** 
 914:dm/dm42_menu.cc ****   case MI_ABOUT_PGM:
 915:dm/dm42_menu.cc ****     lcd_for_dm42(DISP_ABOUT);
 916:dm/dm42_menu.cc ****     wait_for_key_press();
 917:dm/dm42_menu.cc ****     break;
 918:dm/dm42_menu.cc **** 
 919:dm/dm42_menu.cc ****    default:
ARM GAS  /tmp/ccT5mNbt.s 			page 66


 920:dm/dm42_menu.cc ****     ret = MRET_UNIMPL;
 921:dm/dm42_menu.cc ****     break;
 922:dm/dm42_menu.cc ****   }
 923:dm/dm42_menu.cc **** 
 924:dm/dm42_menu.cc ****   return ret;
 925:dm/dm42_menu.cc **** }
 2477              		.loc 1 925 0
 2478 0176 04B0     		add	sp, sp, #16
 2479              		.cfi_remember_state
 2480              		.cfi_def_cfa_offset 8
 2481              		@ sp needed
 2482 0178 10BD     		pop	{r4, pc}
 2483              	.LVL301:
 2484              	.L193:
 2485              		.cfi_restore_state
 847:dm/dm42_menu.cc ****     break;
 2486              		.loc 1 847 0
 2487 017a 0720     		movs	r0, #7
 2488 017c FFF7FEFF 		bl	is_print_to_file
 2489              	.LVL302:
 2490 0180 B0FA80F1 		clz	r1, r0
 2491 0184 4909     		lsrs	r1, r1, #5
 2492 0186 0720     		movs	r0, #7
 2493 0188 0122     		movs	r2, #1
 2494 018a FFF7FEFF 		bl	set_print_to_file
 2495              	.LVL303:
 789:dm/dm42_menu.cc **** 
 2496              		.loc 1 789 0
 2497 018e 0020     		movs	r0, #0
 848:dm/dm42_menu.cc ****   case MI_PRTOF_GR_IN_TXT:
 2498              		.loc 1 848 0
 2499 0190 F1E7     		b	.L154
 2500              	.L192:
 850:dm/dm42_menu.cc ****     break;
 2501              		.loc 1 850 0
 2502 0192 0620     		movs	r0, #6
 2503 0194 FFF7FEFF 		bl	is_print_to_file
 2504              	.LVL304:
 2505 0198 B0FA80F1 		clz	r1, r0
 2506 019c 4909     		lsrs	r1, r1, #5
 2507 019e 0620     		movs	r0, #6
 2508 01a0 0122     		movs	r2, #1
 2509 01a2 FFF7FEFF 		bl	set_print_to_file
 2510              	.LVL305:
 789:dm/dm42_menu.cc **** 
 2511              		.loc 1 789 0
 2512 01a6 0020     		movs	r0, #0
 851:dm/dm42_menu.cc **** 
 2513              		.loc 1 851 0
 2514 01a8 E5E7     		b	.L154
 2515              	.L191:
 844:dm/dm42_menu.cc ****     break;
 2516              		.loc 1 844 0
 2517 01aa 0020     		movs	r0, #0
 2518 01ac FFF7FEFF 		bl	is_print_to_file
 2519              	.LVL306:
 2520 01b0 B0FA80F1 		clz	r1, r0
ARM GAS  /tmp/ccT5mNbt.s 			page 67


 2521 01b4 4909     		lsrs	r1, r1, #5
 2522 01b6 0020     		movs	r0, #0
 2523 01b8 0122     		movs	r2, #1
 2524 01ba FFF7FEFF 		bl	set_print_to_file
 2525              	.LVL307:
 789:dm/dm42_menu.cc **** 
 2526              		.loc 1 789 0
 2527 01be 0020     		movs	r0, #0
 845:dm/dm42_menu.cc ****   case MI_PRTOF_NOIR:
 2528              		.loc 1 845 0
 2529 01c0 D9E7     		b	.L154
 2530              	.L190:
 841:dm/dm42_menu.cc ****     break;
 2531              		.loc 1 841 0
 2532 01c2 0120     		movs	r0, #1
 2533 01c4 FFF7FEFF 		bl	is_print_to_file
 2534              	.LVL308:
 2535 01c8 0122     		movs	r2, #1
 2536 01ca B0FA80F1 		clz	r1, r0
 2537 01ce 4909     		lsrs	r1, r1, #5
 2538 01d0 1046     		mov	r0, r2
 2539 01d2 FFF7FEFF 		bl	set_print_to_file
 2540              	.LVL309:
 789:dm/dm42_menu.cc **** 
 2541              		.loc 1 789 0
 2542 01d6 0020     		movs	r0, #0
 842:dm/dm42_menu.cc ****   case MI_PRTOF_TEXT:
 2543              		.loc 1 842 0
 2544 01d8 CDE7     		b	.L154
 2545              	.L189:
 837:dm/dm42_menu.cc ****     break;
 2546              		.loc 1 837 0
 2547 01da 654B     		ldr	r3, .L206
 2548 01dc 6548     		ldr	r0, .L206+4
 2549              	.L205:
 903:dm/dm42_menu.cc ****     break;
 2550              		.loc 1 903 0
 2551 01de 0022     		movs	r2, #0
 2552 01e0 0121     		movs	r1, #1
 2553              		.loc 1 925 0
 2554 01e2 04B0     		add	sp, sp, #16
 2555              		.cfi_remember_state
 2556              		.cfi_def_cfa_offset 8
 2557              		@ sp needed
 2558 01e4 BDE81040 		pop	{r4, lr}
 2559              		.cfi_restore 14
 2560              		.cfi_restore 4
 2561              		.cfi_def_cfa_offset 0
 903:dm/dm42_menu.cc ****     break;
 2562              		.loc 1 903 0
 2563 01e8 1847     		bx	r3
 2564              	.LVL310:
 2565              	.L188:
 2566              		.cfi_restore_state
 888:dm/dm42_menu.cc ****     break;
 2567              		.loc 1 888 0
 2568 01ea 614B     		ldr	r3, .L206
ARM GAS  /tmp/ccT5mNbt.s 			page 68


 2569 01ec 6248     		ldr	r0, .L206+8
 2570 01ee F6E7     		b	.L205
 2571              	.L187:
 911:dm/dm42_menu.cc **** 
 2572              		.loc 1 911 0
 2573 01f0 0520     		movs	r0, #5
 2574 01f2 FFF7FEFF 		bl	inc_reg_font_offset
 2575              	.LVL311:
 2576              	.L204:
 789:dm/dm42_menu.cc **** 
 2577              		.loc 1 789 0
 2578 01f6 0020     		movs	r0, #0
 911:dm/dm42_menu.cc **** 
 2579              		.loc 1 911 0
 2580 01f8 BDE7     		b	.L154
 2581              	.LVL312:
 2582              	.L186:
 910:dm/dm42_menu.cc ****   case MI_SA_REG_A:  inc_reg_font_offset(LINE_REG_A); break;
 2583              		.loc 1 910 0
 2584 01fa 0420     		movs	r0, #4
 2585 01fc FFF7FEFF 		bl	inc_reg_font_offset
 2586              	.LVL313:
 789:dm/dm42_menu.cc **** 
 2587              		.loc 1 789 0
 2588 0200 0020     		movs	r0, #0
 910:dm/dm42_menu.cc ****   case MI_SA_REG_A:  inc_reg_font_offset(LINE_REG_A); break;
 2589              		.loc 1 910 0
 2590 0202 B8E7     		b	.L154
 2591              	.L185:
 909:dm/dm42_menu.cc ****   case MI_SA_REG_L:  inc_reg_font_offset(LINE_REG_L); break;
 2592              		.loc 1 909 0
 2593 0204 0320     		movs	r0, #3
 2594 0206 FFF7FEFF 		bl	inc_reg_font_offset
 2595              	.LVL314:
 789:dm/dm42_menu.cc **** 
 2596              		.loc 1 789 0
 2597 020a 0020     		movs	r0, #0
 909:dm/dm42_menu.cc ****   case MI_SA_REG_L:  inc_reg_font_offset(LINE_REG_L); break;
 2598              		.loc 1 909 0
 2599 020c B3E7     		b	.L154
 2600              	.L184:
 908:dm/dm42_menu.cc ****   case MI_SA_REG_T:  inc_reg_font_offset(LINE_REG_T); break;
 2601              		.loc 1 908 0
 2602 020e 0220     		movs	r0, #2
 2603 0210 FFF7FEFF 		bl	inc_reg_font_offset
 2604              	.LVL315:
 789:dm/dm42_menu.cc **** 
 2605              		.loc 1 789 0
 2606 0214 0020     		movs	r0, #0
 908:dm/dm42_menu.cc ****   case MI_SA_REG_T:  inc_reg_font_offset(LINE_REG_T); break;
 2607              		.loc 1 908 0
 2608 0216 AEE7     		b	.L154
 2609              	.L183:
 907:dm/dm42_menu.cc ****   case MI_SA_REG_Z:  inc_reg_font_offset(LINE_REG_Z); break;
 2610              		.loc 1 907 0
 2611 0218 0120     		movs	r0, #1
 2612 021a FFF7FEFF 		bl	inc_reg_font_offset
ARM GAS  /tmp/ccT5mNbt.s 			page 69


 2613              	.LVL316:
 789:dm/dm42_menu.cc **** 
 2614              		.loc 1 789 0
 2615 021e 0020     		movs	r0, #0
 907:dm/dm42_menu.cc ****   case MI_SA_REG_Z:  inc_reg_font_offset(LINE_REG_Z); break;
 2616              		.loc 1 907 0
 2617 0220 A9E7     		b	.L154
 2618              	.L182:
 906:dm/dm42_menu.cc ****   case MI_SA_REG_Y:  inc_reg_font_offset(LINE_REG_Y); break;
 2619              		.loc 1 906 0
 2620 0222 0020     		movs	r0, #0
 2621 0224 FFF7FEFF 		bl	inc_reg_font_offset
 2622              	.LVL317:
 789:dm/dm42_menu.cc **** 
 2623              		.loc 1 789 0
 2624 0228 0020     		movs	r0, #0
 906:dm/dm42_menu.cc ****   case MI_SA_REG_Y:  inc_reg_font_offset(LINE_REG_Y); break;
 2625              		.loc 1 906 0
 2626 022a A4E7     		b	.L154
 2627              	.L181:
 903:dm/dm42_menu.cc ****     break;
 2628              		.loc 1 903 0
 2629 022c 504B     		ldr	r3, .L206
 2630 022e 5348     		ldr	r0, .L206+12
 2631 0230 D5E7     		b	.L205
 2632              	.L180:
 915:dm/dm42_menu.cc ****     wait_for_key_press();
 2633              		.loc 1 915 0
 2634 0232 0820     		movs	r0, #8
 2635 0234 FFF7FEFF 		bl	lcd_for_dm42
 2636              	.LVL318:
 916:dm/dm42_menu.cc ****     break;
 2637              		.loc 1 916 0
 2638 0238 514B     		ldr	r3, .L206+16
 2639 023a 9847     		blx	r3
 2640              	.LVL319:
 789:dm/dm42_menu.cc **** 
 2641              		.loc 1 789 0
 2642 023c 0020     		movs	r0, #0
 917:dm/dm42_menu.cc **** 
 2643              		.loc 1 917 0
 2644 023e 9AE7     		b	.L154
 2645              	.L179:
 899:dm/dm42_menu.cc ****     break;
 2646              		.loc 1 899 0
 2647 0240 4B4B     		ldr	r3, .L206
 2648 0242 5048     		ldr	r0, .L206+20
 2649 0244 CBE7     		b	.L205
 2650              	.L178:
 896:dm/dm42_menu.cc **** 
 2651              		.loc 1 896 0
 2652 0246 0720     		movs	r0, #7
 2653 0248 FFF7FEFF 		bl	toggle_disp
 2654              	.LVL320:
 789:dm/dm42_menu.cc **** 
 2655              		.loc 1 789 0
 2656 024c 0020     		movs	r0, #0
ARM GAS  /tmp/ccT5mNbt.s 			page 70


 896:dm/dm42_menu.cc **** 
 2657              		.loc 1 896 0
 2658 024e 92E7     		b	.L154
 2659              	.L177:
 895:dm/dm42_menu.cc ****   case MI_DISP_VOLTAGE:  toggle_disp(DISP_VOLTAGE);  break;
 2660              		.loc 1 895 0
 2661 0250 0620     		movs	r0, #6
 2662 0252 FFF7FEFF 		bl	toggle_disp
 2663              	.LVL321:
 789:dm/dm42_menu.cc **** 
 2664              		.loc 1 789 0
 2665 0256 0020     		movs	r0, #0
 895:dm/dm42_menu.cc ****   case MI_DISP_VOLTAGE:  toggle_disp(DISP_VOLTAGE);  break;
 2666              		.loc 1 895 0
 2667 0258 8DE7     		b	.L154
 2668              	.L176:
 894:dm/dm42_menu.cc ****   case MI_DISP_TIME:     toggle_disp(DISP_TIME);     break;
 2669              		.loc 1 894 0
 2670 025a 0520     		movs	r0, #5
 2671 025c FFF7FEFF 		bl	toggle_disp
 2672              	.LVL322:
 789:dm/dm42_menu.cc **** 
 2673              		.loc 1 789 0
 2674 0260 0020     		movs	r0, #0
 894:dm/dm42_menu.cc ****   case MI_DISP_TIME:     toggle_disp(DISP_TIME);     break;
 2675              		.loc 1 894 0
 2676 0262 88E7     		b	.L154
 2677              	.L175:
 893:dm/dm42_menu.cc ****   case MI_DISP_SHORTMON: toggle_disp(DISP_SHORTMON); break;
 2678              		.loc 1 893 0
 2679 0264 0420     		movs	r0, #4
 2680 0266 FFF7FEFF 		bl	toggle_disp
 2681              	.LVL323:
 789:dm/dm42_menu.cc **** 
 2682              		.loc 1 789 0
 2683 026a 0020     		movs	r0, #0
 893:dm/dm42_menu.cc ****   case MI_DISP_SHORTMON: toggle_disp(DISP_SHORTMON); break;
 2684              		.loc 1 893 0
 2685 026c 83E7     		b	.L154
 2686              	.L174:
 892:dm/dm42_menu.cc ****   case MI_DISP_DATE_SEP: toggle_disp(DISP_DATE_SEP); break;
 2687              		.loc 1 892 0
 2688 026e 0320     		movs	r0, #3
 2689 0270 FFF7FEFF 		bl	toggle_disp
 2690              	.LVL324:
 789:dm/dm42_menu.cc **** 
 2691              		.loc 1 789 0
 2692 0274 0020     		movs	r0, #0
 892:dm/dm42_menu.cc ****   case MI_DISP_DATE_SEP: toggle_disp(DISP_DATE_SEP); break;
 2693              		.loc 1 892 0
 2694 0276 7EE7     		b	.L154
 2695              	.L173:
 891:dm/dm42_menu.cc ****   case MI_DISP_DATE:     toggle_disp(DISP_DATE);     break;
 2696              		.loc 1 891 0
 2697 0278 0220     		movs	r0, #2
 2698 027a FFF7FEFF 		bl	toggle_disp
 2699              	.LVL325:
ARM GAS  /tmp/ccT5mNbt.s 			page 71


 789:dm/dm42_menu.cc **** 
 2700              		.loc 1 789 0
 2701 027e 0020     		movs	r0, #0
 891:dm/dm42_menu.cc ****   case MI_DISP_DATE:     toggle_disp(DISP_DATE);     break;
 2702              		.loc 1 891 0
 2703 0280 79E7     		b	.L154
 2704              	.L172:
 890:dm/dm42_menu.cc ****   case MI_DISP_DOW:      toggle_disp(DISP_DOW);      break;
 2705              		.loc 1 890 0
 2706 0282 0120     		movs	r0, #1
 2707 0284 FFF7FEFF 		bl	toggle_disp
 2708              	.LVL326:
 789:dm/dm42_menu.cc **** 
 2709              		.loc 1 789 0
 2710 0288 0020     		movs	r0, #0
 890:dm/dm42_menu.cc ****   case MI_DISP_DOW:      toggle_disp(DISP_DOW);      break;
 2711              		.loc 1 890 0
 2712 028a 74E7     		b	.L154
 2713              	.L171:
 807:dm/dm42_menu.cc ****     ret = file_selection_screen("Save Calculator State", STATE_DIR, STATE_EXT, save_statefile, 1, 1
 2714              		.loc 1 807 0
 2715 028c 3E4B     		ldr	r3, .L206+24
 2716 028e 9847     		blx	r3
 2717              	.LVL327:
 2718 0290 0028     		cmp	r0, #0
 2719 0292 B0D1     		bne	.L204
 808:dm/dm42_menu.cc ****     if (ret == MRET_EXIT) ret = 0;
 2720              		.loc 1 808 0
 2721 0294 0123     		movs	r3, #1
 2722 0296 0290     		str	r0, [sp, #8]
 2723 0298 0193     		str	r3, [sp, #4]
 2724 029a 0093     		str	r3, [sp]
 2725 029c 3B4C     		ldr	r4, .L206+28
 2726 029e 3C4B     		ldr	r3, .L206+32
 2727 02a0 3C4A     		ldr	r2, .L206+36
 2728 02a2 3D49     		ldr	r1, .L206+40
 2729 02a4 3D48     		ldr	r0, .L206+44
 2730 02a6 A047     		blx	r4
 2731              	.LVL328:
 809:dm/dm42_menu.cc ****     break;
 2732              		.loc 1 809 0
 2733 02a8 831C     		adds	r3, r0, #2
 2734 02aa 7FF464AF 		bne	.L154
 2735 02ae A2E7     		b	.L204
 2736              	.LVL329:
 2737              	.L170:
 802:dm/dm42_menu.cc ****     if (ret == MRET_EXIT) ret = 0;
 2738              		.loc 1 802 0
 2739 02b0 0023     		movs	r3, #0
 2740 02b2 0293     		str	r3, [sp, #8]
 2741 02b4 0193     		str	r3, [sp, #4]
 2742 02b6 0093     		str	r3, [sp]
 2743 02b8 364A     		ldr	r2, .L206+36
 2744 02ba 344C     		ldr	r4, .L206+28
 2745 02bc 384B     		ldr	r3, .L206+48
 2746 02be 3649     		ldr	r1, .L206+40
 2747 02c0 3848     		ldr	r0, .L206+52
ARM GAS  /tmp/ccT5mNbt.s 			page 72


 2748 02c2 A047     		blx	r4
 2749              	.LVL330:
 803:dm/dm42_menu.cc ****     break;
 2750              		.loc 1 803 0
 2751 02c4 821C     		adds	r2, r0, #2
 2752 02c6 7FF456AF 		bne	.L154
 2753 02ca 94E7     		b	.L204
 2754              	.LVL331:
 2755              	.L169:
 826:dm/dm42_menu.cc ****     break;
 2756              		.loc 1 826 0
 2757 02cc 284B     		ldr	r3, .L206
 2758 02ce 3648     		ldr	r0, .L206+56
 2759 02d0 85E7     		b	.L205
 2760              	.L168:
 882:dm/dm42_menu.cc ****     ret = MRET_EXIT;
 2761              		.loc 1 882 0
 2762 02d2 0F20     		movs	r0, #15
 2763 02d4 FFF7FEFF 		bl	set_stack_layout
 2764              	.LVL332:
 883:dm/dm42_menu.cc ****     break;
 2765              		.loc 1 883 0
 2766 02d8 6FF00100 		mvn	r0, #1
 884:dm/dm42_menu.cc **** 
 2767              		.loc 1 884 0
 2768 02dc 4BE7     		b	.L154
 2769              	.LVL333:
 2770              	.L167:
 878:dm/dm42_menu.cc ****     ret = MRET_EXIT;
 2771              		.loc 1 878 0
 2772 02de 0220     		movs	r0, #2
 2773 02e0 FFF7FEFF 		bl	set_stack_layout
 2774              	.LVL334:
 879:dm/dm42_menu.cc ****     break;
 2775              		.loc 1 879 0
 2776 02e4 6FF00100 		mvn	r0, #1
 880:dm/dm42_menu.cc ****   case MI_STACK_LXYZT:
 2777              		.loc 1 880 0
 2778 02e8 45E7     		b	.L154
 2779              	.LVL335:
 2780              	.L166:
 874:dm/dm42_menu.cc ****     ret = MRET_EXIT;
 2781              		.loc 1 874 0
 2782 02ea 2220     		movs	r0, #34
 2783 02ec FFF7FEFF 		bl	set_stack_layout
 2784              	.LVL336:
 875:dm/dm42_menu.cc ****     break;
 2785              		.loc 1 875 0
 2786 02f0 6FF00100 		mvn	r0, #1
 876:dm/dm42_menu.cc ****   case MI_STACK_XY:
 2787              		.loc 1 876 0
 2788 02f4 3FE7     		b	.L154
 2789              	.LVL337:
 2790              	.L165:
 870:dm/dm42_menu.cc ****     ret = MRET_EXIT;
 2791              		.loc 1 870 0
 2792 02f6 1220     		movs	r0, #18
ARM GAS  /tmp/ccT5mNbt.s 			page 73


 2793 02f8 FFF7FEFF 		bl	set_stack_layout
 2794              	.LVL338:
 871:dm/dm42_menu.cc ****     break;
 2795              		.loc 1 871 0
 2796 02fc 6FF00100 		mvn	r0, #1
 872:dm/dm42_menu.cc ****   case MI_STACK_XYA:
 2797              		.loc 1 872 0
 2798 0300 39E7     		b	.L154
 2799              	.LVL339:
 2800              	.L164:
 866:dm/dm42_menu.cc ****     ret = MRET_EXIT;
 2801              		.loc 1 866 0
 2802 0302 0E20     		movs	r0, #14
 2803 0304 FFF7FEFF 		bl	set_stack_layout
 2804              	.LVL340:
 867:dm/dm42_menu.cc ****     break;
 2805              		.loc 1 867 0
 2806 0308 6FF00100 		mvn	r0, #1
 868:dm/dm42_menu.cc ****   case MI_STACK_XYL:
 2807              		.loc 1 868 0
 2808 030c 33E7     		b	.L154
 2809              	.LVL341:
 2810              	.L163:
 862:dm/dm42_menu.cc ****     ret = MRET_EXIT;
 2811              		.loc 1 862 0
 2812 030e 2E20     		movs	r0, #46
 2813 0310 FFF7FEFF 		bl	set_stack_layout
 2814              	.LVL342:
 863:dm/dm42_menu.cc ****     break;
 2815              		.loc 1 863 0
 2816 0314 6FF00100 		mvn	r0, #1
 864:dm/dm42_menu.cc ****   case MI_STACK_XYZT:
 2817              		.loc 1 864 0
 2818 0318 2DE7     		b	.L154
 2819              	.LVL343:
 2820              	.L162:
 858:dm/dm42_menu.cc ****     ret = MRET_EXIT;
 2821              		.loc 1 858 0
 2822 031a 1E20     		movs	r0, #30
 2823 031c FFF7FEFF 		bl	set_stack_layout
 2824              	.LVL344:
 859:dm/dm42_menu.cc ****     break;
 2825              		.loc 1 859 0
 2826 0320 6FF00100 		mvn	r0, #1
 860:dm/dm42_menu.cc ****   case MI_STACK_XYZTA:
 2827              		.loc 1 860 0
 2828 0324 27E7     		b	.L154
 2829              	.LVL345:
 2830              	.L161:
 855:dm/dm42_menu.cc ****     break;
 2831              		.loc 1 855 0
 2832 0326 FFF7FEFF 		bl	stack_menu_index
 2833              	.LVL346:
 2834 032a 114B     		ldr	r3, .L206
 2835 032c 0246     		mov	r2, r0
 2836 032e 0121     		movs	r1, #1
 2837 0330 1E48     		ldr	r0, .L206+60
ARM GAS  /tmp/ccT5mNbt.s 			page 74


 2838 0332 9847     		blx	r3
 2839              	.LVL347:
 789:dm/dm42_menu.cc **** 
 2840              		.loc 1 789 0
 2841 0334 0020     		movs	r0, #0
 856:dm/dm42_menu.cc ****   case MI_STACK_XYZTL:
 2842              		.loc 1 856 0
 2843 0336 1EE7     		b	.L154
 2844              	.L160:
 813:dm/dm42_menu.cc ****     //ret = MRET_EXIT;
 2845              		.loc 1 813 0
 2846 0338 FFF7FEFF 		bl	run_reset_state_file
 2847              	.LVL348:
 789:dm/dm42_menu.cc **** 
 2848              		.loc 1 789 0
 2849 033c 0020     		movs	r0, #0
 815:dm/dm42_menu.cc **** 
 2850              		.loc 1 815 0
 2851 033e 1AE7     		b	.L154
 2852              	.L159:
 823:dm/dm42_menu.cc ****     break;
 2853              		.loc 1 823 0
 2854 0340 0B4B     		ldr	r3, .L206
 2855 0342 1B48     		ldr	r0, .L206+64
 2856 0344 4BE7     		b	.L205
 2857              	.L158:
 799:dm/dm42_menu.cc ****     break;
 2858              		.loc 1 799 0
 2859 0346 FFF7FEFF 		bl	pgm_export
 2860              	.LVL349:
 789:dm/dm42_menu.cc **** 
 2861              		.loc 1 789 0
 2862 034a 0020     		movs	r0, #0
 800:dm/dm42_menu.cc ****   case MI_LOAD_STATE:
 2863              		.loc 1 800 0
 2864 034c 13E7     		b	.L154
 2865              	.L156:
 795:dm/dm42_menu.cc ****     if (ret == MRET_EXIT) ret = 0;
 2866              		.loc 1 795 0
 2867 034e 0023     		movs	r3, #0
 2868 0350 0293     		str	r3, [sp, #8]
 2869 0352 0193     		str	r3, [sp, #4]
 2870 0354 0093     		str	r3, [sp]
 2871 0356 1749     		ldr	r1, .L206+68
 2872 0358 0C4C     		ldr	r4, .L206+28
 2873 035a 174B     		ldr	r3, .L206+72
 2874 035c 174A     		ldr	r2, .L206+76
 2875 035e 1848     		ldr	r0, .L206+80
 2876 0360 A047     		blx	r4
 2877              	.LVL350:
 796:dm/dm42_menu.cc ****     break;
 2878              		.loc 1 796 0
 2879 0362 811C     		adds	r1, r0, #2
 2880 0364 7FF407AF 		bne	.L154
 2881 0368 45E7     		b	.L204
 2882              	.LVL351:
 2883              	.L196:
ARM GAS  /tmp/ccT5mNbt.s 			page 75


 920:dm/dm42_menu.cc ****     break;
 2884              		.loc 1 920 0
 2885 036a 4FF0FF30 		mov	r0, #-1
 2886              	.LVL352:
 924:dm/dm42_menu.cc **** }
 2887              		.loc 1 924 0
 2888 036e 02E7     		b	.L154
 2889              	.L207:
 2890              		.align	2
 2891              	.L206:
 2892 0370 59030008 		.word	134218585
 2893 0374 00000000 		.word	.LANCHOR3
 2894 0378 00000000 		.word	.LANCHOR5
 2895 037c 00000000 		.word	.LANCHOR7
 2896 0380 99030008 		.word	134218649
 2897 0384 00000000 		.word	.LANCHOR6
 2898 0388 55030008 		.word	134218581
 2899 038c 51030008 		.word	134218577
 2900 0390 00000000 		.word	save_statefile
 2901 0394 10000000 		.word	.LC56
 2902 0398 14000000 		.word	.LC20
 2903 039c 30000000 		.word	.LC58
 2904 03a0 00000000 		.word	load_statefile
 2905 03a4 18000000 		.word	.LC57
 2906 03a8 00000000 		.word	.LANCHOR2
 2907 03ac 00000000 		.word	.LANCHOR4
 2908 03b0 00000000 		.word	.LANCHOR1
 2909 03b4 08000000 		.word	.LC19
 2910 03b8 00000000 		.word	pgm_import_enter
 2911 03bc 1C000000 		.word	.LC53
 2912 03c0 00000000 		.word	.LC55
 2913              		.cfi_endproc
 2914              	.LFE15:
 2916              		.section	.text.sep_str,"ax",%progbits
 2917              		.align	1
 2918              		.p2align 2,,3
 2919              		.global	sep_str
 2920              		.syntax unified
 2921              		.thumb
 2922              		.thumb_func
 2923              		.fpu fpv4-sp-d16
 2925              	sep_str:
 2926              	.LFB16:
 926:dm/dm42_menu.cc **** 
 927:dm/dm42_menu.cc **** 
 928:dm/dm42_menu.cc **** 
 929:dm/dm42_menu.cc **** 
 930:dm/dm42_menu.cc **** char * sep_str(char * s, char const *txt, char c) {
 2927              		.loc 1 930 0
 2928              		.cfi_startproc
 2929              		@ args = 0, pretend = 0, frame = 0
 2930              		@ frame_needed = 0, uses_anonymous_args = 0
 2931              	.LVL353:
 2932 0000 38B5     		push	{r3, r4, r5, lr}
 2933              		.cfi_def_cfa_offset 16
 2934              		.cfi_offset 3, -16
 2935              		.cfi_offset 4, -12
ARM GAS  /tmp/ccT5mNbt.s 			page 76


 2936              		.cfi_offset 5, -8
 2937              		.cfi_offset 14, -4
 2938              		.loc 1 930 0
 2939 0002 0446     		mov	r4, r0
 2940 0004 1546     		mov	r5, r2
 931:dm/dm42_menu.cc ****   sprintf(s,"[ ] %s", txt);
 2941              		.loc 1 931 0
 2942 0006 0A46     		mov	r2, r1
 2943              	.LVL354:
 2944 0008 0249     		ldr	r1, .L210
 2945              	.LVL355:
 2946 000a FFF7FEFF 		bl	sprintf
 2947              	.LVL356:
 932:dm/dm42_menu.cc ****   s[1] = c;
 2948              		.loc 1 932 0
 2949 000e 6570     		strb	r5, [r4, #1]
 933:dm/dm42_menu.cc ****   return s;
 934:dm/dm42_menu.cc **** }
 2950              		.loc 1 934 0
 2951 0010 2046     		mov	r0, r4
 2952 0012 38BD     		pop	{r3, r4, r5, pc}
 2953              	.LVL357:
 2954              	.L211:
 2955              		.align	2
 2956              	.L210:
 2957 0014 00000000 		.word	.LC59
 2958              		.cfi_endproc
 2959              	.LFE16:
 2961              		.section	.text.orb_str,"ax",%progbits
 2962              		.align	1
 2963              		.p2align 2,,3
 2964              		.global	orb_str
 2965              		.syntax unified
 2966              		.thumb
 2967              		.thumb_func
 2968              		.fpu fpv4-sp-d16
 2970              	orb_str:
 2971              	.LFB17:
 935:dm/dm42_menu.cc **** 
 936:dm/dm42_menu.cc **** 
 937:dm/dm42_menu.cc **** char * orb_str(char * s, char const *txt, int val) {
 2972              		.loc 1 937 0
 2973              		.cfi_startproc
 2974              		@ args = 0, pretend = 0, frame = 0
 2975              		@ frame_needed = 0, uses_anonymous_args = 0
 2976              	.LVL358:
 2977 0000 38B5     		push	{r3, r4, r5, lr}
 2978              		.cfi_def_cfa_offset 16
 2979              		.cfi_offset 3, -16
 2980              		.cfi_offset 4, -12
 2981              		.cfi_offset 5, -8
 2982              		.cfi_offset 14, -4
 2983              		.loc 1 937 0
 2984 0002 0446     		mov	r4, r0
 938:dm/dm42_menu.cc ****   strcpy(s, rb_str(val));
 2985              		.loc 1 938 0
 2986 0004 074B     		ldr	r3, .L214
ARM GAS  /tmp/ccT5mNbt.s 			page 77


 2987 0006 1046     		mov	r0, r2
 2988              	.LVL359:
 937:dm/dm42_menu.cc ****   strcpy(s, rb_str(val));
 2989              		.loc 1 937 0
 2990 0008 0D46     		mov	r5, r1
 2991              		.loc 1 938 0
 2992 000a 9847     		blx	r3
 2993              	.LVL360:
 2994 000c 0146     		mov	r1, r0
 2995 000e 2046     		mov	r0, r4
 2996 0010 FFF7FEFF 		bl	stpcpy
 2997              	.LVL361:
 939:dm/dm42_menu.cc ****   strcat(s, " ");
 2998              		.loc 1 939 0
 2999 0014 2023     		movs	r3, #32
 3000 0016 0370     		strb	r3, [r0]
 940:dm/dm42_menu.cc ****   strcat(s, txt);
 3001              		.loc 1 940 0
 3002 0018 2946     		mov	r1, r5
 3003 001a 0130     		adds	r0, r0, #1
 3004 001c FFF7FEFF 		bl	strcpy
 3005              	.LVL362:
 941:dm/dm42_menu.cc ****   return s;
 942:dm/dm42_menu.cc **** }
 3006              		.loc 1 942 0
 3007 0020 2046     		mov	r0, r4
 3008 0022 38BD     		pop	{r3, r4, r5, pc}
 3009              	.LVL363:
 3010              	.L215:
 3011              		.align	2
 3012              	.L214:
 3013 0024 5D030008 		.word	134218589
 3014              		.cfi_endproc
 3015              	.LFE17:
 3017              		.section	.text.b_str,"ax",%progbits
 3018              		.align	1
 3019              		.p2align 2,,3
 3020              		.global	b_str
 3021              		.syntax unified
 3022              		.thumb
 3023              		.thumb_func
 3024              		.fpu fpv4-sp-d16
 3026              	b_str:
 3027              	.LFB18:
 943:dm/dm42_menu.cc **** 
 944:dm/dm42_menu.cc **** 
 945:dm/dm42_menu.cc **** char * b_str(char * s, char const *txt, int val) {
 3028              		.loc 1 945 0
 3029              		.cfi_startproc
 3030              		@ args = 0, pretend = 0, frame = 0
 3031              		@ frame_needed = 0, uses_anonymous_args = 0
 3032              	.LVL364:
 3033 0000 10B5     		push	{r4, lr}
 3034              		.cfi_def_cfa_offset 8
 3035              		.cfi_offset 4, -8
 3036              		.cfi_offset 14, -4
 3037              		.loc 1 945 0
ARM GAS  /tmp/ccT5mNbt.s 			page 78


 3038 0002 0446     		mov	r4, r0
 946:dm/dm42_menu.cc ****   s[0]=0;
 947:dm/dm42_menu.cc ****   if(val)
 3039              		.loc 1 947 0
 3040 0004 2AB9     		cbnz	r2, .L217
 946:dm/dm42_menu.cc ****   s[0]=0;
 3041              		.loc 1 946 0
 3042 0006 0270     		strb	r2, [r0]
 948:dm/dm42_menu.cc ****     strcpy(s, "\xff");
 949:dm/dm42_menu.cc ****   strcat(s, txt);
 3043              		.loc 1 949 0
 3044 0008 2046     		mov	r0, r4
 3045 000a FFF7FEFF 		bl	strcat
 3046              	.LVL365:
 950:dm/dm42_menu.cc ****   return s;
 951:dm/dm42_menu.cc **** }
 3047              		.loc 1 951 0
 3048 000e 2046     		mov	r0, r4
 3049 0010 10BD     		pop	{r4, pc}
 3050              	.LVL366:
 3051              	.L217:
 948:dm/dm42_menu.cc ****     strcpy(s, "\xff");
 3052              		.loc 1 948 0
 3053 0012 044B     		ldr	r3, .L220
 3054 0014 1B88     		ldrh	r3, [r3]	@ unaligned
 3055 0016 0380     		strh	r3, [r0]	@ unaligned
 949:dm/dm42_menu.cc ****   return s;
 3056              		.loc 1 949 0
 3057 0018 2046     		mov	r0, r4
 3058              	.LVL367:
 3059 001a FFF7FEFF 		bl	strcat
 3060              	.LVL368:
 3061              		.loc 1 951 0
 3062 001e 2046     		mov	r0, r4
 3063 0020 10BD     		pop	{r4, pc}
 3064              	.LVL369:
 3065              	.L221:
 3066 0022 00BF     		.align	2
 3067              	.L220:
 3068 0024 00000000 		.word	.LC60
 3069              		.cfi_endproc
 3070              	.LFE18:
 3072              		.section	.text.layout_str,"ax",%progbits
 3073              		.align	1
 3074              		.p2align 2,,3
 3075              		.global	layout_str
 3076              		.syntax unified
 3077              		.thumb
 3078              		.thumb_func
 3079              		.fpu fpv4-sp-d16
 3081              	layout_str:
 3082              	.LFB19:
 952:dm/dm42_menu.cc **** 
 953:dm/dm42_menu.cc **** 
 954:dm/dm42_menu.cc **** 
 955:dm/dm42_menu.cc **** 
 956:dm/dm42_menu.cc **** char * layout_str(char * s, const char * txt) {
ARM GAS  /tmp/ccT5mNbt.s 			page 79


 3083              		.loc 1 956 0
 3084              		.cfi_startproc
 3085              		@ args = 0, pretend = 0, frame = 0
 3086              		@ frame_needed = 0, uses_anonymous_args = 0
 3087              	.LVL370:
 3088 0000 38B5     		push	{r3, r4, r5, lr}
 3089              		.cfi_def_cfa_offset 16
 3090              		.cfi_offset 3, -16
 3091              		.cfi_offset 4, -12
 3092              		.cfi_offset 5, -8
 3093              		.cfi_offset 14, -4
 957:dm/dm42_menu.cc ****   sprintf(s, "%s  [ ", txt);
 3094              		.loc 1 957 0
 3095 0002 0A46     		mov	r2, r1
 956:dm/dm42_menu.cc ****   sprintf(s, "%s  [ ", txt);
 3096              		.loc 1 956 0
 3097 0004 0446     		mov	r4, r0
 3098              		.loc 1 957 0
 3099 0006 0C49     		ldr	r1, .L224
 3100              	.LVL371:
 3101 0008 FFF7FEFF 		bl	sprintf
 3102              	.LVL372:
 958:dm/dm42_menu.cc ****   get_stack_layout_str(s+strlen(s), get_stack_layout());
 3103              		.loc 1 958 0
 3104 000c 2046     		mov	r0, r4
 3105 000e FFF7FEFF 		bl	strlen
 3106              	.LVL373:
 3107 0012 2518     		adds	r5, r4, r0
 3108 0014 FFF7FEFF 		bl	get_stack_layout
 3109              	.LVL374:
 3110 0018 0146     		mov	r1, r0
 3111 001a 2846     		mov	r0, r5
 3112 001c FFF7FEFF 		bl	get_stack_layout_str
 3113              	.LVL375:
 959:dm/dm42_menu.cc ****   strcat(s, " ]");
 3114              		.loc 1 959 0
 3115 0020 2046     		mov	r0, r4
 3116 0022 FFF7FEFF 		bl	strlen
 3117              	.LVL376:
 3118 0026 054B     		ldr	r3, .L224+4
 3119 0028 2218     		adds	r2, r4, r0
 3120 002a 1988     		ldrh	r1, [r3]	@ unaligned
 3121 002c 2152     		strh	r1, [r4, r0]	@ unaligned
 3122 002e 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 3123 0030 9370     		strb	r3, [r2, #2]
 960:dm/dm42_menu.cc ****   return s;
 961:dm/dm42_menu.cc **** }
 3124              		.loc 1 961 0
 3125 0032 2046     		mov	r0, r4
 3126 0034 38BD     		pop	{r3, r4, r5, pc}
 3127              	.LVL377:
 3128              	.L225:
 3129 0036 00BF     		.align	2
 3130              	.L224:
 3131 0038 00000000 		.word	.LC61
 3132 003c 08000000 		.word	.LC62
 3133              		.cfi_endproc
ARM GAS  /tmp/ccT5mNbt.s 			page 80


 3134              	.LFE19:
 3136              		.section	.text.state_str,"ax",%progbits
 3137              		.align	1
 3138              		.p2align 2,,3
 3139              		.global	state_str
 3140              		.syntax unified
 3141              		.thumb
 3142              		.thumb_func
 3143              		.fpu fpv4-sp-d16
 3145              	state_str:
 3146              	.LFB20:
 962:dm/dm42_menu.cc **** 
 963:dm/dm42_menu.cc **** 
 964:dm/dm42_menu.cc **** char * state_str(char *s, const char * txt) {
 3147              		.loc 1 964 0
 3148              		.cfi_startproc
 3149              		@ args = 0, pretend = 0, frame = 0
 3150              		@ frame_needed = 0, uses_anonymous_args = 0
 3151              	.LVL378:
 3152 0000 10B5     		push	{r4, lr}
 3153              		.cfi_def_cfa_offset 8
 3154              		.cfi_offset 4, -8
 3155              		.cfi_offset 14, -4
 965:dm/dm42_menu.cc ****   const int maxlen = 30;
 966:dm/dm42_menu.cc ****   sprintf(s, "%s [", txt);
 3156              		.loc 1 966 0
 3157 0002 0A46     		mov	r2, r1
 964:dm/dm42_menu.cc ****   const int maxlen = 30;
 3158              		.loc 1 964 0
 3159 0004 0446     		mov	r4, r0
 3160              		.loc 1 966 0
 3161 0006 0749     		ldr	r1, .L228
 3162              	.LVL379:
 3163 0008 FFF7FEFF 		bl	sprintf
 3164              	.LVL380:
 967:dm/dm42_menu.cc ****   copy_reset_state_filename(s,maxlen);
 3165              		.loc 1 967 0
 3166 000c 2046     		mov	r0, r4
 3167 000e 1E21     		movs	r1, #30
 3168 0010 FFF7FEFF 		bl	copy_reset_state_filename
 3169              	.LVL381:
 968:dm/dm42_menu.cc ****   strcat(s, "]");
 3170              		.loc 1 968 0
 3171 0014 2046     		mov	r0, r4
 3172 0016 FFF7FEFF 		bl	strlen
 3173              	.LVL382:
 3174 001a 034B     		ldr	r3, .L228+4
 3175 001c 1B88     		ldrh	r3, [r3]	@ unaligned
 3176 001e 2352     		strh	r3, [r4, r0]	@ unaligned
 969:dm/dm42_menu.cc ****   return s;
 970:dm/dm42_menu.cc **** }
 3177              		.loc 1 970 0
 3178 0020 2046     		mov	r0, r4
 3179 0022 10BD     		pop	{r4, pc}
 3180              	.LVL383:
 3181              	.L229:
 3182              		.align	2
ARM GAS  /tmp/ccT5mNbt.s 			page 81


 3183              	.L228:
 3184 0024 00000000 		.word	.LC63
 3185 0028 08000000 		.word	.LC64
 3186              		.cfi_endproc
 3187              	.LFE20:
 3189              		.section	.text.nr_str,"ax",%progbits
 3190              		.align	1
 3191              		.p2align 2,,3
 3192              		.global	nr_str
 3193              		.syntax unified
 3194              		.thumb
 3195              		.thumb_func
 3196              		.fpu fpv4-sp-d16
 3198              	nr_str:
 3199              	.LFB21:
 971:dm/dm42_menu.cc **** 
 972:dm/dm42_menu.cc **** 
 973:dm/dm42_menu.cc **** char * nr_str(char *s, const char * txt, int nr) {
 3200              		.loc 1 973 0
 3201              		.cfi_startproc
 3202              		@ args = 0, pretend = 0, frame = 0
 3203              		@ frame_needed = 0, uses_anonymous_args = 0
 3204              	.LVL384:
 3205 0000 10B5     		push	{r4, lr}
 3206              		.cfi_def_cfa_offset 8
 3207              		.cfi_offset 4, -8
 3208              		.cfi_offset 14, -4
 974:dm/dm42_menu.cc ****   sprintf(s, "%s: %i", txt, nr);
 3209              		.loc 1 974 0
 3210 0002 1346     		mov	r3, r2
 973:dm/dm42_menu.cc ****   sprintf(s, "%s: %i", txt, nr);
 3211              		.loc 1 973 0
 3212 0004 0446     		mov	r4, r0
 3213              		.loc 1 974 0
 3214 0006 0A46     		mov	r2, r1
 3215              	.LVL385:
 3216 0008 0249     		ldr	r1, .L232
 3217              	.LVL386:
 3218 000a FFF7FEFF 		bl	sprintf
 3219              	.LVL387:
 975:dm/dm42_menu.cc ****   return s;
 976:dm/dm42_menu.cc **** }
 3220              		.loc 1 976 0
 3221 000e 2046     		mov	r0, r4
 3222 0010 10BD     		pop	{r4, pc}
 3223              	.LVL388:
 3224              	.L233:
 3225 0012 00BF     		.align	2
 3226              	.L232:
 3227 0014 00000000 		.word	.LC65
 3228              		.cfi_endproc
 3229              	.LFE21:
 3231              		.section	.text.menu_line_str,"ax",%progbits
 3232              		.align	1
 3233              		.p2align 2,,3
 3234              		.global	menu_line_str
 3235              		.syntax unified
ARM GAS  /tmp/ccT5mNbt.s 			page 82


 3236              		.thumb
 3237              		.thumb_func
 3238              		.fpu fpv4-sp-d16
 3240              	menu_line_str:
 3241              	.LFB22:
 977:dm/dm42_menu.cc **** 
 978:dm/dm42_menu.cc **** 
 979:dm/dm42_menu.cc **** 
 980:dm/dm42_menu.cc **** // Returns NULL if not found
 981:dm/dm42_menu.cc **** const char * menu_line_str(uint8_t line_id, char * s, const int slen) {
 3242              		.loc 1 981 0
 3243              		.cfi_startproc
 3244              		@ args = 0, pretend = 0, frame = 0
 3245              		@ frame_needed = 0, uses_anonymous_args = 0
 3246              	.LVL389:
 982:dm/dm42_menu.cc ****   const char * ln;
 983:dm/dm42_menu.cc **** 
 984:dm/dm42_menu.cc ****   switch(line_id) {
 3247              		.loc 1 984 0
 3248 0000 1C38     		subs	r0, r0, #28
 3249              	.LVL390:
 981:dm/dm42_menu.cc ****   const char * ln;
 3250              		.loc 1 981 0
 3251 0002 70B5     		push	{r4, r5, r6, lr}
 3252              		.cfi_def_cfa_offset 16
 3253              		.cfi_offset 4, -16
 3254              		.cfi_offset 5, -12
 3255              		.cfi_offset 6, -8
 3256              		.cfi_offset 14, -4
 981:dm/dm42_menu.cc ****   const char * ln;
 3257              		.loc 1 981 0
 3258 0004 0C46     		mov	r4, r1
 3259              		.loc 1 984 0
 3260 0006 2528     		cmp	r0, #37
 3261 0008 00F22781 		bhi	.L235
 3262 000c DFE810F0 		tbh	[pc, r0, lsl #1]
 3263              	.L237:
 3264 0010 2600     		.2byte	(.L275-.L237)/2
 3265 0012 2301     		.2byte	(.L238-.L237)/2
 3266 0014 2101     		.2byte	(.L239-.L237)/2
 3267 0016 1F01     		.2byte	(.L240-.L237)/2
 3268 0018 1D01     		.2byte	(.L241-.L237)/2
 3269 001a 1701     		.2byte	(.L242-.L237)/2
 3270 001c 1201     		.2byte	(.L243-.L237)/2
 3271 001e 0D01     		.2byte	(.L244-.L237)/2
 3272 0020 0801     		.2byte	(.L245-.L237)/2
 3273 0022 0301     		.2byte	(.L246-.L237)/2
 3274 0024 FE00     		.2byte	(.L247-.L237)/2
 3275 0026 F900     		.2byte	(.L248-.L237)/2
 3276 0028 ED00     		.2byte	(.L249-.L237)/2
 3277 002a E700     		.2byte	(.L250-.L237)/2
 3278 002c E500     		.2byte	(.L251-.L237)/2
 3279 002e E300     		.2byte	(.L252-.L237)/2
 3280 0030 D900     		.2byte	(.L253-.L237)/2
 3281 0032 CF00     		.2byte	(.L254-.L237)/2
 3282 0034 C500     		.2byte	(.L255-.L237)/2
 3283 0036 BA00     		.2byte	(.L256-.L237)/2
ARM GAS  /tmp/ccT5mNbt.s 			page 83


 3284 0038 B000     		.2byte	(.L257-.L237)/2
 3285 003a A600     		.2byte	(.L258-.L237)/2
 3286 003c 9C00     		.2byte	(.L259-.L237)/2
 3287 003e 9A00     		.2byte	(.L260-.L237)/2
 3288 0040 9800     		.2byte	(.L261-.L237)/2
 3289 0042 9600     		.2byte	(.L262-.L237)/2
 3290 0044 8B00     		.2byte	(.L263-.L237)/2
 3291 0046 8000     		.2byte	(.L264-.L237)/2
 3292 0048 7500     		.2byte	(.L265-.L237)/2
 3293 004a 6A00     		.2byte	(.L266-.L237)/2
 3294 004c 5F00     		.2byte	(.L267-.L237)/2
 3295 004e 5400     		.2byte	(.L268-.L237)/2
 3296 0050 5200     		.2byte	(.L269-.L237)/2
 3297 0052 5000     		.2byte	(.L270-.L237)/2
 3298 0054 4600     		.2byte	(.L271-.L237)/2
 3299 0056 3C00     		.2byte	(.L272-.L237)/2
 3300 0058 3200     		.2byte	(.L273-.L237)/2
 3301 005a 2800     		.2byte	(.L274-.L237)/2
 3302              		.p2align 1
 3303              	.L275:
 985:dm/dm42_menu.cc ****   case MI_LOAD_PGM:     ln = "Load Program >";       break;
 3304              		.loc 1 985 0
 3305 005c 8048     		ldr	r0, .L278
 3306              	.LVL391:
 986:dm/dm42_menu.cc ****   case MI_SAVE_PGM:     ln = "Save Program >";       break;
 987:dm/dm42_menu.cc ****   case MI_SAVE_STAT:    ln = "Save Calculator State";break;
 988:dm/dm42_menu.cc ****   case MI_FILE:         ln = "File >";               break;
 989:dm/dm42_menu.cc ****   case MI_STATEFILE:    ln = state_str(s, "Calc. State >"); break;
 990:dm/dm42_menu.cc ****   case MI_LOAD_STATE:   ln = "Load State";           break;
 991:dm/dm42_menu.cc ****   case MI_SAVE_STATE:   ln = "Save State";           break;
 992:dm/dm42_menu.cc ****   case MI_CLEAN_RESET:  ln = "Load Clean State";     break;
 993:dm/dm42_menu.cc **** 
 994:dm/dm42_menu.cc ****   case MI_STACK_CONFIG:
 995:dm/dm42_menu.cc ****     ln = layout_str(s, "Stack Layout");              break;
 996:dm/dm42_menu.cc **** 
 997:dm/dm42_menu.cc ****   case MI_STACK_XYZTL:  ln = orb_str(s, "XYZTL", get_stack_layout() == STACK_XYZTL); break;
 998:dm/dm42_menu.cc ****   case MI_STACK_XYZTA:  ln = orb_str(s, "XYZTA", get_stack_layout() == STACK_XYZTA); break;
 999:dm/dm42_menu.cc ****   case MI_STACK_XYZT:   ln = orb_str(s, "XYZT",  get_stack_layout() == STACK_XYZT);  break;
1000:dm/dm42_menu.cc ****   case MI_STACK_XYL:    ln = orb_str(s, "XYL",   get_stack_layout() == STACK_XYL);   break;
1001:dm/dm42_menu.cc ****   case MI_STACK_XYA:    ln = orb_str(s, "XYA",   get_stack_layout() == STACK_XYA);   break;
1002:dm/dm42_menu.cc ****   case MI_STACK_XY:     ln = orb_str(s, "XY",    get_stack_layout() == STACK_XY);    break;
1003:dm/dm42_menu.cc ****   case MI_STACK_LXYZT:  ln = orb_str(s, "LXYZT", get_stack_layout() == STACK_LXYZT); break;
1004:dm/dm42_menu.cc **** 
1005:dm/dm42_menu.cc ****   case MI_TOPBAR_MENU:  ln = "Status Bar >";         break;
1006:dm/dm42_menu.cc ****   case MI_DISP_STATFN:  ln = opt_str(s, " State Filename",  is_disp(DISP_STATFN));  break;
1007:dm/dm42_menu.cc ****   case MI_DISP_DOW:     ln = opt_str(s, " Day of Week",     is_disp(DISP_DOW));     break;
1008:dm/dm42_menu.cc ****   case MI_DISP_DATE:    ln = opt_str(s, " Date",            is_disp(DISP_DATE));    break;
1009:dm/dm42_menu.cc ****   case MI_DISP_DATE_SEP:ln = sep_str(s, " Date Separator",  get_disp_date_sep());   break;
1010:dm/dm42_menu.cc ****   case MI_DISP_SHORTMON:ln = opt_str(s, "  Month Shortcut", is_disp(DISP_SHORTMON));break;
1011:dm/dm42_menu.cc ****   case MI_DISP_TIME:    ln = opt_str(s, " Time",            is_disp(DISP_TIME));    break;
1012:dm/dm42_menu.cc ****   case MI_DISP_VOLTAGE: 
1013:dm/dm42_menu.cc ****     ln = opt_str(s, " Power Voltage in Header", is_disp(DISP_VOLTAGE));   break;
1014:dm/dm42_menu.cc **** 
1015:dm/dm42_menu.cc ****   case MI_SETTINGS:     ln = "Settings >";           break;
1016:dm/dm42_menu.cc ****   case MI_ABOUT_PGM:    ln = "About >";              break;
1017:dm/dm42_menu.cc **** 
1018:dm/dm42_menu.cc ****   case MI_STACK_AREA:   ln = "Stack Font Sizes >";         break;
ARM GAS  /tmp/ccT5mNbt.s 			page 84


1019:dm/dm42_menu.cc ****   case MI_SA_REG_X:     ln = nr_str(s, "Font Size Offset Reg X", get_reg_font_offset(LINE_REG_X) );
1020:dm/dm42_menu.cc ****   case MI_SA_REG_Y:     ln = nr_str(s, "Font Size Offset Reg Y", get_reg_font_offset(LINE_REG_Y) );
1021:dm/dm42_menu.cc ****   case MI_SA_REG_Z:     ln = nr_str(s, "Font Size Offset Reg Z", get_reg_font_offset(LINE_REG_Z) );
1022:dm/dm42_menu.cc ****   case MI_SA_REG_T:     ln = nr_str(s, "Font Size Offset Reg T", get_reg_font_offset(LINE_REG_T) );
1023:dm/dm42_menu.cc ****   case MI_SA_REG_L:     ln = nr_str(s, "Font Size Offset Reg L", get_reg_font_offset(LINE_REG_L) );
1024:dm/dm42_menu.cc ****   case MI_SA_REG_A:     ln = nr_str(s, "Font Size Offset Reg A", get_reg_font_offset(LINE_REG_A) );
1025:dm/dm42_menu.cc **** 
1026:dm/dm42_menu.cc ****   case MI_PRINT_MENU:      ln = "Print to File >"; break;
1027:dm/dm42_menu.cc ****   case MI_PRTOF_GRAPH:     ln = opt_str(s, " Graphics Print",    is_print_to_file(PRTOF_GRAPHICS));
1028:dm/dm42_menu.cc ****   case MI_PRTOF_TEXT:      ln = opt_str(s, " Text Print",        is_print_to_file(PRTOF_TEXT));    
1029:dm/dm42_menu.cc ****   case MI_PRTOF_NOIR:      ln = opt_str(s, " Don't print to IR", is_print_to_file(PRTOF_NOIR));    
1030:dm/dm42_menu.cc ****   case MI_PRTOF_GR_IN_TXT: ln = opt_str(s, " Graphics in Text",  is_print_to_file(PRTOF_GR_IN_TXT))
1031:dm/dm42_menu.cc **** 
1032:dm/dm42_menu.cc ****   default:
1033:dm/dm42_menu.cc ****     ln = NULL;
1034:dm/dm42_menu.cc ****     break;
1035:dm/dm42_menu.cc ****   }
1036:dm/dm42_menu.cc **** 
1037:dm/dm42_menu.cc ****   return ln;
1038:dm/dm42_menu.cc **** }
 3307              		.loc 1 1038 0
 3308 005e 70BD     		pop	{r4, r5, r6, pc}
 3309              	.LVL392:
 3310              	.L274:
1029:dm/dm42_menu.cc ****   case MI_PRTOF_GR_IN_TXT: ln = opt_str(s, " Graphics in Text",  is_print_to_file(PRTOF_GR_IN_TXT))
 3311              		.loc 1 1029 0
 3312 0060 0720     		movs	r0, #7
 3313 0062 FFF7FEFF 		bl	is_print_to_file
 3314              	.LVL393:
 3315 0066 7F4B     		ldr	r3, .L278+4
 3316 0068 7F49     		ldr	r1, .L278+8
 3317 006a 0246     		mov	r2, r0
 3318 006c 2046     		mov	r0, r4
 3319              		.loc 1 1038 0
 3320 006e BDE87040 		pop	{r4, r5, r6, lr}
 3321              		.cfi_remember_state
 3322              		.cfi_restore 14
 3323              		.cfi_restore 6
 3324              		.cfi_restore 5
 3325              		.cfi_restore 4
 3326              		.cfi_def_cfa_offset 0
 3327              	.LVL394:
1029:dm/dm42_menu.cc ****   case MI_PRTOF_GR_IN_TXT: ln = opt_str(s, " Graphics in Text",  is_print_to_file(PRTOF_GR_IN_TXT))
 3328              		.loc 1 1029 0
 3329 0072 1847     		bx	r3
 3330              	.LVL395:
 3331              	.L273:
 3332              		.cfi_restore_state
1030:dm/dm42_menu.cc **** 
 3333              		.loc 1 1030 0
 3334 0074 0620     		movs	r0, #6
 3335 0076 FFF7FEFF 		bl	is_print_to_file
 3336              	.LVL396:
 3337 007a 7A4B     		ldr	r3, .L278+4
 3338 007c 7B49     		ldr	r1, .L278+12
 3339 007e 0246     		mov	r2, r0
 3340 0080 2046     		mov	r0, r4
ARM GAS  /tmp/ccT5mNbt.s 			page 85


 3341              		.loc 1 1038 0
 3342 0082 BDE87040 		pop	{r4, r5, r6, lr}
 3343              		.cfi_remember_state
 3344              		.cfi_restore 14
 3345              		.cfi_restore 6
 3346              		.cfi_restore 5
 3347              		.cfi_restore 4
 3348              		.cfi_def_cfa_offset 0
 3349              	.LVL397:
1030:dm/dm42_menu.cc **** 
 3350              		.loc 1 1030 0
 3351 0086 1847     		bx	r3
 3352              	.LVL398:
 3353              	.L272:
 3354              		.cfi_restore_state
1028:dm/dm42_menu.cc ****   case MI_PRTOF_NOIR:      ln = opt_str(s, " Don't print to IR", is_print_to_file(PRTOF_NOIR));    
 3355              		.loc 1 1028 0
 3356 0088 0020     		movs	r0, #0
 3357 008a FFF7FEFF 		bl	is_print_to_file
 3358              	.LVL399:
 3359 008e 754B     		ldr	r3, .L278+4
 3360 0090 7749     		ldr	r1, .L278+16
 3361 0092 0246     		mov	r2, r0
 3362 0094 2046     		mov	r0, r4
 3363              		.loc 1 1038 0
 3364 0096 BDE87040 		pop	{r4, r5, r6, lr}
 3365              		.cfi_remember_state
 3366              		.cfi_restore 14
 3367              		.cfi_restore 6
 3368              		.cfi_restore 5
 3369              		.cfi_restore 4
 3370              		.cfi_def_cfa_offset 0
 3371              	.LVL400:
1028:dm/dm42_menu.cc ****   case MI_PRTOF_NOIR:      ln = opt_str(s, " Don't print to IR", is_print_to_file(PRTOF_NOIR));    
 3372              		.loc 1 1028 0
 3373 009a 1847     		bx	r3
 3374              	.LVL401:
 3375              	.L271:
 3376              		.cfi_restore_state
1027:dm/dm42_menu.cc ****   case MI_PRTOF_TEXT:      ln = opt_str(s, " Text Print",        is_print_to_file(PRTOF_TEXT));    
 3377              		.loc 1 1027 0
 3378 009c 0120     		movs	r0, #1
 3379 009e FFF7FEFF 		bl	is_print_to_file
 3380              	.LVL402:
 3381 00a2 704B     		ldr	r3, .L278+4
 3382 00a4 7349     		ldr	r1, .L278+20
 3383 00a6 0246     		mov	r2, r0
 3384 00a8 2046     		mov	r0, r4
 3385              		.loc 1 1038 0
 3386 00aa BDE87040 		pop	{r4, r5, r6, lr}
 3387              		.cfi_remember_state
 3388              		.cfi_restore 14
 3389              		.cfi_restore 6
 3390              		.cfi_restore 5
 3391              		.cfi_restore 4
 3392              		.cfi_def_cfa_offset 0
 3393              	.LVL403:
ARM GAS  /tmp/ccT5mNbt.s 			page 86


1027:dm/dm42_menu.cc ****   case MI_PRTOF_TEXT:      ln = opt_str(s, " Text Print",        is_print_to_file(PRTOF_TEXT));    
 3394              		.loc 1 1027 0
 3395 00ae 1847     		bx	r3
 3396              	.LVL404:
 3397              	.L270:
 3398              		.cfi_restore_state
1026:dm/dm42_menu.cc ****   case MI_PRTOF_GRAPH:     ln = opt_str(s, " Graphics Print",    is_print_to_file(PRTOF_GRAPHICS));
 3399              		.loc 1 1026 0
 3400 00b0 7148     		ldr	r0, .L278+24
 3401 00b2 70BD     		pop	{r4, r5, r6, pc}
 3402              	.LVL405:
 3403              	.L269:
1005:dm/dm42_menu.cc ****   case MI_DISP_STATFN:  ln = opt_str(s, " State Filename",  is_disp(DISP_STATFN));  break;
 3404              		.loc 1 1005 0
 3405 00b4 7148     		ldr	r0, .L278+28
 3406 00b6 70BD     		pop	{r4, r5, r6, pc}
 3407              	.LVL406:
 3408              	.L268:
1024:dm/dm42_menu.cc **** 
 3409              		.loc 1 1024 0
 3410 00b8 0520     		movs	r0, #5
 3411 00ba FFF7FEFF 		bl	get_reg_font_offset
 3412              	.LVL407:
 3413              	.LBB40:
 3414              	.LBB41:
 974:dm/dm42_menu.cc ****   return s;
 3415              		.loc 1 974 0
 3416 00be 704A     		ldr	r2, .L278+32
 3417 00c0 7049     		ldr	r1, .L278+36
 3418 00c2 0346     		mov	r3, r0
 3419 00c4 2046     		mov	r0, r4
 3420              	.LVL408:
 3421 00c6 FFF7FEFF 		bl	sprintf
 3422              	.LVL409:
 3423              	.LBE41:
 3424              	.LBE40:
1024:dm/dm42_menu.cc **** 
 3425              		.loc 1 1024 0
 3426 00ca 2046     		mov	r0, r4
 3427 00cc 70BD     		pop	{r4, r5, r6, pc}
 3428              	.LVL410:
 3429              	.L267:
1023:dm/dm42_menu.cc ****   case MI_SA_REG_A:     ln = nr_str(s, "Font Size Offset Reg A", get_reg_font_offset(LINE_REG_A) );
 3430              		.loc 1 1023 0
 3431 00ce 0420     		movs	r0, #4
 3432 00d0 FFF7FEFF 		bl	get_reg_font_offset
 3433              	.LVL411:
 3434              	.LBB42:
 3435              	.LBB43:
 974:dm/dm42_menu.cc ****   return s;
 3436              		.loc 1 974 0
 3437 00d4 6C4A     		ldr	r2, .L278+40
 3438 00d6 6B49     		ldr	r1, .L278+36
 3439 00d8 0346     		mov	r3, r0
 3440 00da 2046     		mov	r0, r4
 3441              	.LVL412:
 3442 00dc FFF7FEFF 		bl	sprintf
ARM GAS  /tmp/ccT5mNbt.s 			page 87


 3443              	.LVL413:
 3444              	.LBE43:
 3445              	.LBE42:
1023:dm/dm42_menu.cc ****   case MI_SA_REG_A:     ln = nr_str(s, "Font Size Offset Reg A", get_reg_font_offset(LINE_REG_A) );
 3446              		.loc 1 1023 0
 3447 00e0 2046     		mov	r0, r4
 3448 00e2 70BD     		pop	{r4, r5, r6, pc}
 3449              	.LVL414:
 3450              	.L266:
1022:dm/dm42_menu.cc ****   case MI_SA_REG_L:     ln = nr_str(s, "Font Size Offset Reg L", get_reg_font_offset(LINE_REG_L) );
 3451              		.loc 1 1022 0
 3452 00e4 0320     		movs	r0, #3
 3453 00e6 FFF7FEFF 		bl	get_reg_font_offset
 3454              	.LVL415:
 3455              	.LBB44:
 3456              	.LBB45:
 974:dm/dm42_menu.cc ****   return s;
 3457              		.loc 1 974 0
 3458 00ea 684A     		ldr	r2, .L278+44
 3459 00ec 6549     		ldr	r1, .L278+36
 3460 00ee 0346     		mov	r3, r0
 3461 00f0 2046     		mov	r0, r4
 3462              	.LVL416:
 3463 00f2 FFF7FEFF 		bl	sprintf
 3464              	.LVL417:
 3465              	.LBE45:
 3466              	.LBE44:
1022:dm/dm42_menu.cc ****   case MI_SA_REG_L:     ln = nr_str(s, "Font Size Offset Reg L", get_reg_font_offset(LINE_REG_L) );
 3467              		.loc 1 1022 0
 3468 00f6 2046     		mov	r0, r4
 3469 00f8 70BD     		pop	{r4, r5, r6, pc}
 3470              	.LVL418:
 3471              	.L265:
1021:dm/dm42_menu.cc ****   case MI_SA_REG_T:     ln = nr_str(s, "Font Size Offset Reg T", get_reg_font_offset(LINE_REG_T) );
 3472              		.loc 1 1021 0
 3473 00fa 0220     		movs	r0, #2
 3474 00fc FFF7FEFF 		bl	get_reg_font_offset
 3475              	.LVL419:
 3476              	.LBB46:
 3477              	.LBB47:
 974:dm/dm42_menu.cc ****   return s;
 3478              		.loc 1 974 0
 3479 0100 634A     		ldr	r2, .L278+48
 3480 0102 6049     		ldr	r1, .L278+36
 3481 0104 0346     		mov	r3, r0
 3482 0106 2046     		mov	r0, r4
 3483              	.LVL420:
 3484 0108 FFF7FEFF 		bl	sprintf
 3485              	.LVL421:
 3486              	.LBE47:
 3487              	.LBE46:
1021:dm/dm42_menu.cc ****   case MI_SA_REG_T:     ln = nr_str(s, "Font Size Offset Reg T", get_reg_font_offset(LINE_REG_T) );
 3488              		.loc 1 1021 0
 3489 010c 2046     		mov	r0, r4
 3490 010e 70BD     		pop	{r4, r5, r6, pc}
 3491              	.LVL422:
 3492              	.L264:
ARM GAS  /tmp/ccT5mNbt.s 			page 88


1020:dm/dm42_menu.cc ****   case MI_SA_REG_Z:     ln = nr_str(s, "Font Size Offset Reg Z", get_reg_font_offset(LINE_REG_Z) );
 3493              		.loc 1 1020 0
 3494 0110 0120     		movs	r0, #1
 3495 0112 FFF7FEFF 		bl	get_reg_font_offset
 3496              	.LVL423:
 3497              	.LBB48:
 3498              	.LBB49:
 974:dm/dm42_menu.cc ****   return s;
 3499              		.loc 1 974 0
 3500 0116 5F4A     		ldr	r2, .L278+52
 3501 0118 5A49     		ldr	r1, .L278+36
 3502 011a 0346     		mov	r3, r0
 3503 011c 2046     		mov	r0, r4
 3504              	.LVL424:
 3505 011e FFF7FEFF 		bl	sprintf
 3506              	.LVL425:
 3507              	.LBE49:
 3508              	.LBE48:
1020:dm/dm42_menu.cc ****   case MI_SA_REG_Z:     ln = nr_str(s, "Font Size Offset Reg Z", get_reg_font_offset(LINE_REG_Z) );
 3509              		.loc 1 1020 0
 3510 0122 2046     		mov	r0, r4
 3511 0124 70BD     		pop	{r4, r5, r6, pc}
 3512              	.LVL426:
 3513              	.L263:
1019:dm/dm42_menu.cc ****   case MI_SA_REG_Y:     ln = nr_str(s, "Font Size Offset Reg Y", get_reg_font_offset(LINE_REG_Y) );
 3514              		.loc 1 1019 0
 3515 0126 0020     		movs	r0, #0
 3516 0128 FFF7FEFF 		bl	get_reg_font_offset
 3517              	.LVL427:
 3518              	.LBB50:
 3519              	.LBB51:
 974:dm/dm42_menu.cc ****   return s;
 3520              		.loc 1 974 0
 3521 012c 5A4A     		ldr	r2, .L278+56
 3522 012e 5549     		ldr	r1, .L278+36
 3523 0130 0346     		mov	r3, r0
 3524 0132 2046     		mov	r0, r4
 3525              	.LVL428:
 3526 0134 FFF7FEFF 		bl	sprintf
 3527              	.LVL429:
 3528              	.LBE51:
 3529              	.LBE50:
1019:dm/dm42_menu.cc ****   case MI_SA_REG_Y:     ln = nr_str(s, "Font Size Offset Reg Y", get_reg_font_offset(LINE_REG_Y) );
 3530              		.loc 1 1019 0
 3531 0138 2046     		mov	r0, r4
 3532 013a 70BD     		pop	{r4, r5, r6, pc}
 3533              	.LVL430:
 3534              	.L262:
1018:dm/dm42_menu.cc ****   case MI_SA_REG_X:     ln = nr_str(s, "Font Size Offset Reg X", get_reg_font_offset(LINE_REG_X) );
 3535              		.loc 1 1018 0
 3536 013c 5748     		ldr	r0, .L278+60
 3537 013e 70BD     		pop	{r4, r5, r6, pc}
 3538              	.LVL431:
 3539              	.L261:
1016:dm/dm42_menu.cc **** 
 3540              		.loc 1 1016 0
 3541 0140 5748     		ldr	r0, .L278+64
ARM GAS  /tmp/ccT5mNbt.s 			page 89


 3542 0142 70BD     		pop	{r4, r5, r6, pc}
 3543              	.LVL432:
 3544              	.L260:
1015:dm/dm42_menu.cc ****   case MI_ABOUT_PGM:    ln = "About >";              break;
 3545              		.loc 1 1015 0
 3546 0144 5748     		ldr	r0, .L278+68
 3547 0146 70BD     		pop	{r4, r5, r6, pc}
 3548              	.LVL433:
 3549              	.L259:
1013:dm/dm42_menu.cc **** 
 3550              		.loc 1 1013 0
 3551 0148 0720     		movs	r0, #7
 3552 014a FFF7FEFF 		bl	is_disp
 3553              	.LVL434:
 3554 014e 454B     		ldr	r3, .L278+4
 3555 0150 5549     		ldr	r1, .L278+72
 3556 0152 0246     		mov	r2, r0
 3557 0154 2046     		mov	r0, r4
 3558              		.loc 1 1038 0
 3559 0156 BDE87040 		pop	{r4, r5, r6, lr}
 3560              		.cfi_remember_state
 3561              		.cfi_restore 14
 3562              		.cfi_restore 6
 3563              		.cfi_restore 5
 3564              		.cfi_restore 4
 3565              		.cfi_def_cfa_offset 0
 3566              	.LVL435:
1013:dm/dm42_menu.cc **** 
 3567              		.loc 1 1013 0
 3568 015a 1847     		bx	r3
 3569              	.LVL436:
 3570              	.L258:
 3571              		.cfi_restore_state
1011:dm/dm42_menu.cc ****   case MI_DISP_VOLTAGE: 
 3572              		.loc 1 1011 0
 3573 015c 0620     		movs	r0, #6
 3574 015e FFF7FEFF 		bl	is_disp
 3575              	.LVL437:
 3576 0162 404B     		ldr	r3, .L278+4
 3577 0164 5149     		ldr	r1, .L278+76
 3578 0166 0246     		mov	r2, r0
 3579 0168 2046     		mov	r0, r4
 3580              		.loc 1 1038 0
 3581 016a BDE87040 		pop	{r4, r5, r6, lr}
 3582              		.cfi_remember_state
 3583              		.cfi_restore 14
 3584              		.cfi_restore 6
 3585              		.cfi_restore 5
 3586              		.cfi_restore 4
 3587              		.cfi_def_cfa_offset 0
 3588              	.LVL438:
1011:dm/dm42_menu.cc ****   case MI_DISP_VOLTAGE: 
 3589              		.loc 1 1011 0
 3590 016e 1847     		bx	r3
 3591              	.LVL439:
 3592              	.L257:
 3593              		.cfi_restore_state
ARM GAS  /tmp/ccT5mNbt.s 			page 90


1010:dm/dm42_menu.cc ****   case MI_DISP_TIME:    ln = opt_str(s, " Time",            is_disp(DISP_TIME));    break;
 3594              		.loc 1 1010 0
 3595 0170 0520     		movs	r0, #5
 3596 0172 FFF7FEFF 		bl	is_disp
 3597              	.LVL440:
 3598 0176 3B4B     		ldr	r3, .L278+4
 3599 0178 4D49     		ldr	r1, .L278+80
 3600 017a 0246     		mov	r2, r0
 3601 017c 2046     		mov	r0, r4
 3602              		.loc 1 1038 0
 3603 017e BDE87040 		pop	{r4, r5, r6, lr}
 3604              		.cfi_remember_state
 3605              		.cfi_restore 14
 3606              		.cfi_restore 6
 3607              		.cfi_restore 5
 3608              		.cfi_restore 4
 3609              		.cfi_def_cfa_offset 0
 3610              	.LVL441:
1010:dm/dm42_menu.cc ****   case MI_DISP_TIME:    ln = opt_str(s, " Time",            is_disp(DISP_TIME));    break;
 3611              		.loc 1 1010 0
 3612 0182 1847     		bx	r3
 3613              	.LVL442:
 3614              	.L256:
 3615              		.cfi_restore_state
1009:dm/dm42_menu.cc ****   case MI_DISP_SHORTMON:ln = opt_str(s, "  Month Shortcut", is_disp(DISP_SHORTMON));break;
 3616              		.loc 1 1009 0
 3617 0184 FFF7FEFF 		bl	get_disp_date_sep
 3618              	.LVL443:
 3619              	.LBB52:
 3620              	.LBB53:
 931:dm/dm42_menu.cc ****   s[1] = c;
 3621              		.loc 1 931 0
 3622 0188 4A4A     		ldr	r2, .L278+84
 3623 018a 4B49     		ldr	r1, .L278+88
 3624              	.LBE53:
 3625              	.LBE52:
1009:dm/dm42_menu.cc ****   case MI_DISP_SHORTMON:ln = opt_str(s, "  Month Shortcut", is_disp(DISP_SHORTMON));break;
 3626              		.loc 1 1009 0
 3627 018c 0546     		mov	r5, r0
 3628              	.LVL444:
 3629              	.LBB55:
 3630              	.LBB54:
 931:dm/dm42_menu.cc ****   s[1] = c;
 3631              		.loc 1 931 0
 3632 018e 2046     		mov	r0, r4
 3633 0190 FFF7FEFF 		bl	sprintf
 3634              	.LVL445:
 932:dm/dm42_menu.cc ****   return s;
 3635              		.loc 1 932 0
 3636 0194 6570     		strb	r5, [r4, #1]
 3637              	.LVL446:
 3638              	.LBE54:
 3639              	.LBE55:
1009:dm/dm42_menu.cc ****   case MI_DISP_SHORTMON:ln = opt_str(s, "  Month Shortcut", is_disp(DISP_SHORTMON));break;
 3640              		.loc 1 1009 0
 3641 0196 2046     		mov	r0, r4
 3642 0198 70BD     		pop	{r4, r5, r6, pc}
ARM GAS  /tmp/ccT5mNbt.s 			page 91


 3643              	.LVL447:
 3644              	.L255:
1008:dm/dm42_menu.cc ****   case MI_DISP_DATE_SEP:ln = sep_str(s, " Date Separator",  get_disp_date_sep());   break;
 3645              		.loc 1 1008 0
 3646 019a 0320     		movs	r0, #3
 3647 019c FFF7FEFF 		bl	is_disp
 3648              	.LVL448:
 3649 01a0 304B     		ldr	r3, .L278+4
 3650 01a2 4649     		ldr	r1, .L278+92
 3651 01a4 0246     		mov	r2, r0
 3652 01a6 2046     		mov	r0, r4
 3653              		.loc 1 1038 0
 3654 01a8 BDE87040 		pop	{r4, r5, r6, lr}
 3655              		.cfi_remember_state
 3656              		.cfi_restore 14
 3657              		.cfi_restore 6
 3658              		.cfi_restore 5
 3659              		.cfi_restore 4
 3660              		.cfi_def_cfa_offset 0
 3661              	.LVL449:
1008:dm/dm42_menu.cc ****   case MI_DISP_DATE_SEP:ln = sep_str(s, " Date Separator",  get_disp_date_sep());   break;
 3662              		.loc 1 1008 0
 3663 01ac 1847     		bx	r3
 3664              	.LVL450:
 3665              	.L254:
 3666              		.cfi_restore_state
1007:dm/dm42_menu.cc ****   case MI_DISP_DATE:    ln = opt_str(s, " Date",            is_disp(DISP_DATE));    break;
 3667              		.loc 1 1007 0
 3668 01ae 0220     		movs	r0, #2
 3669 01b0 FFF7FEFF 		bl	is_disp
 3670              	.LVL451:
 3671 01b4 2B4B     		ldr	r3, .L278+4
 3672 01b6 4249     		ldr	r1, .L278+96
 3673 01b8 0246     		mov	r2, r0
 3674 01ba 2046     		mov	r0, r4
 3675              		.loc 1 1038 0
 3676 01bc BDE87040 		pop	{r4, r5, r6, lr}
 3677              		.cfi_remember_state
 3678              		.cfi_restore 14
 3679              		.cfi_restore 6
 3680              		.cfi_restore 5
 3681              		.cfi_restore 4
 3682              		.cfi_def_cfa_offset 0
 3683              	.LVL452:
1007:dm/dm42_menu.cc ****   case MI_DISP_DATE:    ln = opt_str(s, " Date",            is_disp(DISP_DATE));    break;
 3684              		.loc 1 1007 0
 3685 01c0 1847     		bx	r3
 3686              	.LVL453:
 3687              	.L253:
 3688              		.cfi_restore_state
1006:dm/dm42_menu.cc ****   case MI_DISP_DOW:     ln = opt_str(s, " Day of Week",     is_disp(DISP_DOW));     break;
 3689              		.loc 1 1006 0
 3690 01c2 0120     		movs	r0, #1
 3691 01c4 FFF7FEFF 		bl	is_disp
 3692              	.LVL454:
 3693 01c8 264B     		ldr	r3, .L278+4
 3694 01ca 3E49     		ldr	r1, .L278+100
ARM GAS  /tmp/ccT5mNbt.s 			page 92


 3695 01cc 0246     		mov	r2, r0
 3696 01ce 2046     		mov	r0, r4
 3697              		.loc 1 1038 0
 3698 01d0 BDE87040 		pop	{r4, r5, r6, lr}
 3699              		.cfi_remember_state
 3700              		.cfi_restore 14
 3701              		.cfi_restore 6
 3702              		.cfi_restore 5
 3703              		.cfi_restore 4
 3704              		.cfi_def_cfa_offset 0
 3705              	.LVL455:
1006:dm/dm42_menu.cc ****   case MI_DISP_DOW:     ln = opt_str(s, " Day of Week",     is_disp(DISP_DOW));     break;
 3706              		.loc 1 1006 0
 3707 01d4 1847     		bx	r3
 3708              	.LVL456:
 3709              	.L252:
 3710              		.cfi_restore_state
 991:dm/dm42_menu.cc ****   case MI_CLEAN_RESET:  ln = "Load Clean State";     break;
 3711              		.loc 1 991 0
 3712 01d6 3C48     		ldr	r0, .L278+104
 3713 01d8 70BD     		pop	{r4, r5, r6, pc}
 3714              	.LVL457:
 3715              	.L251:
 990:dm/dm42_menu.cc ****   case MI_SAVE_STATE:   ln = "Save State";           break;
 3716              		.loc 1 990 0
 3717 01da 3C48     		ldr	r0, .L278+108
 3718 01dc 70BD     		pop	{r4, r5, r6, pc}
 3719              	.LVL458:
 3720              	.L250:
 989:dm/dm42_menu.cc ****   case MI_LOAD_STATE:   ln = "Load State";           break;
 3721              		.loc 1 989 0
 3722 01de 0846     		mov	r0, r1
 3723              		.loc 1 1038 0
 3724 01e0 BDE87040 		pop	{r4, r5, r6, lr}
 3725              		.cfi_remember_state
 3726              		.cfi_restore 14
 3727              		.cfi_restore 6
 3728              		.cfi_restore 5
 3729              		.cfi_restore 4
 3730              		.cfi_def_cfa_offset 0
 989:dm/dm42_menu.cc ****   case MI_LOAD_STATE:   ln = "Load State";           break;
 3731              		.loc 1 989 0
 3732 01e4 3A49     		ldr	r1, .L278+112
 3733              	.LVL459:
 3734 01e6 FFF7FEBF 		b	state_str
 3735              	.LVL460:
 3736              	.L249:
 3737              		.cfi_restore_state
1003:dm/dm42_menu.cc **** 
 3738              		.loc 1 1003 0
 3739 01ea FFF7FEFF 		bl	get_stack_layout
 3740              	.LVL461:
 3741 01ee 3949     		ldr	r1, .L278+116
 3742 01f0 0F28     		cmp	r0, #15
 3743              	.L277:
 998:dm/dm42_menu.cc ****   case MI_STACK_XYZT:   ln = orb_str(s, "XYZT",  get_stack_layout() == STACK_XYZT);  break;
 3744              		.loc 1 998 0
ARM GAS  /tmp/ccT5mNbt.s 			page 93


 3745 01f2 2046     		mov	r0, r4
 3746 01f4 14BF     		ite	ne
 3747 01f6 0022     		movne	r2, #0
 3748 01f8 0122     		moveq	r2, #1
 3749              		.loc 1 1038 0
 3750 01fa BDE87040 		pop	{r4, r5, r6, lr}
 3751              		.cfi_remember_state
 3752              		.cfi_restore 14
 3753              		.cfi_restore 6
 3754              		.cfi_restore 5
 3755              		.cfi_restore 4
 3756              		.cfi_def_cfa_offset 0
 3757              	.LVL462:
 998:dm/dm42_menu.cc ****   case MI_STACK_XYZT:   ln = orb_str(s, "XYZT",  get_stack_layout() == STACK_XYZT);  break;
 3758              		.loc 1 998 0
 3759 01fe FFF7FEBF 		b	orb_str
 3760              	.LVL463:
 3761              	.L248:
 3762              		.cfi_restore_state
1002:dm/dm42_menu.cc ****   case MI_STACK_LXYZT:  ln = orb_str(s, "LXYZT", get_stack_layout() == STACK_LXYZT); break;
 3763              		.loc 1 1002 0
 3764 0202 FFF7FEFF 		bl	get_stack_layout
 3765              	.LVL464:
 3766 0206 3449     		ldr	r1, .L278+120
 3767 0208 0228     		cmp	r0, #2
 3768 020a F2E7     		b	.L277
 3769              	.LVL465:
 3770              	.L247:
1001:dm/dm42_menu.cc ****   case MI_STACK_XY:     ln = orb_str(s, "XY",    get_stack_layout() == STACK_XY);    break;
 3771              		.loc 1 1001 0
 3772 020c FFF7FEFF 		bl	get_stack_layout
 3773              	.LVL466:
 3774 0210 3249     		ldr	r1, .L278+124
 3775 0212 2228     		cmp	r0, #34
 3776 0214 EDE7     		b	.L277
 3777              	.LVL467:
 3778              	.L246:
1000:dm/dm42_menu.cc ****   case MI_STACK_XYA:    ln = orb_str(s, "XYA",   get_stack_layout() == STACK_XYA);   break;
 3779              		.loc 1 1000 0
 3780 0216 FFF7FEFF 		bl	get_stack_layout
 3781              	.LVL468:
 3782 021a 3149     		ldr	r1, .L278+128
 3783 021c 1228     		cmp	r0, #18
 3784 021e E8E7     		b	.L277
 3785              	.LVL469:
 3786              	.L245:
 999:dm/dm42_menu.cc ****   case MI_STACK_XYL:    ln = orb_str(s, "XYL",   get_stack_layout() == STACK_XYL);   break;
 3787              		.loc 1 999 0
 3788 0220 FFF7FEFF 		bl	get_stack_layout
 3789              	.LVL470:
 3790 0224 2F49     		ldr	r1, .L278+132
 3791 0226 0E28     		cmp	r0, #14
 3792 0228 E3E7     		b	.L277
 3793              	.LVL471:
 3794              	.L244:
 998:dm/dm42_menu.cc ****   case MI_STACK_XYZT:   ln = orb_str(s, "XYZT",  get_stack_layout() == STACK_XYZT);  break;
 3795              		.loc 1 998 0
ARM GAS  /tmp/ccT5mNbt.s 			page 94


 3796 022a FFF7FEFF 		bl	get_stack_layout
 3797              	.LVL472:
 3798 022e 2E49     		ldr	r1, .L278+136
 3799 0230 2E28     		cmp	r0, #46
 3800 0232 DEE7     		b	.L277
 3801              	.LVL473:
 3802              	.L243:
 997:dm/dm42_menu.cc ****   case MI_STACK_XYZTA:  ln = orb_str(s, "XYZTA", get_stack_layout() == STACK_XYZTA); break;
 3803              		.loc 1 997 0
 3804 0234 FFF7FEFF 		bl	get_stack_layout
 3805              	.LVL474:
 3806 0238 2C49     		ldr	r1, .L278+140
 3807 023a 1E28     		cmp	r0, #30
 3808 023c D9E7     		b	.L277
 3809              	.LVL475:
 3810              	.L242:
 995:dm/dm42_menu.cc **** 
 3811              		.loc 1 995 0
 3812 023e 0846     		mov	r0, r1
 3813              		.loc 1 1038 0
 3814 0240 BDE87040 		pop	{r4, r5, r6, lr}
 3815              		.cfi_remember_state
 3816              		.cfi_restore 14
 3817              		.cfi_restore 6
 3818              		.cfi_restore 5
 3819              		.cfi_restore 4
 3820              		.cfi_def_cfa_offset 0
 995:dm/dm42_menu.cc **** 
 3821              		.loc 1 995 0
 3822 0244 2A49     		ldr	r1, .L278+144
 3823              	.LVL476:
 3824 0246 FFF7FEBF 		b	layout_str
 3825              	.LVL477:
 3826              	.L241:
 3827              		.cfi_restore_state
 992:dm/dm42_menu.cc **** 
 3828              		.loc 1 992 0
 3829 024a 2A48     		ldr	r0, .L278+148
 3830 024c 70BD     		pop	{r4, r5, r6, pc}
 3831              	.LVL478:
 3832              	.L240:
 988:dm/dm42_menu.cc ****   case MI_STATEFILE:    ln = state_str(s, "Calc. State >"); break;
 3833              		.loc 1 988 0
 3834 024e 2A48     		ldr	r0, .L278+152
 3835 0250 70BD     		pop	{r4, r5, r6, pc}
 3836              	.LVL479:
 3837              	.L239:
 987:dm/dm42_menu.cc ****   case MI_FILE:         ln = "File >";               break;
 3838              		.loc 1 987 0
 3839 0252 2A48     		ldr	r0, .L278+156
 3840 0254 70BD     		pop	{r4, r5, r6, pc}
 3841              	.LVL480:
 3842              	.L238:
 986:dm/dm42_menu.cc ****   case MI_SAVE_STAT:    ln = "Save Calculator State";break;
 3843              		.loc 1 986 0
 3844 0256 2A48     		ldr	r0, .L278+160
 3845 0258 70BD     		pop	{r4, r5, r6, pc}
ARM GAS  /tmp/ccT5mNbt.s 			page 95


 3846              	.L235:
 3847              	.LVL481:
1033:dm/dm42_menu.cc ****     break;
 3848              		.loc 1 1033 0
 3849 025a 0020     		movs	r0, #0
1034:dm/dm42_menu.cc ****   }
 3850              		.loc 1 1034 0
 3851 025c 70BD     		pop	{r4, r5, r6, pc}
 3852              	.L279:
 3853 025e 00BF     		.align	2
 3854              	.L278:
 3855 0260 00000000 		.word	.LC66
 3856 0264 65030008 		.word	134218597
 3857 0268 04020000 		.word	.LC101
 3858 026c 18020000 		.word	.LC102
 3859 0270 F8010000 		.word	.LC100
 3860 0274 E8010000 		.word	.LC99
 3861 0278 8C000000 		.word	.LC76
 3862 027c 54000000 		.word	.LC72
 3863 0280 D0010000 		.word	.LC98
 3864 0284 00000000 		.word	.LC65
 3865 0288 B8010000 		.word	.LC97
 3866 028c A0010000 		.word	.LC96
 3867 0290 88010000 		.word	.LC95
 3868 0294 70010000 		.word	.LC94
 3869 0298 58010000 		.word	.LC93
 3870 029c 78000000 		.word	.LC75
 3871 02a0 70000000 		.word	.LC74
 3872 02a4 64000000 		.word	.LC73
 3873 02a8 3C010000 		.word	.LC92
 3874 02ac 34010000 		.word	.LC91
 3875 02b0 20010000 		.word	.LC90
 3876 02b4 10010000 		.word	.LC89
 3877 02b8 00000000 		.word	.LC59
 3878 02bc 08010000 		.word	.LC88
 3879 02c0 F8000000 		.word	.LC87
 3880 02c4 E8000000 		.word	.LC86
 3881 02c8 34000000 		.word	.LC70
 3882 02cc 28000000 		.word	.LC69
 3883 02d0 9C000000 		.word	.LC77
 3884 02d4 E0000000 		.word	.LC85
 3885 02d8 DC000000 		.word	.LC84
 3886 02dc D8000000 		.word	.LC83
 3887 02e0 D4000000 		.word	.LC82
 3888 02e4 CC000000 		.word	.LC81
 3889 02e8 C4000000 		.word	.LC80
 3890 02ec BC000000 		.word	.LC79
 3891 02f0 AC000000 		.word	.LC78
 3892 02f4 40000000 		.word	.LC71
 3893 02f8 20000000 		.word	.LC68
 3894 02fc 30000000 		.word	.LC58
 3895 0300 10000000 		.word	.LC67
 3896              		.cfi_endproc
 3897              	.LFE22:
 3899              		.global	MID_STACK_AREA
 3900              		.global	MID_TOPBAR
 3901              		.global	MID_STATEFILE
ARM GAS  /tmp/ccT5mNbt.s 			page 96


 3902              		.global	MID_STACK_CONFIG
 3903              		.global	MID_PRINT
 3904              		.global	MID_FILE
 3905              		.global	MID_MENU
 3906              		.section	.rodata
 3907              		.align	2
 3908              		.set	.LANCHOR0,. + 0
 3909              	.LC50:
 3910 0000 04000000 		.word	.LC0
 3911 0004 00000000 		.word	.LC1
 3912 0008 0C000000 		.word	.LC2
 3913 000c 14000000 		.word	.LC3
 3914 0010 00000000 		.word	.LC1
 3915 0014 1C000000 		.word	.LC4
 3916              		.section	.rodata.MID_FILE,"a",%progbits
 3917              		.align	2
 3918              		.set	.LANCHOR1,. + 0
 3921              	MID_FILE:
 3922 0000 54000000 		.word	.LC107
 3923 0004 00000000 		.word	_ZL8mid_file
 3924 0008 00000000 		.word	0
 3925 000c 00000000 		.word	0
 3926              		.section	.rodata.MID_MENU,"a",%progbits
 3927              		.align	2
 3930              	MID_MENU:
 3931 0000 5C000000 		.word	.LC108
 3932 0004 00000000 		.word	_ZL8mid_menu
 3933 0008 00000000 		.word	0
 3934 000c 00000000 		.word	0
 3935              		.section	.rodata.MID_PRINT,"a",%progbits
 3936              		.align	2
 3937              		.set	.LANCHOR3,. + 0
 3940              	MID_PRINT:
 3941 0000 44000000 		.word	.LC106
 3942 0004 00000000 		.word	_ZL9mid_print
 3943 0008 00000000 		.word	0
 3944 000c 00000000 		.word	0
 3945              		.section	.rodata.MID_STACK_AREA,"a",%progbits
 3946              		.align	2
 3947              		.set	.LANCHOR7,. + 0
 3950              	MID_STACK_AREA:
 3951 0000 20000000 		.word	.LC103
 3952 0004 00000000 		.word	_ZL14mid_stack_area
 3953 0008 00000000 		.word	0
 3954 000c 00000000 		.word	0
 3955              		.section	.rodata.MID_STACK_CONFIG,"a",%progbits
 3956              		.align	2
 3957              		.set	.LANCHOR4,. + 0
 3960              	MID_STACK_CONFIG:
 3961 0000 AC000000 		.word	.LC78
 3962 0004 00000000 		.word	_ZL9mid_stack
 3963 0008 00000000 		.word	0
 3964 000c 00000000 		.word	0
 3965              		.section	.rodata.MID_STATEFILE,"a",%progbits
 3966              		.align	2
 3967              		.set	.LANCHOR2,. + 0
 3970              	MID_STATEFILE:
ARM GAS  /tmp/ccT5mNbt.s 			page 97


 3971 0000 00000000 		.word	.LC44
 3972 0004 00000000 		.word	_ZL13mid_statefile
 3973 0008 00000000 		.word	0
 3974 000c 00000000 		.word	0
 3975              		.section	.rodata.MID_TOPBAR,"a",%progbits
 3976              		.align	2
 3977              		.set	.LANCHOR5,. + 0
 3980              	MID_TOPBAR:
 3981 0000 2C000000 		.word	.LC104
 3982 0004 00000000 		.word	_ZL10mid_topbar
 3983 0008 00000000 		.word	0
 3984 000c 00000000 		.word	0
 3985              		.section	.rodata._ZL10mid_topbar,"a",%progbits
 3986              		.align	2
 3989              	_ZL10mid_topbar:
 3990 0000 2C       		.byte	44
 3991 0001 2D       		.byte	45
 3992 0002 2E       		.byte	46
 3993 0003 2F       		.byte	47
 3994 0004 30       		.byte	48
 3995 0005 31       		.byte	49
 3996 0006 32       		.byte	50
 3997 0007 00       		.byte	0
 3998              		.section	.rodata._ZL12MID_SETTINGS,"a",%progbits
 3999              		.align	2
 4000              		.set	.LANCHOR6,. + 0
 4003              	_ZL12MID_SETTINGS:
 4004 0000 38000000 		.word	.LC105
 4005 0004 00000000 		.word	_ZL12mid_settings
 4006 0008 00000000 		.word	0
 4007 000c 00000000 		.word	0
 4008              		.section	.rodata._ZL12mid_settings,"a",%progbits
 4009              		.align	2
 4012              	_ZL12mid_settings:
 4013 0000 CA       		.byte	-54
 4014 0001 CB       		.byte	-53
 4015 0002 3C       		.byte	60
 4016 0003 35       		.byte	53
 4017 0004 C7       		.byte	-57
 4018 0005 D2       		.byte	-46
 4019 0006 21       		.byte	33
 4020 0007 00       		.byte	0
 4021              		.section	.rodata._ZL13mid_statefile,"a",%progbits
 4022              		.align	2
 4025              	_ZL13mid_statefile:
 4026 0000 2A       		.byte	42
 4027 0001 2B       		.byte	43
 4028 0002 20       		.byte	32
 4029 0003 00       		.byte	0
 4030              		.section	.rodata._ZL14mid_stack_area,"a",%progbits
 4031              		.align	2
 4034              	_ZL14mid_stack_area:
 4035 0000 36       		.byte	54
 4036 0001 37       		.byte	55
 4037 0002 38       		.byte	56
 4038 0003 39       		.byte	57
 4039 0004 3A       		.byte	58
ARM GAS  /tmp/ccT5mNbt.s 			page 98


 4040 0005 3B       		.byte	59
 4041 0006 00       		.byte	0
 4042              		.section	.rodata._ZL8mid_file,"a",%progbits
 4043              		.align	2
 4046              	_ZL8mid_file:
 4047 0000 1C       		.byte	28
 4048 0001 1D       		.byte	29
 4049 0002 C4       		.byte	-60
 4050 0003 D0       		.byte	-48
 4051 0004 00       		.byte	0
 4052              		.section	.rodata._ZL8mid_menu,"a",%progbits
 4053              		.align	2
 4056              	_ZL8mid_menu:
 4057 0000 1F       		.byte	31
 4058 0001 29       		.byte	41
 4059 0002 3D       		.byte	61
 4060 0003 33       		.byte	51
 4061 0004 C8       		.byte	-56
 4062 0005 34       		.byte	52
 4063 0006 00       		.byte	0
 4064              		.section	.rodata._ZL9mid_print,"a",%progbits
 4065              		.align	2
 4068              	_ZL9mid_print:
 4069 0000 3E       		.byte	62
 4070 0001 3F       		.byte	63
 4071 0002 40       		.byte	64
 4072 0003 41       		.byte	65
 4073 0004 00       		.byte	0
 4074              		.section	.rodata._ZL9mid_stack,"a",%progbits
 4075              		.align	2
 4078              	_ZL9mid_stack:
 4079 0000 22       		.byte	34
 4080 0001 23       		.byte	35
 4081 0002 24       		.byte	36
 4082 0003 25       		.byte	37
 4083 0004 26       		.byte	38
 4084 0005 27       		.byte	39
 4085 0006 28       		.byte	40
 4086 0007 00       		.byte	0
 4087              		.section	.rodata.after_fat_format_dm42.str1.4,"aMS",%progbits,1
 4088              		.align	2
 4089              	.LC18:
 4090 0000 444D3432 		.ascii	"DM42\000"
 4090      00
 4091 0005 000000   		.space	3
 4092              	.LC19:
 4093 0008 2F50524F 		.ascii	"/PROGRAMS\000"
 4093      4752414D 
 4093      5300
 4094 0012 0000     		.space	2
 4095              	.LC20:
 4096 0014 2F535441 		.ascii	"/STATE\000"
 4096      544500
 4097              		.section	.rodata.b_str.str1.4,"aMS",%progbits,1
 4098              		.align	2
 4099              	.LC60:
 4100 0000 FF00     		.ascii	"\377\000"
ARM GAS  /tmp/ccT5mNbt.s 			page 99


 4101              		.section	.rodata.layout_str.str1.4,"aMS",%progbits,1
 4102              		.align	2
 4103              	.LC61:
 4104 0000 25732020 		.ascii	"%s  [ \000"
 4104      5B2000
 4105 0007 00       		.space	1
 4106              	.LC62:
 4107 0008 205D00   		.ascii	" ]\000"
 4108              		.section	.rodata.lcd_for_dm42.str1.4,"aMS",%progbits,1
 4109              		.align	2
 4110              	.LC21:
 4111 0000 46726565 		.ascii	"Free42 Memory Allocation Fail\000"
 4111      3432204D 
 4111      656D6F72 
 4111      7920416C 
 4111      6C6F6361 
 4112 001e 0000     		.space	2
 4113              	.LC22:
 4114 0020 556E6861 		.ascii	"Unhandled memory allocation:\000"
 4114      6E646C65 
 4114      64206D65 
 4114      6D6F7279 
 4114      20616C6C 
 4115 003d 000000   		.space	3
 4116              	.LC23:
 4117 0040 5072696E 		.ascii	"Print Buffer Fail\000"
 4117      74204275 
 4117      66666572 
 4117      20466169 
 4117      6C00
 4118 0052 0000     		.space	2
 4119              	.LC24:
 4120 0054 43616E6E 		.ascii	"Cannot prepare buffer for\000"
 4120      6F742070 
 4120      72657061 
 4120      72652062 
 4120      75666665 
 4121 006e 0000     		.space	2
 4122              	.LC25:
 4123 0070 7072696E 		.ascii	"printing to file.\000"
 4123      74696E67 
 4123      20746F20 
 4123      66696C65 
 4123      2E00
 4124 0082 0000     		.space	2
 4125              	.LC26:
 4126 0084 4552524F 		.ascii	"ERROR:\000"
 4126      523A00
 4127 008b 00       		.space	1
 4128              	.LC27:
 4129 008c 53656C65 		.ascii	"Select Programs\000"
 4129      63742050 
 4129      726F6772 
 4129      616D7300 
 4130              	.LC28:
 4131 009c 4E6F2070 		.ascii	"No program selected\000"
 4131      726F6772 
ARM GAS  /tmp/ccT5mNbt.s 			page 100


 4131      616D2073 
 4131      656C6563 
 4131      74656400 
 4132              	.LC29:
 4133 00b0 50726573 		.ascii	"Press a key to continue...\000"
 4133      73206120 
 4133      6B657920 
 4133      746F2063 
 4133      6F6E7469 
 4134 00cb 00       		.space	1
 4135              	.LC30:
 4136 00cc 4C6F6164 		.ascii	"Loading from File\000"
 4136      696E6720 
 4136      66726F6D 
 4136      2046696C 
 4136      6500
 4137 00de 0000     		.space	2
 4138              	.LC31:
 4139 00e0 4C6F6164 		.ascii	"Loading calculator state ...\000"
 4139      696E6720 
 4139      63616C63 
 4139      756C6174 
 4139      6F722073 
 4140 00fd 000000   		.space	3
 4141              	.LC32:
 4142 0100 53617669 		.ascii	"Saving to File\000"
 4142      6E672074 
 4142      6F204669 
 4142      6C6500
 4143 010f 00       		.space	1
 4144              	.LC33:
 4145 0110 53617669 		.ascii	"Saving calculator state ...\000"
 4145      6E672063 
 4145      616C6375 
 4145      6C61746F 
 4145      72207374 
 4146              	.LC34:
 4147 012c 53617665 		.ascii	"Save State Error\000"
 4147      20537461 
 4147      74652045 
 4147      72726F72 
 4147      00
 4148 013d 000000   		.space	3
 4149              	.LC35:
 4150 0140 43616C63 		.ascii	"Calculator state save failed.\000"
 4150      756C6174 
 4150      6F722073 
 4150      74617465 
 4150      20736176 
 4151 015e 0000     		.space	2
 4152              	.LC36:
 4153 0160 43686563 		.ascii	"Check the FAT filesystem.\000"
 4153      6B207468 
 4153      65204641 
 4153      54206669 
 4153      6C657379 
 4154 017a 0000     		.space	2
ARM GAS  /tmp/ccT5mNbt.s 			page 101


 4155              	.LC37:
 4156 017c 4469736B 		.ascii	"Disk full or too many\000"
 4156      2066756C 
 4156      6C206F72 
 4156      20746F6F 
 4156      206D616E 
 4157 0192 0000     		.space	2
 4158              	.LC38:
 4159 0194 726F6F74 		.ascii	"root directory items?\000"
 4159      20646972 
 4159      6563746F 
 4159      72792069 
 4159      74656D73 
 4160 01aa 0000     		.space	2
 4161              	.LC39:
 4162 01ac 20202020 		.ascii	"    Press EXIT key to continue...\000"
 4162      50726573 
 4162      73204558 
 4162      4954206B 
 4162      65792074 
 4163 01ce 0000     		.space	2
 4164              	.LC40:
 4165 01d0 444D3432 		.ascii	"DM42 v3.12 (C) SwissMicros GmbH\000"
 4165      2076332E 
 4165      31322028 
 4165      43292053 
 4165      77697373 
 4166              	.LC41:
 4167 01f0 25732028 		.ascii	"%s (C) 2004-2018, Thomas Okken\000"
 4167      43292032 
 4167      3030342D 
 4167      32303138 
 4167      2C205468 
 4168 020f 00       		.space	1
 4169              	.LC42:
 4170 0210 496E7465 		.ascii	"Intel Decimal Floating-Point Math Lib v2.0\000"
 4170      6C204465 
 4170      63696D61 
 4170      6C20466C 
 4170      6F617469 
 4171 023b 00       		.space	1
 4172              	.LC43:
 4173 023c 20202843 		.ascii	"  (C) 2007-2011, Intel Corp.\000"
 4173      29203230 
 4173      30372D32 
 4173      3031312C 
 4173      20496E74 
 4174              		.section	.rodata.load_statefile.str1.4,"aMS",%progbits,1
 4175              		.align	2
 4176              	.LC7:
 4177 0000 43616C63 		.ascii	"Calculator state file:\000"
 4177      756C6174 
 4177      6F722073 
 4177      74617465 
 4177      2066696C 
 4178 0017 00       		.space	1
 4179              	.LC8:
ARM GAS  /tmp/ccT5mNbt.s 			page 102


 4180 0018 5741524E 		.ascii	"WARNING: Current calculator state\000"
 4180      494E473A 
 4180      20437572 
 4180      72656E74 
 4180      2063616C 
 4181 003a 0000     		.space	2
 4182              	.LC9:
 4183 003c 77696C6C 		.ascii	"will be lost.\000"
 4183      20626520 
 4183      6C6F7374 
 4183      2E00
 4184 004a 0000     		.space	2
 4185              	.LC10:
 4186 004c 50726573 		.ascii	"Press [ENTER] to confirm.\000"
 4186      73205B45 
 4186      4E544552 
 4186      5D20746F 
 4186      20636F6E 
 4187              		.section	.rodata.menu_line_str.str1.4,"aMS",%progbits,1
 4188              		.align	2
 4189              	.LC66:
 4190 0000 4C6F6164 		.ascii	"Load Program >\000"
 4190      2050726F 
 4190      6772616D 
 4190      203E00
 4191 000f 00       		.space	1
 4192              	.LC67:
 4193 0010 53617665 		.ascii	"Save Program >\000"
 4193      2050726F 
 4193      6772616D 
 4193      203E00
 4194 001f 00       		.space	1
 4195              	.LC68:
 4196 0020 46696C65 		.ascii	"File >\000"
 4196      203E00
 4197 0027 00       		.space	1
 4198              	.LC69:
 4199 0028 4C6F6164 		.ascii	"Load State\000"
 4199      20537461 
 4199      746500
 4200 0033 00       		.space	1
 4201              	.LC70:
 4202 0034 53617665 		.ascii	"Save State\000"
 4202      20537461 
 4202      746500
 4203 003f 00       		.space	1
 4204              	.LC71:
 4205 0040 4C6F6164 		.ascii	"Load Clean State\000"
 4205      20436C65 
 4205      616E2053 
 4205      74617465 
 4205      00
 4206 0051 000000   		.space	3
 4207              	.LC72:
 4208 0054 53746174 		.ascii	"Status Bar >\000"
 4208      75732042 
 4208      6172203E 
ARM GAS  /tmp/ccT5mNbt.s 			page 103


 4208      00
 4209 0061 000000   		.space	3
 4210              	.LC73:
 4211 0064 53657474 		.ascii	"Settings >\000"
 4211      696E6773 
 4211      203E00
 4212 006f 00       		.space	1
 4213              	.LC74:
 4214 0070 41626F75 		.ascii	"About >\000"
 4214      74203E00 
 4215              	.LC75:
 4216 0078 53746163 		.ascii	"Stack Font Sizes >\000"
 4216      6B20466F 
 4216      6E742053 
 4216      697A6573 
 4216      203E00
 4217 008b 00       		.space	1
 4218              	.LC76:
 4219 008c 5072696E 		.ascii	"Print to File >\000"
 4219      7420746F 
 4219      2046696C 
 4219      65203E00 
 4220              	.LC77:
 4221 009c 43616C63 		.ascii	"Calc. State >\000"
 4221      2E205374 
 4221      61746520 
 4221      3E00
 4222 00aa 0000     		.space	2
 4223              	.LC78:
 4224 00ac 53746163 		.ascii	"Stack Layout\000"
 4224      6B204C61 
 4224      796F7574 
 4224      00
 4225 00b9 000000   		.space	3
 4226              	.LC79:
 4227 00bc 58595A54 		.ascii	"XYZTL\000"
 4227      4C00
 4228 00c2 0000     		.space	2
 4229              	.LC80:
 4230 00c4 58595A54 		.ascii	"XYZTA\000"
 4230      4100
 4231 00ca 0000     		.space	2
 4232              	.LC81:
 4233 00cc 58595A54 		.ascii	"XYZT\000"
 4233      00
 4234 00d1 000000   		.space	3
 4235              	.LC82:
 4236 00d4 58594C00 		.ascii	"XYL\000"
 4237              	.LC83:
 4238 00d8 58594100 		.ascii	"XYA\000"
 4239              	.LC84:
 4240 00dc 585900   		.ascii	"XY\000"
 4241 00df 00       		.space	1
 4242              	.LC85:
 4243 00e0 4C58595A 		.ascii	"LXYZT\000"
 4243      5400
 4244 00e6 0000     		.space	2
ARM GAS  /tmp/ccT5mNbt.s 			page 104


 4245              	.LC86:
 4246 00e8 20537461 		.ascii	" State Filename\000"
 4246      74652046 
 4246      696C656E 
 4246      616D6500 
 4247              	.LC87:
 4248 00f8 20446179 		.ascii	" Day of Week\000"
 4248      206F6620 
 4248      5765656B 
 4248      00
 4249 0105 000000   		.space	3
 4250              	.LC88:
 4251 0108 20446174 		.ascii	" Date\000"
 4251      6500
 4252 010e 0000     		.space	2
 4253              	.LC89:
 4254 0110 20446174 		.ascii	" Date Separator\000"
 4254      65205365 
 4254      70617261 
 4254      746F7200 
 4255              	.LC90:
 4256 0120 20204D6F 		.ascii	"  Month Shortcut\000"
 4256      6E746820 
 4256      53686F72 
 4256      74637574 
 4256      00
 4257 0131 000000   		.space	3
 4258              	.LC91:
 4259 0134 2054696D 		.ascii	" Time\000"
 4259      6500
 4260 013a 0000     		.space	2
 4261              	.LC92:
 4262 013c 20506F77 		.ascii	" Power Voltage in Header\000"
 4262      65722056 
 4262      6F6C7461 
 4262      67652069 
 4262      6E204865 
 4263 0155 000000   		.space	3
 4264              	.LC93:
 4265 0158 466F6E74 		.ascii	"Font Size Offset Reg X\000"
 4265      2053697A 
 4265      65204F66 
 4265      66736574 
 4265      20526567 
 4266 016f 00       		.space	1
 4267              	.LC94:
 4268 0170 466F6E74 		.ascii	"Font Size Offset Reg Y\000"
 4268      2053697A 
 4268      65204F66 
 4268      66736574 
 4268      20526567 
 4269 0187 00       		.space	1
 4270              	.LC95:
 4271 0188 466F6E74 		.ascii	"Font Size Offset Reg Z\000"
 4271      2053697A 
 4271      65204F66 
 4271      66736574 
ARM GAS  /tmp/ccT5mNbt.s 			page 105


 4271      20526567 
 4272 019f 00       		.space	1
 4273              	.LC96:
 4274 01a0 466F6E74 		.ascii	"Font Size Offset Reg T\000"
 4274      2053697A 
 4274      65204F66 
 4274      66736574 
 4274      20526567 
 4275 01b7 00       		.space	1
 4276              	.LC97:
 4277 01b8 466F6E74 		.ascii	"Font Size Offset Reg L\000"
 4277      2053697A 
 4277      65204F66 
 4277      66736574 
 4277      20526567 
 4278 01cf 00       		.space	1
 4279              	.LC98:
 4280 01d0 466F6E74 		.ascii	"Font Size Offset Reg A\000"
 4280      2053697A 
 4280      65204F66 
 4280      66736574 
 4280      20526567 
 4281 01e7 00       		.space	1
 4282              	.LC99:
 4283 01e8 20477261 		.ascii	" Graphics Print\000"
 4283      70686963 
 4283      73205072 
 4283      696E7400 
 4284              	.LC100:
 4285 01f8 20546578 		.ascii	" Text Print\000"
 4285      74205072 
 4285      696E7400 
 4286              	.LC101:
 4287 0204 20446F6E 		.ascii	" Don't print to IR\000"
 4287      27742070 
 4287      72696E74 
 4287      20746F20 
 4287      495200
 4288 0217 00       		.space	1
 4289              	.LC102:
 4290 0218 20477261 		.ascii	" Graphics in Text\000"
 4290      70686963 
 4290      7320696E 
 4290      20546578 
 4290      7400
 4291              		.section	.rodata.nr_str.str1.4,"aMS",%progbits,1
 4292              		.align	2
 4293              	.LC65:
 4294 0000 25733A20 		.ascii	"%s: %i\000"
 4294      256900
 4295              		.section	.rodata.pgm_export.str1.4,"aMS",%progbits,1
 4296              		.align	2
 4297              	.LC51:
 4298 0000 43616E6E 		.ascii	"Cannot access /PROGRAMS\000"
 4298      6F742061 
 4298      63636573 
 4298      73202F50 
ARM GAS  /tmp/ccT5mNbt.s 			page 106


 4298      524F4752 
 4299              	.LC52:
 4300 0018 2F00     		.ascii	"/\000"
 4301 001a 0000     		.space	2
 4302              	.LC53:
 4303 001c 2E726177 		.ascii	".raw\000"
 4303      00
 4304 0021 000000   		.space	3
 4305              	.LC54:
 4306 0024 50726F67 		.ascii	"Program Export Filename\000"
 4306      72616D20 
 4306      4578706F 
 4306      72742046 
 4306      696C656E 
 4307              		.section	.rodata.pgm_export_enter.str1.4,"aMS",%progbits,1
 4308              		.align	2
 4309              	.LC16:
 4310 0000 50726F67 		.ascii	"Program Export\000"
 4310      72616D20 
 4310      4578706F 
 4310      727400
 4311 000f 00       		.space	1
 4312              	.LC17:
 4313 0010 53617669 		.ascii	"Saving ...\000"
 4313      6E67202E 
 4313      2E2E00
 4314              		.section	.rodata.pgm_import_enter.str1.4,"aMS",%progbits,1
 4315              		.align	2
 4316              	.LC12:
 4317 0000 4C6F6164 		.ascii	"Loading ...\000"
 4317      696E6720 
 4317      2E2E2E00 
 4318              	.LC13:
 4319 000c 4661696C 		.ascii	"Fail to open.\000"
 4319      20746F20 
 4319      6F70656E 
 4319      2E00
 4320 001a 0000     		.space	2
 4321              	.LC14:
 4322 001c 4661696C 		.ascii	"Fail - %i\000"
 4322      202D2025 
 4322      6900
 4323 0026 0000     		.space	2
 4324              	.LC15:
 4325 0028 53756363 		.ascii	"Success\000"
 4325      65737300 
 4326              		.section	.rodata.run_menu_item.str1.4,"aMS",%progbits,1
 4327              		.align	2
 4328              	.LC55:
 4329 0000 50726F67 		.ascii	"Program Import\000"
 4329      72616D20 
 4329      496D706F 
 4329      727400
 4330 000f 00       		.space	1
 4331              	.LC56:
 4332 0010 2E733432 		.ascii	".s42\000"
 4332      00
ARM GAS  /tmp/ccT5mNbt.s 			page 107


 4333 0015 000000   		.space	3
 4334              	.LC57:
 4335 0018 4C6F6164 		.ascii	"Load Calculator State\000"
 4335      2043616C 
 4335      63756C61 
 4335      746F7220 
 4335      53746174 
 4336 002e 0000     		.space	2
 4337              	.LC58:
 4338 0030 53617665 		.ascii	"Save Calculator State\000"
 4338      2043616C 
 4338      63756C61 
 4338      746F7220 
 4338      53746174 
 4339              		.section	.rodata.run_reset_state_file.str1.4,"aMS",%progbits,1
 4340              		.align	2
 4341              	.LC44:
 4342 0000 43616C63 		.ascii	"Calculator State\000"
 4342      756C6174 
 4342      6F722053 
 4342      74617465 
 4342      00
 4343 0011 000000   		.space	3
 4344              	.LC45:
 4345 0014 596F7520 		.ascii	"You are about to reset calculator\000"
 4345      61726520 
 4345      61626F75 
 4345      7420746F 
 4345      20726573 
 4346 0036 0000     		.space	2
 4347              	.LC46:
 4348 0038 73746174 		.ascii	"state.\000"
 4348      652E00
 4349              		.section	.rodata.save_statefile.str1.4,"aMS",%progbits,1
 4350              		.align	2
 4351              	.LC11:
 4352 0000 53617669 		.ascii	"Saving state ...\000"
 4352      6E672073 
 4352      74617465 
 4352      202E2E2E 
 4352      00
 4353              		.section	.rodata.select_programs.str1.4,"aMS",%progbits,1
 4354              		.align	2
 4355              	.LC47:
 4356 0000 4D61782E 		.ascii	"Max. nr. of selections is 64\000"
 4356      206E722E 
 4356      206F6620 
 4356      73656C65 
 4356      6374696F 
 4357 001d 000000   		.space	3
 4358              	.LC48:
 4359 0020 2000     		.ascii	" \000"
 4360 0022 0000     		.space	2
 4361              	.LC49:
 4362 0024 2E2E2E00 		.ascii	"...\000"
 4363              		.section	.rodata.sep_str.str1.4,"aMS",%progbits,1
 4364              		.align	2
ARM GAS  /tmp/ccT5mNbt.s 			page 108


 4365              	.LC59:
 4366 0000 5B205D20 		.ascii	"[ ] %s\000"
 4366      257300
 4367              		.section	.rodata.state_str.str1.4,"aMS",%progbits,1
 4368              		.align	2
 4369              	.LC63:
 4370 0000 2573205B 		.ascii	"%s [\000"
 4370      00
 4371 0005 000000   		.space	3
 4372              	.LC64:
 4373 0008 5D00     		.ascii	"]\000"
 4374              		.section	.rodata.str1.4,"aMS",%progbits,1
 4375              		.align	2
 4376              	.LC1:
 4377 0000 00       		.ascii	"\000"
 4378 0001 000000   		.space	3
 4379              	.LC0:
 4380 0004 2053656C 		.ascii	" Sel\000"
 4380      00
 4381 0009 000000   		.space	3
 4382              	.LC2:
 4383 000c 432D416C 		.ascii	"C-All\000"
 4383      6C00
 4384 0012 0000     		.space	2
 4385              	.LC3:
 4386 0014 532D416C 		.ascii	"S-All\000"
 4386      6C00
 4387 001a 0000     		.space	2
 4388              	.LC4:
 4389 001c 53656C00 		.ascii	"Sel\000"
 4390              	.LC103:
 4391 0020 53746163 		.ascii	"Stack Area\000"
 4391      6B204172 
 4391      656100
 4392 002b 00       		.space	1
 4393              	.LC104:
 4394 002c 53746174 		.ascii	"Status Bar\000"
 4394      75732042 
 4394      617200
 4395 0037 00       		.space	1
 4396              	.LC105:
 4397 0038 53657474 		.ascii	"Settings\000"
 4397      696E6773 
 4397      00
 4398 0041 000000   		.space	3
 4399              	.LC106:
 4400 0044 5072696E 		.ascii	"Print to File\000"
 4400      7420746F 
 4400      2046696C 
 4400      6500
 4401 0052 0000     		.space	2
 4402              	.LC107:
 4403 0054 46696C65 		.ascii	"File\000"
 4403      00
 4404 0059 000000   		.space	3
 4405              	.LC108:
 4406 005c 53657475 		.ascii	"Setup\000"
ARM GAS  /tmp/ccT5mNbt.s 			page 109


 4406      7000
 4407              		.text
 4408              	.Letext0:
 4409              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 4410              		.file 3 "/usr/lib/gcc/arm-none-eabi/6.3.1/include/stddef.h"
 4411              		.file 4 "/usr/include/newlib/sys/lock.h"
 4412              		.file 5 "/usr/include/newlib/sys/_types.h"
 4413              		.file 6 "/usr/include/newlib/sys/reent.h"
 4414              		.file 7 "/usr/include/newlib/sys/_stdint.h"
 4415              		.file 8 "/usr/include/newlib/sys/types.h"
 4416              		.file 9 "/usr/include/newlib/c++/6.3.1/cstdlib"
 4417              		.file 10 "/usr/include/newlib/c++/6.3.1/arm-none-eabi/thumb/v7e-m/fpv4-sp/hard/bits/c++config.h"
 4418              		.file 11 "/usr/include/newlib/stdlib.h"
 4419              		.file 12 "/usr/include/newlib/c++/6.3.1/stdlib.h"
 4420              		.file 13 "free42/core_main.h"
 4421              		.file 14 "dmcp/ff_ifc.h"
 4422              		.file 15 "dmcp/dmcp.h"
 4423              		.file 16 "dm/dm42_menu.h"
 4424              		.file 17 "dm/dm42_fns.h"
 4425              		.file 18 "/usr/include/newlib/stdio.h"
 4426              		.file 19 "/usr/include/newlib/string.h"
 4427              		.file 20 "free42/core_aux.h"
 4428              		.file 21 "<built-in>"
ARM GAS  /tmp/ccT5mNbt.s 			page 110


DEFINED SYMBOLS
                            *ABS*:0000000000000000 dm42_menu.cc
     /tmp/ccT5mNbt.s:18     .text.load_statefile:0000000000000000 $t
     /tmp/ccT5mNbt.s:26     .text.load_statefile:0000000000000000 load_statefile
     /tmp/ccT5mNbt.s:177    .text.load_statefile:000000000000008c $d
     /tmp/ccT5mNbt.s:196    .text.save_statefile:0000000000000000 $t
     /tmp/ccT5mNbt.s:204    .text.save_statefile:0000000000000000 save_statefile
     /tmp/ccT5mNbt.s:252    .text.save_statefile:0000000000000028 $d
     /tmp/ccT5mNbt.s:261    .text.pgm_import_enter:0000000000000000 $t
     /tmp/ccT5mNbt.s:269    .text.pgm_import_enter:0000000000000000 pgm_import_enter
     /tmp/ccT5mNbt.s:386    .text.pgm_import_enter:0000000000000074 $d
     /tmp/ccT5mNbt.s:403    .text.pgm_export_enter:0000000000000000 $t
     /tmp/ccT5mNbt.s:411    .text.pgm_export_enter:0000000000000000 pgm_export_enter
     /tmp/ccT5mNbt.s:596    .text.pgm_export_enter:00000000000000c8 $d
     /tmp/ccT5mNbt.s:619    .text.after_fat_format_dm42:0000000000000000 $t
     /tmp/ccT5mNbt.s:627    .text.after_fat_format_dm42:0000000000000000 after_fat_format_dm42
     /tmp/ccT5mNbt.s:670    .text.after_fat_format_dm42:0000000000000020 $d
     /tmp/ccT5mNbt.s:680    .text.lcd_for_dm42:0000000000000000 $t
     /tmp/ccT5mNbt.s:688    .text.lcd_for_dm42:0000000000000000 lcd_for_dm42
     /tmp/ccT5mNbt.s:1101   .text.lcd_for_dm42:00000000000001ec $d
     /tmp/ccT5mNbt.s:1142   .text.run_reset_state_file:0000000000000000 $t
     /tmp/ccT5mNbt.s:1150   .text.run_reset_state_file:0000000000000000 run_reset_state_file
     /tmp/ccT5mNbt.s:1310   .text.run_reset_state_file:0000000000000090 $d
     /tmp/ccT5mNbt.s:1333   .text.select_programs:0000000000000000 $t
     /tmp/ccT5mNbt.s:1341   .text.select_programs:0000000000000000 select_programs
     /tmp/ccT5mNbt.s:1462   .text.select_programs:0000000000000082 $d
     /tmp/ccT5mNbt.s:1493   .text.select_programs:00000000000000c0 $t
     /tmp/ccT5mNbt.s:1882   .text.select_programs:00000000000002ec $d
     /tmp/ccT5mNbt.s:1902   .text.select_programs:0000000000000328 $t
     /tmp/ccT5mNbt.s:2001   .text.select_programs:00000000000003a0 $d
     /tmp/ccT5mNbt.s:2013   .text.pgm_export:0000000000000000 $t
     /tmp/ccT5mNbt.s:2021   .text.pgm_export:0000000000000000 pgm_export
     /tmp/ccT5mNbt.s:2165   .text.pgm_export:000000000000009c $d
     /tmp/ccT5mNbt.s:2188   .text.stack_menu_index:0000000000000000 $t
     /tmp/ccT5mNbt.s:2196   .text.stack_menu_index:0000000000000000 stack_menu_index
     /tmp/ccT5mNbt.s:2262   .text.run_menu_item:0000000000000000 $t
     /tmp/ccT5mNbt.s:2270   .text.run_menu_item:0000000000000000 run_menu_item
     /tmp/ccT5mNbt.s:2292   .text.run_menu_item:0000000000000010 $d
     /tmp/ccT5mNbt.s:2461   .text.run_menu_item:0000000000000162 $t
     /tmp/ccT5mNbt.s:2892   .text.run_menu_item:0000000000000370 $d
     /tmp/ccT5mNbt.s:2917   .text.sep_str:0000000000000000 $t
     /tmp/ccT5mNbt.s:2925   .text.sep_str:0000000000000000 sep_str
     /tmp/ccT5mNbt.s:2957   .text.sep_str:0000000000000014 $d
     /tmp/ccT5mNbt.s:2962   .text.orb_str:0000000000000000 $t
     /tmp/ccT5mNbt.s:2970   .text.orb_str:0000000000000000 orb_str
     /tmp/ccT5mNbt.s:3013   .text.orb_str:0000000000000024 $d
     /tmp/ccT5mNbt.s:3018   .text.b_str:0000000000000000 $t
     /tmp/ccT5mNbt.s:3026   .text.b_str:0000000000000000 b_str
     /tmp/ccT5mNbt.s:3068   .text.b_str:0000000000000024 $d
     /tmp/ccT5mNbt.s:3073   .text.layout_str:0000000000000000 $t
     /tmp/ccT5mNbt.s:3081   .text.layout_str:0000000000000000 layout_str
     /tmp/ccT5mNbt.s:3131   .text.layout_str:0000000000000038 $d
     /tmp/ccT5mNbt.s:3137   .text.state_str:0000000000000000 $t
     /tmp/ccT5mNbt.s:3145   .text.state_str:0000000000000000 state_str
     /tmp/ccT5mNbt.s:3184   .text.state_str:0000000000000024 $d
     /tmp/ccT5mNbt.s:3190   .text.nr_str:0000000000000000 $t
     /tmp/ccT5mNbt.s:3198   .text.nr_str:0000000000000000 nr_str
ARM GAS  /tmp/ccT5mNbt.s 			page 111


     /tmp/ccT5mNbt.s:3227   .text.nr_str:0000000000000014 $d
     /tmp/ccT5mNbt.s:3232   .text.menu_line_str:0000000000000000 $t
     /tmp/ccT5mNbt.s:3240   .text.menu_line_str:0000000000000000 menu_line_str
     /tmp/ccT5mNbt.s:3264   .text.menu_line_str:0000000000000010 $d
     /tmp/ccT5mNbt.s:3302   .text.menu_line_str:000000000000005c $t
     /tmp/ccT5mNbt.s:3855   .text.menu_line_str:0000000000000260 $d
     /tmp/ccT5mNbt.s:3950   .rodata.MID_STACK_AREA:0000000000000000 MID_STACK_AREA
     /tmp/ccT5mNbt.s:3980   .rodata.MID_TOPBAR:0000000000000000 MID_TOPBAR
     /tmp/ccT5mNbt.s:3970   .rodata.MID_STATEFILE:0000000000000000 MID_STATEFILE
     /tmp/ccT5mNbt.s:3960   .rodata.MID_STACK_CONFIG:0000000000000000 MID_STACK_CONFIG
     /tmp/ccT5mNbt.s:3940   .rodata.MID_PRINT:0000000000000000 MID_PRINT
     /tmp/ccT5mNbt.s:3921   .rodata.MID_FILE:0000000000000000 MID_FILE
     /tmp/ccT5mNbt.s:3930   .rodata.MID_MENU:0000000000000000 MID_MENU
     /tmp/ccT5mNbt.s:3907   .rodata:0000000000000000 $d
     /tmp/ccT5mNbt.s:3917   .rodata.MID_FILE:0000000000000000 $d
     /tmp/ccT5mNbt.s:4046   .rodata._ZL8mid_file:0000000000000000 _ZL8mid_file
     /tmp/ccT5mNbt.s:3927   .rodata.MID_MENU:0000000000000000 $d
     /tmp/ccT5mNbt.s:4056   .rodata._ZL8mid_menu:0000000000000000 _ZL8mid_menu
     /tmp/ccT5mNbt.s:3936   .rodata.MID_PRINT:0000000000000000 $d
     /tmp/ccT5mNbt.s:4068   .rodata._ZL9mid_print:0000000000000000 _ZL9mid_print
     /tmp/ccT5mNbt.s:3946   .rodata.MID_STACK_AREA:0000000000000000 $d
     /tmp/ccT5mNbt.s:4034   .rodata._ZL14mid_stack_area:0000000000000000 _ZL14mid_stack_area
     /tmp/ccT5mNbt.s:3956   .rodata.MID_STACK_CONFIG:0000000000000000 $d
     /tmp/ccT5mNbt.s:4078   .rodata._ZL9mid_stack:0000000000000000 _ZL9mid_stack
     /tmp/ccT5mNbt.s:3966   .rodata.MID_STATEFILE:0000000000000000 $d
     /tmp/ccT5mNbt.s:4025   .rodata._ZL13mid_statefile:0000000000000000 _ZL13mid_statefile
     /tmp/ccT5mNbt.s:3976   .rodata.MID_TOPBAR:0000000000000000 $d
     /tmp/ccT5mNbt.s:3989   .rodata._ZL10mid_topbar:0000000000000000 _ZL10mid_topbar
     /tmp/ccT5mNbt.s:3986   .rodata._ZL10mid_topbar:0000000000000000 $d
     /tmp/ccT5mNbt.s:3999   .rodata._ZL12MID_SETTINGS:0000000000000000 $d
     /tmp/ccT5mNbt.s:4003   .rodata._ZL12MID_SETTINGS:0000000000000000 _ZL12MID_SETTINGS
     /tmp/ccT5mNbt.s:4012   .rodata._ZL12mid_settings:0000000000000000 _ZL12mid_settings
     /tmp/ccT5mNbt.s:4009   .rodata._ZL12mid_settings:0000000000000000 $d
     /tmp/ccT5mNbt.s:4022   .rodata._ZL13mid_statefile:0000000000000000 $d
     /tmp/ccT5mNbt.s:4031   .rodata._ZL14mid_stack_area:0000000000000000 $d
     /tmp/ccT5mNbt.s:4043   .rodata._ZL8mid_file:0000000000000000 $d
     /tmp/ccT5mNbt.s:4053   .rodata._ZL8mid_menu:0000000000000000 $d
     /tmp/ccT5mNbt.s:4065   .rodata._ZL9mid_print:0000000000000000 $d
     /tmp/ccT5mNbt.s:4075   .rodata._ZL9mid_stack:0000000000000000 $d
     /tmp/ccT5mNbt.s:4088   .rodata.after_fat_format_dm42.str1.4:0000000000000000 $d
     /tmp/ccT5mNbt.s:4098   .rodata.b_str.str1.4:0000000000000000 $d
     /tmp/ccT5mNbt.s:4102   .rodata.layout_str.str1.4:0000000000000000 $d
     /tmp/ccT5mNbt.s:4109   .rodata.lcd_for_dm42.str1.4:0000000000000000 $d
     /tmp/ccT5mNbt.s:4175   .rodata.load_statefile.str1.4:0000000000000000 $d
     /tmp/ccT5mNbt.s:4188   .rodata.menu_line_str.str1.4:0000000000000000 $d
     /tmp/ccT5mNbt.s:4292   .rodata.nr_str.str1.4:0000000000000000 $d
     /tmp/ccT5mNbt.s:4296   .rodata.pgm_export.str1.4:0000000000000000 $d
     /tmp/ccT5mNbt.s:4308   .rodata.pgm_export_enter.str1.4:0000000000000000 $d
     /tmp/ccT5mNbt.s:4315   .rodata.pgm_import_enter.str1.4:0000000000000000 $d
     /tmp/ccT5mNbt.s:4327   .rodata.run_menu_item.str1.4:0000000000000000 $d
     /tmp/ccT5mNbt.s:4340   .rodata.run_reset_state_file.str1.4:0000000000000000 $d
     /tmp/ccT5mNbt.s:4350   .rodata.save_statefile.str1.4:0000000000000000 $d
     /tmp/ccT5mNbt.s:4354   .rodata.select_programs.str1.4:0000000000000000 $d
     /tmp/ccT5mNbt.s:4364   .rodata.sep_str.str1.4:0000000000000000 $d
     /tmp/ccT5mNbt.s:4368   .rodata.state_str.str1.4:0000000000000000 $d
     /tmp/ccT5mNbt.s:4375   .rodata.str1.4:0000000000000000 $d
                     .debug_frame:0000000000000010 $d
ARM GAS  /tmp/ccT5mNbt.s 			page 112



UNDEFINED SYMBOLS
_Z20core_import_programsv
pgm_res
_Z20core_export_programsiPKi
free42_version_str
_Z18core_list_programsPci
memset
strlen
stpcpy
memcpy
get_stack_layout
prtof_buf_flush
is_print_to_file
set_print_to_file
inc_reg_font_offset
toggle_disp
set_stack_layout
sprintf
strcpy
strcat
get_stack_layout_str
copy_reset_state_filename
get_reg_font_offset
is_disp
get_disp_date_sep
